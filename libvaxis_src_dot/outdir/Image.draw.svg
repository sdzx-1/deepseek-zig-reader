<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: flowchart Pages: 1 -->
<svg width="1026pt" height="867pt"
 viewBox="0.00 0.00 1026.00 867.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 863)">
<title>flowchart</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-863 1022,-863 1022,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<ellipse fill="none" stroke="black" cx="129" cy="-841" rx="66.09" ry="18"/>
<text text-anchor="middle" x="129" y="-837.3" font-family="Arial" font-size="14.00">开始绘制图像</text>
</g>
<!-- switch_scale -->
<g id="node2" class="node">
<title>switch_scale</title>
<path fill="none" stroke="black" d="M117.19,-783.88C117.19,-783.88 40.43,-770.12 40.43,-770.12 34.53,-769.06 34.53,-766.94 40.43,-765.88 40.43,-765.88 117.19,-752.12 117.19,-752.12 123.09,-751.06 134.91,-751.06 140.81,-752.12 140.81,-752.12 217.57,-765.88 217.57,-765.88 223.47,-766.94 223.47,-769.06 217.57,-770.12 217.57,-770.12 140.81,-783.88 140.81,-783.88 134.91,-784.94 123.09,-784.94 117.19,-783.88"/>
<text text-anchor="middle" x="129" y="-764.3" font-family="Arial" font-size="14.00">检查 opts.scale</text>
</g>
<!-- start&#45;&gt;switch_scale -->
<g id="edge1" class="edge">
<title>start&#45;&gt;switch_scale</title>
<path fill="none" stroke="black" d="M129,-822.81C129,-814.79 129,-805.05 129,-796.07"/>
<polygon fill="black" stroke="black" points="132.5,-796.03 129,-786.03 125.5,-796.03 132.5,-796.03"/>
</g>
<!-- case_none -->
<g id="node3" class="node">
<title>case_none</title>
<path fill="none" stroke="black" d="M76,-643C76,-643 12,-643 12,-643 6,-643 0,-637 0,-631 0,-631 0,-617 0,-617 0,-611 6,-605 12,-605 12,-605 76,-605 76,-605 82,-605 88,-611 88,-617 88,-617 88,-631 88,-631 88,-637 82,-643 76,-643"/>
<text text-anchor="middle" x="44" y="-627.8" font-family="Arial" font-size="14.00">case .none</text>
<text text-anchor="middle" x="44" y="-612.8" font-family="Arial" font-size="14.00">不处理缩放</text>
</g>
<!-- switch_scale&#45;&gt;case_none -->
<g id="edge2" class="edge">
<title>switch_scale&#45;&gt;case_none</title>
<path fill="none" stroke="black" d="M105.57,-754.09C96.85,-748.3 87.5,-740.79 81,-732 63.57,-708.43 53.89,-676 48.84,-653.04"/>
<polygon fill="black" stroke="black" points="52.27,-652.32 46.84,-643.22 45.41,-653.72 52.27,-652.32"/>
<text text-anchor="middle" x="98" y="-720.8" font-family="Arial" font-size="14.00">.none</text>
</g>
<!-- case_fill -->
<g id="node4" class="node">
<title>case_fill</title>
<path fill="none" stroke="black" d="M225.5,-533C225.5,-533 58.5,-533 58.5,-533 52.5,-533 46.5,-527 46.5,-521 46.5,-521 46.5,-507 46.5,-507 46.5,-501 52.5,-495 58.5,-495 58.5,-495 225.5,-495 225.5,-495 231.5,-495 237.5,-501 237.5,-507 237.5,-507 237.5,-521 237.5,-521 237.5,-527 231.5,-533 225.5,-533"/>
<text text-anchor="middle" x="142" y="-517.8" font-family="Arial" font-size="14.00">case .fill</text>
<text text-anchor="middle" x="142" y="-502.8" font-family="Arial" font-size="14.00">设置 p_opts.size 为窗口尺寸</text>
</g>
<!-- switch_scale&#45;&gt;case_fill -->
<g id="edge3" class="edge">
<title>switch_scale&#45;&gt;case_fill</title>
<path fill="none" stroke="black" d="M129.87,-750.07C132.07,-707.54 137.83,-595.82 140.55,-543.19"/>
<polygon fill="black" stroke="black" points="144.04,-543.36 141.06,-533.2 137.05,-543 144.04,-543.36"/>
<text text-anchor="middle" x="143.5" y="-676.3" font-family="Arial" font-size="14.00">.fill</text>
</g>
<!-- case_fit_contain -->
<g id="node5" class="node">
<title>case_fit_contain</title>
<path fill="none" stroke="black" d="M355.5,-699C355.5,-699 234.5,-699 234.5,-699 228.5,-699 222.5,-693 222.5,-687 222.5,-687 222.5,-673 222.5,-673 222.5,-667 228.5,-661 234.5,-661 234.5,-661 355.5,-661 355.5,-661 361.5,-661 367.5,-667 367.5,-673 367.5,-673 367.5,-687 367.5,-687 367.5,-693 361.5,-699 355.5,-699"/>
<text text-anchor="middle" x="295" y="-683.8" font-family="Arial" font-size="14.00">case .fit/.contain</text>
<text text-anchor="middle" x="295" y="-668.8" font-family="Arial" font-size="14.00">计算像素和行列关系</text>
</g>
<!-- switch_scale&#45;&gt;case_fit_contain -->
<g id="edge4" class="edge">
<title>switch_scale&#45;&gt;case_fit_contain</title>
<path fill="none" stroke="black" d="M153.49,-754.31C179.1,-741.04 219.83,-719.94 251.04,-703.78"/>
<polygon fill="black" stroke="black" points="252.7,-706.85 259.97,-699.15 249.48,-700.64 252.7,-706.85"/>
<text text-anchor="middle" x="254" y="-720.8" font-family="Arial" font-size="14.00">.fit/.contain</text>
</g>
<!-- create_placement -->
<g id="node14" class="node">
<title>create_placement</title>
<path fill="none" stroke="black" d="M320.5,-111C320.5,-111 185.5,-111 185.5,-111 179.5,-111 173.5,-105 173.5,-99 173.5,-99 173.5,-85 173.5,-85 173.5,-79 179.5,-73 185.5,-73 185.5,-73 320.5,-73 320.5,-73 326.5,-73 332.5,-79 332.5,-85 332.5,-85 332.5,-99 332.5,-99 332.5,-105 326.5,-111 320.5,-111"/>
<text text-anchor="middle" x="253" y="-95.8" font-family="Arial" font-size="14.00">创建 Placement 结构体</text>
<text text-anchor="middle" x="253" y="-80.8" font-family="Arial" font-size="14.00">并写入窗口</text>
</g>
<!-- case_none&#45;&gt;create_placement -->
<g id="edge5" class="edge">
<title>case_none&#45;&gt;create_placement</title>
<path fill="none" stroke="black" d="M40.45,-604.74C36.6,-583.32 31,-546.73 31,-515 31,-515 31,-515 31,-166 31,-136.7 101.69,-117.22 163.29,-105.81"/>
<polygon fill="black" stroke="black" points="164.26,-109.19 173.48,-103.98 163.02,-102.3 164.26,-109.19"/>
</g>
<!-- case_fill&#45;&gt;create_placement -->
<g id="edge6" class="edge">
<title>case_fill&#45;&gt;create_placement</title>
<path fill="none" stroke="black" d="M152.41,-494.87C163.04,-474.62 178,-440.53 178,-409 178,-409 178,-409 178,-166 178,-145.73 192.24,-129.26 208.31,-117.14"/>
<polygon fill="black" stroke="black" points="210.63,-119.79 216.82,-111.19 206.62,-114.05 210.63,-119.79"/>
</g>
<!-- check_contain_fit -->
<g id="node6" class="node">
<title>check_contain_fit</title>
<path fill="none" stroke="black" d="M342.05,-585.91C342.05,-585.91 169.05,-570.09 169.05,-570.09 163.08,-569.55 163.08,-568.45 169.05,-567.91 169.05,-567.91 342.05,-552.09 342.05,-552.09 348.02,-551.55 359.98,-551.55 365.95,-552.09 365.95,-552.09 538.95,-567.91 538.95,-567.91 544.92,-568.45 544.92,-569.55 538.95,-570.09 538.95,-570.09 365.95,-585.91 365.95,-585.91 359.98,-586.45 348.02,-586.45 342.05,-585.91"/>
<text text-anchor="middle" x="354" y="-565.3" font-family="Arial" font-size="14.00">是否满足 .contain 且无需缩放？</text>
</g>
<!-- case_fit_contain&#45;&gt;check_contain_fit -->
<g id="edge7" class="edge">
<title>case_fit_contain&#45;&gt;check_contain_fit</title>
<path fill="none" stroke="black" d="M305.01,-660.51C314.72,-642.58 329.52,-615.23 340.31,-595.29"/>
<polygon fill="black" stroke="black" points="343.42,-596.9 345.1,-586.44 337.26,-593.57 343.42,-596.9"/>
</g>
<!-- check_fit_x_fit_y -->
<g id="node7" class="node">
<title>check_fit_x_fit_y</title>
<path fill="none" stroke="black" d="M551.14,-475.14C551.14,-475.14 460.07,-460.86 460.07,-460.86 454.14,-459.93 454.14,-458.07 460.07,-457.14 460.07,-457.14 551.14,-442.86 551.14,-442.86 557.07,-441.93 568.93,-441.93 574.86,-442.86 574.86,-442.86 665.93,-457.14 665.93,-457.14 671.86,-458.07 671.86,-459.93 665.93,-460.86 665.93,-460.86 574.86,-475.14 574.86,-475.14 568.93,-476.07 557.07,-476.07 551.14,-475.14"/>
<text text-anchor="middle" x="563" y="-455.3" font-family="Arial" font-size="14.00">检查 fit_x 和 fitit_y</text>
</g>
<!-- check_contain_fit&#45;&gt;check_fit_x_fit_y -->
<g id="edge8" class="edge">
<title>check_contain_fit&#45;&gt;check_fit_x_fit_y</title>
<path fill="none" stroke="black" d="M382.19,-553.43C420.12,-533.83 487.56,-498.98 528.49,-477.83"/>
<polygon fill="black" stroke="black" points="530.27,-480.85 537.55,-473.15 527.06,-474.63 530.27,-480.85"/>
<text text-anchor="middle" x="496.5" y="-510.3" font-family="Arial" font-size="14.00">否</text>
</g>
<!-- check_contain_fit&#45;&gt;create_placement -->
<g id="edge9" class="edge">
<title>check_contain_fit&#45;&gt;create_placement</title>
<path fill="none" stroke="black" d="M325.87,-553.46C295.98,-535.77 253,-502.87 253,-460 253,-460 253,-460 253,-166 253,-151.3 253,-134.93 253,-121.43"/>
<polygon fill="black" stroke="black" points="256.5,-121.3 253,-111.3 249.5,-121.3 256.5,-121.3"/>
<text text-anchor="middle" x="317" y="-302.3" font-family="Arial" font-size="14.00">是（break :contain）</text>
</g>
<!-- scale_vertical -->
<g id="node8" class="node">
<title>scale_vertical</title>
<path fill="none" stroke="black" d="M512.5,-186C512.5,-186 339.5,-186 339.5,-186 333.5,-186 327.5,-180 327.5,-174 327.5,-174 327.5,-160 327.5,-160 327.5,-154 333.5,-148 339.5,-148 339.5,-148 512.5,-148 512.5,-148 518.5,-148 524.5,-154 524.5,-160 524.5,-160 524.5,-174 524.5,-174 524.5,-180 518.5,-186 512.5,-186"/>
<text text-anchor="middle" x="426" y="-170.8" font-family="Arial" font-size="14.00">垂直缩放</text>
<text text-anchor="middle" x="426" y="-155.8" font-family="Arial" font-size="14.00">设置 p_opts.rows = win.height</text>
</g>
<!-- check_fit_x_fit_y&#45;&gt;scale_vertical -->
<g id="edge10" class="edge">
<title>check_fit_x_fit_y&#45;&gt;scale_vertical</title>
<path fill="none" stroke="black" d="M523.76,-447.14C489.83,-435.43 442.89,-413.14 421,-375 388.51,-318.37 404.63,-237.91 416.75,-195.93"/>
<polygon fill="black" stroke="black" points="420.17,-196.71 419.71,-186.13 413.47,-194.69 420.17,-196.71"/>
<text text-anchor="middle" x="434" y="-309.8" font-family="Arial" font-size="14.00">fit_x=true</text>
<text text-anchor="middle" x="434" y="-294.8" font-family="Arial" font-size="14.00">fit_y=false</text>
</g>
<!-- scale_horizontal -->
<g id="node9" class="node">
<title>scale_horizontal</title>
<path fill="none" stroke="black" d="M785,-186C785,-186 621,-186 621,-186 615,-186 609,-180 609,-174 609,-174 609,-160 609,-160 609,-154 615,-148 621,-148 621,-148 785,-148 785,-148 791,-148 797,-154 797,-160 797,-160 797,-174 797,-174 797,-180 791,-186 785,-186"/>
<text text-anchor="middle" x="703" y="-170.8" font-family="Arial" font-size="14.00">水平缩放</text>
<text text-anchor="middle" x="703" y="-155.8" font-family="Arial" font-size="14.00">设置 p_opts.cols = win.width</text>
</g>
<!-- check_fit_x_fit_y&#45;&gt;scale_horizontal -->
<g id="edge11" class="edge">
<title>check_fit_x_fit_y&#45;&gt;scale_horizontal</title>
<path fill="none" stroke="black" d="M638.43,-452.75C737.38,-444.04 902.53,-422.61 937,-375 985.98,-307.34 933.68,-241.42 859,-204 842.86,-195.91 824.86,-189.61 806.99,-184.71"/>
<polygon fill="black" stroke="black" points="807.65,-181.26 797.09,-182.13 805.88,-188.03 807.65,-181.26"/>
<text text-anchor="middle" x="987" y="-309.8" font-family="Arial" font-size="14.00">fit_x=false</text>
<text text-anchor="middle" x="987" y="-294.8" font-family="Arial" font-size="14.00">fit_y=true</text>
</g>
<!-- check_both_unfit -->
<g id="node10" class="node">
<title>check_both_unfit</title>
<path fill="none" stroke="black" d="M551.11,-373.39C551.11,-373.39 441.84,-358.61 441.84,-358.61 435.89,-357.8 435.89,-356.2 441.84,-355.39 441.84,-355.39 551.11,-340.61 551.11,-340.61 557.05,-339.8 568.95,-339.8 574.89,-340.61 574.89,-340.61 684.16,-355.39 684.16,-355.39 690.11,-356.2 690.11,-357.8 684.16,-358.61 684.16,-358.61 574.89,-373.39 574.89,-373.39 568.95,-374.2 557.05,-374.2 551.11,-373.39"/>
<text text-anchor="middle" x="563" y="-353.3" font-family="Arial" font-size="14.00">两个方向都不适配？</text>
</g>
<!-- check_fit_x_fit_y&#45;&gt;check_both_unfit -->
<g id="edge12" class="edge">
<title>check_fit_x_fit_y&#45;&gt;check_both_unfit</title>
<path fill="none" stroke="black" d="M563,-440.58C563,-425.38 563,-403.07 563,-385.46"/>
<polygon fill="black" stroke="black" points="566.5,-385.22 563,-375.22 559.5,-385.22 566.5,-385.22"/>
<text text-anchor="middle" x="594" y="-411.8" font-family="Arial" font-size="14.00">fit_x=false</text>
<text text-anchor="middle" x="594" y="-396.8" font-family="Arial" font-size="14.00">fit_y=false</text>
</g>
<!-- check_fit_both -->
<g id="node12" class="node">
<title>check_fit_both</title>
<path fill="none" stroke="black" d="M809.17,-373C809.17,-373 726.09,-359 726.09,-359 720.17,-358 720.17,-356 726.09,-355 726.09,-355 809.17,-341 809.17,-341 815.08,-340 826.92,-340 832.83,-341 832.83,-341 915.91,-355 915.91,-355 921.83,-356 921.83,-358 915.91,-359 915.91,-359 832.83,-373 832.83,-373 826.92,-374 815.08,-374 809.17,-373"/>
<text text-anchor="middle" x="821" y="-353.3" font-family="Arial" font-size="14.00">是否同时适配？</text>
</g>
<!-- check_fit_x_fit_y&#45;&gt;check_fit_both -->
<g id="edge13" class="edge">
<title>check_fit_x_fit_y&#45;&gt;check_fit_both</title>
<path fill="none" stroke="black" d="M594.38,-445.84C641.18,-427.7 729.28,-393.55 780.76,-373.6"/>
<polygon fill="black" stroke="black" points="782.18,-376.8 790.24,-369.92 779.65,-370.27 782.18,-376.8"/>
<text text-anchor="middle" x="758.5" y="-411.8" font-family="Arial" font-size="14.00">fit_x=true</text>
<text text-anchor="middle" x="758.5" y="-396.8" font-family="Arial" font-size="14.00">fit_y=true</text>
</g>
<!-- scale_vertical&#45;&gt;create_placement -->
<g id="edge20" class="edge">
<title>scale_vertical&#45;&gt;create_placement</title>
<path fill="none" stroke="black" d="M383.24,-147.96C359.64,-138 330.14,-125.55 305.19,-115.02"/>
<polygon fill="black" stroke="black" points="306.45,-111.75 295.87,-111.09 303.72,-118.2 306.45,-111.75"/>
</g>
<!-- scale_horizontal&#45;&gt;create_placement -->
<g id="edge21" class="edge">
<title>scale_horizontal&#45;&gt;create_placement</title>
<path fill="none" stroke="black" d="M608.94,-150.74C530.65,-138.04 419.92,-120.08 342.83,-107.57"/>
<polygon fill="black" stroke="black" points="343.09,-104.07 332.66,-105.92 341.97,-110.98 343.09,-104.07"/>
</g>
<!-- compare_diff -->
<g id="node11" class="node">
<title>compare_diff</title>
<path fill="none" stroke="black" d="M548.13,-271.27C548.13,-271.27 448.54,-256.73 448.54,-256.73 442.6,-255.87 442.6,-254.13 448.54,-253.27 448.54,-253.27 548.13,-238.73 548.13,-238.73 554.06,-237.87 565.94,-237.87 571.87,-238.73 571.87,-238.73 671.46,-253.27 671.46,-253.27 677.4,-254.13 677.4,-255.87 671.46,-256.73 671.46,-256.73 571.87,-271.27 571.87,-271.27 565.94,-272.13 554.06,-272.13 548.13,-271.27"/>
<text text-anchor="middle" x="560" y="-251.3" font-family="Arial" font-size="14.00">比较 diff_x 和 diff_y</text>
</g>
<!-- check_both_unfit&#45;&gt;compare_diff -->
<g id="edge14" class="edge">
<title>check_both_unfit&#45;&gt;compare_diff</title>
<path fill="none" stroke="black" d="M562.49,-339.04C562.03,-323.74 561.35,-300.97 560.81,-283.14"/>
<polygon fill="black" stroke="black" points="564.31,-282.94 560.51,-273.05 557.31,-283.15 564.31,-282.94"/>
</g>
<!-- compare_diff&#45;&gt;scale_vertical -->
<g id="edge16" class="edge">
<title>compare_diff&#45;&gt;scale_vertical</title>
<path fill="none" stroke="black" d="M503.81,-245.1C485.36,-239.94 465.81,-231.8 451,-219 443.85,-212.82 438.54,-204.11 434.71,-195.63"/>
<polygon fill="black" stroke="black" points="437.95,-194.3 430.98,-186.31 431.45,-196.9 437.95,-194.3"/>
<text text-anchor="middle" x="495.5" y="-207.8" font-family="Arial" font-size="14.00">diff_x &lt;= diff_y</text>
</g>
<!-- compare_diff&#45;&gt;scale_horizontal -->
<g id="edge15" class="edge">
<title>compare_diff&#45;&gt;scale_horizontal</title>
<path fill="none" stroke="black" d="M557.57,-237.25C556.98,-226.52 558.19,-212.97 566,-204 571.52,-197.67 583.85,-192.15 598.96,-187.46"/>
<polygon fill="black" stroke="black" points="600.06,-190.79 608.7,-184.65 598.12,-184.06 600.06,-190.79"/>
<text text-anchor="middle" x="606.5" y="-207.8" font-family="Arial" font-size="14.00">diff_x &gt; diff_y</text>
</g>
<!-- compare_fit_diff -->
<g id="node13" class="node">
<title>compare_fit_diff</title>
<path fill="none" stroke="black" d="M783.22,-270.73C783.22,-270.73 713.27,-257.27 713.27,-257.27 707.38,-256.13 707.38,-253.87 713.27,-252.73 713.27,-252.73 783.22,-239.27 783.22,-239.27 789.11,-238.13 800.89,-238.13 806.78,-239.27 806.78,-239.27 876.73,-252.73 876.73,-252.73 882.62,-253.87 882.62,-256.13 876.73,-257.27 876.73,-257.27 806.78,-270.73 806.78,-270.73 800.89,-271.87 789.11,-271.87 783.22,-270.73"/>
<text text-anchor="middle" x="795" y="-251.3" font-family="Arial" font-size="14.00">比较适配差值</text>
</g>
<!-- check_fit_both&#45;&gt;compare_fit_diff -->
<g id="edge17" class="edge">
<title>check_fit_both&#45;&gt;compare_fit_diff</title>
<path fill="none" stroke="black" d="M816.71,-339.49C812.64,-323.83 806.46,-300.07 801.73,-281.9"/>
<polygon fill="black" stroke="black" points="805.12,-281 799.21,-272.21 798.34,-282.76 805.12,-281"/>
</g>
<!-- compare_fit_diff&#45;&gt;scale_vertical -->
<g id="edge19" class="edge">
<title>compare_fit_diff&#45;&gt;scale_vertical</title>
<path fill="none" stroke="black" d="M750.89,-245.48C726.12,-239.78 695.05,-231.09 669,-219 658.27,-214.02 657.99,-208.39 647,-204 611.86,-189.97 571.48,-181.4 534.94,-176.17"/>
<polygon fill="black" stroke="black" points="535.12,-172.66 524.74,-174.78 534.18,-179.6 535.12,-172.66"/>
<text text-anchor="middle" x="713.5" y="-207.8" font-family="Arial" font-size="14.00">diff_x &gt;= diff_y</text>
</g>
<!-- compare_fit_diff&#45;&gt;scale_horizontal -->
<g id="edge18" class="edge">
<title>compare_fit_diff&#45;&gt;scale_horizontal</title>
<path fill="none" stroke="black" d="M787.01,-238.28C781.11,-227.72 772.33,-213.97 762,-204 757.41,-199.57 752.18,-195.43 746.78,-191.65"/>
<polygon fill="black" stroke="black" points="748.49,-188.58 738.21,-186.01 744.64,-194.43 748.49,-188.58"/>
<text text-anchor="middle" x="814.5" y="-207.8" font-family="Arial" font-size="14.00">diff_x &lt; diff_y</text>
</g>
<!-- end -->
<g id="node15" class="node">
<title>end</title>
<ellipse fill="none" stroke="black" cx="253" cy="-18" rx="29.5" ry="18"/>
<text text-anchor="middle" x="253" y="-14.3" font-family="Arial" font-size="14.00">结束</text>
</g>
<!-- create_placement&#45;&gt;end -->
<g id="edge22" class="edge">
<title>create_placement&#45;&gt;end</title>
<path fill="none" stroke="black" d="M253,-72.83C253,-64.89 253,-55.41 253,-46.63"/>
<polygon fill="black" stroke="black" points="256.5,-46.42 253,-36.42 249.5,-46.42 256.5,-46.42"/>
</g>
</g>
</svg>
