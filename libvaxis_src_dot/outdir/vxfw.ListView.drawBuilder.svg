<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: flowchart Pages: 1 -->
<svg width="768pt" height="1028pt"
 viewBox="0.00 0.00 768.00 1028.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1024)">
<title>flowchart</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-1024 764,-1024 764,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<polygon fill="none" stroke="black" points="615,-1020 479,-1020 479,-984 615,-984 615,-1020"/>
<text text-anchor="middle" x="547" y="-998.3" font-family="Courier New" font-size="14.00">开始drawBuilder</text>
</g>
<!-- init_surface -->
<g id="node2" class="node">
<title>init_surface</title>
<polygon fill="none" stroke="black" points="605.5,-947 488.5,-947 488.5,-911 605.5,-911 605.5,-947"/>
<text text-anchor="middle" x="547" y="-925.3" font-family="Courier New" font-size="14.00">初始化surface</text>
</g>
<!-- start&#45;&gt;init_surface -->
<g id="edge1" class="edge">
<title>start&#45;&gt;init_surface</title>
<path fill="none" stroke="black" d="M547,-983.81C547,-975.79 547,-966.05 547,-957.07"/>
<polygon fill="black" stroke="black" points="550.5,-957.03 547,-947.03 543.5,-957.03 550.5,-957.03"/>
</g>
<!-- handle_scroll -->
<g id="node3" class="node">
<title>handle_scroll</title>
<polygon fill="none" stroke="black" points="548,-874 354,-874 354,-836 548,-836 548,-874"/>
<text text-anchor="middle" x="451" y="-858.8" font-family="Courier New" font-size="14.00">处理滚动状态</text>
<text text-anchor="middle" x="451" y="-843.8" font-family="Courier New" font-size="14.00">设置accumulated_height</text>
</g>
<!-- init_surface&#45;&gt;handle_scroll -->
<g id="edge2" class="edge">
<title>init_surface&#45;&gt;handle_scroll</title>
<path fill="none" stroke="black" d="M524.25,-910.94C512.04,-901.78 496.77,-890.33 483.35,-880.26"/>
<polygon fill="black" stroke="black" points="485.37,-877.4 475.27,-874.2 481.17,-883 485.37,-877.4"/>
</g>
<!-- error_alloc -->
<g id="node14" class="node">
<title>error_alloc</title>
<ellipse fill="none" stroke="red" cx="424" cy="-91" rx="66.09" ry="18"/>
<text text-anchor="middle" x="424" y="-87.3" font-family="Courier New" font-size="14.00">内存分配错误</text>
</g>
<!-- init_surface&#45;&gt;error_alloc -->
<g id="edge17" class="edge">
<title>init_surface&#45;&gt;error_alloc</title>
<path fill="none" stroke="black" d="M596.45,-910.92C619.53,-899.5 642,-881.76 642,-856 642,-856 642,-856 642,-178 642,-144.4 551.26,-118.36 486.86,-104.11"/>
<polygon fill="black" stroke="black" points="487.29,-100.62 476.77,-101.92 485.8,-107.46 487.29,-100.62"/>
<text text-anchor="middle" x="701" y="-514.3" font-family="Times,serif" font-size="14.00">createBuffer失败</text>
</g>
<!-- insert_children -->
<g id="node4" class="node">
<title>insert_children</title>
<polygon fill="none" stroke="black" points="608,-785 294,-785 294,-749 608,-749 608,-785"/>
<text text-anchor="middle" x="451" y="-763.3" font-family="Courier New" font-size="14.00">插入前置子部件(accumulated_height &gt; 0)</text>
</g>
<!-- handle_scroll&#45;&gt;insert_children -->
<g id="edge3" class="edge">
<title>handle_scroll&#45;&gt;insert_children</title>
<path fill="none" stroke="black" d="M451,-835.76C451,-823.93 451,-808.32 451,-795.05"/>
<polygon fill="black" stroke="black" points="454.5,-795.04 451,-785.04 447.5,-795.04 454.5,-795.04"/>
<text text-anchor="middle" x="538" y="-806.8" font-family="Times,serif" font-size="14.00">accumulated_height &gt; 0</text>
</g>
<!-- loop_start -->
<g id="node5" class="node">
<title>loop_start</title>
<polygon fill="none" stroke="black" points="272,-712 48,-712 48,-676 272,-676 272,-712"/>
<text text-anchor="middle" x="160" y="-690.3" font-family="Courier New" font-size="14.00">遍历子项(i从scroll.top开始)</text>
</g>
<!-- handle_scroll&#45;&gt;loop_start -->
<g id="edge4" class="edge">
<title>handle_scroll&#45;&gt;loop_start</title>
<path fill="none" stroke="black" d="M353.71,-842.05C282.49,-831.19 194.23,-812.61 170,-785 155.14,-768.07 153.78,-741.91 155.47,-722.14"/>
<polygon fill="black" stroke="black" points="158.94,-722.53 156.61,-712.2 151.99,-721.74 158.94,-722.53"/>
<text text-anchor="middle" x="227.5" y="-763.3" font-family="Times,serif" font-size="14.00">否则直接进入循环</text>
</g>
<!-- insert_children&#45;&gt;loop_start -->
<g id="edge5" class="edge">
<title>insert_children&#45;&gt;loop_start</title>
<path fill="none" stroke="black" d="M381.3,-748.99C338.7,-738.6 284.08,-725.27 239.76,-714.46"/>
<polygon fill="black" stroke="black" points="240.43,-711.02 229.89,-712.05 238.77,-717.82 240.43,-711.02"/>
</g>
<!-- insert_children&#45;&gt;error_alloc -->
<g id="edge20" class="edge">
<title>insert_children&#45;&gt;error_alloc</title>
<path fill="none" stroke="black" d="M509.64,-748.98C533.69,-738.08 556,-720.97 556,-695 556,-695 556,-695 556,-178 556,-140.62 518.39,-118.65 483.32,-106.28"/>
<polygon fill="black" stroke="black" points="484.12,-102.86 473.53,-103.04 481.92,-109.5 484.12,-102.86"/>
<text text-anchor="middle" x="585" y="-427.3" font-family="Times,serif" font-size="14.00">插入失败</text>
</g>
<!-- draw_child -->
<g id="node6" class="node">
<title>draw_child</title>
<polygon fill="none" stroke="black" points="382,-625 188,-625 188,-587 382,-587 382,-625"/>
<text text-anchor="middle" x="285" y="-609.8" font-family="Courier New" font-size="14.00">绘制子部件</text>
<text text-anchor="middle" x="285" y="-594.8" font-family="Courier New" font-size="14.00">更新accumulated_height</text>
</g>
<!-- loop_start&#45;&gt;draw_child -->
<g id="edge6" class="edge">
<title>loop_start&#45;&gt;draw_child</title>
<path fill="none" stroke="black" d="M185,-675.8C203.78,-662.88 229.74,-645.02 250.5,-630.73"/>
<polygon fill="black" stroke="black" points="252.5,-633.61 258.76,-625.06 248.53,-627.84 252.5,-633.61"/>
<text text-anchor="middle" x="258" y="-646.8" font-family="Times,serif" font-size="14.00">子项存在</text>
</g>
<!-- end_loop -->
<g id="node9" class="node">
<title>end_loop</title>
<polygon fill="none" stroke="black" points="234,-362 118,-362 118,-324 234,-324 234,-362"/>
<text text-anchor="middle" x="176" y="-346.8" font-family="Courier New" font-size="14.00">退出循环</text>
<text text-anchor="middle" x="176" y="-331.8" font-family="Courier New" font-size="14.00">标记无更多内容</text>
</g>
<!-- loop_start&#45;&gt;end_loop -->
<g id="edge12" class="edge">
<title>loop_start&#45;&gt;end_loop</title>
<path fill="none" stroke="black" d="M66.46,-676C31.45,-663.75 0,-642.79 0,-607 0,-607 0,-607 0,-430 0,-379.89 58.31,-358.97 107.8,-350.24"/>
<polygon fill="black" stroke="black" points="108.57,-353.67 117.88,-348.61 107.45,-346.76 108.57,-353.67"/>
<text text-anchor="middle" x="36" y="-514.3" font-family="Times,serif" font-size="14.00">无更多子项</text>
</g>
<!-- check_cursor -->
<g id="node7" class="node">
<title>check_cursor</title>
<polygon fill="none" stroke="black" points="396,-536 172,-536 172,-500 396,-500 396,-536"/>
<text text-anchor="middle" x="284" y="-514.3" font-family="Courier New" font-size="14.00">是否需要光标且未到达光标位置?</text>
</g>
<!-- draw_child&#45;&gt;check_cursor -->
<g id="edge7" class="edge">
<title>draw_child&#45;&gt;check_cursor</title>
<path fill="none" stroke="black" d="M284.79,-586.76C284.65,-574.93 284.47,-559.32 284.31,-546.05"/>
<polygon fill="black" stroke="black" points="287.81,-546 284.2,-536.04 280.81,-546.08 287.81,-546"/>
</g>
<!-- draw_child&#45;&gt;error_alloc -->
<g id="edge18" class="edge">
<title>draw_child&#45;&gt;error_alloc</title>
<path fill="none" stroke="black" d="M360.6,-586.96C393.2,-574.25 424,-553.19 424,-519 424,-519 424,-519 424,-178 424,-158.4 424,-136.3 424,-119.4"/>
<polygon fill="black" stroke="black" points="427.5,-119.13 424,-109.13 420.5,-119.13 427.5,-119.13"/>
<text text-anchor="middle" x="476" y="-339.3" font-family="Times,serif" font-size="14.00">child.draw失败</text>
</g>
<!-- check_cursor&#45;&gt;loop_start -->
<g id="edge8" class="edge">
<title>check_cursor&#45;&gt;loop_start</title>
<path fill="none" stroke="black" d="M171.91,-528.69C138.56,-538.09 107.14,-555.44 93,-587 86.09,-602.41 86.59,-609.37 93,-625 100.15,-642.43 114.16,-657.79 127.53,-669.48"/>
<polygon fill="black" stroke="black" points="125.35,-672.22 135.27,-675.93 129.83,-666.84 125.35,-672.22"/>
<text text-anchor="middle" x="136" y="-602.3" font-family="Times,serif" font-size="14.00">是，继续循环</text>
</g>
<!-- check_height -->
<g id="node8" class="node">
<title>check_height</title>
<polygon fill="none" stroke="black" points="307.5,-449 44.5,-449 44.5,-413 307.5,-413 307.5,-449"/>
<text text-anchor="middle" x="176" y="-427.3" font-family="Courier New" font-size="14.00">accumulated_height &gt;= 最大高度?</text>
</g>
<!-- check_cursor&#45;&gt;check_height -->
<g id="edge9" class="edge">
<title>check_cursor&#45;&gt;check_height</title>
<path fill="none" stroke="black" d="M262.14,-499.8C246.04,-487.13 223.94,-469.73 206.16,-455.74"/>
<polygon fill="black" stroke="black" points="207.85,-452.61 197.82,-449.18 203.52,-458.11 207.85,-452.61"/>
<text text-anchor="middle" x="243.5" y="-470.8" font-family="Times,serif" font-size="14.00">否</text>
</g>
<!-- check_height&#45;&gt;loop_start -->
<g id="edge10" class="edge">
<title>check_height&#45;&gt;loop_start</title>
<path fill="none" stroke="black" d="M171.85,-449.21C168.77,-462.88 164.79,-482.54 163,-500 156.96,-558.86 157.83,-628.34 158.94,-665.79"/>
<polygon fill="black" stroke="black" points="155.45,-666.02 159.28,-675.9 162.45,-665.79 155.45,-666.02"/>
<text text-anchor="middle" x="196" y="-557.8" font-family="Times,serif" font-size="14.00">未超出高度</text>
</g>
<!-- check_height&#45;&gt;end_loop -->
<g id="edge11" class="edge">
<title>check_height&#45;&gt;end_loop</title>
<path fill="none" stroke="black" d="M176,-412.6C176,-401.06 176,-385.65 176,-372.36"/>
<polygon fill="black" stroke="black" points="179.5,-372.27 176,-362.27 172.5,-372.27 179.5,-372.27"/>
<text text-anchor="middle" x="240.5" y="-383.8" font-family="Times,serif" font-size="14.00">超出高度，退出循环</text>
</g>
<!-- handle_cursor -->
<g id="node10" class="node">
<title>handle_cursor</title>
<polygon fill="none" stroke="black" points="283,-273 167,-273 167,-235 283,-235 283,-273"/>
<text text-anchor="middle" x="225" y="-257.8" font-family="Courier New" font-size="14.00">处理光标显示</text>
<text text-anchor="middle" x="225" y="-242.8" font-family="Courier New" font-size="14.00">调整子部件位置</text>
</g>
<!-- end_loop&#45;&gt;handle_cursor -->
<g id="edge13" class="edge">
<title>end_loop&#45;&gt;handle_cursor</title>
<path fill="none" stroke="black" d="M186.15,-323.97C192.99,-311.84 202.12,-295.63 209.81,-281.97"/>
<polygon fill="black" stroke="black" points="213,-283.43 214.86,-273 206.9,-280 213,-283.43"/>
<text text-anchor="middle" x="246" y="-294.8" font-family="Times,serif" font-size="14.00">需要绘制光标</text>
</g>
<!-- adjust_origin -->
<g id="node11" class="node">
<title>adjust_origin</title>
<polygon fill="none" stroke="black" points="297.5,-198 152.5,-198 152.5,-160 297.5,-160 297.5,-198"/>
<text text-anchor="middle" x="225" y="-182.8" font-family="Courier New" font-size="14.00">调整子部件原点</text>
<text text-anchor="middle" x="225" y="-167.8" font-family="Courier New" font-size="14.00">（根据是否到底部）</text>
</g>
<!-- handle_cursor&#45;&gt;adjust_origin -->
<g id="edge14" class="edge">
<title>handle_cursor&#45;&gt;adjust_origin</title>
<path fill="none" stroke="black" d="M225,-234.96C225,-226.88 225,-217.18 225,-208.18"/>
<polygon fill="black" stroke="black" points="228.5,-208.09 225,-198.09 221.5,-208.09 228.5,-208.09"/>
</g>
<!-- handle_cursor&#45;&gt;error_alloc -->
<g id="edge19" class="edge">
<title>handle_cursor&#45;&gt;error_alloc</title>
<path fill="none" stroke="black" d="M254.24,-234.97C270.25,-224.72 290.19,-211.29 307,-198 326.49,-182.59 329.63,-176.73 348,-160 364.46,-145.01 383.08,-128.35 397.77,-115.26"/>
<polygon fill="black" stroke="black" points="400.34,-117.66 405.49,-108.4 395.69,-112.43 400.34,-117.66"/>
<text text-anchor="middle" x="379" y="-175.3" font-family="Times,serif" font-size="14.00">alloc失败</text>
</g>
<!-- trim_children -->
<g id="node12" class="node">
<title>trim_children</title>
<polygon fill="none" stroke="black" points="325.5,-109 124.5,-109 124.5,-73 325.5,-73 325.5,-109"/>
<text text-anchor="middle" x="225" y="-87.3" font-family="Courier New" font-size="14.00">截取可见子项(start..end)</text>
</g>
<!-- adjust_origin&#45;&gt;trim_children -->
<g id="edge15" class="edge">
<title>adjust_origin&#45;&gt;trim_children</title>
<path fill="none" stroke="black" d="M225,-159.76C225,-147.93 225,-132.32 225,-119.05"/>
<polygon fill="black" stroke="black" points="228.5,-119.04 225,-109.04 221.5,-119.04 228.5,-119.04"/>
</g>
<!-- adjust_origin&#45;&gt;error_alloc -->
<g id="edge21" class="edge">
<title>adjust_origin&#45;&gt;error_alloc</title>
<path fill="none" stroke="black" d="M233.69,-160C240.02,-148.81 249.63,-135.07 262,-127 266.4,-124.13 318.44,-113.16 362.37,-104.25"/>
<polygon fill="black" stroke="black" points="363.07,-107.68 372.18,-102.27 361.68,-100.82 363.07,-107.68"/>
<text text-anchor="middle" x="291" y="-130.8" font-family="Times,serif" font-size="14.00">调整失败</text>
</g>
<!-- return_surface -->
<g id="node13" class="node">
<title>return_surface</title>
<polygon fill="none" stroke="black" points="276.5,-36 173.5,-36 173.5,0 276.5,0 276.5,-36"/>
<text text-anchor="middle" x="225" y="-14.3" font-family="Courier New" font-size="14.00">返回surface</text>
</g>
<!-- trim_children&#45;&gt;return_surface -->
<g id="edge16" class="edge">
<title>trim_children&#45;&gt;return_surface</title>
<path fill="none" stroke="black" d="M225,-72.81C225,-64.79 225,-55.05 225,-46.07"/>
<polygon fill="black" stroke="black" points="228.5,-46.03 225,-36.03 221.5,-46.03 228.5,-46.03"/>
</g>
</g>
</svg>
