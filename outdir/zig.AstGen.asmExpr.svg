<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: flowchart Pages: 1 -->
<svg width="824pt" height="956pt"
 viewBox="0.00 0.00 823.74 956.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 952)">
<title>flowchart</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-952 819.74,-952 819.74,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<ellipse fill="none" stroke="black" cx="480.74" cy="-930" rx="71.49" ry="18"/>
<text text-anchor="middle" x="480.74" y="-926.3" font-family="Helvetica,sans-Serif" font-size="14.00">开始 asmExpr</text>
</g>
<!-- handle_template -->
<g id="node2" class="node">
<title>handle_template</title>
<path fill="none" stroke="black" d="M644.24,-875C644.24,-875 317.24,-875 317.24,-875 311.24,-875 305.24,-869 305.24,-863 305.24,-863 305.24,-849 305.24,-849 305.24,-843 311.24,-837 317.24,-837 317.24,-837 644.24,-837 644.24,-837 650.24,-837 656.24,-843 656.24,-849 656.24,-849 656.24,-863 656.24,-863 656.24,-869 650.24,-875 644.24,-875"/>
<text text-anchor="middle" x="480.74" y="-859.8" font-family="Helvetica,sans-Serif" font-size="14.00">处理模板标签和模板类型</text>
<text text-anchor="middle" x="480.74" y="-844.8" font-family="Helvetica,sans-Serif" font-size="14.00">根据 nodeTag(full.ast.template) 选择 TagAndTmpl</text>
</g>
<!-- start&#45;&gt;handle_template -->
<g id="edge1" class="edge">
<title>start&#45;&gt;handle_template</title>
<path fill="none" stroke="black" d="M480.74,-911.94C480.74,-903.99 480.74,-894.31 480.74,-885.31"/>
<polygon fill="black" stroke="black" points="484.24,-885.2 480.74,-875.2 477.24,-885.2 484.24,-885.2"/>
</g>
<!-- check_container_asm -->
<g id="node3" class="node">
<title>check_container_asm</title>
<path fill="none" stroke="black" d="M468.82,-798.65C468.82,-798.65 157.67,-763.35 157.67,-763.35 151.7,-762.68 151.7,-761.32 157.67,-760.65 157.67,-760.65 468.82,-725.35 468.82,-725.35 474.78,-724.68 486.7,-724.68 492.67,-725.35 492.67,-725.35 803.82,-760.65 803.82,-760.65 809.78,-761.32 809.78,-762.68 803.82,-763.35 803.82,-763.35 492.67,-798.65 492.67,-798.65 486.7,-799.32 474.78,-799.32 468.82,-798.65"/>
<text text-anchor="middle" x="480.74" y="-765.8" font-family="Helvetica,sans-Serif" font-size="14.00">检查是否是容器级汇编</text>
<text text-anchor="middle" x="480.74" y="-750.8" font-family="Helvetica,sans-Serif" font-size="14.00">(is_container_asm = astgen.fn_block == null)</text>
</g>
<!-- handle_template&#45;&gt;check_container_asm -->
<g id="edge2" class="edge">
<title>handle_template&#45;&gt;check_container_asm</title>
<path fill="none" stroke="black" d="M480.74,-836.82C480.74,-829.13 480.74,-819.78 480.74,-810.35"/>
<polygon fill="black" stroke="black" points="484.24,-810.16 480.74,-800.16 477.24,-810.16 484.24,-810.16"/>
</g>
<!-- container_asm_checks -->
<g id="node4" class="node">
<title>container_asm_checks</title>
<path fill="none" stroke="black" d="M452.74,-673C452.74,-673 310.74,-673 310.74,-673 304.74,-673 298.74,-667 298.74,-661 298.74,-661 298.74,-632 298.74,-632 298.74,-626 304.74,-620 310.74,-620 310.74,-620 452.74,-620 452.74,-620 458.74,-620 464.74,-626 464.74,-632 464.74,-632 464.74,-661 464.74,-661 464.74,-667 458.74,-673 452.74,-673"/>
<text text-anchor="middle" x="381.74" y="-657.8" font-family="Helvetica,sans-Serif" font-size="14.00">全局汇编检查:</text>
<text text-anchor="middle" x="381.74" y="-642.8" font-family="Helvetica,sans-Serif" font-size="14.00">&#45; 无 volatile</text>
<text text-anchor="middle" x="381.74" y="-627.8" font-family="Helvetica,sans-Serif" font-size="14.00">&#45; 无输入/输出/clobbers</text>
</g>
<!-- check_container_asm&#45;&gt;container_asm_checks -->
<g id="edge3" class="edge">
<title>check_container_asm&#45;&gt;container_asm_checks</title>
<path fill="none" stroke="black" d="M451.31,-727.25C438.51,-712.59 423.57,-695.45 410.82,-680.84"/>
<polygon fill="black" stroke="black" points="413.2,-678.24 403.99,-673 407.92,-682.84 413.2,-678.24"/>
<text text-anchor="middle" x="438.24" y="-694.8" font-family="Helvetica,sans-Serif" font-size="14.00">是</text>
</g>
<!-- non_container_checks -->
<g id="node5" class="node">
<title>non_container_checks</title>
<path fill="none" stroke="black" d="M664.24,-665.5C664.24,-665.5 495.24,-665.5 495.24,-665.5 489.24,-665.5 483.24,-659.5 483.24,-653.5 483.24,-653.5 483.24,-639.5 483.24,-639.5 483.24,-633.5 489.24,-627.5 495.24,-627.5 495.24,-627.5 664.24,-627.5 664.24,-627.5 670.24,-627.5 676.24,-633.5 676.24,-639.5 676.24,-639.5 676.24,-653.5 676.24,-653.5 676.24,-659.5 670.24,-665.5 664.24,-665.5"/>
<text text-anchor="middle" x="579.74" y="-650.3" font-family="Helvetica,sans-Serif" font-size="14.00">非全局汇编检查:</text>
<text text-anchor="middle" x="579.74" y="-635.3" font-family="Helvetica,sans-Serif" font-size="14.00">&#45; 无输出时必须标记 volatile</text>
</g>
<!-- check_container_asm&#45;&gt;non_container_checks -->
<g id="edge4" class="edge">
<title>check_container_asm&#45;&gt;non_container_checks</title>
<path fill="none" stroke="black" d="M510.18,-727.25C525.13,-710.11 543.01,-689.61 556.91,-673.68"/>
<polygon fill="black" stroke="black" points="559.84,-675.65 563.77,-665.81 554.56,-671.04 559.84,-675.65"/>
<text text-anchor="middle" x="546.24" y="-694.8" font-family="Helvetica,sans-Serif" font-size="14.00">否</text>
</g>
<!-- check_outputs_count -->
<g id="node6" class="node">
<title>check_outputs_count</title>
<path fill="none" stroke="black" d="M298.82,-567.65C298.82,-567.65 163.64,-552.35 163.64,-552.35 157.68,-551.67 157.68,-550.33 163.64,-549.65 163.64,-549.65 298.82,-534.35 298.82,-534.35 304.78,-533.67 316.7,-533.67 322.67,-534.35 322.67,-534.35 457.85,-549.65 457.85,-549.65 463.81,-550.33 463.81,-551.67 457.85,-552.35 457.85,-552.35 322.67,-567.65 322.67,-567.65 316.7,-568.33 304.78,-568.33 298.82,-567.65"/>
<text text-anchor="middle" x="310.74" y="-547.3" font-family="Helvetica,sans-Serif" font-size="14.00">检查 outputs.len &gt; 32?</text>
</g>
<!-- container_asm_checks&#45;&gt;check_outputs_count -->
<g id="edge5" class="edge">
<title>container_asm_checks&#45;&gt;check_outputs_count</title>
<path fill="none" stroke="black" d="M362.34,-619.95C351.97,-606.29 339.27,-589.56 329.06,-576.13"/>
<polygon fill="black" stroke="black" points="331.6,-573.68 322.77,-567.83 326.03,-577.92 331.6,-573.68"/>
<text text-anchor="middle" x="377.74" y="-590.8" font-family="Helvetica,sans-Serif" font-size="14.00">通过检查</text>
</g>
<!-- error_node -->
<g id="node12" class="node">
<title>error_node</title>
<path fill="none" stroke="black" d="M510.28,-267.5C510.28,-267.5 422.07,-267.5 422.07,-267.5 416.07,-267.5 406.32,-262.82 402.56,-258.14 402.56,-258.14 388.71,-240.86 388.71,-240.86 384.96,-236.18 387.21,-231.5 393.21,-231.5 393.21,-231.5 481.41,-231.5 481.41,-231.5 487.41,-231.5 497.17,-236.18 500.92,-240.86 500.92,-240.86 514.77,-258.14 514.77,-258.14 518.52,-262.82 516.28,-267.5 510.28,-267.5"/>
<text text-anchor="middle" x="451.74" y="-245.8" font-family="Helvetica,sans-Serif" font-size="14.00">返回错误</text>
</g>
<!-- container_asm_checks&#45;&gt;error_node -->
<g id="edge6" class="edge">
<title>container_asm_checks&#45;&gt;error_node</title>
<path fill="none" stroke="black" d="M446.52,-619.89C473.1,-604.77 497.74,-582.52 497.74,-552 497.74,-552 497.74,-552 497.74,-344 497.74,-318.97 484.31,-293.68 471.96,-275.73"/>
<polygon fill="black" stroke="black" points="474.73,-273.6 466.04,-267.54 469.06,-277.7 474.73,-273.6"/>
<text text-anchor="middle" x="526.74" y="-444.3" font-family="Helvetica,sans-Serif" font-size="14.00">违反规则</text>
</g>
<!-- non_container_checks&#45;&gt;check_outputs_count -->
<g id="edge7" class="edge">
<title>non_container_checks&#45;&gt;check_outputs_count</title>
<path fill="none" stroke="black" d="M527.88,-627.47C478.56,-610.33 405.04,-584.78 357.49,-568.25"/>
<polygon fill="black" stroke="black" points="358.35,-564.84 347.76,-564.87 356.05,-571.46 358.35,-564.84"/>
<text text-anchor="middle" x="481.74" y="-590.8" font-family="Helvetica,sans-Serif" font-size="14.00">通过检查</text>
</g>
<!-- non_container_checks&#45;&gt;error_node -->
<g id="edge8" class="edge">
<title>non_container_checks&#45;&gt;error_node</title>
<path fill="none" stroke="black" d="M587.34,-627.23C594.37,-608.63 603.74,-578.81 603.74,-552 603.74,-552 603.74,-552 603.74,-344 603.74,-305.32 567.59,-282.13 530.55,-268.52"/>
<polygon fill="black" stroke="black" points="531.22,-265.05 520.63,-265.1 528.94,-271.67 531.22,-265.05"/>
<text text-anchor="middle" x="632.74" y="-444.3" font-family="Helvetica,sans-Serif" font-size="14.00">违反规则</text>
</g>
<!-- process_outputs -->
<g id="node7" class="node">
<title>process_outputs</title>
<path fill="none" stroke="black" d="M390.24,-482C390.24,-482 231.24,-482 231.24,-482 225.24,-482 219.24,-476 219.24,-470 219.24,-470 219.24,-426 219.24,-426 219.24,-420 225.24,-414 231.24,-414 231.24,-414 390.24,-414 390.24,-414 396.24,-414 402.24,-420 402.24,-426 402.24,-426 402.24,-470 402.24,-470 402.24,-476 396.24,-482 390.24,-482"/>
<text text-anchor="middle" x="310.74" y="-466.8" font-family="Helvetica,sans-Serif" font-size="14.00">遍历 outputs[0..31]:</text>
<text text-anchor="middle" x="310.74" y="-451.8" font-family="Helvetica,sans-Serif" font-size="14.00">&#45; 处理符号名和约束</text>
<text text-anchor="middle" x="310.74" y="-436.8" font-family="Helvetica,sans-Serif" font-size="14.00">&#45; 检查是否有类型箭头</text>
<text text-anchor="middle" x="310.74" y="-421.8" font-family="Helvetica,sans-Serif" font-size="14.00">&#45; 处理类型或局部变量引用</text>
</g>
<!-- check_outputs_count&#45;&gt;process_outputs -->
<g id="edge10" class="edge">
<title>check_outputs_count&#45;&gt;process_outputs</title>
<path fill="none" stroke="black" d="M310.74,-532.87C310.74,-521.73 310.74,-506.66 310.74,-492.38"/>
<polygon fill="black" stroke="black" points="314.24,-492.18 310.74,-482.18 307.24,-492.18 314.24,-492.18"/>
<text text-anchor="middle" x="318.24" y="-503.8" font-family="Helvetica,sans-Serif" font-size="14.00">否</text>
</g>
<!-- check_outputs_count&#45;&gt;error_node -->
<g id="edge9" class="edge">
<title>check_outputs_count&#45;&gt;error_node</title>
<path fill="none" stroke="black" d="M342.48,-536.57C365.23,-525.29 394.76,-507 411.74,-482 454.71,-418.75 456.19,-323.99 453.91,-277.79"/>
<polygon fill="black" stroke="black" points="457.4,-277.43 453.31,-267.65 450.41,-277.84 457.4,-277.43"/>
<text text-anchor="middle" x="455.24" y="-384.8" font-family="Helvetica,sans-Serif" font-size="14.00">是</text>
</g>
<!-- check_inputs_count -->
<g id="node8" class="node">
<title>check_inputs_count</title>
<path fill="none" stroke="black" d="M138.83,-361.58C138.83,-361.58 11.67,-346.42 11.67,-346.42 5.72,-345.71 5.72,-344.29 11.67,-343.58 11.67,-343.58 138.83,-328.42 138.83,-328.42 144.78,-327.71 156.7,-327.71 162.66,-328.42 162.66,-328.42 289.81,-343.58 289.81,-343.58 295.77,-344.29 295.77,-345.71 289.81,-346.42 289.81,-346.42 162.66,-361.58 162.66,-361.58 156.7,-362.29 144.78,-362.29 138.83,-361.58"/>
<text text-anchor="middle" x="150.74" y="-341.3" font-family="Helvetica,sans-Serif" font-size="14.00">检查 inputs.len &gt; 32?</text>
</g>
<!-- process_outputs&#45;&gt;check_inputs_count -->
<g id="edge11" class="edge">
<title>process_outputs&#45;&gt;check_inputs_count</title>
<path fill="none" stroke="black" d="M258.35,-413.93C233.2,-398.05 203.9,-379.55 182.23,-365.87"/>
<polygon fill="black" stroke="black" points="184.06,-362.89 173.74,-360.51 180.32,-368.81 184.06,-362.89"/>
</g>
<!-- process_outputs&#45;&gt;error_node -->
<g id="edge12" class="edge">
<title>process_outputs&#45;&gt;error_node</title>
<path fill="none" stroke="black" d="M316.61,-413.76C322.35,-388.21 333.04,-353.01 351.74,-327 367.6,-304.95 391.62,-286.28 412.15,-272.91"/>
<polygon fill="black" stroke="black" points="414.11,-275.81 420.69,-267.51 410.37,-269.89 414.11,-275.81"/>
<text text-anchor="middle" x="394.74" y="-341.3" font-family="Helvetica,sans-Serif" font-size="14.00">输出类型冲突</text>
</g>
<!-- process_inputs -->
<g id="node9" class="node">
<title>process_inputs</title>
<path fill="none" stroke="black" d="M210.24,-276C210.24,-276 91.24,-276 91.24,-276 85.24,-276 79.24,-270 79.24,-264 79.24,-264 79.24,-235 79.24,-235 79.24,-229 85.24,-223 91.24,-223 91.24,-223 210.24,-223 210.24,-223 216.24,-223 222.24,-229 222.24,-235 222.24,-235 222.24,-264 222.24,-264 222.24,-270 216.24,-276 210.24,-276"/>
<text text-anchor="middle" x="150.74" y="-260.8" font-family="Helvetica,sans-Serif" font-size="14.00">遍历 inputs[0..31]:</text>
<text text-anchor="middle" x="150.74" y="-245.8" font-family="Helvetica,sans-Serif" font-size="14.00">&#45; 处理符号名和约束</text>
<text text-anchor="middle" x="150.74" y="-230.8" font-family="Helvetica,sans-Serif" font-size="14.00">&#45; 生成操作数表达式</text>
</g>
<!-- check_inputs_count&#45;&gt;process_inputs -->
<g id="edge14" class="edge">
<title>check_inputs_count&#45;&gt;process_inputs</title>
<path fill="none" stroke="black" d="M150.74,-326.85C150.74,-315.51 150.74,-300.22 150.74,-286.3"/>
<polygon fill="black" stroke="black" points="154.24,-286.01 150.74,-276.01 147.24,-286.01 154.24,-286.01"/>
<text text-anchor="middle" x="158.24" y="-297.8" font-family="Helvetica,sans-Serif" font-size="14.00">否</text>
</g>
<!-- check_inputs_count&#45;&gt;error_node -->
<g id="edge13" class="edge">
<title>check_inputs_count&#45;&gt;error_node</title>
<path fill="none" stroke="black" d="M189.66,-331.55C221.62,-321.36 268.07,-306.62 308.74,-294 337.86,-284.96 370.37,-275.06 397.03,-266.99"/>
<polygon fill="black" stroke="black" points="398.38,-270.23 406.94,-263.99 396.35,-263.53 398.38,-270.23"/>
<text text-anchor="middle" x="316.24" y="-297.8" font-family="Helvetica,sans-Serif" font-size="14.00">是</text>
</g>
<!-- process_clobbers -->
<g id="node10" class="node">
<title>process_clobbers</title>
<path fill="none" stroke="black" d="M264.24,-186C264.24,-186 37.24,-186 37.24,-186 31.24,-186 25.24,-180 25.24,-174 25.24,-174 25.24,-160 25.24,-160 25.24,-154 31.24,-148 37.24,-148 37.24,-148 264.24,-148 264.24,-148 270.24,-148 276.24,-154 276.24,-160 276.24,-160 276.24,-174 276.24,-174 276.24,-180 270.24,-186 264.24,-186"/>
<text text-anchor="middle" x="150.74" y="-170.8" font-family="Helvetica,sans-Serif" font-size="14.00">遍历 clobbers:</text>
<text text-anchor="middle" x="150.74" y="-155.8" font-family="Helvetica,sans-Serif" font-size="14.00">&#45; 收集字符串索引到 clobbers_buffer</text>
</g>
<!-- process_inputs&#45;&gt;process_clobbers -->
<g id="edge15" class="edge">
<title>process_inputs&#45;&gt;process_clobbers</title>
<path fill="none" stroke="black" d="M150.74,-222.59C150.74,-214.31 150.74,-205.11 150.74,-196.65"/>
<polygon fill="black" stroke="black" points="154.24,-196.47 150.74,-186.47 147.24,-196.47 154.24,-196.47"/>
</g>
<!-- generate_result -->
<g id="node11" class="node">
<title>generate_result</title>
<path fill="none" stroke="black" d="M232.74,-111C232.74,-111 68.74,-111 68.74,-111 62.74,-111 56.74,-105 56.74,-99 56.74,-99 56.74,-85 56.74,-85 56.74,-79 62.74,-73 68.74,-73 68.74,-73 232.74,-73 232.74,-73 238.74,-73 244.74,-79 244.74,-85 244.74,-85 244.74,-99 244.74,-99 244.74,-105 238.74,-111 232.74,-111"/>
<text text-anchor="middle" x="150.74" y="-95.8" font-family="Helvetica,sans-Serif" font-size="14.00">调用 gz.addAsm 生成结果</text>
<text text-anchor="middle" x="150.74" y="-80.8" font-family="Helvetica,sans-Serif" font-size="14.00">并返回 rvalue</text>
</g>
<!-- process_clobbers&#45;&gt;generate_result -->
<g id="edge16" class="edge">
<title>process_clobbers&#45;&gt;generate_result</title>
<path fill="none" stroke="black" d="M150.74,-147.96C150.74,-139.88 150.74,-130.18 150.74,-121.18"/>
<polygon fill="black" stroke="black" points="154.24,-121.09 150.74,-111.09 147.24,-121.09 154.24,-121.09"/>
</g>
<!-- end -->
<g id="node13" class="node">
<title>end</title>
<ellipse fill="none" stroke="black" cx="150.74" cy="-18" rx="48.19" ry="18"/>
<text text-anchor="middle" x="150.74" y="-14.3" font-family="Helvetica,sans-Serif" font-size="14.00">返回结果</text>
</g>
<!-- generate_result&#45;&gt;end -->
<g id="edge17" class="edge">
<title>generate_result&#45;&gt;end</title>
<path fill="none" stroke="black" d="M150.74,-72.83C150.74,-64.89 150.74,-55.41 150.74,-46.63"/>
<polygon fill="black" stroke="black" points="154.24,-46.42 150.74,-36.42 147.24,-46.42 154.24,-46.42"/>
</g>
</g>
</svg>
