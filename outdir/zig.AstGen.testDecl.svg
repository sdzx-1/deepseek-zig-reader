<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: testDecl_flowchart Pages: 1 -->
<svg width="566pt" height="1219pt"
 viewBox="0.00 0.00 566.00 1219.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1215)">
<title>testDecl_flowchart</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-1215 562,-1215 562,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<path fill="none" stroke="black" d="M408,-1211C408,-1211 334,-1211 334,-1211 328,-1211 322,-1205 322,-1199 322,-1199 322,-1187 322,-1187 322,-1181 328,-1175 334,-1175 334,-1175 408,-1175 408,-1175 414,-1175 420,-1181 420,-1187 420,-1187 420,-1199 420,-1199 420,-1205 414,-1211 408,-1211"/>
<text text-anchor="middle" x="371" y="-1189.3" font-family="Arial" font-size="14.00">Start testDecl</text>
</g>
<!-- init_vars -->
<g id="node2" class="node">
<title>init_vars</title>
<path fill="none" stroke="black" d="M471,-1138C471,-1138 271,-1138 271,-1138 265,-1138 259,-1132 259,-1126 259,-1126 259,-1112 259,-1112 259,-1106 265,-1100 271,-1100 271,-1100 471,-1100 471,-1100 477,-1100 483,-1106 483,-1112 483,-1112 483,-1126 483,-1126 483,-1132 477,-1138 471,-1138"/>
<text text-anchor="middle" x="371" y="-1122.8" font-family="Arial" font-size="14.00">Initialize tree, old_hasher</text>
<text text-anchor="middle" x="371" y="-1107.8" font-family="Arial" font-size="14.00">Setup src_hasher with source data</text>
</g>
<!-- start&#45;&gt;init_vars -->
<g id="edge1" class="edge">
<title>start&#45;&gt;init_vars</title>
<path fill="none" stroke="black" d="M371,-1174.94C371,-1166.99 371,-1157.31 371,-1148.31"/>
<polygon fill="black" stroke="black" points="374.5,-1148.2 371,-1138.2 367.5,-1148.2 374.5,-1148.2"/>
</g>
<!-- decl_inst -->
<g id="node3" class="node">
<title>decl_inst</title>
<path fill="none" stroke="black" d="M521.5,-1063C521.5,-1063 220.5,-1063 220.5,-1063 214.5,-1063 208.5,-1057 208.5,-1051 208.5,-1051 208.5,-1039 208.5,-1039 208.5,-1033 214.5,-1027 220.5,-1027 220.5,-1027 521.5,-1027 521.5,-1027 527.5,-1027 533.5,-1033 533.5,-1039 533.5,-1039 533.5,-1051 533.5,-1051 533.5,-1057 527.5,-1063 521.5,-1063"/>
<text text-anchor="middle" x="371" y="-1041.3" font-family="Arial" font-size="14.00">Create declaration instruction (gz.makeDeclaration)</text>
</g>
<!-- init_vars&#45;&gt;decl_inst -->
<g id="edge2" class="edge">
<title>init_vars&#45;&gt;decl_inst</title>
<path fill="none" stroke="black" d="M371,-1099.83C371,-1091.89 371,-1082.41 371,-1073.63"/>
<polygon fill="black" stroke="black" points="374.5,-1073.42 371,-1063.42 367.5,-1073.42 374.5,-1073.42"/>
</g>
<!-- advance_cursor -->
<g id="node4" class="node">
<title>advance_cursor</title>
<path fill="none" stroke="black" d="M460.5,-990C460.5,-990 281.5,-990 281.5,-990 275.5,-990 269.5,-984 269.5,-978 269.5,-978 269.5,-966 269.5,-966 269.5,-960 275.5,-954 281.5,-954 281.5,-954 460.5,-954 460.5,-954 466.5,-954 472.5,-960 472.5,-966 472.5,-966 472.5,-978 472.5,-978 472.5,-984 466.5,-990 460.5,-990"/>
<text text-anchor="middle" x="371" y="-968.3" font-family="Arial" font-size="14.00">Advance source cursor to node</text>
</g>
<!-- decl_inst&#45;&gt;advance_cursor -->
<g id="edge3" class="edge">
<title>decl_inst&#45;&gt;advance_cursor</title>
<path fill="none" stroke="black" d="M371,-1026.81C371,-1018.79 371,-1009.05 371,-1000.07"/>
<polygon fill="black" stroke="black" points="374.5,-1000.03 371,-990.03 367.5,-1000.03 374.5,-1000.03"/>
</g>
<!-- setup_dummy_gz -->
<g id="node5" class="node">
<title>setup_dummy_gz</title>
<path fill="none" stroke="black" d="M454,-917C454,-917 288,-917 288,-917 282,-917 276,-911 276,-905 276,-905 276,-893 276,-893 276,-887 282,-881 288,-881 288,-881 454,-881 454,-881 460,-881 466,-887 466,-893 466,-893 466,-905 466,-905 466,-911 460,-917 454,-917"/>
<text text-anchor="middle" x="371" y="-895.3" font-family="Arial" font-size="14.00">Create dummy_gz sub&#45;block</text>
</g>
<!-- advance_cursor&#45;&gt;setup_dummy_gz -->
<g id="edge4" class="edge">
<title>advance_cursor&#45;&gt;setup_dummy_gz</title>
<path fill="none" stroke="black" d="M371,-953.81C371,-945.79 371,-936.05 371,-927.07"/>
<polygon fill="black" stroke="black" points="374.5,-927.03 371,-917.03 367.5,-927.03 374.5,-927.03"/>
</g>
<!-- decl_block -->
<g id="node6" class="node">
<title>decl_block</title>
<path fill="none" stroke="black" d="M479.5,-844C479.5,-844 262.5,-844 262.5,-844 256.5,-844 250.5,-838 250.5,-832 250.5,-832 250.5,-820 250.5,-820 250.5,-814 256.5,-808 262.5,-808 262.5,-808 479.5,-808 479.5,-808 485.5,-808 491.5,-814 491.5,-820 491.5,-820 491.5,-832 491.5,-832 491.5,-838 485.5,-844 479.5,-844"/>
<text text-anchor="middle" x="371" y="-822.3" font-family="Arial" font-size="14.00">Initialize decl_block (comptime block)</text>
</g>
<!-- setup_dummy_gz&#45;&gt;decl_block -->
<g id="edge5" class="edge">
<title>setup_dummy_gz&#45;&gt;decl_block</title>
<path fill="none" stroke="black" d="M371,-880.81C371,-872.79 371,-863.05 371,-854.07"/>
<polygon fill="black" stroke="black" points="374.5,-854.03 371,-844.03 367.5,-854.03 374.5,-854.03"/>
</g>
<!-- process_test_name -->
<g id="node7" class="node">
<title>process_test_name</title>
<path fill="none" stroke="black" d="M445.5,-771C445.5,-771 296.5,-771 296.5,-771 290.5,-771 284.5,-765 284.5,-759 284.5,-759 284.5,-747 284.5,-747 284.5,-741 290.5,-735 296.5,-735 296.5,-735 445.5,-735 445.5,-735 451.5,-735 457.5,-741 457.5,-747 457.5,-747 457.5,-759 457.5,-759 457.5,-765 451.5,-771 445.5,-771"/>
<text text-anchor="middle" x="371" y="-749.3" font-family="Arial" font-size="14.00">Process test_name_token</text>
</g>
<!-- decl_block&#45;&gt;process_test_name -->
<g id="edge6" class="edge">
<title>decl_block&#45;&gt;process_test_name</title>
<path fill="none" stroke="black" d="M371,-807.81C371,-799.79 371,-790.05 371,-781.07"/>
<polygon fill="black" stroke="black" points="374.5,-781.03 371,-771.03 367.5,-781.03 374.5,-781.03"/>
</g>
<!-- check_token_type -->
<g id="node8" class="node">
<title>check_token_type</title>
<path fill="none" stroke="black" d="M449,-698C449,-698 293,-698 293,-698 287,-698 281,-692 281,-686 281,-686 281,-672 281,-672 281,-666 287,-660 293,-660 293,-660 449,-660 449,-660 455,-660 461,-666 461,-672 461,-672 461,-686 461,-686 461,-692 455,-698 449,-698"/>
<text text-anchor="middle" x="371" y="-682.8" font-family="Arial" font-size="14.00">Check token type</text>
<text text-anchor="middle" x="371" y="-667.8" font-family="Arial" font-size="14.00">.string_literal/.identifier/else</text>
</g>
<!-- process_test_name&#45;&gt;check_token_type -->
<g id="edge7" class="edge">
<title>process_test_name&#45;&gt;check_token_type</title>
<path fill="none" stroke="black" d="M371,-734.94C371,-726.99 371,-717.31 371,-708.31"/>
<polygon fill="black" stroke="black" points="374.5,-708.2 371,-698.2 367.5,-708.2 374.5,-708.2"/>
</g>
<!-- string_literal_case -->
<g id="node9" class="node">
<title>string_literal_case</title>
<path fill="none" stroke="black" d="M479.5,-609C479.5,-609 262.5,-609 262.5,-609 256.5,-609 250.5,-603 250.5,-597 250.5,-597 250.5,-583 250.5,-583 250.5,-577 256.5,-571 262.5,-571 262.5,-571 479.5,-571 479.5,-571 485.5,-571 491.5,-577 491.5,-583 491.5,-583 491.5,-597 491.5,-597 491.5,-603 485.5,-609 479.5,-609"/>
<text text-anchor="middle" x="371" y="-593.8" font-family="Arial" font-size="14.00">Validate string literal</text>
<text text-anchor="middle" x="371" y="-578.8" font-family="Arial" font-size="14.00">Check for null bytes and empty name</text>
</g>
<!-- check_token_type&#45;&gt;string_literal_case -->
<g id="edge8" class="edge">
<title>check_token_type&#45;&gt;string_literal_case</title>
<path fill="none" stroke="black" d="M371,-659.97C371,-648.19 371,-632.56 371,-619.16"/>
<polygon fill="black" stroke="black" points="374.5,-619 371,-609 367.5,-619 374.5,-619"/>
<text text-anchor="middle" x="409.5" y="-630.8" font-family="Arial" font-size="14.00">.string_literal</text>
</g>
<!-- identifier_case -->
<g id="node10" class="node">
<title>identifier_case</title>
<path fill="none" stroke="black" d="M206,-609C206,-609 12,-609 12,-609 6,-609 0,-603 0,-597 0,-597 0,-583 0,-583 0,-577 6,-571 12,-571 12,-571 206,-571 206,-571 212,-571 218,-577 218,-583 218,-583 218,-597 218,-597 218,-603 212,-609 206,-609"/>
<text text-anchor="middle" x="109" y="-593.8" font-family="Arial" font-size="14.00">Validate identifier</text>
<text text-anchor="middle" x="109" y="-578.8" font-family="Arial" font-size="14.00">Check for &#39;_&#39; and primitive names</text>
</g>
<!-- check_token_type&#45;&gt;identifier_case -->
<g id="edge9" class="edge">
<title>check_token_type&#45;&gt;identifier_case</title>
<path fill="none" stroke="black" d="M316.71,-659.97C274.91,-646.09 217.01,-626.87 172.96,-612.24"/>
<polygon fill="black" stroke="black" points="173.81,-608.83 163.22,-609 171.6,-615.48 173.81,-608.83"/>
<text text-anchor="middle" x="282.5" y="-630.8" font-family="Arial" font-size="14.00">.identifier</text>
</g>
<!-- finalize_decl -->
<g id="node17" class="node">
<title>finalize_decl</title>
<path fill="none" stroke="black" d="M489.5,-109C489.5,-109 262.5,-109 262.5,-109 256.5,-109 250.5,-103 250.5,-97 250.5,-97 250.5,-85 250.5,-85 250.5,-79 256.5,-73 262.5,-73 262.5,-73 489.5,-73 489.5,-73 495.5,-73 501.5,-79 501.5,-85 501.5,-85 501.5,-97 501.5,-97 501.5,-103 495.5,-109 489.5,-109"/>
<text text-anchor="middle" x="376" y="-87.3" font-family="Arial" font-size="14.00">Finalize declaration with setDeclaration</text>
</g>
<!-- check_token_type&#45;&gt;finalize_decl -->
<g id="edge10" class="edge">
<title>check_token_type&#45;&gt;finalize_decl</title>
<path fill="none" stroke="black" d="M461,-662.41C498.29,-650.28 533,-628.83 533,-591 533,-591 533,-591 533,-163 533,-139.68 518.44,-123.98 498.19,-113.42"/>
<polygon fill="black" stroke="black" points="499.39,-110.12 488.85,-109.06 496.43,-116.46 499.39,-110.12"/>
<text text-anchor="middle" x="545.5" y="-363.8" font-family="Arial" font-size="14.00">else</text>
</g>
<!-- scope_loop -->
<g id="node11" class="node">
<title>scope_loop</title>
<path fill="none" stroke="black" d="M490,-520C490,-520 314,-520 314,-520 308,-520 302,-514 302,-508 302,-508 302,-494 302,-494 302,-488 308,-482 314,-482 314,-482 490,-482 490,-482 496,-482 502,-488 502,-494 502,-494 502,-508 502,-508 502,-514 496,-520 490,-520"/>
<text text-anchor="middle" x="402" y="-504.8" font-family="Arial" font-size="14.00">Loop through scopes</text>
<text text-anchor="middle" x="402" y="-489.8" font-family="Arial" font-size="14.00">Check for existing declarations</text>
</g>
<!-- string_literal_case&#45;&gt;scope_loop -->
<g id="edge12" class="edge">
<title>string_literal_case&#45;&gt;scope_loop</title>
<path fill="none" stroke="black" d="M377.42,-570.97C381.66,-559.08 387.3,-543.25 392.11,-529.76"/>
<polygon fill="black" stroke="black" points="395.53,-530.6 395.59,-520 388.93,-528.25 395.53,-530.6"/>
<text text-anchor="middle" x="422" y="-541.8" font-family="Arial" font-size="14.00">Valid name</text>
</g>
<!-- error_handling -->
<g id="node12" class="node">
<title>error_handling</title>
<path fill="none" stroke="black" d="M263,-431C263,-431 149,-431 149,-431 143,-431 137,-425 137,-419 137,-419 137,-405 137,-405 137,-399 143,-393 149,-393 149,-393 263,-393 263,-393 269,-393 275,-399 275,-405 275,-405 275,-419 275,-419 275,-425 269,-431 263,-431"/>
<text text-anchor="middle" x="206" y="-415.8" font-family="Arial" font-size="14.00">Error handling paths</text>
<text text-anchor="middle" x="206" y="-400.8" font-family="Arial" font-size="14.00">(failTok, errNote)</text>
</g>
<!-- string_literal_case&#45;&gt;error_handling -->
<g id="edge11" class="edge">
<title>string_literal_case&#45;&gt;error_handling</title>
<path fill="none" stroke="black" d="M289,-570.99C261.13,-560.71 232.62,-544.72 215,-520 198.77,-497.22 198.47,-464.4 201.01,-441.12"/>
<polygon fill="black" stroke="black" points="204.48,-441.54 202.32,-431.17 197.54,-440.62 204.48,-441.54"/>
<text text-anchor="middle" x="254" y="-497.3" font-family="Arial" font-size="14.00">Invalid name</text>
</g>
<!-- identifier_case&#45;&gt;scope_loop -->
<g id="edge14" class="edge">
<title>identifier_case&#45;&gt;scope_loop</title>
<path fill="none" stroke="black" d="M169.71,-570.97C216.85,-556.98 282.3,-537.54 331.71,-522.87"/>
<polygon fill="black" stroke="black" points="332.78,-526.21 341.37,-520 330.79,-519.49 332.78,-526.21"/>
<text text-anchor="middle" x="315.5" y="-541.8" font-family="Arial" font-size="14.00">Valid identifier</text>
</g>
<!-- identifier_case&#45;&gt;error_handling -->
<g id="edge13" class="edge">
<title>identifier_case&#45;&gt;error_handling</title>
<path fill="none" stroke="black" d="M99.4,-570.71C89.1,-548.35 76.21,-510.02 92,-482 103.58,-461.46 124.01,-446.34 144.4,-435.58"/>
<polygon fill="black" stroke="black" points="146.03,-438.67 153.43,-431.08 142.91,-432.41 146.03,-438.67"/>
<text text-anchor="middle" x="138" y="-497.3" font-family="Arial" font-size="14.00">Invalid (e.g. &#39;_&#39;)</text>
</g>
<!-- scope_loop&#45;&gt;error_handling -->
<g id="edge15" class="edge">
<title>scope_loop&#45;&gt;error_handling</title>
<path fill="none" stroke="black" d="M355.59,-481.84C341.81,-476.29 326.73,-470.04 313,-464 292.6,-455.02 270.32,-444.52 251.39,-435.38"/>
<polygon fill="black" stroke="black" points="252.92,-432.23 242.39,-431.02 249.87,-438.53 252.92,-432.23"/>
<text text-anchor="middle" x="354.5" y="-452.8" font-family="Arial" font-size="14.00">Conflict found</text>
</g>
<!-- setup_fn_block -->
<g id="node13" class="node">
<title>setup_fn_block</title>
<path fill="none" stroke="black" d="M493,-430C493,-430 305,-430 305,-430 299,-430 293,-424 293,-418 293,-418 293,-406 293,-406 293,-400 299,-394 305,-394 305,-394 493,-394 493,-394 499,-394 505,-400 505,-406 505,-406 505,-418 505,-418 505,-424 499,-430 493,-430"/>
<text text-anchor="middle" x="399" y="-408.3" font-family="Arial" font-size="14.00">Initialize fn_block (function body)</text>
</g>
<!-- scope_loop&#45;&gt;setup_fn_block -->
<g id="edge16" class="edge">
<title>scope_loop&#45;&gt;setup_fn_block</title>
<path fill="none" stroke="black" d="M401.38,-481.97C400.96,-469.96 400.41,-453.93 399.94,-440.36"/>
<polygon fill="black" stroke="black" points="403.43,-439.99 399.59,-430.12 396.44,-440.23 403.43,-439.99"/>
<text text-anchor="middle" x="432" y="-452.8" font-family="Arial" font-size="14.00">No conflict</text>
</g>
<!-- end -->
<g id="node18" class="node">
<title>end</title>
<path fill="none" stroke="black" d="M240,-36C240,-36 210,-36 210,-36 204,-36 198,-30 198,-24 198,-24 198,-12 198,-12 198,-6 204,0 210,0 210,0 240,0 240,0 246,0 252,-6 252,-12 252,-12 252,-24 252,-24 252,-30 246,-36 240,-36"/>
<text text-anchor="middle" x="225" y="-14.3" font-family="Arial" font-size="14.00">End</text>
</g>
<!-- error_handling&#45;&gt;end -->
<g id="edge22" class="edge">
<title>error_handling&#45;&gt;end</title>
<path fill="none" stroke="black" d="M208.33,-392.91C210.37,-375.54 213,-348.52 213,-325 213,-325 213,-325 213,-90 213,-75.3 215.53,-59.13 218.27,-45.94"/>
<polygon fill="black" stroke="black" points="221.71,-46.6 220.46,-36.08 214.87,-45.08 221.71,-46.6"/>
<text text-anchor="middle" x="249.5" y="-203.8" font-family="Arial" font-size="14.00">Return error</text>
</g>
<!-- process_body -->
<g id="node14" class="node">
<title>process_body</title>
<path fill="none" stroke="black" d="M492.5,-342C492.5,-342 259.5,-342 259.5,-342 253.5,-342 247.5,-336 247.5,-330 247.5,-330 247.5,-318 247.5,-318 247.5,-312 253.5,-306 259.5,-306 259.5,-306 492.5,-306 492.5,-306 498.5,-306 504.5,-312 504.5,-318 504.5,-318 504.5,-330 504.5,-330 504.5,-336 498.5,-342 492.5,-342"/>
<text text-anchor="middle" x="376" y="-320.3" font-family="Arial" font-size="14.00">Process function body with fullBodyExpr</text>
</g>
<!-- setup_fn_block&#45;&gt;process_body -->
<g id="edge17" class="edge">
<title>setup_fn_block&#45;&gt;process_body</title>
<path fill="none" stroke="black" d="M394.35,-393.6C391.14,-381.63 386.83,-365.5 383.19,-351.89"/>
<polygon fill="black" stroke="black" points="386.53,-350.84 380.57,-342.08 379.77,-352.65 386.53,-350.84"/>
</g>
<!-- add_implicit_return -->
<g id="node15" class="node">
<title>add_implicit_return</title>
<path fill="none" stroke="black" d="M456.5,-269C456.5,-269 295.5,-269 295.5,-269 289.5,-269 283.5,-263 283.5,-257 283.5,-257 283.5,-245 283.5,-245 283.5,-239 289.5,-233 295.5,-233 295.5,-233 456.5,-233 456.5,-233 462.5,-233 468.5,-239 468.5,-245 468.5,-245 468.5,-257 468.5,-257 468.5,-263 462.5,-269 456.5,-269"/>
<text text-anchor="middle" x="376" y="-247.3" font-family="Arial" font-size="14.00">Add implicit return if needed</text>
</g>
<!-- process_body&#45;&gt;add_implicit_return -->
<g id="edge18" class="edge">
<title>process_body&#45;&gt;add_implicit_return</title>
<path fill="none" stroke="black" d="M376,-305.81C376,-297.79 376,-288.05 376,-279.07"/>
<polygon fill="black" stroke="black" points="379.5,-279.03 376,-269.03 372.5,-279.03 379.5,-279.03"/>
</g>
<!-- create_func_inst -->
<g id="node16" class="node">
<title>create_func_inst</title>
<path fill="none" stroke="black" d="M471.5,-182C471.5,-182 280.5,-182 280.5,-182 274.5,-182 268.5,-176 268.5,-170 268.5,-170 268.5,-158 268.5,-158 268.5,-152 274.5,-146 280.5,-146 280.5,-146 471.5,-146 471.5,-146 477.5,-146 483.5,-152 483.5,-158 483.5,-158 483.5,-170 483.5,-170 483.5,-176 477.5,-182 471.5,-182"/>
<text text-anchor="middle" x="376" y="-160.3" font-family="Arial" font-size="14.00">Create func_inst with parameters</text>
</g>
<!-- add_implicit_return&#45;&gt;create_func_inst -->
<g id="edge19" class="edge">
<title>add_implicit_return&#45;&gt;create_func_inst</title>
<path fill="none" stroke="black" d="M376,-232.8C376,-221.16 376,-205.55 376,-192.24"/>
<polygon fill="black" stroke="black" points="379.5,-192.18 376,-182.18 372.5,-192.18 379.5,-192.18"/>
</g>
<!-- create_func_inst&#45;&gt;finalize_decl -->
<g id="edge20" class="edge">
<title>create_func_inst&#45;&gt;finalize_decl</title>
<path fill="none" stroke="black" d="M376,-145.81C376,-137.79 376,-128.05 376,-119.07"/>
<polygon fill="black" stroke="black" points="379.5,-119.03 376,-109.03 372.5,-119.03 379.5,-119.03"/>
</g>
<!-- finalize_decl&#45;&gt;end -->
<g id="edge21" class="edge">
<title>finalize_decl&#45;&gt;end</title>
<path fill="none" stroke="black" d="M339.83,-72.99C316.11,-61.84 285.2,-47.3 261.42,-36.13"/>
<polygon fill="black" stroke="black" points="262.9,-32.95 252.36,-31.87 259.92,-39.29 262.9,-32.95"/>
</g>
</g>
</svg>
