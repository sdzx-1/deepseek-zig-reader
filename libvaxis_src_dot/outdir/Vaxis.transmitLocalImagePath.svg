<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: transmitLocalImagePath Pages: 1 -->
<svg width="850pt" height="743pt"
 viewBox="0.00 0.00 850.24 743.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 739)">
<title>transmitLocalImagePath</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-739 846.24,-739 846.24,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<path fill="none" stroke="black" d="M466.24,-735C466.24,-735 436.24,-735 436.24,-735 430.24,-735 424.24,-729 424.24,-723 424.24,-723 424.24,-711 424.24,-711 424.24,-705 430.24,-699 436.24,-699 436.24,-699 466.24,-699 466.24,-699 472.24,-699 478.24,-705 478.24,-711 478.24,-711 478.24,-723 478.24,-723 478.24,-729 472.24,-735 466.24,-735"/>
<text text-anchor="middle" x="451.24" y="-713.3" font-family="Times,serif" font-size="14.00">开始</text>
</g>
<!-- check_caps -->
<g id="node2" class="node">
<title>check_caps</title>
<path fill="none" stroke="black" d="M547.24,-662C547.24,-662 355.24,-662 355.24,-662 349.24,-662 343.24,-656 343.24,-650 343.24,-650 343.24,-638 343.24,-638 343.24,-632 349.24,-626 355.24,-626 355.24,-626 547.24,-626 547.24,-626 553.24,-626 559.24,-632 559.24,-638 559.24,-638 559.24,-650 559.24,-650 559.24,-656 553.24,-662 547.24,-662"/>
<text text-anchor="middle" x="451.24" y="-640.3" font-family="Times,serif" font-size="14.00">检查 self.caps.kitty_graphics</text>
</g>
<!-- start&#45;&gt;check_caps -->
<g id="edge1" class="edge">
<title>start&#45;&gt;check_caps</title>
<path fill="none" stroke="black" d="M451.24,-698.81C451.24,-690.79 451.24,-681.05 451.24,-672.07"/>
<polygon fill="black" stroke="black" points="454.74,-672.03 451.24,-662.03 447.74,-672.03 454.74,-672.03"/>
</g>
<!-- error_caps -->
<g id="node3" class="node">
<title>error_caps</title>
<ellipse fill="none" stroke="red" cx="159.24" cy="-557" rx="159.47" ry="18"/>
<text text-anchor="middle" x="159.24" y="-553.3" font-family="Times,serif" font-size="14.00">返回 error.NoGraphicsCapability</text>
</g>
<!-- check_caps&#45;&gt;error_caps -->
<g id="edge2" class="edge">
<title>check_caps&#45;&gt;error_caps</title>
<path fill="none" stroke="black" d="M392.5,-625.9C343.63,-611.68 274.16,-591.45 223.75,-576.78"/>
<polygon fill="black" stroke="black" points="224.51,-573.36 213.93,-573.92 222.56,-580.08 224.51,-573.36"/>
<text text-anchor="middle" x="330.74" y="-596.8" font-family="Times,serif" font-size="14.00">否</text>
</g>
<!-- calc_size -->
<g id="node4" class="node">
<title>calc_size</title>
<path fill="none" stroke="black" d="M557.74,-575C557.74,-575 348.74,-575 348.74,-575 342.74,-575 336.74,-569 336.74,-563 336.74,-563 336.74,-551 336.74,-551 336.74,-545 342.74,-539 348.74,-539 348.74,-539 557.74,-539 557.74,-539 563.74,-539 569.74,-545 569.74,-551 569.74,-551 569.74,-563 569.74,-563 569.74,-569 563.74,-575 557.74,-575"/>
<text text-anchor="middle" x="453.24" y="-553.3" font-family="Times,serif" font-size="14.00">计算 base64 编码后的尺寸 (size)</text>
</g>
<!-- check_caps&#45;&gt;calc_size -->
<g id="edge3" class="edge">
<title>check_caps&#45;&gt;calc_size</title>
<path fill="none" stroke="black" d="M451.64,-625.8C451.91,-614.16 452.28,-598.55 452.6,-585.24"/>
<polygon fill="black" stroke="black" points="456.1,-585.26 452.83,-575.18 449.1,-585.09 456.1,-585.26"/>
<text text-anchor="middle" x="460.74" y="-596.8" font-family="Times,serif" font-size="14.00">是</text>
</g>
<!-- return_image -->
<g id="node15" class="node">
<title>return_image</title>
<ellipse fill="none" stroke="green" cx="685.24" cy="-644" rx="90.98" ry="18"/>
<text text-anchor="middle" x="685.24" y="-640.3" font-family="Times,serif" font-size="14.00">返回 Image 结构体</text>
</g>
<!-- check_caps&#45;&gt;return_image -->
<!-- check_size -->
<g id="node5" class="node">
<title>check_size</title>
<path fill="none" stroke="black" d="M501.74,-502C501.74,-502 404.74,-502 404.74,-502 398.74,-502 392.74,-496 392.74,-490 392.74,-490 392.74,-478 392.74,-478 392.74,-472 398.74,-466 404.74,-466 404.74,-466 501.74,-466 501.74,-466 507.74,-466 513.74,-472 513.74,-478 513.74,-478 513.74,-490 513.74,-490 513.74,-496 507.74,-502 501.74,-502"/>
<text text-anchor="middle" x="453.24" y="-480.3" font-family="Times,serif" font-size="14.00">size &gt;= 4096?</text>
</g>
<!-- calc_size&#45;&gt;check_size -->
<g id="edge4" class="edge">
<title>calc_size&#45;&gt;check_size</title>
<path fill="none" stroke="black" d="M453.24,-538.81C453.24,-530.79 453.24,-521.05 453.24,-512.07"/>
<polygon fill="black" stroke="black" points="456.74,-512.03 453.24,-502.03 449.74,-512.03 456.74,-512.03"/>
</g>
<!-- error_size -->
<g id="node6" class="node">
<title>error_size</title>
<ellipse fill="none" stroke="red" cx="284.24" cy="-397" rx="117.78" ry="18"/>
<text text-anchor="middle" x="284.24" y="-393.3" font-family="Times,serif" font-size="14.00">返回 error.PathTooLong</text>
</g>
<!-- check_size&#45;&gt;error_size -->
<g id="edge5" class="edge">
<title>check_size&#45;&gt;error_size</title>
<path fill="none" stroke="black" d="M419.04,-465.8C392.06,-452.23 354.32,-433.25 325.63,-418.82"/>
<polygon fill="black" stroke="black" points="327.17,-415.68 316.66,-414.31 324.03,-421.93 327.17,-415.68"/>
<text text-anchor="middle" x="386.74" y="-436.8" font-family="Times,serif" font-size="14.00">是</text>
</g>
<!-- alloc_buf -->
<g id="node7" class="node">
<title>alloc_buf</title>
<path fill="none" stroke="black" d="M522.74,-415C522.74,-415 431.74,-415 431.74,-415 425.74,-415 419.74,-409 419.74,-403 419.74,-403 419.74,-391 419.74,-391 419.74,-385 425.74,-379 431.74,-379 431.74,-379 522.74,-379 522.74,-379 528.74,-379 534.74,-385 534.74,-391 534.74,-391 534.74,-403 534.74,-403 534.74,-409 528.74,-415 522.74,-415"/>
<text text-anchor="middle" x="477.24" y="-393.3" font-family="Times,serif" font-size="14.00">分配缓冲区 buf</text>
</g>
<!-- check_size&#45;&gt;alloc_buf -->
<g id="edge6" class="edge">
<title>check_size&#45;&gt;alloc_buf</title>
<path fill="none" stroke="black" d="M458.09,-465.8C461.41,-454.05 465.87,-438.24 469.66,-424.84"/>
<polygon fill="black" stroke="black" points="473.04,-425.75 472.39,-415.18 466.3,-423.85 473.04,-425.75"/>
<text text-anchor="middle" x="474.74" y="-436.8" font-family="Times,serif" font-size="14.00">否</text>
</g>
<!-- encode_payload -->
<g id="node8" class="node">
<title>encode_payload</title>
<path fill="none" stroke="black" d="M545.74,-342C545.74,-342 408.74,-342 408.74,-342 402.74,-342 396.74,-336 396.74,-330 396.74,-330 396.74,-318 396.74,-318 396.74,-312 402.74,-306 408.74,-306 408.74,-306 545.74,-306 545.74,-306 551.74,-306 557.74,-312 557.74,-318 557.74,-318 557.74,-330 557.74,-330 557.74,-336 551.74,-342 545.74,-342"/>
<text text-anchor="middle" x="477.24" y="-320.3" font-family="Times,serif" font-size="14.00">Base64 编码 payload</text>
</g>
<!-- alloc_buf&#45;&gt;encode_payload -->
<g id="edge7" class="edge">
<title>alloc_buf&#45;&gt;encode_payload</title>
<path fill="none" stroke="black" d="M477.24,-378.81C477.24,-370.79 477.24,-361.05 477.24,-352.07"/>
<polygon fill="black" stroke="black" points="480.74,-352.03 477.24,-342.03 473.74,-352.03 480.74,-352.03"/>
</g>
<!-- free_buf -->
<g id="node9" class="node">
<title>free_buf</title>
<polygon fill="none" stroke="black" stroke-dasharray="5,2" points="560.74,-269 393.74,-269 393.74,-233 560.74,-233 560.74,-269"/>
<text text-anchor="middle" x="477.24" y="-247.3" font-family="Times,serif" font-size="14.00">释放缓冲区 buf (defer)</text>
</g>
<!-- encode_payload&#45;&gt;free_buf -->
<g id="edge8" class="edge">
<title>encode_payload&#45;&gt;free_buf</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M477.24,-305.81C477.24,-297.79 477.24,-288.05 477.24,-279.07"/>
<polygon fill="black" stroke="black" points="480.74,-279.03 477.24,-269.03 473.74,-279.03 480.74,-279.03"/>
</g>
<!-- determine_medium -->
<g id="node10" class="node">
<title>determine_medium</title>
<path fill="none" stroke="black" d="M559.24,-196C559.24,-196 395.24,-196 395.24,-196 389.24,-196 383.24,-190 383.24,-184 383.24,-184 383.24,-172 383.24,-172 383.24,-166 389.24,-160 395.24,-160 395.24,-160 559.24,-160 559.24,-160 565.24,-160 571.24,-166 571.24,-172 571.24,-172 571.24,-184 571.24,-184 571.24,-190 565.24,-196 559.24,-196"/>
<text text-anchor="middle" x="477.24" y="-174.3" font-family="Times,serif" font-size="14.00">确定 medium_char (f/t/s)</text>
</g>
<!-- free_buf&#45;&gt;determine_medium -->
<g id="edge9" class="edge">
<title>free_buf&#45;&gt;determine_medium</title>
<path fill="none" stroke="black" d="M477.24,-232.81C477.24,-224.79 477.24,-215.05 477.24,-206.07"/>
<polygon fill="black" stroke="black" points="480.74,-206.03 477.24,-196.03 473.74,-206.03 480.74,-206.03"/>
</g>
<!-- check_format -->
<g id="node11" class="node">
<title>check_format</title>
<path fill="none" stroke="black" d="M546.24,-123C546.24,-123 440.24,-123 440.24,-123 434.24,-123 428.24,-117 428.24,-111 428.24,-111 428.24,-99 428.24,-99 428.24,-93 434.24,-87 440.24,-87 440.24,-87 546.24,-87 546.24,-87 552.24,-87 558.24,-93 558.24,-99 558.24,-99 558.24,-111 558.24,-111 558.24,-117 552.24,-123 546.24,-123"/>
<text text-anchor="middle" x="493.24" y="-101.3" font-family="Times,serif" font-size="14.00">根据 format 分支</text>
</g>
<!-- determine_medium&#45;&gt;check_format -->
<g id="edge10" class="edge">
<title>determine_medium&#45;&gt;check_format</title>
<path fill="none" stroke="black" d="M481.11,-159.81C482.92,-151.79 485.11,-142.05 487.14,-133.07"/>
<polygon fill="black" stroke="black" points="490.61,-133.55 489.4,-123.03 483.79,-132.01 490.61,-133.55"/>
</g>
<!-- print_rgb -->
<g id="node12" class="node">
<title>print_rgb</title>
<path fill="none" stroke="black" d="M498.74,-36C498.74,-36 379.74,-36 379.74,-36 373.74,-36 367.74,-30 367.74,-24 367.74,-24 367.74,-12 367.74,-12 367.74,-6 373.74,0 379.74,0 379.74,0 498.74,0 498.74,0 504.74,0 510.74,-6 510.74,-12 510.74,-12 510.74,-24 510.74,-24 510.74,-30 504.74,-36 498.74,-36"/>
<text text-anchor="middle" x="439.24" y="-14.3" font-family="Times,serif" font-size="14.00">打印 RGB 控制序列</text>
</g>
<!-- check_format&#45;&gt;print_rgb -->
<g id="edge11" class="edge">
<title>check_format&#45;&gt;print_rgb</title>
<path fill="none" stroke="black" d="M482.31,-86.8C474.62,-74.7 464.21,-58.3 455.54,-44.67"/>
<polygon fill="black" stroke="black" points="458.46,-42.74 450.15,-36.18 452.56,-46.49 458.46,-42.74"/>
<text text-anchor="middle" x="485.24" y="-57.8" font-family="Times,serif" font-size="14.00">.rgb</text>
</g>
<!-- print_rgba -->
<g id="node13" class="node">
<title>print_rgba</title>
<path fill="none" stroke="black" d="M830.24,-36C830.24,-36 702.24,-36 702.24,-36 696.24,-36 690.24,-30 690.24,-24 690.24,-24 690.24,-12 690.24,-12 690.24,-6 696.24,0 702.24,0 702.24,0 830.24,0 830.24,0 836.24,0 842.24,-6 842.24,-12 842.24,-12 842.24,-24 842.24,-24 842.24,-30 836.24,-36 830.24,-36"/>
<text text-anchor="middle" x="766.24" y="-14.3" font-family="Times,serif" font-size="14.00">打印 RGBA 控制序列</text>
</g>
<!-- check_format&#45;&gt;print_rgba -->
<g id="edge12" class="edge">
<title>check_format&#45;&gt;print_rgba</title>
<path fill="none" stroke="black" d="M548.15,-86.9C592.49,-73.1 654.96,-53.65 701.69,-39.1"/>
<polygon fill="black" stroke="black" points="702.9,-42.39 711.41,-36.07 700.82,-35.7 702.9,-42.39"/>
<text text-anchor="middle" x="665.24" y="-57.8" font-family="Times,serif" font-size="14.00">.rgba</text>
</g>
<!-- print_png -->
<g id="node14" class="node">
<title>print_png</title>
<path fill="none" stroke="black" d="M659.74,-36C659.74,-36 540.74,-36 540.74,-36 534.74,-36 528.74,-30 528.74,-24 528.74,-24 528.74,-12 528.74,-12 528.74,-6 534.74,0 540.74,0 540.74,0 659.74,0 659.74,0 665.74,0 671.74,-6 671.74,-12 671.74,-12 671.74,-24 671.74,-24 671.74,-30 665.74,-36 659.74,-36"/>
<text text-anchor="middle" x="600.24" y="-14.3" font-family="Times,serif" font-size="14.00">打印 PNG 控制序列</text>
</g>
<!-- check_format&#45;&gt;print_png -->
<g id="edge13" class="edge">
<title>check_format&#45;&gt;print_png</title>
<path fill="none" stroke="black" d="M514.89,-86.8C530.84,-74.13 552.74,-56.73 570.35,-42.74"/>
<polygon fill="black" stroke="black" points="572.96,-45.14 578.62,-36.18 568.61,-39.66 572.96,-45.14"/>
<text text-anchor="middle" x="569.24" y="-57.8" font-family="Times,serif" font-size="14.00">.png</text>
</g>
<!-- print_rgb&#45;&gt;return_image -->
<g id="edge14" class="edge">
<title>print_rgb&#45;&gt;return_image</title>
<path fill="none" stroke="black" d="M510.82,-34.52C546.3,-42.49 582.26,-51.13 585.24,-54 601.86,-70.01 599.24,-80.92 599.24,-104 599.24,-558 599.24,-558 599.24,-558 599.24,-585.43 621.64,-607 643.57,-621.55"/>
<polygon fill="black" stroke="black" points="641.9,-624.63 652.23,-626.97 645.61,-618.7 641.9,-624.63"/>
</g>
<!-- print_rgba&#45;&gt;return_image -->
<g id="edge15" class="edge">
<title>print_rgba&#45;&gt;return_image</title>
<path fill="none" stroke="black" d="M759.03,-36.24C752.62,-53.18 744.24,-79.92 744.24,-104 744.24,-558 744.24,-558 744.24,-558 744.24,-581.77 728.47,-603.68 713.23,-619.3"/>
<polygon fill="black" stroke="black" points="710.61,-616.97 705.87,-626.45 715.49,-622 710.61,-616.97"/>
</g>
<!-- print_png&#45;&gt;return_image -->
<g id="edge16" class="edge">
<title>print_png&#45;&gt;return_image</title>
<path fill="none" stroke="black" d="M648.85,-36.06C657.23,-40.8 665.18,-46.7 671.24,-54 685.98,-71.76 685.24,-80.92 685.24,-104 685.24,-558 685.24,-558 685.24,-558 685.24,-577.25 685.24,-598.95 685.24,-615.6"/>
<polygon fill="black" stroke="black" points="681.74,-615.74 685.24,-625.74 688.74,-615.74 681.74,-615.74"/>
</g>
</g>
</svg>
