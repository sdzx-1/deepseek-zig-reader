<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: flowchart Pages: 1 -->
<svg width="842pt" height="911pt"
 viewBox="0.00 0.00 842.00 911.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 907)">
<title>flowchart</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-907 838,-907 838,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_naked</title>
<polygon fill="none" stroke="black" points="543,-281 543,-361 733,-361 733,-281 543,-281"/>
<text text-anchor="middle" x="638" y="-345.8" font-family="Times,serif" font-size="14.00">case .naked</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_sysv_win</title>
<polygon fill="none" stroke="black" points="243,-8 243,-538 535,-538 535,-8 243,-8"/>
<text text-anchor="middle" x="389" y="-522.8" font-family="Times,serif" font-size="14.00">case .x86_64_sysv/.x86_64_win</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_auto</title>
<polygon fill="none" stroke="black" points="8,-174 8,-538 232,-538 232,-174 8,-174"/>
<text text-anchor="middle" x="120" y="-522.8" font-family="Times,serif" font-size="14.00">case .auto</text>
</g>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<polygon fill="none" stroke="black" points="664.5,-903 443.5,-903 443.5,-867 664.5,-867 664.5,-903"/>
<text text-anchor="middle" x="554" y="-882.5" font-family="Courier,monospace" font-size="10.00">开始 resolveCallingConventionValues</text>
</g>
<!-- init_vars -->
<g id="node2" class="node">
<title>init_vars</title>
<polygon fill="none" stroke="black" points="613.5,-830 494.5,-830 494.5,-794 613.5,-794 613.5,-830"/>
<text text-anchor="middle" x="554" y="-815" font-family="Courier,monospace" font-size="10.00">初始化变量</text>
<text text-anchor="middle" x="554" y="-804" font-family="Courier,monospace" font-size="10.00">(pt, zcu, ip, cc)</text>
</g>
<!-- start&#45;&gt;init_vars -->
<g id="edge1" class="edge">
<title>start&#45;&gt;init_vars</title>
<path fill="none" stroke="black" d="M554,-866.81C554,-858.79 554,-849.05 554,-840.07"/>
<polygon fill="black" stroke="black" points="557.5,-840.03 554,-830.03 550.5,-840.03 557.5,-840.03"/>
</g>
<!-- alloc_param_types -->
<g id="node3" class="node">
<title>alloc_param_types</title>
<polygon fill="none" stroke="black" points="666,-757 442,-757 442,-721 666,-721 666,-757"/>
<text text-anchor="middle" x="554" y="-742" font-family="Courier,monospace" font-size="10.00">分配 param_types 内存</text>
<text text-anchor="middle" x="554" y="-731" font-family="Courier,monospace" font-size="10.00">合并 fn_info.param_types 和 var_args</text>
</g>
<!-- init_vars&#45;&gt;alloc_param_types -->
<g id="edge2" class="edge">
<title>init_vars&#45;&gt;alloc_param_types</title>
<path fill="none" stroke="black" d="M554,-793.81C554,-785.79 554,-776.05 554,-767.07"/>
<polygon fill="black" stroke="black" points="557.5,-767.03 554,-757.03 550.5,-767.03 557.5,-767.03"/>
</g>
<!-- init_result -->
<g id="node4" class="node">
<title>init_result</title>
<polygon fill="none" stroke="black" points="615,-684 493,-684 493,-648 615,-648 615,-684"/>
<text text-anchor="middle" x="554" y="-669" font-family="Courier,monospace" font-size="10.00">初始化 result 结构体</text>
<text text-anchor="middle" x="554" y="-658" font-family="Courier,monospace" font-size="10.00">分配 args 数组</text>
</g>
<!-- alloc_param_types&#45;&gt;init_result -->
<g id="edge3" class="edge">
<title>alloc_param_types&#45;&gt;init_result</title>
<path fill="none" stroke="black" d="M554,-720.81C554,-712.79 554,-703.05 554,-694.07"/>
<polygon fill="black" stroke="black" points="557.5,-694.03 554,-684.03 550.5,-694.03 557.5,-694.03"/>
</g>
<!-- switch_cc -->
<g id="node5" class="node">
<title>switch_cc</title>
<polygon fill="none" stroke="black" points="554,-611 439.23,-593 554,-575 668.77,-593 554,-611"/>
<text text-anchor="middle" x="554" y="-590.5" font-family="Courier,monospace" font-size="10.00">根据调用约定(cc)选择分支</text>
</g>
<!-- init_result&#45;&gt;switch_cc -->
<g id="edge4" class="edge">
<title>init_result&#45;&gt;switch_cc</title>
<path fill="none" stroke="black" d="M554,-647.81C554,-639.79 554,-630.05 554,-621.07"/>
<polygon fill="black" stroke="black" points="557.5,-621.03 554,-611.03 550.5,-621.03 557.5,-621.03"/>
</g>
<!-- naked_checks -->
<g id="node6" class="node">
<title>naked_checks</title>
<polygon fill="none" stroke="black" points="724.5,-330 551.5,-330 551.5,-289 724.5,-289 724.5,-330"/>
<text text-anchor="middle" x="638" y="-318" font-family="Courier,monospace" font-size="10.00">断言 args.len == 0</text>
<text text-anchor="middle" x="638" y="-307" font-family="Courier,monospace" font-size="10.00">设置 return_value = unreach</text>
<text text-anchor="middle" x="638" y="-296" font-family="Courier,monospace" font-size="10.00">根据架构设置 stack_align</text>
</g>
<!-- switch_cc&#45;&gt;naked_checks -->
<g id="edge5" class="edge">
<title>switch_cc&#45;&gt;naked_checks</title>
<path fill="none" stroke="black" d="M588.43,-580.39C599.32,-574.99 610.27,-567.4 617,-557 660.59,-489.64 651.75,-389.34 643.78,-340.04"/>
<polygon fill="black" stroke="black" points="647.21,-339.3 642.06,-330.04 640.31,-340.49 647.21,-339.3"/>
<text text-anchor="middle" x="667.5" y="-445" font-family="Courier,monospace" font-size="10.00">.naked</text>
</g>
<!-- setup_ret -->
<g id="node7" class="node">
<title>setup_ret</title>
<polygon fill="none" stroke="black" points="525,-507 401,-507 401,-471 525,-471 525,-507"/>
<text text-anchor="middle" x="463" y="-492" font-family="Courier,monospace" font-size="10.00">初始化返回寄存器计数器</text>
<text text-anchor="middle" x="463" y="-481" font-family="Courier,monospace" font-size="10.00">设置 stack_align</text>
</g>
<!-- switch_cc&#45;&gt;setup_ret -->
<g id="edge6" class="edge">
<title>switch_cc&#45;&gt;setup_ret</title>
<path fill="none" stroke="black" d="M508.49,-581.93C494.78,-576.7 481,-568.83 472,-557 463.48,-545.8 460.96,-530.39 460.7,-517.17"/>
<polygon fill="black" stroke="black" points="464.2,-517.23 460.9,-507.16 457.2,-517.09 464.2,-517.23"/>
<text text-anchor="middle" x="544.5" y="-549" font-family="Courier,monospace" font-size="10.00">.x86_64_sysv/.x86_64_win</text>
</g>
<!-- setup_auto -->
<g id="node13" class="node">
<title>setup_auto</title>
<polygon fill="none" stroke="black" points="203,-507 79,-507 79,-471 203,-471 203,-507"/>
<text text-anchor="middle" x="141" y="-492" font-family="Courier,monospace" font-size="10.00">设置 stack_align</text>
<text text-anchor="middle" x="141" y="-481" font-family="Courier,monospace" font-size="10.00">处理错误返回追踪寄存器</text>
</g>
<!-- switch_cc&#45;&gt;setup_auto -->
<g id="edge7" class="edge">
<title>switch_cc&#45;&gt;setup_auto</title>
<path fill="none" stroke="black" d="M484.43,-585.84C419.68,-578.76 321.1,-564.54 239,-538 218.58,-531.4 197.05,-521.25 179.38,-511.97"/>
<polygon fill="black" stroke="black" points="180.99,-508.86 170.53,-507.23 177.69,-515.03 180.99,-508.86"/>
<text text-anchor="middle" x="321.5" y="-549" font-family="Courier,monospace" font-size="10.00">.auto</text>
</g>
<!-- final_adjust -->
<g id="node17" class="node">
<title>final_adjust</title>
<polygon fill="none" stroke="black" points="709.5,-230 552.5,-230 552.5,-194 709.5,-194 709.5,-230"/>
<text text-anchor="middle" x="631" y="-209.5" font-family="Courier,monospace" font-size="10.00">对齐调整 stack_byte_count</text>
</g>
<!-- switch_cc&#45;&gt;final_adjust -->
<g id="edge8" class="edge">
<title>switch_cc&#45;&gt;final_adjust</title>
<path fill="none" stroke="black" d="M620.26,-585.38C678.15,-575.51 753,-550.95 753,-490 753,-490 753,-490 753,-308.5 753,-273.61 721.69,-249.56 690.79,-234.33"/>
<polygon fill="black" stroke="black" points="692.22,-231.13 681.68,-230.07 689.26,-237.47 692.22,-231.13"/>
<text text-anchor="middle" x="793.5" y="-403.5" font-family="Courier,monospace" font-size="10.00">其他cc（未实现）</text>
</g>
<!-- naked_checks&#45;&gt;final_adjust -->
<g id="edge9" class="edge">
<title>naked_checks&#45;&gt;final_adjust</title>
<path fill="none" stroke="black" d="M636.55,-288.71C635.52,-274.69 634.13,-255.69 633,-240.23"/>
<polygon fill="black" stroke="black" points="636.48,-239.92 632.26,-230.2 629.5,-240.43 636.48,-239.92"/>
</g>
<!-- ret_processing -->
<g id="node8" class="node">
<title>ret_processing</title>
<polygon fill="none" stroke="black" points="526.5,-424 395.5,-424 395.5,-388 526.5,-388 526.5,-424"/>
<text text-anchor="middle" x="461" y="-409" font-family="Courier,monospace" font-size="10.00">处理返回值类型分类</text>
<text text-anchor="middle" x="461" y="-398" font-family="Courier,monospace" font-size="10.00">(整数/SSE/X87/内存等)</text>
</g>
<!-- setup_ret&#45;&gt;ret_processing -->
<g id="edge10" class="edge">
<title>setup_ret&#45;&gt;ret_processing</title>
<path fill="none" stroke="black" d="M462.58,-470.82C462.31,-460.19 461.97,-446.31 461.67,-434.2"/>
<polygon fill="black" stroke="black" points="465.17,-434.06 461.42,-424.15 458.17,-434.24 465.17,-434.06"/>
</g>
<!-- param_loop -->
<g id="node9" class="node">
<title>param_loop</title>
<polygon fill="none" stroke="black" points="517.5,-327.5 422.5,-327.5 422.5,-291.5 517.5,-291.5 517.5,-327.5"/>
<text text-anchor="middle" x="470" y="-307" font-family="Courier,monospace" font-size="10.00">循环处理每个参数</text>
</g>
<!-- ret_processing&#45;&gt;param_loop -->
<g id="edge11" class="edge">
<title>ret_processing&#45;&gt;param_loop</title>
<path fill="none" stroke="black" d="M462.65,-387.67C463.97,-373.81 465.84,-354.13 467.37,-338.11"/>
<polygon fill="black" stroke="black" points="470.9,-338.01 468.36,-327.72 463.93,-337.35 470.9,-338.01"/>
</g>
<!-- param_classes -->
<g id="node10" class="node">
<title>param_classes</title>
<polygon fill="none" stroke="black" points="379,-242 251,-212 379,-182 507,-212 379,-242"/>
<text text-anchor="middle" x="379" y="-215" font-family="Courier,monospace" font-size="10.00">分类参数类型</text>
<text text-anchor="middle" x="379" y="-204" font-family="Courier,monospace" font-size="10.00">(integer/sse/x87等)</text>
</g>
<!-- param_loop&#45;&gt;param_classes -->
<g id="edge12" class="edge">
<title>param_loop&#45;&gt;param_classes</title>
<path fill="none" stroke="black" d="M453.73,-291.43C441.25,-278.33 423.69,-259.9 408.73,-244.2"/>
<polygon fill="black" stroke="black" points="411.05,-241.57 401.62,-236.74 405.99,-246.4 411.05,-241.57"/>
</g>
<!-- param_loop&#45;&gt;final_adjust -->
<g id="edge16" class="edge">
<title>param_loop&#45;&gt;final_adjust</title>
<path fill="none" stroke="black" d="M498.78,-291.43C525.26,-275.72 564.68,-252.34 593.59,-235.19"/>
<polygon fill="black" stroke="black" points="595.38,-238.2 602.19,-230.09 591.81,-232.18 595.38,-238.2"/>
<text text-anchor="middle" x="570" y="-263" font-family="Courier,monospace" font-size="10.00">处理完成</text>
</g>
<!-- reg_alloc -->
<g id="node11" class="node">
<title>reg_alloc</title>
<polygon fill="none" stroke="black" points="445,-135 341,-135 341,-99 445,-99 445,-135"/>
<text text-anchor="middle" x="393" y="-114.5" font-family="Courier,monospace" font-size="10.00">分配寄存器或栈空间</text>
</g>
<!-- param_classes&#45;&gt;reg_alloc -->
<g id="edge13" class="edge">
<title>param_classes&#45;&gt;reg_alloc</title>
<path fill="none" stroke="black" d="M383.24,-182.84C385.03,-170.97 387.1,-157.2 388.87,-145.42"/>
<polygon fill="black" stroke="black" points="392.37,-145.67 390.4,-135.26 385.45,-144.62 392.37,-145.67"/>
<text text-anchor="middle" x="407" y="-156" font-family="Courier,monospace" font-size="10.00">根据类型</text>
</g>
<!-- update_stack -->
<g id="node12" class="node">
<title>update_stack</title>
<polygon fill="none" stroke="black" points="497.5,-52 402.5,-52 402.5,-16 497.5,-16 497.5,-52"/>
<text text-anchor="middle" x="450" y="-31.5" font-family="Courier,monospace" font-size="10.00">更新栈大小和对齐</text>
</g>
<!-- reg_alloc&#45;&gt;update_stack -->
<g id="edge14" class="edge">
<title>reg_alloc&#45;&gt;update_stack</title>
<path fill="none" stroke="black" d="M404.3,-98.83C410.09,-90.13 417.32,-79.43 424,-70 426.18,-66.91 428.51,-63.7 430.83,-60.53"/>
<polygon fill="black" stroke="black" points="433.75,-62.45 436.88,-52.33 428.12,-58.3 433.75,-62.45"/>
<text text-anchor="middle" x="448.5" y="-73" font-family="Courier,monospace" font-size="10.00">下一个参数</text>
</g>
<!-- update_stack&#45;&gt;param_loop -->
<g id="edge15" class="edge">
<title>update_stack&#45;&gt;param_loop</title>
<path fill="none" stroke="black" d="M462.13,-52.05C465.85,-57.64 469.8,-63.96 473,-70 496.39,-114.21 506.26,-124.94 516,-174 521.89,-203.64 525.01,-213.15 516,-242 511.29,-257.1 501.81,-271.78 492.68,-283.5"/>
<polygon fill="black" stroke="black" points="489.79,-281.51 486.17,-291.47 495.21,-285.94 489.79,-281.51"/>
<text text-anchor="middle" x="537.5" y="-156" font-family="Courier,monospace" font-size="10.00">下一个参数</text>
</g>
<!-- auto_ret -->
<g id="node14" class="node">
<title>auto_ret</title>
<polygon fill="none" stroke="black" points="191,-424 87,-424 87,-388 191,-388 191,-424"/>
<text text-anchor="middle" x="139" y="-409" font-family="Courier,monospace" font-size="10.00">处理返回值</text>
<text text-anchor="middle" x="139" y="-398" font-family="Courier,monospace" font-size="10.00">根据寄存器类型分配</text>
</g>
<!-- setup_auto&#45;&gt;auto_ret -->
<g id="edge17" class="edge">
<title>setup_auto&#45;&gt;auto_ret</title>
<path fill="none" stroke="black" d="M140.58,-470.82C140.31,-460.19 139.97,-446.31 139.67,-434.2"/>
<polygon fill="black" stroke="black" points="143.17,-434.06 139.42,-424.15 136.17,-434.24 143.17,-434.06"/>
</g>
<!-- auto_param_loop -->
<g id="node15" class="node">
<title>auto_param_loop</title>
<polygon fill="none" stroke="black" points="175.5,-327.5 80.5,-327.5 80.5,-291.5 175.5,-291.5 175.5,-327.5"/>
<text text-anchor="middle" x="128" y="-307" font-family="Courier,monospace" font-size="10.00">循环处理每个参数</text>
</g>
<!-- auto_ret&#45;&gt;auto_param_loop -->
<g id="edge18" class="edge">
<title>auto_ret&#45;&gt;auto_param_loop</title>
<path fill="none" stroke="black" d="M136.98,-387.67C135.37,-373.81 133.08,-354.13 131.21,-338.11"/>
<polygon fill="black" stroke="black" points="134.64,-337.25 130,-327.72 127.68,-338.06 134.64,-337.25"/>
</g>
<!-- auto_reg_check -->
<g id="node16" class="node">
<title>auto_reg_check</title>
<polygon fill="none" stroke="black" points="120,-242 16,-212 120,-182 224,-212 120,-242"/>
<text text-anchor="middle" x="120" y="-215" font-family="Courier,monospace" font-size="10.00">检查寄存器可用性</text>
<text text-anchor="middle" x="120" y="-204" font-family="Courier,monospace" font-size="10.00">分配寄存器或栈空间</text>
</g>
<!-- auto_param_loop&#45;&gt;auto_reg_check -->
<g id="edge19" class="edge">
<title>auto_param_loop&#45;&gt;auto_reg_check</title>
<path fill="none" stroke="black" d="M114.04,-291.21C109.98,-285.18 106.08,-278.12 104,-271 101.84,-263.61 102.25,-255.67 103.93,-248.11"/>
<polygon fill="black" stroke="black" points="107.3,-249.04 106.76,-238.46 100.58,-247.07 107.3,-249.04"/>
</g>
<!-- auto_param_loop&#45;&gt;final_adjust -->
<g id="edge21" class="edge">
<title>auto_param_loop&#45;&gt;final_adjust</title>
<path fill="none" stroke="black" d="M175.55,-295.46C195.09,-290.43 218.03,-284.95 239,-281 371.13,-256.13 407.71,-270.99 539,-242 550,-239.57 561.58,-236.41 572.67,-233.08"/>
<polygon fill="black" stroke="black" points="573.73,-236.42 582.26,-230.12 571.67,-229.73 573.73,-236.42"/>
<text text-anchor="middle" x="445" y="-263" font-family="Courier,monospace" font-size="10.00">处理完成</text>
</g>
<!-- auto_reg_check&#45;&gt;auto_param_loop -->
<g id="edge20" class="edge">
<title>auto_reg_check&#45;&gt;auto_param_loop</title>
<path fill="none" stroke="black" d="M121.76,-241.63C122.39,-251 123.16,-261.45 124,-271 124.29,-274.33 124.63,-277.82 124.97,-281.27"/>
<polygon fill="black" stroke="black" points="121.51,-281.76 126.03,-291.34 128.47,-281.03 121.51,-281.76"/>
<text text-anchor="middle" x="148.5" y="-263" font-family="Courier,monospace" font-size="10.00">下一个参数</text>
</g>
<!-- return -->
<g id="node18" class="node">
<title>return</title>
<polygon fill="none" stroke="black" points="687.5,-135 574.5,-135 574.5,-99 687.5,-99 687.5,-135"/>
<text text-anchor="middle" x="631" y="-114.5" font-family="Courier,monospace" font-size="10.00">返回 result 结构体</text>
</g>
<!-- final_adjust&#45;&gt;return -->
<g id="edge22" class="edge">
<title>final_adjust&#45;&gt;return</title>
<path fill="none" stroke="black" d="M631,-193.94C631,-180.39 631,-161.18 631,-145.47"/>
<polygon fill="black" stroke="black" points="634.5,-145.26 631,-135.26 627.5,-145.26 634.5,-145.26"/>
</g>
</g>
</svg>
