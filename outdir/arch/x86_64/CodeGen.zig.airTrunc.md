flowchart TD
    A[开始 airTrunc] --> B[获取dst_ty和src_ty的ABI大小]
    B --> C[解析源操作数src_mcv]
    C --> D{检查是否可重用寄存器?}
    D -->|是| E[直接使用src_mcv作为dst_mcv]
    D -->|否| F{目标大小<=8?}
    F -->|是| G[复制到寄存器]
    F -->|否| H{目标大小<=16且非向量?}
    H -->|是| I[分配寄存器对]
    H -->|否| J[分配内存/寄存器并复制]
    G --> K
    I --> K
    J --> K[确定dst_mcv]
    K --> L{目标类型是向量?}
    L -->|是| M[生成掩码并应用位操作]
    M --> N{处理高位截断}
    L -->|否| O{目标大小<=8?}
    O -->|是| P[截断寄存器高位]
    O -->|否| Q{目标大小<=16?}
    Q -->|是| R[截断高位寄存器]
    Q -->|否| S[无需额外截断]
    N --> T
    P --> T
    R --> T
    S --> T
    T[结束并返回结果]
    E --> T
