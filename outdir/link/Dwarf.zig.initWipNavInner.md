graph TD
    A[开始] --> B[初始化变量和日志记录]
    B --> C[检查nav_key类型]
    C -->|nav_key是extern?| D[忽略@extern]
    C -->|其他nav_key| E[获取unit和nav_gop]
    E --> F[检查nav_gop是否已存在]
    F -->|存在| G[清除现有条目]
    F -->|不存在| H[添加新条目]
    G --> I[初始化wip_nav结构体]
    H --> I
    I --> J{nav_key类型}
    J -->|else分支| K[处理变量/常量声明]
    K --> L[写入debug_info]
    L --> M[处理类型和地址]
    M --> N[根据decl.kind处理const或var]
    J -->|func分支| O[处理函数声明]
    O --> P[设置func属性和调试帧]
    P --> Q{调试帧格式}
    Q -->|debug_frame或eh_frame| R[生成对应格式的调试信息]
    Q -->|none| S[跳过调试帧处理]
    R --> T[写入函数类型和返回类型]
    T --> U[处理debug_line信息]
    U --> V[设置文件和列号]
    V --> W[更新PC和行号]
    W --> X[处理错误和资源释放]
    X --> Y[返回wip_nav]
    N --> X
    S --> X
    D --> X
