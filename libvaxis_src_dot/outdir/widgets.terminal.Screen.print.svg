<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: flowchart Pages: 1 -->
<svg width="621pt" height="867pt"
 viewBox="0.00 0.00 621.33 867.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 863)">
<title>flowchart</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-863 617.33,-863 617.33,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<ellipse fill="none" stroke="black" cx="221" cy="-841" rx="74.19" ry="18"/>
<text text-anchor="middle" x="221" y="-837.3" font-family="Helvetica,sans-Serif" font-size="14.00">开始 print 函数</text>
</g>
<!-- check_pending_wrap -->
<g id="node2" class="node">
<title>check_pending_wrap</title>
<path fill="none" stroke="black" d="M209.05,-784.88C209.05,-784.88 40.74,-769.12 40.74,-769.12 34.77,-768.56 34.77,-767.44 40.74,-766.88 40.74,-766.88 209.05,-751.12 209.05,-751.12 215.03,-750.56 226.97,-750.56 232.95,-751.12 232.95,-751.12 401.26,-766.88 401.26,-766.88 407.23,-767.44 407.23,-768.56 401.26,-769.12 401.26,-769.12 232.95,-784.88 232.95,-784.88 226.97,-785.44 215.03,-785.44 209.05,-784.88"/>
<text text-anchor="middle" x="221" y="-764.3" font-family="Helvetica,sans-Serif" font-size="14.00">cursor.pending_wrap 为真？</text>
</g>
<!-- start&#45;&gt;check_pending_wrap -->
<g id="edge1" class="edge">
<title>start&#45;&gt;check_pending_wrap</title>
<path fill="none" stroke="black" d="M221,-822.81C221,-814.79 221,-805.05 221,-796.07"/>
<polygon fill="black" stroke="black" points="224.5,-796.03 221,-786.03 217.5,-796.03 224.5,-796.03"/>
</g>
<!-- execute_index -->
<g id="node3" class="node">
<title>execute_index</title>
<path fill="none" stroke="black" d="M258,-699C258,-699 12,-699 12,-699 6,-699 0,-693 0,-687 0,-687 0,-673 0,-673 0,-667 6,-661 12,-661 12,-661 258,-661 258,-661 264,-661 270,-667 270,-673 270,-673 270,-687 270,-687 270,-693 264,-699 258,-699"/>
<text text-anchor="middle" x="135" y="-683.8" font-family="Helvetica,sans-Serif" font-size="14.00">执行 self.index()</text>
<text text-anchor="middle" x="135" y="-668.8" font-family="Helvetica,sans-Serif" font-size="14.00">设置 cursor.col = scrolling_region.left</text>
</g>
<!-- check_pending_wrap&#45;&gt;execute_index -->
<g id="edge2" class="edge">
<title>check_pending_wrap&#45;&gt;execute_index</title>
<path fill="none" stroke="black" d="M205.23,-751.23C192.67,-738.67 174.86,-720.86 160.32,-706.32"/>
<polygon fill="black" stroke="black" points="162.6,-703.65 153.05,-699.05 157.65,-708.6 162.6,-703.65"/>
<text text-anchor="middle" x="193.5" y="-720.8" font-family="Times,serif" font-size="14.00">是</text>
</g>
<!-- check_col_width -->
<g id="node4" class="node">
<title>check_col_width</title>
<path fill="none" stroke="black" d="M208.26,-621.52C208.26,-621.52 51.74,-588.48 51.74,-588.48 45.87,-587.24 45.87,-584.76 51.74,-583.52 51.74,-583.52 208.26,-550.48 208.26,-550.48 214.13,-549.24 225.87,-549.24 231.74,-550.48 231.74,-550.48 388.26,-583.52 388.26,-583.52 394.13,-584.76 394.13,-587.24 388.26,-588.48 388.26,-588.48 231.74,-621.52 231.74,-621.52 225.87,-622.76 214.13,-622.76 208.26,-621.52"/>
<text text-anchor="middle" x="220" y="-589.8" font-family="Helvetica,sans-Serif" font-size="14.00">cursor.col &gt;= width 或</text>
<text text-anchor="middle" x="220" y="-574.8" font-family="Helvetica,sans-Serif" font-size="14.00">cursor.row &gt;= height？</text>
</g>
<!-- check_pending_wrap&#45;&gt;check_col_width -->
<g id="edge3" class="edge">
<title>check_pending_wrap&#45;&gt;check_col_width</title>
<path fill="none" stroke="black" d="M239.87,-751.64C253.65,-739.12 271.22,-720.11 279,-699 284.84,-683.15 284.58,-676.94 279,-661 274.55,-648.27 266.88,-636.1 258.53,-625.43"/>
<polygon fill="black" stroke="black" points="261.11,-623.06 252.04,-617.58 255.72,-627.52 261.11,-623.06"/>
<text text-anchor="middle" x="291.5" y="-676.3" font-family="Times,serif" font-size="14.00">否</text>
</g>
<!-- execute_index&#45;&gt;check_col_width -->
<g id="edge4" class="edge">
<title>execute_index&#45;&gt;check_col_width</title>
<path fill="none" stroke="black" d="M151.79,-660.82C161.09,-650.76 173.01,-637.86 184.28,-625.66"/>
<polygon fill="black" stroke="black" points="186.97,-627.91 191.19,-618.19 181.83,-623.16 186.97,-627.91"/>
</g>
<!-- return_early -->
<g id="node5" class="node">
<title>return_early</title>
<ellipse fill="none" stroke="black" cx="129" cy="-425" rx="29.5" ry="18"/>
<text text-anchor="middle" x="129" y="-421.3" font-family="Helvetica,sans-Serif" font-size="14.00">返回</text>
</g>
<!-- check_col_width&#45;&gt;return_early -->
<g id="edge5" class="edge">
<title>check_col_width&#45;&gt;return_early</title>
<path fill="none" stroke="black" d="M200.92,-551.67C183.77,-521.69 158.94,-478.31 143.4,-451.16"/>
<polygon fill="black" stroke="black" points="146.32,-449.22 138.32,-442.28 140.25,-452.7 146.32,-449.22"/>
<text text-anchor="middle" x="195.5" y="-518.8" font-family="Times,serif" font-size="14.00">是</text>
</g>
<!-- calculate_i -->
<g id="node6" class="node">
<title>calculate_i</title>
<path fill="none" stroke="black" d="M429.5,-497C429.5,-497 250.5,-497 250.5,-497 244.5,-497 238.5,-491 238.5,-485 238.5,-485 238.5,-473 238.5,-473 238.5,-467 244.5,-461 250.5,-461 250.5,-461 429.5,-461 429.5,-461 435.5,-461 441.5,-467 441.5,-473 441.5,-473 441.5,-485 441.5,-485 441.5,-491 435.5,-497 429.5,-497"/>
<text text-anchor="middle" x="340" y="-475.3" font-family="Helvetica,sans-Serif" font-size="14.00">计算 i = (row * width) + col</text>
</g>
<!-- check_col_width&#45;&gt;calculate_i -->
<g id="edge6" class="edge">
<title>check_col_width&#45;&gt;calculate_i</title>
<path fill="none" stroke="black" d="M254.39,-554.91C273.01,-538.62 295.67,-518.78 313.01,-503.62"/>
<polygon fill="black" stroke="black" points="315.34,-506.23 320.56,-497.01 310.73,-500.96 315.34,-506.23"/>
<text text-anchor="middle" x="305.5" y="-518.8" font-family="Times,serif" font-size="14.00">否</text>
</g>
<!-- end -->
<g id="node11" class="node">
<title>end</title>
<ellipse fill="none" stroke="black" cx="105" cy="-18" rx="29.5" ry="18"/>
<text text-anchor="middle" x="105" y="-14.3" font-family="Helvetica,sans-Serif" font-size="14.00">结束</text>
</g>
<!-- return_early&#45;&gt;end -->
<!-- update_buf -->
<g id="node7" class="node">
<title>update_buf</title>
<path fill="none" stroke="black" d="M434,-389C434,-389 286,-389 286,-389 280,-389 274,-383 274,-377 274,-377 274,-318 274,-318 274,-312 280,-306 286,-306 286,-306 434,-306 434,-306 440,-306 446,-312 446,-318 446,-318 446,-377 446,-377 446,-383 440,-389 434,-389"/>
<text text-anchor="middle" x="360" y="-373.8" font-family="Helvetica,sans-Serif" font-size="14.00">更新 buf[i]:</text>
<text text-anchor="middle" x="360" y="-358.8" font-family="Helvetica,sans-Serif" font-size="14.00">&#45; 清空并写入 grapheme</text>
<text text-anchor="middle" x="360" y="-343.8" font-family="Helvetica,sans-Serif" font-size="14.00">&#45; 清空并写入 uri</text>
<text text-anchor="middle" x="360" y="-328.8" font-family="Helvetica,sans-Serif" font-size="14.00">&#45; 清空并写入 uri_id</text>
<text text-anchor="middle" x="360" y="-313.8" font-family="Helvetica,sans-Serif" font-size="14.00">&#45; 设置 style/width/dirty</text>
</g>
<!-- calculate_i&#45;&gt;update_buf -->
<g id="edge7" class="edge">
<title>calculate_i&#45;&gt;update_buf</title>
<path fill="none" stroke="black" d="M342.66,-460.8C345.08,-445.12 348.78,-421.15 352.14,-399.37"/>
<polygon fill="black" stroke="black" points="355.64,-399.65 353.71,-389.24 348.72,-398.58 355.64,-399.65"/>
</g>
<!-- check_wrap -->
<g id="node8" class="node">
<title>check_wrap</title>
<path fill="none" stroke="black" d="M355.03,-268.12C355.03,-268.12 132.8,-251.88 132.8,-251.88 126.82,-251.44 126.82,-250.56 132.8,-250.12 132.8,-250.12 355.03,-233.88 355.03,-233.88 361.02,-233.44 372.98,-233.44 378.97,-233.88 378.97,-233.88 601.2,-250.12 601.2,-250.12 607.18,-250.56 607.18,-251.44 601.2,-251.88 601.2,-251.88 378.97,-268.12 378.97,-268.12 372.98,-268.56 361.02,-268.56 355.03,-268.12"/>
<text text-anchor="middle" x="367" y="-247.3" font-family="Helvetica,sans-Serif" font-size="14.00">wrap 为真且 cursor.col &gt;= width&#45;1？</text>
</g>
<!-- update_buf&#45;&gt;check_wrap -->
<g id="edge8" class="edge">
<title>update_buf&#45;&gt;check_wrap</title>
<path fill="none" stroke="black" d="M363.01,-305.88C363.67,-296.97 364.35,-287.75 364.96,-279.5"/>
<polygon fill="black" stroke="black" points="368.47,-279.56 365.72,-269.33 361.49,-279.05 368.47,-279.56"/>
</g>
<!-- set_pending_wrap -->
<g id="node9" class="node">
<title>set_pending_wrap</title>
<path fill="none" stroke="black" d="M352.5,-182C352.5,-182 133.5,-182 133.5,-182 127.5,-182 121.5,-176 121.5,-170 121.5,-170 121.5,-158 121.5,-158 121.5,-152 127.5,-146 133.5,-146 133.5,-146 352.5,-146 352.5,-146 358.5,-146 364.5,-152 364.5,-158 364.5,-158 364.5,-170 364.5,-170 364.5,-176 358.5,-182 352.5,-182"/>
<text text-anchor="middle" x="243" y="-160.3" font-family="Helvetica,sans-Serif" font-size="14.00">设置 cursor.pending_wrap = true</text>
</g>
<!-- check_wrap&#45;&gt;set_pending_wrap -->
<g id="edge9" class="edge">
<title>check_wrap&#45;&gt;set_pending_wrap</title>
<path fill="none" stroke="black" d="M344.54,-234.61C325.44,-221.51 297.75,-202.53 276.11,-187.69"/>
<polygon fill="black" stroke="black" points="278.07,-184.8 267.84,-182.03 274.11,-190.57 278.07,-184.8"/>
<text text-anchor="middle" x="319.5" y="-203.8" font-family="Times,serif" font-size="14.00">是</text>
</g>
<!-- increment_col -->
<g id="node10" class="node">
<title>increment_col</title>
<path fill="none" stroke="black" d="M308.5,-109C308.5,-109 177.5,-109 177.5,-109 171.5,-109 165.5,-103 165.5,-97 165.5,-97 165.5,-85 165.5,-85 165.5,-79 171.5,-73 177.5,-73 177.5,-73 308.5,-73 308.5,-73 314.5,-73 320.5,-79 320.5,-85 320.5,-85 320.5,-97 320.5,-97 320.5,-103 314.5,-109 308.5,-109"/>
<text text-anchor="middle" x="243" y="-87.3" font-family="Helvetica,sans-Serif" font-size="14.00">cursor.col += width</text>
</g>
<!-- check_wrap&#45;&gt;increment_col -->
<g id="edge10" class="edge">
<title>check_wrap&#45;&gt;increment_col</title>
<path fill="none" stroke="black" d="M373.95,-233.26C381.88,-211.25 391.62,-172.32 374,-146 363.49,-130.3 347.5,-119.17 330.27,-111.26"/>
<polygon fill="black" stroke="black" points="331.17,-107.84 320.59,-107.2 328.45,-114.3 331.17,-107.84"/>
<text text-anchor="middle" x="390.5" y="-160.3" font-family="Times,serif" font-size="14.00">否</text>
</g>
<!-- set_pending_wrap&#45;&gt;increment_col -->
<g id="edge11" class="edge">
<title>set_pending_wrap&#45;&gt;increment_col</title>
<path fill="none" stroke="black" d="M243,-145.81C243,-137.79 243,-128.05 243,-119.07"/>
<polygon fill="black" stroke="black" points="246.5,-119.03 243,-109.03 239.5,-119.03 246.5,-119.03"/>
</g>
<!-- increment_col&#45;&gt;end -->
<g id="edge12" class="edge">
<title>increment_col&#45;&gt;end</title>
<path fill="none" stroke="black" d="M209.95,-72.99C187.48,-61.43 157.96,-46.25 135.95,-34.92"/>
<polygon fill="black" stroke="black" points="137.52,-31.79 127.02,-30.33 134.31,-38.02 137.52,-31.79"/>
</g>
</g>
</svg>
