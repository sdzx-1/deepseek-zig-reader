<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: Window_print Pages: 1 -->
<svg width="1544pt" height="1190pt"
 viewBox="0.00 0.00 1544.00 1190.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1186)">
<title>Window_print</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-1186 1540,-1186 1540,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_grapheme</title>
<polygon fill="none" stroke="black" points="8,-8 8,-1032 562,-1032 562,-8 8,-8"/>
<text text-anchor="middle" x="285" y="-1016.8" font-family="Times,serif" font-size="14.00">.grapheme 模式</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_word</title>
<polygon fill="none" stroke="black" points="570,-359 570,-1032 1005,-1032 1005,-359 570,-359"/>
<text text-anchor="middle" x="787.5" y="-1016.8" font-family="Times,serif" font-size="14.00">.word 模式</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_none</title>
<polygon fill="none" stroke="black" points="1013,-367.5 1013,-1032 1528,-1032 1528,-367.5 1013,-367.5"/>
<text text-anchor="middle" x="1270.5" y="-1016.8" font-family="Times,serif" font-size="14.00">.none 模式</text>
</g>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<ellipse fill="none" stroke="black" cx="758" cy="-1164" rx="71.49" ry="18"/>
<text text-anchor="middle" x="758" y="-1160.3" font-family="Courier,monospace" font-size="14.00">开始 print()</text>
</g>
<!-- check_wrap -->
<g id="node3" class="node">
<title>check_wrap</title>
<polygon fill="none" stroke="black" points="758,-1109 642.37,-1091 758,-1073 873.63,-1091 758,-1109"/>
<text text-anchor="middle" x="758" y="-1087.3" font-family="Courier,monospace" font-size="14.00">检查 opts.wrap</text>
</g>
<!-- start&#45;&gt;check_wrap -->
<g id="edge1" class="edge">
<title>start&#45;&gt;check_wrap</title>
<path fill="none" stroke="black" d="M758,-1145.81C758,-1137.79 758,-1128.05 758,-1119.07"/>
<polygon fill="black" stroke="black" points="761.5,-1119.03 758,-1109.03 754.5,-1119.03 761.5,-1119.03"/>
</g>
<!-- end -->
<g id="node2" class="node">
<title>end</title>
<ellipse fill="none" stroke="black" cx="663" cy="-289.5" rx="92.88" ry="18"/>
<text text-anchor="middle" x="663" y="-285.8" font-family="Courier,monospace" font-size="14.00">返回 PrintResult</text>
</g>
<!-- grapheme -->
<g id="node4" class="node">
<title>grapheme</title>
<polygon fill="none" stroke="black" points="546.5,-1001 463.5,-1001 463.5,-965 546.5,-965 546.5,-1001"/>
<text text-anchor="middle" x="505" y="-979.3" font-family="Courier,monospace" font-size="14.00">grapheme</text>
</g>
<!-- check_wrap&#45;&gt;grapheme -->
<g id="edge2" class="edge">
<title>check_wrap&#45;&gt;grapheme</title>
<path fill="none" stroke="black" d="M709.13,-1080.54C669.13,-1071.57 611.87,-1055.88 566,-1032 553.55,-1025.52 541.13,-1016.36 530.78,-1007.79"/>
<polygon fill="black" stroke="black" points="532.84,-1004.94 522.97,-1001.09 528.29,-1010.26 532.84,-1004.94"/>
<text text-anchor="middle" x="653.5" y="-1043.8" font-family="Courier,monospace" font-size="14.00">.grapheme</text>
</g>
<!-- word -->
<g id="node5" class="node">
<title>word</title>
<polygon fill="none" stroke="black" points="785,-1001 731,-1001 731,-965 785,-965 785,-1001"/>
<text text-anchor="middle" x="758" y="-979.3" font-family="Courier,monospace" font-size="14.00">word</text>
</g>
<!-- check_wrap&#45;&gt;word -->
<g id="edge3" class="edge">
<title>check_wrap&#45;&gt;word</title>
<path fill="none" stroke="black" d="M758,-1072.97C758,-1056.38 758,-1030.88 758,-1011.43"/>
<polygon fill="black" stroke="black" points="761.5,-1011.34 758,-1001.34 754.5,-1011.34 761.5,-1011.34"/>
<text text-anchor="middle" x="779" y="-1043.8" font-family="Courier,monospace" font-size="14.00">.word</text>
</g>
<!-- none -->
<g id="node6" class="node">
<title>none</title>
<polygon fill="none" stroke="black" points="1121,-1001 1067,-1001 1067,-965 1121,-965 1121,-1001"/>
<text text-anchor="middle" x="1094" y="-979.3" font-family="Courier,monospace" font-size="14.00">none</text>
</g>
<!-- check_wrap&#45;&gt;none -->
<g id="edge4" class="edge">
<title>check_wrap&#45;&gt;none</title>
<path fill="none" stroke="black" d="M814.46,-1081.72C866.25,-1073.02 944.49,-1057.07 1009,-1032 1026.27,-1025.29 1044.29,-1015.56 1059.27,-1006.61"/>
<polygon fill="black" stroke="black" points="1061.46,-1009.37 1068.17,-1001.17 1057.81,-1003.4 1061.46,-1009.37"/>
<text text-anchor="middle" x="1003" y="-1043.8" font-family="Courier,monospace" font-size="14.00">.none</text>
</g>
<!-- grapheme_init -->
<g id="node7" class="node">
<title>grapheme_init</title>
<polygon fill="none" stroke="black" points="468.5,-928 229.5,-928 229.5,-890 468.5,-890 468.5,-928"/>
<text text-anchor="middle" x="349" y="-912.8" font-family="Courier,monospace" font-size="14.00">初始化 row = opts.row_offset</text>
<text text-anchor="middle" x="349" y="-897.8" font-family="Courier,monospace" font-size="14.00">col = opts.col_offset</text>
</g>
<!-- grapheme&#45;&gt;grapheme_init -->
<g id="edge5" class="edge">
<title>grapheme&#45;&gt;grapheme_init</title>
<path fill="none" stroke="black" d="M468.03,-964.94C446.89,-955.18 420.12,-942.82 397.33,-932.3"/>
<polygon fill="black" stroke="black" points="398.7,-929.08 388.16,-928.07 395.77,-935.44 398.7,-929.08"/>
</g>
<!-- word_init -->
<g id="node20" class="node">
<title>word_init</title>
<polygon fill="none" stroke="black" points="877.5,-928 638.5,-928 638.5,-890 877.5,-890 877.5,-928"/>
<text text-anchor="middle" x="758" y="-912.8" font-family="Courier,monospace" font-size="14.00">初始化 row = opts.row_offset</text>
<text text-anchor="middle" x="758" y="-897.8" font-family="Courier,monospace" font-size="14.00">col = opts.col_offset</text>
</g>
<!-- word&#45;&gt;word_init -->
<g id="edge24" class="edge">
<title>word&#45;&gt;word_init</title>
<path fill="none" stroke="black" d="M758,-964.94C758,-956.99 758,-947.31 758,-938.31"/>
<polygon fill="black" stroke="black" points="761.5,-938.2 758,-928.2 754.5,-938.2 761.5,-938.2"/>
</g>
<!-- none_init -->
<g id="node28" class="node">
<title>none_init</title>
<polygon fill="none" stroke="black" points="1285.5,-928 1046.5,-928 1046.5,-890 1285.5,-890 1285.5,-928"/>
<text text-anchor="middle" x="1166" y="-912.8" font-family="Courier,monospace" font-size="14.00">初始化 row = opts.row_offset</text>
<text text-anchor="middle" x="1166" y="-897.8" font-family="Courier,monospace" font-size="14.00">col = opts.col_offset</text>
</g>
<!-- none&#45;&gt;none_init -->
<g id="edge36" class="edge">
<title>none&#45;&gt;none_init</title>
<path fill="none" stroke="black" d="M1111.06,-964.94C1119.88,-956.12 1130.81,-945.19 1140.6,-935.4"/>
<polygon fill="black" stroke="black" points="1143.2,-937.75 1147.8,-928.2 1138.25,-932.8 1143.2,-937.75"/>
</g>
<!-- grapheme_segment_loop -->
<g id="node8" class="node">
<title>grapheme_segment_loop</title>
<polygon fill="none" stroke="black" points="367.62,-835 323.31,-853 234.69,-853 190.38,-835 234.69,-817 323.31,-817 367.62,-835"/>
<text text-anchor="middle" x="279" y="-831.3" font-family="Courier,monospace" font-size="14.00">遍历 segments</text>
</g>
<!-- grapheme_init&#45;&gt;grapheme_segment_loop -->
<g id="edge6" class="edge">
<title>grapheme_init&#45;&gt;grapheme_segment_loop</title>
<path fill="none" stroke="black" d="M331.34,-889.83C322.77,-881.02 312.35,-870.31 303.07,-860.76"/>
<polygon fill="black" stroke="black" points="305.41,-858.15 295.93,-853.42 300.4,-863.03 305.41,-858.15"/>
</g>
<!-- grapheme_grapheme_loop -->
<g id="node9" class="node">
<title>grapheme_grapheme_loop</title>
<polygon fill="none" stroke="black" points="205.62,-713 158.31,-731 63.69,-731 16.38,-713 63.69,-695 158.31,-695 205.62,-713"/>
<text text-anchor="middle" x="111" y="-709.3" font-family="Courier,monospace" font-size="14.00">遍历 graphemes</text>
</g>
<!-- grapheme_segment_loop&#45;&gt;grapheme_grapheme_loop -->
<g id="edge7" class="edge">
<title>grapheme_segment_loop&#45;&gt;grapheme_grapheme_loop</title>
<path fill="none" stroke="black" d="M267.85,-816.81C260.52,-806.43 250.24,-793.43 239,-784 215.6,-764.36 185.85,-747.69 160.91,-735.55"/>
<polygon fill="black" stroke="black" points="162.15,-732.27 151.62,-731.13 159.14,-738.59 162.15,-732.27"/>
<text text-anchor="middle" x="300" y="-787.8" font-family="Courier,monospace" font-size="14.00">当前 segment</text>
</g>
<!-- final_col_check -->
<g id="node15" class="node">
<title>final_col_check</title>
<polygon fill="none" stroke="black" points="389,-766 224,-713 389,-660 554,-713 389,-766"/>
<text text-anchor="middle" x="389" y="-724.3" font-family="Courier,monospace" font-size="14.00">col &gt;= self.width?</text>
<text text-anchor="middle" x="389" y="-709.3" font-family="Courier,monospace" font-size="14.00">row += 1</text>
<text text-anchor="middle" x="389" y="-694.3" font-family="Courier,monospace" font-size="14.00">col = 0</text>
</g>
<!-- grapheme_segment_loop&#45;&gt;final_col_check -->
<g id="edge22" class="edge">
<title>grapheme_segment_loop&#45;&gt;final_col_check</title>
<path fill="none" stroke="black" d="M332.17,-820.57C343.95,-815.46 355.46,-808.49 364,-799 370.49,-791.79 375.31,-782.97 378.87,-773.77"/>
<polygon fill="black" stroke="black" points="382.25,-774.7 382.15,-764.11 375.62,-772.45 382.25,-774.7"/>
<text text-anchor="middle" x="442.5" y="-787.8" font-family="Courier,monospace" font-size="14.00">所有 segments 完成</text>
</g>
<!-- grapheme_grapheme_loop&#45;&gt;grapheme_segment_loop -->
<g id="edge21" class="edge">
<title>grapheme_grapheme_loop&#45;&gt;grapheme_segment_loop</title>
<path fill="none" stroke="black" d="M105.76,-731.14C101.15,-750.01 97.34,-780.15 113,-799 124.27,-812.56 161.31,-821.1 197.56,-826.34"/>
<polygon fill="black" stroke="black" points="197.35,-829.84 207.74,-827.73 198.3,-822.91 197.35,-829.84"/>
<text text-anchor="middle" x="174" y="-787.8" font-family="Courier,monospace" font-size="14.00">完成当前 segment</text>
</g>
<!-- check_col_overflow -->
<g id="node10" class="node">
<title>check_col_overflow</title>
<polygon fill="none" stroke="black" points="205,-609 53.18,-591 205,-573 356.82,-591 205,-609"/>
<text text-anchor="middle" x="205" y="-587.3" font-family="Courier,monospace" font-size="14.00">col &gt;= self.width?</text>
</g>
<!-- grapheme_grapheme_loop&#45;&gt;check_col_overflow -->
<g id="edge8" class="edge">
<title>grapheme_grapheme_loop&#45;&gt;check_col_overflow</title>
<path fill="none" stroke="black" d="M124.47,-694.81C140.74,-674.03 168.22,-638.96 186.48,-615.64"/>
<polygon fill="black" stroke="black" points="189.34,-617.66 192.75,-607.63 183.83,-613.35 189.34,-617.66"/>
<text text-anchor="middle" x="236" y="-630.8" font-family="Courier,monospace" font-size="14.00">下一个 grapheme</text>
</g>
<!-- check_row_overflow -->
<g id="node11" class="node">
<title>check_row_overflow</title>
<polygon fill="none" stroke="black" points="240,-522 80.97,-504 240,-486 399.03,-504 240,-522"/>
<text text-anchor="middle" x="240" y="-500.3" font-family="Courier,monospace" font-size="14.00">row &gt;= self.height?</text>
</g>
<!-- check_col_overflow&#45;&gt;check_row_overflow -->
<g id="edge9" class="edge">
<title>check_col_overflow&#45;&gt;check_row_overflow</title>
<path fill="none" stroke="black" d="M212.1,-573.65C214.63,-567.78 217.47,-561.11 220,-555 223.18,-547.31 226.57,-538.93 229.64,-531.26"/>
<polygon fill="black" stroke="black" points="232.99,-532.29 233.43,-521.71 226.49,-529.71 232.99,-532.29"/>
<text text-anchor="middle" x="232.5" y="-543.8" font-family="Courier,monospace" font-size="14.00">是</text>
</g>
<!-- check_col_overflow&#45;&gt;check_row_overflow -->
<g id="edge10" class="edge">
<title>check_col_overflow&#45;&gt;check_row_overflow</title>
<path fill="none" stroke="black" d="M199.8,-573.56C197.53,-563.46 196.32,-550.5 201,-540 203.17,-535.14 206.38,-530.67 210.05,-526.67"/>
<polygon fill="black" stroke="black" points="212.68,-529.01 217.51,-519.58 207.85,-523.94 212.68,-529.01"/>
<text text-anchor="middle" x="208.5" y="-543.8" font-family="Courier,monospace" font-size="14.00">否</text>
</g>
<!-- handle_newline -->
<g id="node12" class="node">
<title>handle_newline</title>
<polygon fill="none" stroke="black" points="115,-316 27,-316 27,-263 115,-263 115,-316"/>
<text text-anchor="middle" x="71" y="-300.8" font-family="Courier,monospace" font-size="14.00">处理换行符</text>
<text text-anchor="middle" x="71" y="-285.8" font-family="Courier,monospace" font-size="14.00">row += 1</text>
<text text-anchor="middle" x="71" y="-270.8" font-family="Courier,monospace" font-size="14.00">col = 0</text>
</g>
<!-- check_row_overflow&#45;&gt;handle_newline -->
<g id="edge11" class="edge">
<title>check_row_overflow&#45;&gt;handle_newline</title>
<path fill="none" stroke="black" d="M191.03,-491.47C153.92,-479.97 105.16,-458.33 80,-420 61.91,-392.43 61.56,-354.08 64.58,-326.27"/>
<polygon fill="black" stroke="black" points="68.07,-326.54 65.87,-316.17 61.13,-325.65 68.07,-326.54"/>
<text text-anchor="middle" x="131" y="-397.3" font-family="Courier,monospace" font-size="14.00">是</text>
<text text-anchor="middle" x="131" y="-382.3" font-family="Courier,monospace" font-size="14.00">标记 overflow</text>
</g>
<!-- check_newline -->
<g id="node16" class="node">
<title>check_newline</title>
<polygon fill="none" stroke="black" points="272,-411.5 191.23,-393.5 272,-375.5 352.77,-393.5 272,-411.5"/>
<text text-anchor="middle" x="272" y="-389.8" font-family="Courier,monospace" font-size="14.00">是换行符？</text>
</g>
<!-- check_row_overflow&#45;&gt;check_newline -->
<g id="edge12" class="edge">
<title>check_row_overflow&#45;&gt;check_newline</title>
<path fill="none" stroke="black" d="M244.86,-486.52C250.04,-468.97 258.3,-440.96 264.35,-420.45"/>
<polygon fill="black" stroke="black" points="267.73,-421.36 267.2,-410.78 261.01,-419.38 267.73,-421.36"/>
<text text-anchor="middle" x="265.5" y="-449.3" font-family="Courier,monospace" font-size="14.00">否</text>
</g>
<!-- handle_newline&#45;&gt;grapheme_grapheme_loop -->
<g id="edge20" class="edge">
<title>handle_newline&#45;&gt;grapheme_grapheme_loop</title>
<path fill="none" stroke="black" d="M55.95,-316.41C45.71,-336.49 34,-365.37 34,-392.5 34,-592 34,-592 34,-592 34,-629.81 61.41,-665.22 83.52,-687.63"/>
<polygon fill="black" stroke="black" points="81.17,-690.23 90.77,-694.72 86.07,-685.22 81.17,-690.23"/>
<text text-anchor="middle" x="48.5" y="-500.3" font-family="Courier,monospace" font-size="14.00">继续</text>
</g>
<!-- write_cell -->
<g id="node13" class="node">
<title>write_cell</title>
<polygon fill="none" stroke="black" points="398.5,-125 201.5,-125 201.5,-89 398.5,-89 398.5,-125"/>
<text text-anchor="middle" x="300" y="-103.3" font-family="Courier,monospace" font-size="14.00">写入单元格 (如果 commit)</text>
</g>
<!-- update_col -->
<g id="node14" class="node">
<title>update_col</title>
<polygon fill="none" stroke="black" points="388.5,-52 211.5,-52 211.5,-16 388.5,-16 388.5,-52"/>
<text text-anchor="middle" x="300" y="-30.3" font-family="Courier,monospace" font-size="14.00">col += grapheme 宽度</text>
</g>
<!-- write_cell&#45;&gt;update_col -->
<g id="edge18" class="edge">
<title>write_cell&#45;&gt;update_col</title>
<path fill="none" stroke="black" d="M300,-88.81C300,-80.79 300,-71.05 300,-62.07"/>
<polygon fill="black" stroke="black" points="303.5,-62.03 300,-52.03 296.5,-62.03 303.5,-62.03"/>
</g>
<!-- update_col&#45;&gt;grapheme_grapheme_loop -->
<g id="edge19" class="edge">
<title>update_col&#45;&gt;grapheme_grapheme_loop</title>
<path fill="none" stroke="black" d="M371.02,-52.13C396.01,-62.74 418,-79.58 418,-106 418,-592 418,-592 418,-592 418,-687.15 304.75,-628.39 215,-660 192.42,-667.95 168.44,-679.7 149.21,-690.01"/>
<polygon fill="black" stroke="black" points="147.27,-687.08 140.17,-694.94 150.63,-693.22 147.27,-687.08"/>
</g>
<!-- end_grapheme -->
<g id="node19" class="node">
<title>end_grapheme</title>
<polygon fill="none" stroke="black" points="553,-609 437,-609 437,-573 553,-573 553,-609"/>
<text text-anchor="middle" x="495" y="-587.3" font-family="Courier,monospace" font-size="14.00">end_grapheme</text>
</g>
<!-- final_col_check&#45;&gt;end_grapheme -->
<g id="edge23" class="edge">
<title>final_col_check&#45;&gt;end_grapheme</title>
<path fill="none" stroke="black" d="M424.89,-671.37C440.84,-653.31 459.12,-632.62 473.01,-616.89"/>
<polygon fill="black" stroke="black" points="475.84,-618.97 479.84,-609.16 470.6,-614.34 475.84,-618.97"/>
<text text-anchor="middle" x="499" y="-630.8" font-family="Courier,monospace" font-size="14.00">构造返回值</text>
</g>
<!-- check_newline&#45;&gt;handle_newline -->
<g id="edge13" class="edge">
<title>check_newline&#45;&gt;handle_newline</title>
<path fill="none" stroke="black" d="M248.55,-380.6C218.22,-365.21 164.5,-337.95 124.07,-317.43"/>
<polygon fill="black" stroke="black" points="125.64,-314.3 115.14,-312.9 122.47,-320.55 125.64,-314.3"/>
<text text-anchor="middle" x="191.5" y="-337.8" font-family="Courier,monospace" font-size="14.00">是</text>
</g>
<!-- calc_width -->
<g id="node17" class="node">
<title>calc_width</title>
<polygon fill="none" stroke="black" points="366,-307.5 178,-307.5 178,-271.5 366,-271.5 366,-307.5"/>
<text text-anchor="middle" x="272" y="-285.8" font-family="Courier,monospace" font-size="14.00">计算 grapheme 宽度 (w)</text>
</g>
<!-- check_newline&#45;&gt;calc_width -->
<g id="edge14" class="edge">
<title>check_newline&#45;&gt;calc_width</title>
<path fill="none" stroke="black" d="M272,-375.2C272,-359.42 272,-335.86 272,-317.59"/>
<polygon fill="black" stroke="black" points="275.5,-317.55 272,-307.55 268.5,-317.55 275.5,-317.55"/>
<text text-anchor="middle" x="279.5" y="-337.8" font-family="Courier,monospace" font-size="14.00">否</text>
</g>
<!-- write_decision -->
<g id="node18" class="node">
<title>write_decision</title>
<polygon fill="none" stroke="black" points="272,-212 170.79,-194 272,-176 373.21,-194 272,-212"/>
<text text-anchor="middle" x="272" y="-190.3" font-family="Courier,monospace" font-size="14.00">是否 commit?</text>
</g>
<!-- calc_width&#45;&gt;write_decision -->
<g id="edge15" class="edge">
<title>calc_width&#45;&gt;write_decision</title>
<path fill="none" stroke="black" d="M272,-271.35C272,-257.64 272,-238.17 272,-222.32"/>
<polygon fill="black" stroke="black" points="275.5,-222.04 272,-212.04 268.5,-222.04 275.5,-222.04"/>
<text text-anchor="middle" x="293" y="-233.8" font-family="Courier,monospace" font-size="14.00">w &gt; 0</text>
</g>
<!-- write_decision&#45;&gt;write_cell -->
<g id="edge16" class="edge">
<title>write_decision&#45;&gt;write_cell</title>
<path fill="none" stroke="black" d="M277.4,-176.61C281.27,-164.85 286.58,-148.73 291.08,-135.07"/>
<polygon fill="black" stroke="black" points="294.53,-135.81 294.33,-125.21 287.88,-133.62 294.53,-135.81"/>
<text text-anchor="middle" x="294.5" y="-146.8" font-family="Courier,monospace" font-size="14.00">是</text>
</g>
<!-- write_decision&#45;&gt;update_col -->
<g id="edge17" class="edge">
<title>write_decision&#45;&gt;update_col</title>
<path fill="none" stroke="black" d="M245.49,-180.69C209.68,-162.3 152.93,-125.85 177,-89 186.38,-74.64 200.53,-64.07 215.93,-56.3"/>
<polygon fill="black" stroke="black" points="217.51,-59.43 225.11,-52.04 214.56,-53.07 217.51,-59.43"/>
<text text-anchor="middle" x="184.5" y="-103.3" font-family="Courier,monospace" font-size="14.00">否</text>
</g>
<!-- end_grapheme&#45;&gt;end -->
<g id="edge47" class="edge">
<title>end_grapheme&#45;&gt;end</title>
<path fill="none" stroke="black" d="M496.47,-572.96C500.74,-532.29 516.15,-427.8 566,-359 580.2,-339.4 601.78,-323.37 620.98,-311.76"/>
<polygon fill="black" stroke="black" points="623,-314.63 629.89,-306.58 619.48,-308.58 623,-314.63"/>
</g>
<!-- word_segment_loop -->
<g id="node21" class="node">
<title>word_segment_loop</title>
<polygon fill="none" stroke="black" points="846.62,-835 802.31,-853 713.69,-853 669.38,-835 713.69,-817 802.31,-817 846.62,-835"/>
<text text-anchor="middle" x="758" y="-831.3" font-family="Courier,monospace" font-size="14.00">遍历 segments</text>
</g>
<!-- word_init&#45;&gt;word_segment_loop -->
<g id="edge25" class="edge">
<title>word_init&#45;&gt;word_segment_loop</title>
<path fill="none" stroke="black" d="M758,-889.83C758,-881.89 758,-872.41 758,-863.63"/>
<polygon fill="black" stroke="black" points="761.5,-863.42 758,-853.42 754.5,-863.42 761.5,-863.42"/>
</g>
<!-- line_iterator -->
<g id="node22" class="node">
<title>line_iterator</title>
<polygon fill="none" stroke="black" points="828.09,-713 795.04,-731 728.96,-731 695.91,-713 728.96,-695 795.04,-695 828.09,-713"/>
<text text-anchor="middle" x="762" y="-709.3" font-family="Courier,monospace" font-size="14.00">分割文本行</text>
</g>
<!-- word_segment_loop&#45;&gt;line_iterator -->
<g id="edge26" class="edge">
<title>word_segment_loop&#45;&gt;line_iterator</title>
<path fill="none" stroke="black" d="M819.14,-823.71C845.9,-817.85 873.04,-809.54 881,-799 904.56,-767.8 856.71,-743.38 814.84,-728.87"/>
<polygon fill="black" stroke="black" points="815.79,-725.5 805.2,-725.66 813.58,-732.14 815.79,-725.5"/>
<text text-anchor="middle" x="934" y="-787.8" font-family="Courier,monospace" font-size="14.00">当前 segment</text>
</g>
<!-- word_end -->
<g id="node27" class="node">
<title>word_end</title>
<polygon fill="none" stroke="black" points="674,-731 586,-731 586,-695 674,-695 674,-731"/>
<text text-anchor="middle" x="630" y="-709.3" font-family="Courier,monospace" font-size="14.00">构造返回值</text>
</g>
<!-- word_segment_loop&#45;&gt;word_end -->
<g id="edge35" class="edge">
<title>word_segment_loop&#45;&gt;word_end</title>
<path fill="none" stroke="black" d="M690.7,-826.12C657.01,-820.65 621.24,-811.97 611,-799 597.83,-782.33 604.84,-758.35 613.85,-740.11"/>
<polygon fill="black" stroke="black" points="617,-741.63 618.64,-731.16 610.83,-738.32 617,-741.63"/>
<text text-anchor="middle" x="680.5" y="-787.8" font-family="Courier,monospace" font-size="14.00">所有 segments 完成</text>
</g>
<!-- line_iterator&#45;&gt;word_segment_loop -->
<g id="edge34" class="edge">
<title>line_iterator&#45;&gt;word_segment_loop</title>
<path fill="none" stroke="black" d="M759.31,-731.23C756.94,-748.39 753.99,-775.48 755,-799 755.11,-801.56 755.26,-804.22 755.45,-806.88"/>
<polygon fill="black" stroke="black" points="751.96,-807.24 756.24,-816.93 758.94,-806.68 751.96,-807.24"/>
<text text-anchor="middle" x="816" y="-787.8" font-family="Courier,monospace" font-size="14.00">完成当前 segment</text>
</g>
<!-- whitespace_loop -->
<g id="node24" class="node">
<title>whitespace_loop</title>
<polygon fill="none" stroke="black" points="884.61,-591 843.3,-609 760.7,-609 719.39,-591 760.7,-573 843.3,-573 884.61,-591"/>
<text text-anchor="middle" x="802" y="-587.3" font-family="Courier,monospace" font-size="14.00">处理空格/单词</text>
</g>
<!-- line_iterator&#45;&gt;whitespace_loop -->
<g id="edge27" class="edge">
<title>line_iterator&#45;&gt;whitespace_loop</title>
<path fill="none" stroke="black" d="M754.23,-694.99C747.25,-677.05 739.7,-648.46 751,-627 753.17,-622.88 756.07,-619.15 759.38,-615.8"/>
<polygon fill="black" stroke="black" points="761.91,-618.24 767.19,-609.06 757.34,-612.94 761.91,-618.24"/>
<text text-anchor="middle" x="772.5" y="-630.8" font-family="Courier,monospace" font-size="14.00">处理行</text>
</g>
<!-- handle_line_break -->
<g id="node23" class="node">
<title>handle_line_break</title>
<polygon fill="none" stroke="black" points="767.5,-420 684.5,-420 684.5,-367 767.5,-367 767.5,-420"/>
<text text-anchor="middle" x="726" y="-404.8" font-family="Courier,monospace" font-size="14.00">处理换行</text>
<text text-anchor="middle" x="726" y="-389.8" font-family="Courier,monospace" font-size="14.00">row += 1</text>
<text text-anchor="middle" x="726" y="-374.8" font-family="Courier,monospace" font-size="14.00">col = 0</text>
</g>
<!-- handle_line_break&#45;&gt;whitespace_loop -->
<g id="edge31" class="edge">
<title>handle_line_break&#45;&gt;whitespace_loop</title>
<path fill="none" stroke="black" d="M710.73,-420.39C697.06,-447.24 681.63,-489.72 699,-522 710.09,-542.62 730.48,-558.02 750.21,-568.91"/>
<polygon fill="black" stroke="black" points="748.71,-572.07 759.19,-573.6 751.94,-565.87 748.71,-572.07"/>
</g>
<!-- whitespace_loop&#45;&gt;line_iterator -->
<g id="edge33" class="edge">
<title>whitespace_loop&#45;&gt;line_iterator</title>
<path fill="none" stroke="black" d="M800.39,-609.38C799.19,-619.12 797.21,-631.4 794,-642 789.47,-656.98 782.38,-672.91 776.03,-685.78"/>
<polygon fill="black" stroke="black" points="772.78,-684.46 771.37,-694.96 779.02,-687.63 772.78,-684.46"/>
<text text-anchor="middle" x="818.5" y="-630.8" font-family="Courier,monospace" font-size="14.00">完成行</text>
</g>
<!-- check_soft_wrap -->
<g id="node25" class="node">
<title>check_soft_wrap</title>
<polygon fill="none" stroke="black" points="802,-522 708.49,-504 802,-486 895.51,-504 802,-522"/>
<text text-anchor="middle" x="802" y="-500.3" font-family="Courier,monospace" font-size="14.00">需要软换行？</text>
</g>
<!-- whitespace_loop&#45;&gt;check_soft_wrap -->
<g id="edge28" class="edge">
<title>whitespace_loop&#45;&gt;check_soft_wrap</title>
<path fill="none" stroke="black" d="M802,-572.8C802,-561.16 802,-545.55 802,-532.24"/>
<polygon fill="black" stroke="black" points="805.5,-532.18 802,-522.18 798.5,-532.18 805.5,-532.18"/>
<text text-anchor="middle" x="840.5" y="-543.8" font-family="Courier,monospace" font-size="14.00">处理 token</text>
</g>
<!-- check_soft_wrap&#45;&gt;handle_line_break -->
<g id="edge30" class="edge">
<title>check_soft_wrap&#45;&gt;handle_line_break</title>
<path fill="none" stroke="black" d="M791.43,-487.91C780.73,-472.63 763.8,-448.46 749.84,-428.54"/>
<polygon fill="black" stroke="black" points="752.68,-426.48 744.07,-420.3 746.94,-430.5 752.68,-426.48"/>
<text text-anchor="middle" x="784.5" y="-449.3" font-family="Courier,monospace" font-size="14.00">是</text>
</g>
<!-- word_write_cell -->
<g id="node26" class="node">
<title>word_write_cell</title>
<polygon fill="none" stroke="black" points="990.5,-411.5 793.5,-411.5 793.5,-375.5 990.5,-375.5 990.5,-411.5"/>
<text text-anchor="middle" x="892" y="-389.8" font-family="Courier,monospace" font-size="14.00">写入单元格 (如果 commit)</text>
</g>
<!-- check_soft_wrap&#45;&gt;word_write_cell -->
<g id="edge29" class="edge">
<title>check_soft_wrap&#45;&gt;word_write_cell</title>
<path fill="none" stroke="black" d="M814.51,-487.91C829.18,-470.23 853.71,-440.66 871.24,-419.53"/>
<polygon fill="black" stroke="black" points="874.12,-421.53 877.81,-411.6 868.74,-417.06 874.12,-421.53"/>
<text text-anchor="middle" x="862.5" y="-449.3" font-family="Courier,monospace" font-size="14.00">否</text>
</g>
<!-- word_write_cell&#45;&gt;whitespace_loop -->
<g id="edge32" class="edge">
<title>word_write_cell&#45;&gt;whitespace_loop</title>
<path fill="none" stroke="black" d="M897.95,-411.82C905.59,-436.73 916.54,-483.88 905,-522 899.89,-538.87 896.53,-543.71 883,-555 875.58,-561.19 866.9,-566.46 858.03,-570.88"/>
<polygon fill="black" stroke="black" points="856.35,-567.79 848.76,-575.18 859.3,-574.14 856.35,-567.79"/>
</g>
<!-- word_end&#45;&gt;end -->
<g id="edge48" class="edge">
<title>word_end&#45;&gt;end</title>
<path fill="none" stroke="black" d="M632.32,-694.95C635.27,-671.71 640,-628.79 640,-592 640,-592 640,-592 640,-392.5 640,-366.41 647.25,-337.47 653.61,-317.1"/>
<polygon fill="black" stroke="black" points="656.94,-318.15 656.72,-307.56 650.29,-315.98 656.94,-318.15"/>
</g>
<!-- none_segment_loop -->
<g id="node29" class="node">
<title>none_segment_loop</title>
<polygon fill="none" stroke="black" points="1277.62,-835 1233.31,-853 1144.69,-853 1100.38,-835 1144.69,-817 1233.31,-817 1277.62,-835"/>
<text text-anchor="middle" x="1189" y="-831.3" font-family="Courier,monospace" font-size="14.00">遍历 segments</text>
</g>
<!-- none_init&#45;&gt;none_segment_loop -->
<g id="edge37" class="edge">
<title>none_init&#45;&gt;none_segment_loop</title>
<path fill="none" stroke="black" d="M1171.8,-889.83C1174.4,-881.72 1177.5,-871.99 1180.36,-863.05"/>
<polygon fill="black" stroke="black" points="1183.73,-864.01 1183.44,-853.42 1177.06,-861.88 1183.73,-864.01"/>
</g>
<!-- none_grapheme_loop -->
<g id="node30" class="node">
<title>none_grapheme_loop</title>
<polygon fill="none" stroke="black" points="1260.62,-713 1213.31,-731 1118.69,-731 1071.38,-713 1118.69,-695 1213.31,-695 1260.62,-713"/>
<text text-anchor="middle" x="1166" y="-709.3" font-family="Courier,monospace" font-size="14.00">遍历 graphemes</text>
</g>
<!-- none_segment_loop&#45;&gt;none_grapheme_loop -->
<g id="edge38" class="edge">
<title>none_segment_loop&#45;&gt;none_grapheme_loop</title>
<path fill="none" stroke="black" d="M1122.94,-825.79C1107.4,-820.59 1092.59,-812.27 1083,-799 1066.1,-775.62 1092.44,-752.42 1119.82,-736.17"/>
<polygon fill="black" stroke="black" points="1121.71,-739.12 1128.69,-731.15 1118.26,-733.03 1121.71,-739.12"/>
<text text-anchor="middle" x="1130" y="-787.8" font-family="Courier,monospace" font-size="14.00">当前 segment</text>
</g>
<!-- none_end -->
<g id="node34" class="node">
<title>none_end</title>
<polygon fill="none" stroke="black" points="1325,-411.5 1237,-411.5 1237,-375.5 1325,-375.5 1325,-411.5"/>
<text text-anchor="middle" x="1281" y="-389.8" font-family="Courier,monospace" font-size="14.00">构造返回值</text>
</g>
<!-- none_segment_loop&#45;&gt;none_end -->
<g id="edge46" class="edge">
<title>none_segment_loop&#45;&gt;none_end</title>
<path fill="none" stroke="black" d="M1248.17,-822.97C1304.59,-808.63 1381,-777.48 1381,-714 1381,-714 1381,-714 1381,-503 1381,-465.86 1348.92,-435.98 1321.1,-417.06"/>
<polygon fill="black" stroke="black" points="1322.93,-414.07 1312.64,-411.54 1319.1,-419.93 1322.93,-414.07"/>
<text text-anchor="middle" x="1450.5" y="-587.3" font-family="Courier,monospace" font-size="14.00">所有 segments 完成</text>
</g>
<!-- none_grapheme_loop&#45;&gt;none_segment_loop -->
<g id="edge45" class="edge">
<title>none_grapheme_loop&#45;&gt;none_segment_loop</title>
<path fill="none" stroke="black" d="M1169.29,-731.16C1173.08,-750.93 1179.35,-783.66 1183.8,-806.89"/>
<polygon fill="black" stroke="black" points="1180.38,-807.64 1185.7,-816.81 1187.26,-806.33 1180.38,-807.64"/>
<text text-anchor="middle" x="1243" y="-787.8" font-family="Courier,monospace" font-size="14.00">完成当前 segment</text>
</g>
<!-- none_check_col -->
<g id="node31" class="node">
<title>none_check_col</title>
<polygon fill="none" stroke="black" points="1193,-609 1041.18,-591 1193,-573 1344.82,-591 1193,-609"/>
<text text-anchor="middle" x="1193" y="-587.3" font-family="Courier,monospace" font-size="14.00">col &gt;= self.width?</text>
</g>
<!-- none_grapheme_loop&#45;&gt;none_check_col -->
<g id="edge39" class="edge">
<title>none_grapheme_loop&#45;&gt;none_check_col</title>
<path fill="none" stroke="black" d="M1169.87,-694.81C1174.34,-674.91 1181.77,-641.92 1187,-618.68"/>
<polygon fill="black" stroke="black" points="1190.45,-619.3 1189.23,-608.77 1183.62,-617.76 1190.45,-619.3"/>
<text text-anchor="middle" x="1243" y="-630.8" font-family="Courier,monospace" font-size="14.00">下一个 grapheme</text>
</g>
<!-- none_check_newline -->
<g id="node32" class="node">
<title>none_check_newline</title>
<polygon fill="none" stroke="black" points="1143,-522 1062.23,-504 1143,-486 1223.77,-504 1143,-522"/>
<text text-anchor="middle" x="1143" y="-500.3" font-family="Courier,monospace" font-size="14.00">是换行符？</text>
</g>
<!-- none_check_col&#45;&gt;none_check_newline -->
<g id="edge41" class="edge">
<title>none_check_col&#45;&gt;none_check_newline</title>
<path fill="none" stroke="black" d="M1183.6,-574.01C1176.12,-561.31 1165.56,-543.35 1157.08,-528.93"/>
<polygon fill="black" stroke="black" points="1159.95,-526.9 1151.86,-520.06 1153.91,-530.45 1159.95,-526.9"/>
<text text-anchor="middle" x="1177.5" y="-543.8" font-family="Courier,monospace" font-size="14.00">否</text>
</g>
<!-- none_check_col&#45;&gt;none_end -->
<g id="edge40" class="edge">
<title>none_check_col&#45;&gt;none_end</title>
<path fill="none" stroke="black" d="M1203.21,-574.15C1211.72,-560.6 1223.89,-540.42 1233,-522 1249.57,-488.5 1263.97,-447.77 1272.57,-421.51"/>
<polygon fill="black" stroke="black" points="1275.94,-422.46 1275.68,-411.87 1269.28,-420.31 1275.94,-422.46"/>
<text text-anchor="middle" x="1299" y="-507.8" font-family="Courier,monospace" font-size="14.00">是</text>
<text text-anchor="middle" x="1299" y="-492.8" font-family="Courier,monospace" font-size="14.00">标记 overflow</text>
</g>
<!-- none_write_cell -->
<g id="node33" class="node">
<title>none_write_cell</title>
<polygon fill="none" stroke="black" points="1218.5,-411.5 1021.5,-411.5 1021.5,-375.5 1218.5,-375.5 1218.5,-411.5"/>
<text text-anchor="middle" x="1120" y="-389.8" font-family="Courier,monospace" font-size="14.00">写入单元格 (如果 commit)</text>
</g>
<!-- none_check_newline&#45;&gt;none_write_cell -->
<g id="edge43" class="edge">
<title>none_check_newline&#45;&gt;none_write_cell</title>
<path fill="none" stroke="black" d="M1128.24,-489.05C1123,-483.12 1117.73,-475.78 1115,-468 1109.84,-453.29 1110.73,-435.92 1113.07,-421.76"/>
<polygon fill="black" stroke="black" points="1116.57,-422.14 1115.08,-411.65 1109.7,-420.78 1116.57,-422.14"/>
<text text-anchor="middle" x="1122.5" y="-449.3" font-family="Courier,monospace" font-size="14.00">否</text>
</g>
<!-- none_check_newline&#45;&gt;none_end -->
<g id="edge42" class="edge">
<title>none_check_newline&#45;&gt;none_end</title>
<path fill="none" stroke="black" d="M1140.83,-486.43C1139.89,-471.83 1141.09,-450.94 1153,-438 1176.21,-412.78 1195.71,-431.5 1228,-420 1231.68,-418.69 1235.45,-417.2 1239.19,-415.62"/>
<polygon fill="black" stroke="black" points="1240.67,-418.79 1248.39,-411.53 1237.83,-412.39 1240.67,-418.79"/>
<text text-anchor="middle" x="1204" y="-456.8" font-family="Courier,monospace" font-size="14.00">是</text>
<text text-anchor="middle" x="1204" y="-441.8" font-family="Courier,monospace" font-size="14.00">标记 overflow</text>
</g>
<!-- none_write_cell&#45;&gt;none_grapheme_loop -->
<g id="edge44" class="edge">
<title>none_write_cell&#45;&gt;none_grapheme_loop</title>
<path fill="none" stroke="black" d="M1103.07,-411.53C1068.68,-448.29 996.78,-537.51 1032,-609 1050.06,-645.65 1088.12,-672.91 1119.08,-690.14"/>
<polygon fill="black" stroke="black" points="1117.55,-693.3 1128.01,-694.95 1120.87,-687.13 1117.55,-693.3"/>
</g>
<!-- none_end&#45;&gt;end -->
<g id="edge49" class="edge">
<title>none_end&#45;&gt;end</title>
<path fill="none" stroke="black" d="M1258.93,-375.46C1249.82,-369.28 1238.87,-362.87 1228,-359 1143.95,-329.06 897.28,-307.27 759.28,-297.03"/>
<polygon fill="black" stroke="black" points="759.36,-293.53 749.13,-296.29 758.85,-300.51 759.36,-293.53"/>
</g>
</g>
</svg>
