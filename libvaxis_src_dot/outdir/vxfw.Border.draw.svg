<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: flowchart Pages: 1 -->
<svg width="227pt" height="916pt"
 viewBox="0.00 0.00 227.00 916.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 912)">
<title>flowchart</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-912 223,-912 223,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<path fill="none" stroke="black" d="M148.5,-908C148.5,-908 70.5,-908 70.5,-908 64.5,-908 58.5,-902 58.5,-896 58.5,-896 58.5,-884 58.5,-884 58.5,-878 64.5,-872 70.5,-872 70.5,-872 148.5,-872 148.5,-872 154.5,-872 160.5,-878 160.5,-884 160.5,-884 160.5,-896 160.5,-896 160.5,-902 154.5,-908 148.5,-908"/>
<text text-anchor="middle" x="109.5" y="-886.3" font-family="Arial" font-size="14.00">开始绘制边框</text>
</g>
<!-- process_max -->
<g id="node2" class="node">
<title>process_max</title>
<path fill="none" stroke="black" d="M207,-836C207,-836 12,-836 12,-836 6,-836 0,-830 0,-824 0,-824 0,-795 0,-795 0,-789 6,-783 12,-783 12,-783 207,-783 207,-783 213,-783 219,-789 219,-795 219,-795 219,-824 219,-824 219,-830 213,-836 207,-836"/>
<text text-anchor="middle" x="109.5" y="-820.8" font-family="Arial" font-size="14.00">计算max_width/max_height</text>
<text text-anchor="middle" x="109.5" y="-805.8" font-family="Arial" font-size="14.00">(max_width = ctx.max.width &#45; 2)</text>
<text text-anchor="middle" x="109.5" y="-790.8" font-family="Arial" font-size="14.00">(max_height = ctx.max.height &#45; 2)</text>
</g>
<!-- start&#45;&gt;process_max -->
<g id="edge1" class="edge">
<title>start&#45;&gt;process_max</title>
<path fill="none" stroke="black" d="M109.5,-871.97C109.5,-864.45 109.5,-855.31 109.5,-846.4"/>
<polygon fill="black" stroke="black" points="113,-846.16 109.5,-836.16 106,-846.16 113,-846.16"/>
</g>
<!-- create_child_ctx -->
<g id="node3" class="node">
<title>create_child_ctx</title>
<path fill="none" stroke="black" d="M201,-747C201,-747 18,-747 18,-747 12,-747 6,-741 6,-735 6,-735 6,-721 6,-721 6,-715 12,-709 18,-709 18,-709 201,-709 201,-709 207,-709 213,-715 213,-721 213,-721 213,-735 213,-735 213,-741 207,-747 201,-747"/>
<text text-anchor="middle" x="109.5" y="-731.8" font-family="Arial" font-size="14.00">创建子上下文约束</text>
<text text-anchor="middle" x="109.5" y="-716.8" font-family="Arial" font-size="14.00">(child_ctx = ctx.withConstraints)</text>
</g>
<!-- process_max&#45;&gt;create_child_ctx -->
<g id="edge2" class="edge">
<title>process_max&#45;&gt;create_child_ctx</title>
<path fill="none" stroke="black" d="M109.5,-782.91C109.5,-774.74 109.5,-765.65 109.5,-757.3"/>
<polygon fill="black" stroke="black" points="113,-757.24 109.5,-747.24 106,-757.24 113,-757.24"/>
</g>
<!-- draw_child -->
<g id="node4" class="node">
<title>draw_child</title>
<path fill="none" stroke="black" d="M205.5,-673C205.5,-673 13.5,-673 13.5,-673 7.5,-673 1.5,-667 1.5,-661 1.5,-661 1.5,-647 1.5,-647 1.5,-641 7.5,-635 13.5,-635 13.5,-635 205.5,-635 205.5,-635 211.5,-635 217.5,-641 217.5,-647 217.5,-647 217.5,-661 217.5,-661 217.5,-667 211.5,-673 205.5,-673"/>
<text text-anchor="middle" x="109.5" y="-657.8" font-family="Arial" font-size="14.00">调用子元素绘制</text>
<text text-anchor="middle" x="109.5" y="-642.8" font-family="Arial" font-size="14.00">(child = self.child.draw(child_ctx))</text>
</g>
<!-- create_child_ctx&#45;&gt;draw_child -->
<g id="edge3" class="edge">
<title>create_child_ctx&#45;&gt;draw_child</title>
<path fill="none" stroke="black" d="M109.5,-708.83C109.5,-701.13 109.5,-691.97 109.5,-683.42"/>
<polygon fill="black" stroke="black" points="113,-683.41 109.5,-673.41 106,-683.41 113,-683.41"/>
</g>
<!-- alloc_children -->
<g id="node5" class="node">
<title>alloc_children</title>
<path fill="none" stroke="black" d="M185.5,-599C185.5,-599 33.5,-599 33.5,-599 27.5,-599 21.5,-593 21.5,-587 21.5,-587 21.5,-573 21.5,-573 21.5,-567 27.5,-561 33.5,-561 33.5,-561 185.5,-561 185.5,-561 191.5,-561 197.5,-567 197.5,-573 197.5,-573 197.5,-587 197.5,-587 197.5,-593 191.5,-599 185.5,-599"/>
<text text-anchor="middle" x="109.5" y="-583.8" font-family="Arial" font-size="14.00">分配子表面数组</text>
<text text-anchor="middle" x="109.5" y="-568.8" font-family="Arial" font-size="14.00">(children = ctx.arena.alloc)</text>
</g>
<!-- draw_child&#45;&gt;alloc_children -->
<g id="edge4" class="edge">
<title>draw_child&#45;&gt;alloc_children</title>
<path fill="none" stroke="black" d="M109.5,-634.83C109.5,-627.13 109.5,-617.97 109.5,-609.42"/>
<polygon fill="black" stroke="black" points="113,-609.41 109.5,-599.41 106,-609.41 113,-609.41"/>
</g>
<!-- set_child_position -->
<g id="node6" class="node">
<title>set_child_position</title>
<path fill="none" stroke="black" d="M179.5,-525C179.5,-525 39.5,-525 39.5,-525 33.5,-525 27.5,-519 27.5,-513 27.5,-513 27.5,-499 27.5,-499 27.5,-493 33.5,-487 39.5,-487 39.5,-487 179.5,-487 179.5,-487 185.5,-487 191.5,-493 191.5,-499 191.5,-499 191.5,-513 191.5,-513 191.5,-519 185.5,-525 179.5,-525"/>
<text text-anchor="middle" x="109.5" y="-509.8" font-family="Arial" font-size="14.00">设置子表面位置</text>
<text text-anchor="middle" x="109.5" y="-494.8" font-family="Arial" font-size="14.00">(origin={1,1}, z_index=0)</text>
</g>
<!-- alloc_children&#45;&gt;set_child_position -->
<g id="edge5" class="edge">
<title>alloc_children&#45;&gt;set_child_position</title>
<path fill="none" stroke="black" d="M109.5,-560.83C109.5,-553.13 109.5,-543.97 109.5,-535.42"/>
<polygon fill="black" stroke="black" points="113,-535.41 109.5,-525.41 106,-535.41 113,-535.41"/>
</g>
<!-- calc_size -->
<g id="node7" class="node">
<title>calc_size</title>
<path fill="none" stroke="black" d="M182.5,-451C182.5,-451 36.5,-451 36.5,-451 30.5,-451 24.5,-445 24.5,-439 24.5,-439 24.5,-410 24.5,-410 24.5,-404 30.5,-398 36.5,-398 36.5,-398 182.5,-398 182.5,-398 188.5,-398 194.5,-404 194.5,-410 194.5,-410 194.5,-439 194.5,-439 194.5,-445 188.5,-451 182.5,-451"/>
<text text-anchor="middle" x="109.5" y="-435.8" font-family="Arial" font-size="14.00">计算总尺寸</text>
<text text-anchor="middle" x="109.5" y="-420.8" font-family="Arial" font-size="14.00">(width = child.width + 2)</text>
<text text-anchor="middle" x="109.5" y="-405.8" font-family="Arial" font-size="14.00">(height = child.height + 2)</text>
</g>
<!-- set_child_position&#45;&gt;calc_size -->
<g id="edge6" class="edge">
<title>set_child_position&#45;&gt;calc_size</title>
<path fill="none" stroke="black" d="M109.5,-486.96C109.5,-479.32 109.5,-470.14 109.5,-461.23"/>
<polygon fill="black" stroke="black" points="113,-461 109.5,-451 106,-461 113,-461"/>
</g>
<!-- init_surface -->
<g id="node8" class="node">
<title>init_surface</title>
<path fill="none" stroke="black" d="M177,-362C177,-362 42,-362 42,-362 36,-362 30,-356 30,-350 30,-350 30,-336 30,-336 30,-330 36,-324 42,-324 42,-324 177,-324 177,-324 183,-324 189,-330 189,-336 189,-336 189,-350 189,-350 189,-356 183,-362 177,-362"/>
<text text-anchor="middle" x="109.5" y="-346.8" font-family="Arial" font-size="14.00">初始化主表面</text>
<text text-anchor="middle" x="109.5" y="-331.8" font-family="Arial" font-size="14.00">(surf = initWithChildren)</text>
</g>
<!-- calc_size&#45;&gt;init_surface -->
<g id="edge7" class="edge">
<title>calc_size&#45;&gt;init_surface</title>
<path fill="none" stroke="black" d="M109.5,-397.91C109.5,-389.74 109.5,-380.65 109.5,-372.3"/>
<polygon fill="black" stroke="black" points="113,-372.24 109.5,-362.24 106,-372.24 113,-372.24"/>
</g>
<!-- draw_corners -->
<g id="node9" class="node">
<title>draw_corners</title>
<path fill="none" stroke="black" d="M148.5,-288C148.5,-288 70.5,-288 70.5,-288 64.5,-288 58.5,-282 58.5,-276 58.5,-276 58.5,-262 58.5,-262 58.5,-256 64.5,-250 70.5,-250 70.5,-250 148.5,-250 148.5,-250 154.5,-250 160.5,-256 160.5,-262 160.5,-262 160.5,-276 160.5,-276 160.5,-282 154.5,-288 148.5,-288"/>
<text text-anchor="middle" x="109.5" y="-272.8" font-family="Arial" font-size="14.00">绘制四角字符</text>
<text text-anchor="middle" x="109.5" y="-257.8" font-family="Arial" font-size="14.00">╭ ╮ ╯ ╰</text>
</g>
<!-- init_surface&#45;&gt;draw_corners -->
<g id="edge8" class="edge">
<title>init_surface&#45;&gt;draw_corners</title>
<path fill="none" stroke="black" d="M109.5,-323.83C109.5,-316.13 109.5,-306.97 109.5,-298.42"/>
<polygon fill="black" stroke="black" points="113,-298.41 109.5,-288.41 106,-298.41 113,-298.41"/>
</g>
<!-- loop_horizontal -->
<g id="node10" class="node">
<title>loop_horizontal</title>
<path fill="none" stroke="black" d="M175,-214C175,-214 44,-214 44,-214 38,-214 32,-208 32,-202 32,-202 32,-173 32,-173 32,-167 38,-161 44,-161 44,-161 175,-161 175,-161 181,-161 187,-167 187,-173 187,-173 187,-202 187,-202 187,-208 181,-214 175,-214"/>
<text text-anchor="middle" x="109.5" y="-198.8" font-family="Arial" font-size="14.00">循环绘制水平边框</text>
<text text-anchor="middle" x="109.5" y="-183.8" font-family="Arial" font-size="14.00">(col从1到right_edge&#45;1)</text>
<text text-anchor="middle" x="109.5" y="-168.8" font-family="Arial" font-size="14.00">写入─字符</text>
</g>
<!-- draw_corners&#45;&gt;loop_horizontal -->
<g id="edge9" class="edge">
<title>draw_corners&#45;&gt;loop_horizontal</title>
<path fill="none" stroke="black" d="M109.5,-249.96C109.5,-242.32 109.5,-233.14 109.5,-224.23"/>
<polygon fill="black" stroke="black" points="113,-224 109.5,-214 106,-224 113,-224"/>
</g>
<!-- loop_vertical -->
<g id="node11" class="node">
<title>loop_vertical</title>
<path fill="none" stroke="black" d="M185,-125C185,-125 34,-125 34,-125 28,-125 22,-119 22,-113 22,-113 22,-84 22,-84 22,-78 28,-72 34,-72 34,-72 185,-72 185,-72 191,-72 197,-78 197,-84 197,-84 197,-113 197,-113 197,-119 191,-125 185,-125"/>
<text text-anchor="middle" x="109.5" y="-109.8" font-family="Arial" font-size="14.00">循环绘制垂直边框</text>
<text text-anchor="middle" x="109.5" y="-94.8" font-family="Arial" font-size="14.00">(row从1到bottom_edge&#45;1)</text>
<text text-anchor="middle" x="109.5" y="-79.8" font-family="Arial" font-size="14.00">写入│字符</text>
</g>
<!-- loop_horizontal&#45;&gt;loop_vertical -->
<g id="edge10" class="edge">
<title>loop_horizontal&#45;&gt;loop_vertical</title>
<path fill="none" stroke="black" d="M109.5,-160.87C109.5,-152.89 109.5,-143.93 109.5,-135.38"/>
<polygon fill="black" stroke="black" points="113,-135.25 109.5,-125.25 106,-135.25 113,-135.25"/>
</g>
<!-- return_surf -->
<g id="node12" class="node">
<title>return_surf</title>
<path fill="none" stroke="black" d="M148.5,-36C148.5,-36 70.5,-36 70.5,-36 64.5,-36 58.5,-30 58.5,-24 58.5,-24 58.5,-12 58.5,-12 58.5,-6 64.5,0 70.5,0 70.5,0 148.5,0 148.5,0 154.5,0 160.5,-6 160.5,-12 160.5,-12 160.5,-24 160.5,-24 160.5,-30 154.5,-36 148.5,-36"/>
<text text-anchor="middle" x="109.5" y="-14.3" font-family="Arial" font-size="14.00">返回最终表面</text>
</g>
<!-- loop_vertical&#45;&gt;return_surf -->
<g id="edge11" class="edge">
<title>loop_vertical&#45;&gt;return_surf</title>
<path fill="none" stroke="black" d="M109.5,-71.8C109.5,-63.71 109.5,-54.76 109.5,-46.55"/>
<polygon fill="black" stroke="black" points="113,-46.33 109.5,-36.33 106,-46.33 113,-46.33"/>
</g>
</g>
</svg>
