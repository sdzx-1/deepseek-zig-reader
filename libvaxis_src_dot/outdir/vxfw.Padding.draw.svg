<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: draw_flowchart Pages: 1 -->
<svg width="329pt" height="960pt"
 viewBox="0.00 0.00 329.00 960.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 956)">
<title>draw_flowchart</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-956 325,-956 325,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<path fill="none" stroke="black" d="M175.5,-952C175.5,-952 145.5,-952 145.5,-952 139.5,-952 133.5,-946 133.5,-940 133.5,-940 133.5,-928 133.5,-928 133.5,-922 139.5,-916 145.5,-916 145.5,-916 175.5,-916 175.5,-916 181.5,-916 187.5,-922 187.5,-928 187.5,-928 187.5,-940 187.5,-940 187.5,-946 181.5,-952 175.5,-952"/>
<text text-anchor="middle" x="160.5" y="-930.3" font-family="Times,serif" font-size="14.00">开始</text>
</g>
<!-- check_left_right -->
<g id="node2" class="node">
<title>check_left_right</title>
<path fill="none" stroke="black" d="M272.5,-880C272.5,-880 48.5,-880 48.5,-880 42.5,-880 36.5,-874 36.5,-868 36.5,-868 36.5,-854 36.5,-854 36.5,-848 42.5,-842 48.5,-842 48.5,-842 272.5,-842 272.5,-842 278.5,-842 284.5,-848 284.5,-854 284.5,-854 284.5,-868 284.5,-868 284.5,-874 278.5,-880 272.5,-880"/>
<text text-anchor="middle" x="160.5" y="-864.8" font-family="Times,serif" font-size="14.00">检查pad.left &gt; 0 或 pad.right &gt; 0</text>
<text text-anchor="middle" x="160.5" y="-849.8" font-family="Times,serif" font-size="14.00">触发ctx.max.width断言</text>
</g>
<!-- start&#45;&gt;check_left_right -->
<g id="edge1" class="edge">
<title>start&#45;&gt;check_left_right</title>
<path fill="none" stroke="black" d="M160.5,-915.81C160.5,-908.11 160.5,-898.82 160.5,-890.15"/>
<polygon fill="black" stroke="black" points="164,-890.02 160.5,-880.02 157,-890.02 164,-890.02"/>
</g>
<!-- check_top_bottom -->
<g id="node3" class="node">
<title>check_top_bottom</title>
<path fill="none" stroke="black" d="M280,-806C280,-806 41,-806 41,-806 35,-806 29,-800 29,-794 29,-794 29,-780 29,-780 29,-774 35,-768 41,-768 41,-768 280,-768 280,-768 286,-768 292,-774 292,-780 292,-780 292,-794 292,-794 292,-800 286,-806 280,-806"/>
<text text-anchor="middle" x="160.5" y="-790.8" font-family="Times,serif" font-size="14.00">检查pad.top &gt; 0 或 pad.bottom &gt; 0</text>
<text text-anchor="middle" x="160.5" y="-775.8" font-family="Times,serif" font-size="14.00">触发ctx.max.height断言</text>
</g>
<!-- check_left_right&#45;&gt;check_top_bottom -->
<g id="edge2" class="edge">
<title>check_left_right&#45;&gt;check_top_bottom</title>
<path fill="none" stroke="black" d="M160.5,-841.83C160.5,-834.13 160.5,-824.97 160.5,-816.42"/>
<polygon fill="black" stroke="black" points="164,-816.41 160.5,-806.41 157,-816.41 164,-816.41"/>
</g>
<!-- calc_inner_min -->
<g id="node4" class="node">
<title>calc_inner_min</title>
<path fill="none" stroke="black" d="M277,-732C277,-732 44,-732 44,-732 38,-732 32,-726 32,-720 32,-720 32,-691 32,-691 32,-685 38,-679 44,-679 44,-679 277,-679 277,-679 283,-679 289,-685 289,-691 289,-691 289,-720 289,-720 289,-726 283,-732 277,-732"/>
<text text-anchor="middle" x="160.5" y="-716.8" font-family="Times,serif" font-size="14.00">计算inner_min:</text>
<text text-anchor="middle" x="160.5" y="-701.8" font-family="Times,serif" font-size="14.00">width = ctx.min.width &#45; 左右边距</text>
<text text-anchor="middle" x="160.5" y="-686.8" font-family="Times,serif" font-size="14.00">height = ctx.min.height &#45; 上下边距</text>
</g>
<!-- check_top_bottom&#45;&gt;calc_inner_min -->
<g id="edge3" class="edge">
<title>check_top_bottom&#45;&gt;calc_inner_min</title>
<path fill="none" stroke="black" d="M160.5,-767.96C160.5,-760.32 160.5,-751.14 160.5,-742.23"/>
<polygon fill="black" stroke="black" points="164,-742 160.5,-732 157,-742 164,-742"/>
</g>
<!-- calc_max_width -->
<g id="node5" class="node">
<title>calc_max_width</title>
<path fill="none" stroke="black" d="M306.5,-643C306.5,-643 14.5,-643 14.5,-643 8.5,-643 2.5,-637 2.5,-631 2.5,-631 2.5,-617 2.5,-617 2.5,-611 8.5,-605 14.5,-605 14.5,-605 306.5,-605 306.5,-605 312.5,-605 318.5,-611 318.5,-617 318.5,-617 318.5,-631 318.5,-631 318.5,-637 312.5,-643 306.5,-643"/>
<text text-anchor="middle" x="160.5" y="-627.8" font-family="Times,serif" font-size="14.00">计算max_width:</text>
<text text-anchor="middle" x="160.5" y="-612.8" font-family="Times,serif" font-size="14.00">如果ctx.max.width存在则减去边距，否则null</text>
</g>
<!-- calc_inner_min&#45;&gt;calc_max_width -->
<g id="edge4" class="edge">
<title>calc_inner_min&#45;&gt;calc_max_width</title>
<path fill="none" stroke="black" d="M160.5,-678.91C160.5,-670.74 160.5,-661.65 160.5,-653.3"/>
<polygon fill="black" stroke="black" points="164,-653.24 160.5,-643.24 157,-653.24 164,-653.24"/>
</g>
<!-- calc_max_height -->
<g id="node6" class="node">
<title>calc_max_height</title>
<path fill="none" stroke="black" d="M309,-569C309,-569 12,-569 12,-569 6,-569 0,-563 0,-557 0,-557 0,-543 0,-543 0,-537 6,-531 12,-531 12,-531 309,-531 309,-531 315,-531 321,-537 321,-543 321,-543 321,-557 321,-557 321,-563 315,-569 309,-569"/>
<text text-anchor="middle" x="160.5" y="-553.8" font-family="Times,serif" font-size="14.00">计算max_height:</text>
<text text-anchor="middle" x="160.5" y="-538.8" font-family="Times,serif" font-size="14.00">如果ctx.max.height存在则减去边距，否则null</text>
</g>
<!-- calc_max_width&#45;&gt;calc_max_height -->
<g id="edge5" class="edge">
<title>calc_max_width&#45;&gt;calc_max_height</title>
<path fill="none" stroke="black" d="M160.5,-604.83C160.5,-597.13 160.5,-587.97 160.5,-579.42"/>
<polygon fill="black" stroke="black" points="164,-579.41 160.5,-569.41 157,-579.41 164,-579.41"/>
</g>
<!-- create_inner_max -->
<g id="node7" class="node">
<title>create_inner_max</title>
<path fill="none" stroke="black" d="M286.5,-495C286.5,-495 34.5,-495 34.5,-495 28.5,-495 22.5,-489 22.5,-483 22.5,-483 22.5,-469 22.5,-469 22.5,-463 28.5,-457 34.5,-457 34.5,-457 286.5,-457 286.5,-457 292.5,-457 298.5,-463 298.5,-469 298.5,-469 298.5,-483 298.5,-483 298.5,-489 292.5,-495 286.5,-495"/>
<text text-anchor="middle" x="160.5" y="-479.8" font-family="Times,serif" font-size="14.00">创建inner_max结构体</text>
<text text-anchor="middle" x="160.5" y="-464.8" font-family="Times,serif" font-size="14.00">包含调整后的max_width和max_height</text>
</g>
<!-- calc_max_height&#45;&gt;create_inner_max -->
<g id="edge6" class="edge">
<title>calc_max_height&#45;&gt;create_inner_max</title>
<path fill="none" stroke="black" d="M160.5,-530.83C160.5,-523.13 160.5,-513.97 160.5,-505.42"/>
<polygon fill="black" stroke="black" points="164,-505.41 160.5,-495.41 157,-505.41 164,-505.41"/>
</g>
<!-- call_child_draw -->
<g id="node8" class="node">
<title>call_child_draw</title>
<path fill="none" stroke="black" d="M265,-421C265,-421 56,-421 56,-421 50,-421 44,-415 44,-409 44,-409 44,-395 44,-395 44,-389 50,-383 56,-383 56,-383 265,-383 265,-383 271,-383 277,-389 277,-395 277,-395 277,-409 277,-409 277,-415 271,-421 265,-421"/>
<text text-anchor="middle" x="160.5" y="-405.8" font-family="Times,serif" font-size="14.00">调用self.child.draw</text>
<text text-anchor="middle" x="160.5" y="-390.8" font-family="Times,serif" font-size="14.00">传入inner_min和inner_max约束</text>
</g>
<!-- create_inner_max&#45;&gt;call_child_draw -->
<g id="edge7" class="edge">
<title>create_inner_max&#45;&gt;call_child_draw</title>
<path fill="none" stroke="black" d="M160.5,-456.83C160.5,-449.13 160.5,-439.97 160.5,-431.42"/>
<polygon fill="black" stroke="black" points="164,-431.41 160.5,-421.41 157,-431.41 164,-431.41"/>
</g>
<!-- alloc_children -->
<g id="node9" class="node">
<title>alloc_children</title>
<path fill="none" stroke="black" d="M214.5,-347C214.5,-347 106.5,-347 106.5,-347 100.5,-347 94.5,-341 94.5,-335 94.5,-335 94.5,-321 94.5,-321 94.5,-315 100.5,-309 106.5,-309 106.5,-309 214.5,-309 214.5,-309 220.5,-309 226.5,-315 226.5,-321 226.5,-321 226.5,-335 226.5,-335 226.5,-341 220.5,-347 214.5,-347"/>
<text text-anchor="middle" x="160.5" y="-331.8" font-family="Times,serif" font-size="14.00">分配children数组</text>
<text text-anchor="middle" x="160.5" y="-316.8" font-family="Times,serif" font-size="14.00">(ctx.arena.alloc)</text>
</g>
<!-- call_child_draw&#45;&gt;alloc_children -->
<g id="edge8" class="edge">
<title>call_child_draw&#45;&gt;alloc_children</title>
<path fill="none" stroke="black" d="M160.5,-382.83C160.5,-375.13 160.5,-365.97 160.5,-357.42"/>
<polygon fill="black" stroke="black" points="164,-357.41 160.5,-347.41 157,-357.41 164,-357.41"/>
</g>
<!-- setup_child -->
<g id="node10" class="node">
<title>setup_child</title>
<path fill="none" stroke="black" d="M239.5,-273C239.5,-273 81.5,-273 81.5,-273 75.5,-273 69.5,-267 69.5,-261 69.5,-261 69.5,-247 69.5,-247 69.5,-241 75.5,-235 81.5,-235 81.5,-235 239.5,-235 239.5,-235 245.5,-235 251.5,-241 251.5,-247 251.5,-247 251.5,-261 251.5,-261 251.5,-267 245.5,-273 239.5,-273"/>
<text text-anchor="middle" x="160.5" y="-257.8" font-family="Times,serif" font-size="14.00">设置children[0]参数</text>
<text text-anchor="middle" x="160.5" y="-242.8" font-family="Times,serif" font-size="14.00">surface, z_index, origin</text>
</g>
<!-- alloc_children&#45;&gt;setup_child -->
<g id="edge9" class="edge">
<title>alloc_children&#45;&gt;setup_child</title>
<path fill="none" stroke="black" d="M160.5,-308.83C160.5,-301.13 160.5,-291.97 160.5,-283.42"/>
<polygon fill="black" stroke="black" points="164,-283.41 160.5,-273.41 157,-283.41 164,-283.41"/>
</g>
<!-- calc_total_size -->
<g id="node11" class="node">
<title>calc_total_size</title>
<path fill="none" stroke="black" d="M269.5,-199C269.5,-199 51.5,-199 51.5,-199 45.5,-199 39.5,-193 39.5,-187 39.5,-187 39.5,-158 39.5,-158 39.5,-152 45.5,-146 51.5,-146 51.5,-146 269.5,-146 269.5,-146 275.5,-146 281.5,-152 281.5,-158 281.5,-158 281.5,-187 281.5,-187 281.5,-193 275.5,-199 269.5,-199"/>
<text text-anchor="middle" x="160.5" y="-183.8" font-family="Times,serif" font-size="14.00">计算总size:</text>
<text text-anchor="middle" x="160.5" y="-168.8" font-family="Times,serif" font-size="14.00">width = 子surface宽 + 左右边距</text>
<text text-anchor="middle" x="160.5" y="-153.8" font-family="Times,serif" font-size="14.00">height = 子surface高 + 上下边距</text>
</g>
<!-- setup_child&#45;&gt;calc_total_size -->
<g id="edge10" class="edge">
<title>setup_child&#45;&gt;calc_total_size</title>
<path fill="none" stroke="black" d="M160.5,-234.96C160.5,-227.32 160.5,-218.14 160.5,-209.23"/>
<polygon fill="black" stroke="black" points="164,-209 160.5,-199 157,-209 164,-209"/>
</g>
<!-- create_surface -->
<g id="node12" class="node">
<title>create_surface</title>
<path fill="none" stroke="black" d="M272.5,-110C272.5,-110 48.5,-110 48.5,-110 42.5,-110 36.5,-104 36.5,-98 36.5,-98 36.5,-84 36.5,-84 36.5,-78 42.5,-72 48.5,-72 48.5,-72 272.5,-72 272.5,-72 278.5,-72 284.5,-78 284.5,-84 284.5,-84 284.5,-98 284.5,-98 284.5,-104 278.5,-110 272.5,-110"/>
<text text-anchor="middle" x="160.5" y="-94.8" font-family="Times,serif" font-size="14.00">创建并返回Surface</text>
<text text-anchor="middle" x="160.5" y="-79.8" font-family="Times,serif" font-size="14.00">包含size, widget, buffer, children</text>
</g>
<!-- calc_total_size&#45;&gt;create_surface -->
<g id="edge11" class="edge">
<title>calc_total_size&#45;&gt;create_surface</title>
<path fill="none" stroke="black" d="M160.5,-145.91C160.5,-137.74 160.5,-128.65 160.5,-120.3"/>
<polygon fill="black" stroke="black" points="164,-120.24 160.5,-110.24 157,-120.24 164,-120.24"/>
</g>
<!-- end -->
<g id="node13" class="node">
<title>end</title>
<path fill="none" stroke="black" d="M175.5,-36C175.5,-36 145.5,-36 145.5,-36 139.5,-36 133.5,-30 133.5,-24 133.5,-24 133.5,-12 133.5,-12 133.5,-6 139.5,0 145.5,0 145.5,0 175.5,0 175.5,0 181.5,0 187.5,-6 187.5,-12 187.5,-12 187.5,-24 187.5,-24 187.5,-30 181.5,-36 175.5,-36"/>
<text text-anchor="middle" x="160.5" y="-14.3" font-family="Times,serif" font-size="14.00">结束</text>
</g>
<!-- create_surface&#45;&gt;end -->
<g id="edge12" class="edge">
<title>create_surface&#45;&gt;end</title>
<path fill="none" stroke="black" d="M160.5,-71.72C160.5,-63.97 160.5,-54.79 160.5,-46.27"/>
<polygon fill="black" stroke="black" points="164,-46 160.5,-36 157,-46 164,-46"/>
</g>
</g>
</svg>
