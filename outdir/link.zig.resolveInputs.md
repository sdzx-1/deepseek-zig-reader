graph TD
    A[开始resolveInputs] --> B[初始化checked_paths和ld_script_bytes]
    B --> C[反转unresolved_inputs顺序]
    C --> D{是否还有未解析的输入项?}
    D -->|是| E[弹出当前项unresolved_input]
    E --> F{输入项类型}
    F -->|name_query| G[处理名称查询]
    G --> H{搜索策略}
    H -->|mode_first/no_fallback| I[遍历库目录检查首选模式]
    I --> J{找到?}
    J -->|是| D
    J -->|否| K[是否允许回退?]
    K -->|no_fallback| L[记录失败并继续]
    K -->|mode_first| M[检查回退模式]
    M --> N{找到?}
    N -->|是| D
    N -->|否| L
    H -->|paths_first| O[对每个库目录检查首选和回退]
    O --> P{找到?}
    P -->|是| D
    P -->|否| Q[记录失败并继续]
    F -->|ambiguous_name| R[尝试当前工作目录路径]
    R --> S{找到?}
    S -->|是| D
    S -->|否| T[遍历库目录检查路径]
    T --> U{找到?}
    U -->|是| D
    U -->|否| V[致命错误]
    F -->|path_query| W[直接解析路径]
    W --> X{找到?}
    X -->|是| D
    X -->|否| Y[致命错误]
    F -->|dso_exact| Z[直接添加到resolved_inputs]
    Z --> D
    D -->|否| AA[检查是否有失败项]
    AA -->|有| BB[输出错误并退出]
    AA -->|无| CC[正常结束]
    L --> D
    Q --> D
    V --> D
    Y --> D
