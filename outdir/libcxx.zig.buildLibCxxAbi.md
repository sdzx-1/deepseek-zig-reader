flowchart TD
    A[开始] --> B{检查LLVM支持}
    B -->|无LLVM| C[返回错误]
    B -->|有LLVM| D[初始化跟踪和内存分配器]
    D --> E[生成输出文件名basename]
    E --> F[配置编译选项和路径]
    F --> G[设置ABI版本和命名空间参数]
    G --> H[解析编译配置config]
    H --> I{配置解析成功?}
    I -->|失败| J[设置错误并返回]
    I -->|成功| K[创建root模块]
    K --> L{模块创建成功?}
    L -->|失败| M[设置错误并返回]
    L -->|成功| N[遍历libcxxabi源文件]
    N --> O{当前文件是否适用于目标平台?}
    O -->|WASI跳过异常文件| P[调整编译标志]
    O -->|其他平台| Q[添加通用编译标志]
    P --> R[添加平台特定标志]
    Q --> R
    R --> S[收集include路径和缓存豁免标志]
    S --> T[将文件加入编译列表]
    T --> N
    N -->|遍历完成| U[创建子编译实例sub_compilation]
    U --> V{子编译创建成功?}
    V -->|失败| W[设置错误并返回]
    V -->|成功| X[执行子编译]
    X --> Y{编译成功?}
    Y -->|失败| Z[设置错误并返回]
    Y -->|成功| AA[提取生成的静态库]
    AA --> AB[将库加入主编译]
    AB --> AC[结束]
