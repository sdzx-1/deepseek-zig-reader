<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: flowchart Pages: 1 -->
<svg width="780pt" height="1157pt"
 viewBox="0.00 0.00 780.18 1157.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1153)">
<title>flowchart</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-1153 776.18,-1153 776.18,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<ellipse fill="#cccccc" stroke="black" cx="128.68" cy="-1131" rx="88.28" ry="18"/>
<text text-anchor="middle" x="128.68" y="-1127.3" font-family="Arial" font-size="14.00">Start drawWithStyle</text>
</g>
<!-- adjust_offset -->
<g id="node2" class="node">
<title>adjust_offset</title>
<polygon fill="#cccccc" stroke="black" points="255.18,-1076 2.18,-1076 2.18,-1040 255.18,-1040 255.18,-1076"/>
<text text-anchor="middle" x="128.68" y="-1054.3" font-family="Arial" font-size="14.00">Adjust draw_offset based on cursor_idx</text>
</g>
<!-- start&#45;&gt;adjust_offset -->
<g id="edge1" class="edge">
<title>start&#45;&gt;adjust_offset</title>
<path fill="none" stroke="black" d="M128.68,-1112.81C128.68,-1104.79 128.68,-1095.05 128.68,-1086.07"/>
<polygon fill="black" stroke="black" points="132.18,-1086.03 128.68,-1076.03 125.18,-1086.03 132.18,-1086.03"/>
</g>
<!-- check_win_width -->
<g id="node3" class="node">
<title>check_win_width</title>
<polygon fill="#cccccc" stroke="black" points="128.68,-1003 -0.18,-985 128.68,-967 257.55,-985 128.68,-1003"/>
<text text-anchor="middle" x="128.68" y="-981.3" font-family="Arial" font-size="14.00">Window width == 0?</text>
</g>
<!-- adjust_offset&#45;&gt;check_win_width -->
<g id="edge2" class="edge">
<title>adjust_offset&#45;&gt;check_win_width</title>
<path fill="none" stroke="black" d="M128.68,-1039.81C128.68,-1031.79 128.68,-1022.05 128.68,-1013.07"/>
<polygon fill="black" stroke="black" points="132.18,-1013.03 128.68,-1003.03 125.18,-1013.03 132.18,-1013.03"/>
</g>
<!-- end -->
<g id="node4" class="node">
<title>end</title>
<ellipse fill="#cccccc" stroke="black" cx="124.68" cy="-18" rx="37.09" ry="18"/>
<text text-anchor="middle" x="124.68" y="-14.3" font-family="Arial" font-size="14.00">Return</text>
</g>
<!-- check_win_width&#45;&gt;end -->
<g id="edge3" class="edge">
<title>check_win_width&#45;&gt;end</title>
<path fill="none" stroke="black" d="M123.71,-967.56C119.01,-950.56 112.68,-923.18 112.68,-899 112.68,-899 112.68,-899 112.68,-90 112.68,-75.3 115.21,-59.13 117.95,-45.94"/>
<polygon fill="black" stroke="black" points="121.39,-46.6 120.15,-36.08 114.56,-45.08 121.39,-46.6"/>
<text text-anchor="middle" x="125.18" y="-515.3" font-family="Times,serif" font-size="14.00">Yes</text>
</g>
<!-- while_loop -->
<g id="node5" class="node">
<title>while_loop</title>
<polygon fill="#cccccc" stroke="black" points="363.68,-916 157.68,-916 157.68,-880 363.68,-880 363.68,-916"/>
<text text-anchor="middle" x="260.68" y="-894.3" font-family="Arial" font-size="14.00">Adjust draw_offset in while loop</text>
</g>
<!-- check_win_width&#45;&gt;while_loop -->
<g id="edge4" class="edge">
<title>check_win_width&#45;&gt;while_loop</title>
<path fill="none" stroke="black" d="M150.48,-969.96C170.83,-956.86 201.55,-937.08 225.39,-921.73"/>
<polygon fill="black" stroke="black" points="227.32,-924.65 233.83,-916.29 223.53,-918.76 227.32,-924.65"/>
<text text-anchor="middle" x="212.18" y="-937.8" font-family="Times,serif" font-size="14.00">No</text>
</g>
<!-- save_cursor -->
<g id="node6" class="node">
<title>save_cursor</title>
<polygon fill="#cccccc" stroke="black" points="424.18,-843 151.18,-843 151.18,-807 424.18,-807 424.18,-843"/>
<text text-anchor="middle" x="287.68" y="-821.3" font-family="Arial" font-size="14.00">Save prev_cursor_idx and prev_cursor_col</text>
</g>
<!-- while_loop&#45;&gt;save_cursor -->
<g id="edge5" class="edge">
<title>while_loop&#45;&gt;save_cursor</title>
<path fill="none" stroke="black" d="M267.22,-879.81C270.34,-871.62 274.14,-861.62 277.61,-852.48"/>
<polygon fill="black" stroke="black" points="280.92,-853.62 281.21,-843.03 274.38,-851.13 280.92,-853.62"/>
</g>
<!-- process_first_half -->
<g id="node7" class="node">
<title>process_first_half</title>
<polygon fill="#cccccc" stroke="black" points="367.18,-770 214.18,-770 214.18,-734 367.18,-734 367.18,-770"/>
<text text-anchor="middle" x="290.68" y="-748.3" font-family="Arial" font-size="14.00">Process firstHalf buffer</text>
</g>
<!-- save_cursor&#45;&gt;process_first_half -->
<g id="edge6" class="edge">
<title>save_cursor&#45;&gt;process_first_half</title>
<path fill="none" stroke="black" d="M288.41,-806.81C288.75,-798.79 289.16,-789.05 289.54,-780.07"/>
<polygon fill="black" stroke="black" points="293.04,-780.17 289.96,-770.03 286.04,-779.87 293.04,-780.17"/>
</g>
<!-- process_second_half -->
<g id="node8" class="node">
<title>process_second_half</title>
<polygon fill="#cccccc" stroke="black" points="649.18,-255 474.18,-255 474.18,-219 649.18,-219 649.18,-255"/>
<text text-anchor="middle" x="561.68" y="-233.3" font-family="Arial" font-size="14.00">Process secondHalf buffer</text>
</g>
<!-- process_first_half&#45;&gt;process_second_half -->
<g id="edge7" class="edge">
<title>process_first_half&#45;&gt;process_second_half</title>
<path fill="none" stroke="black" d="M367.5,-748.26C458.15,-742.88 596.68,-726.97 596.68,-680 596.68,-680 596.68,-680 596.68,-323 596.68,-302.06 587.48,-280.25 578.52,-263.96"/>
<polygon fill="black" stroke="black" points="581.39,-261.94 573.34,-255.06 575.34,-265.47 581.39,-261.94"/>
</g>
<!-- first_iter -->
<g id="node11" class="node">
<title>first_iter</title>
<polygon fill="#cccccc" stroke="black" points="378.68,-697 202.68,-697 202.68,-661 378.68,-661 378.68,-697"/>
<text text-anchor="middle" x="290.68" y="-675.3" font-family="Arial" font-size="14.00">Iterate firstHalf graphemes</text>
</g>
<!-- process_first_half&#45;&gt;first_iter -->
<g id="edge11" class="edge">
<title>process_first_half&#45;&gt;first_iter</title>
<path fill="none" stroke="black" d="M290.68,-733.81C290.68,-725.79 290.68,-716.05 290.68,-707.07"/>
<polygon fill="black" stroke="black" points="294.18,-707.03 290.68,-697.03 287.18,-707.03 294.18,-707.03"/>
</g>
<!-- left_ellipsis -->
<g id="node9" class="node">
<title>left_ellipsis</title>
<polygon fill="#cccccc" stroke="black" points="772.18,-182 551.18,-182 551.18,-146 772.18,-146 772.18,-182"/>
<text text-anchor="middle" x="661.68" y="-160.3" font-family="Arial" font-size="14.00">Draw left ellipsis if draw_offset &gt; 0</text>
</g>
<!-- process_second_half&#45;&gt;left_ellipsis -->
<g id="edge8" class="edge">
<title>process_second_half&#45;&gt;left_ellipsis</title>
<path fill="none" stroke="black" d="M585.63,-218.99C598.65,-209.75 614.93,-198.19 629.09,-188.14"/>
<polygon fill="black" stroke="black" points="631.45,-190.76 637.58,-182.11 627.4,-185.05 631.45,-190.76"/>
</g>
<!-- second_iter -->
<g id="node20" class="node">
<title>second_iter</title>
<polygon fill="#cccccc" stroke="black" points="532.68,-182 334.68,-182 334.68,-146 532.68,-146 532.68,-182"/>
<text text-anchor="middle" x="433.68" y="-160.3" font-family="Arial" font-size="14.00">Iterate secondHalf graphemes</text>
</g>
<!-- process_second_half&#45;&gt;second_iter -->
<g id="edge24" class="edge">
<title>process_second_half&#45;&gt;second_iter</title>
<path fill="none" stroke="black" d="M531.02,-218.99C513.73,-209.4 491.94,-197.32 473.36,-187.01"/>
<polygon fill="black" stroke="black" points="474.98,-183.9 464.53,-182.11 471.58,-190.02 474.98,-183.9"/>
</g>
<!-- show_cursor -->
<g id="node10" class="node">
<title>show_cursor</title>
<polygon fill="#cccccc" stroke="black" points="527.18,-109 372.18,-109 372.18,-73 527.18,-73 527.18,-109"/>
<text text-anchor="middle" x="449.68" y="-87.3" font-family="Arial" font-size="14.00">Show cursor in window</text>
</g>
<!-- left_ellipsis&#45;&gt;show_cursor -->
<g id="edge9" class="edge">
<title>left_ellipsis&#45;&gt;show_cursor</title>
<path fill="none" stroke="black" d="M610.9,-145.99C580.71,-135.88 542.22,-122.99 510.42,-112.34"/>
<polygon fill="black" stroke="black" points="511.38,-108.97 500.78,-109.11 509.15,-115.61 511.38,-108.97"/>
</g>
<!-- show_cursor&#45;&gt;end -->
<g id="edge10" class="edge">
<title>show_cursor&#45;&gt;end</title>
<path fill="none" stroke="black" d="M371.84,-72.99C307.93,-59.03 219.79,-39.78 167.86,-28.43"/>
<polygon fill="black" stroke="black" points="168.49,-24.99 157.97,-26.27 167,-31.83 168.49,-24.99"/>
</g>
<!-- check_i_offset -->
<g id="node12" class="node">
<title>check_i_offset</title>
<polygon fill="#cccccc" stroke="black" points="297.68,-624 193.95,-606 297.68,-588 401.41,-606 297.68,-624"/>
<text text-anchor="middle" x="297.68" y="-602.3" font-family="Arial" font-size="14.00">i &lt; draw_offset?</text>
</g>
<!-- first_iter&#45;&gt;check_i_offset -->
<g id="edge12" class="edge">
<title>first_iter&#45;&gt;check_i_offset</title>
<path fill="none" stroke="black" d="M292.38,-660.81C293.17,-652.79 294.13,-643.05 295.01,-634.07"/>
<polygon fill="black" stroke="black" points="298.5,-634.32 296,-624.03 291.54,-633.64 298.5,-634.32"/>
</g>
<!-- skip_grapheme -->
<g id="node13" class="node">
<title>skip_grapheme</title>
<polygon fill="#cccccc" stroke="black" points="288.68,-483 180.68,-483 180.68,-447 288.68,-447 288.68,-483"/>
<text text-anchor="middle" x="234.68" y="-461.3" font-family="Arial" font-size="14.00">Skip grapheme</text>
</g>
<!-- check_i_offset&#45;&gt;skip_grapheme -->
<g id="edge13" class="edge">
<title>check_i_offset&#45;&gt;skip_grapheme</title>
<path fill="none" stroke="black" d="M285.9,-589.86C276.06,-576.58 262.3,-556.41 253.68,-537 247.51,-523.1 242.97,-506.76 239.88,-493.26"/>
<polygon fill="black" stroke="black" points="243.23,-492.19 237.7,-483.15 236.38,-493.66 243.23,-492.19"/>
<text text-anchor="middle" x="283.18" y="-558.8" font-family="Times,serif" font-size="14.00">Yes</text>
</g>
<!-- check_col_width -->
<g id="node14" class="node">
<title>check_col_width</title>
<polygon fill="#cccccc" stroke="black" points="396.68,-537 262.29,-519 396.68,-501 531.08,-519 396.68,-537"/>
<text text-anchor="middle" x="396.68" y="-515.3" font-family="Arial" font-size="14.00">col + w &gt;= win.width?</text>
</g>
<!-- check_i_offset&#45;&gt;check_col_width -->
<g id="edge14" class="edge">
<title>check_i_offset&#45;&gt;check_col_width</title>
<path fill="none" stroke="black" d="M314.48,-590.58C330.17,-577.11 353.8,-556.82 371.7,-541.45"/>
<polygon fill="black" stroke="black" points="374.17,-543.95 379.47,-534.78 369.61,-538.63 374.17,-543.95"/>
<text text-anchor="middle" x="363.18" y="-558.8" font-family="Times,serif" font-size="14.00">No</text>
</g>
<!-- update_col_i -->
<g id="node17" class="node">
<title>update_col_i</title>
<polygon fill="#cccccc" stroke="black" points="279.68,-182 165.68,-182 165.68,-146 279.68,-146 279.68,-182"/>
<text text-anchor="middle" x="222.68" y="-160.3" font-family="Arial" font-size="14.00">Update col and i</text>
</g>
<!-- skip_grapheme&#45;&gt;update_col_i -->
<g id="edge15" class="edge">
<title>skip_grapheme&#45;&gt;update_col_i</title>
<path fill="none" stroke="black" d="M225.55,-446.94C216.4,-428.24 203.68,-397.09 203.68,-368.5 203.68,-368.5 203.68,-368.5 203.68,-236 203.68,-221.1 207.64,-205.02 211.94,-191.93"/>
<polygon fill="black" stroke="black" points="215.36,-192.76 215.39,-182.16 208.76,-190.43 215.36,-192.76"/>
</g>
<!-- write_ellipsis -->
<g id="node15" class="node">
<title>write_ellipsis</title>
<polygon fill="#cccccc" stroke="black" points="568.68,-429 434.68,-429 434.68,-393 568.68,-393 568.68,-429"/>
<text text-anchor="middle" x="501.68" y="-407.3" font-family="Arial" font-size="14.00">Write ellipsis at end</text>
</g>
<!-- check_col_width&#45;&gt;write_ellipsis -->
<g id="edge17" class="edge">
<title>check_col_width&#45;&gt;write_ellipsis</title>
<path fill="none" stroke="black" d="M411.73,-502.81C428.9,-485.48 457.22,-456.88 477.5,-436.41"/>
<polygon fill="black" stroke="black" points="480.02,-438.84 484.57,-429.27 475.05,-433.91 480.02,-438.84"/>
<text text-anchor="middle" x="477.18" y="-461.3" font-family="Times,serif" font-size="14.00">Yes</text>
</g>
<!-- write_grapheme -->
<g id="node16" class="node">
<title>write_grapheme</title>
<polygon fill="#cccccc" stroke="black" points="416.18,-429 239.18,-429 239.18,-393 416.18,-393 416.18,-429"/>
<text text-anchor="middle" x="327.68" y="-407.3" font-family="Arial" font-size="14.00">Write grapheme to window</text>
</g>
<!-- check_col_width&#45;&gt;write_grapheme -->
<g id="edge19" class="edge">
<title>check_col_width&#45;&gt;write_grapheme</title>
<path fill="none" stroke="black" d="M386.5,-502.36C375.4,-485.3 357.46,-457.74 344.31,-437.54"/>
<polygon fill="black" stroke="black" points="347.21,-435.58 338.82,-429.11 341.34,-439.4 347.21,-435.58"/>
<text text-anchor="middle" x="382.18" y="-461.3" font-family="Times,serif" font-size="14.00">No</text>
</g>
<!-- end_loop_first -->
<g id="node21" class="node">
<title>end_loop_first</title>
<ellipse fill="#cccccc" stroke="black" cx="531.68" cy="-324" rx="0" ry="0"/>
</g>
<!-- write_ellipsis&#45;&gt;end_loop_first -->
<g id="edge18" class="edge">
<title>write_ellipsis&#45;&gt;end_loop_first</title>
<path fill="none" stroke="black" d="M507.75,-392.8C513.92,-375.32 523.26,-348.86 528.25,-334.72"/>
<polygon fill="black" stroke="black" points="531.61,-335.72 531.64,-325.12 525.01,-333.39 531.61,-335.72"/>
<text text-anchor="middle" x="539.18" y="-363.8" font-family="Times,serif" font-size="14.00">Break</text>
</g>
<!-- check_cursor -->
<g id="node18" class="node">
<title>check_cursor</title>
<polygon fill="#cccccc" stroke="black" points="335.68,-342 231.95,-324 335.68,-306 439.41,-324 335.68,-342"/>
<text text-anchor="middle" x="335.68" y="-320.3" font-family="Arial" font-size="14.00">i == cursor_idx?</text>
</g>
<!-- write_grapheme&#45;&gt;check_cursor -->
<g id="edge20" class="edge">
<title>write_grapheme&#45;&gt;check_cursor</title>
<path fill="none" stroke="black" d="M329.3,-392.8C330.4,-381.09 331.89,-365.34 333.14,-351.97"/>
<polygon fill="black" stroke="black" points="336.64,-352.17 334.09,-341.89 329.67,-351.51 336.64,-352.17"/>
</g>
<!-- update_col_i&#45;&gt;first_iter -->
<g id="edge16" class="edge">
<title>update_col_i&#45;&gt;first_iter</title>
<path fill="none" stroke="black" d="M197.85,-182.17C182.49,-194.98 165.68,-214.03 165.68,-236 165.68,-607 165.68,-607 165.68,-607 165.68,-630.37 182.4,-646.14 203.61,-656.75"/>
<polygon fill="black" stroke="black" points="202.39,-660.03 212.94,-660.98 205.28,-653.66 202.39,-660.03"/>
</g>
<!-- check_cursor&#45;&gt;update_col_i -->
<g id="edge22" class="edge">
<title>check_cursor&#45;&gt;update_col_i</title>
<path fill="none" stroke="black" d="M355.5,-309.08C382.1,-288.69 423.51,-249.78 400.68,-219 387.09,-200.67 334.27,-186.12 289.66,-176.77"/>
<polygon fill="black" stroke="black" points="290.2,-173.31 279.71,-174.73 288.8,-180.16 290.2,-173.31"/>
<text text-anchor="middle" x="417.18" y="-233.3" font-family="Times,serif" font-size="14.00">No</text>
</g>
<!-- update_cursor_col -->
<g id="node19" class="node">
<title>update_cursor_col</title>
<polygon fill="#cccccc" stroke="black" points="391.68,-255 231.68,-255 231.68,-219 391.68,-219 391.68,-255"/>
<text text-anchor="middle" x="311.68" y="-233.3" font-family="Arial" font-size="14.00">Update prev_cursor_col</text>
</g>
<!-- check_cursor&#45;&gt;update_cursor_col -->
<g id="edge21" class="edge">
<title>check_cursor&#45;&gt;update_cursor_col</title>
<path fill="none" stroke="black" d="M331.05,-306.61C327.73,-294.85 323.18,-278.73 319.32,-265.07"/>
<polygon fill="black" stroke="black" points="322.63,-263.89 316.54,-255.21 315.89,-265.79 322.63,-263.89"/>
<text text-anchor="middle" x="337.18" y="-276.8" font-family="Times,serif" font-size="14.00">Yes</text>
</g>
<!-- update_cursor_col&#45;&gt;update_col_i -->
<g id="edge23" class="edge">
<title>update_cursor_col&#45;&gt;update_col_i</title>
<path fill="none" stroke="black" d="M290.14,-218.81C278.66,-209.66 264.37,-198.26 251.91,-188.32"/>
<polygon fill="black" stroke="black" points="254.03,-185.53 244.03,-182.03 249.66,-191 254.03,-185.53"/>
</g>
<!-- end_loop_first&#45;&gt;process_second_half -->
<g id="edge25" class="edge">
<title>end_loop_first&#45;&gt;process_second_half</title>
<path fill="none" stroke="black" d="M531.7,-322.94C532.35,-321.12 547.07,-279.41 555.64,-255.13"/>
</g>
</g>
</svg>
