graph TD
    A[开始] --> B{指令是否未使用?}
    B -->|是| C[标记为dead并结束]
    B -->|否| D[获取类型和操作数]
    D --> E{类型是否为整数或向量?}
    E -->|向量| F[返回错误:未实现向量处理]
    E -->|整数| G[获取整数信息]
    G --> H{位数是否>32?}
    H -->|是| I[返回错误:不支持>32位]
    H -->|否| J[分配内存空间]
    J --> K{右移操作数是立即数?}
    K -->|是| L[分配寄存器,生成立即数移位指令]
    K -->|否| M[分配寄存器,生成寄存器移位指令]
    L --> N[截断目标寄存器]
    M --> N
    N --> O[生成右移指令]
    O --> P[比较原始值和右移值]
    P --> Q[设置条件标志位]
    Q --> R[结果和溢出标志存入栈]
    R --> S[返回结果]
    C --> T[结束]
    F --> T
    I --> T
    S --> T
