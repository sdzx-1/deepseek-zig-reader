<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: flowchart Pages: 1 -->
<svg width="1049pt" height="1087pt"
 viewBox="0.00 0.00 1048.50 1087.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1083)">
<title>flowchart</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-1083 1044.5,-1083 1044.5,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<polygon fill="none" stroke="black" points="1033.5,-1079 788.5,-1079 788.5,-1043 1033.5,-1043 1033.5,-1079"/>
<text text-anchor="middle" x="911" y="-1058.5" font-family="Courier,monospace" font-size="10.00">开始 deleteTreeMinStackSizeWithKindHint</text>
</g>
<!-- start_over -->
<g id="node2" class="node">
<title>start_over</title>
<polygon fill="none" stroke="black" points="962,-1006 860,-1006 860,-970 962,-970 962,-1006"/>
<text text-anchor="middle" x="911" y="-985.5" font-family="Courier,monospace" font-size="10.00">start_over 循环</text>
</g>
<!-- start&#45;&gt;start_over -->
<g id="edge1" class="edge">
<title>start&#45;&gt;start_over</title>
<path fill="none" stroke="black" d="M911,-1042.81C911,-1034.79 911,-1025.05 911,-1016.07"/>
<polygon fill="black" stroke="black" points="914.5,-1016.03 911,-1006.03 907.5,-1016.03 914.5,-1016.03"/>
</g>
<!-- open_subpath -->
<g id="node3" class="node">
<title>open_subpath</title>
<polygon fill="none" stroke="black" points="970,-933 680,-933 680,-897 970,-897 970,-933"/>
<text text-anchor="middle" x="825" y="-912.5" font-family="Courier,monospace" font-size="10.00">尝试打开初始子路径 (deleteTreeOpenInitialSubpath)</text>
</g>
<!-- start_over&#45;&gt;open_subpath -->
<g id="edge2" class="edge">
<title>start_over&#45;&gt;open_subpath</title>
<path fill="none" stroke="black" d="M890.18,-969.81C879.2,-960.74 865.55,-949.48 853.59,-939.6"/>
<polygon fill="black" stroke="black" points="855.57,-936.7 845.63,-933.03 851.11,-942.09 855.57,-936.7"/>
</g>
<!-- check_subpath -->
<g id="node4" class="node">
<title>check_subpath</title>
<polygon fill="none" stroke="black" points="825,-860 754.48,-842 825,-824 895.52,-842 825,-860"/>
<text text-anchor="middle" x="825" y="-839.5" font-family="Courier,monospace" font-size="10.00">是否成功打开？</text>
</g>
<!-- open_subpath&#45;&gt;check_subpath -->
<g id="edge3" class="edge">
<title>open_subpath&#45;&gt;check_subpath</title>
<path fill="none" stroke="black" d="M825,-896.81C825,-888.79 825,-879.05 825,-870.07"/>
<polygon fill="black" stroke="black" points="828.5,-870.03 825,-860.03 821.5,-870.03 828.5,-870.03"/>
</g>
<!-- return1 -->
<g id="node5" class="node">
<title>return1</title>
<polygon fill="none" stroke="black" points="853,-36 799,-36 799,0 853,0 853,-36"/>
<text text-anchor="middle" x="826" y="-15.5" font-family="Courier,monospace" font-size="10.00">返回</text>
</g>
<!-- check_subpath&#45;&gt;return1 -->
<g id="edge4" class="edge">
<title>check_subpath&#45;&gt;return1</title>
<path fill="none" stroke="black" d="M863.1,-833.57C900.51,-823.81 952,-802.63 952,-760 952,-760 952,-760 952,-100 952,-78.5 952.28,-69.13 937,-54 926.39,-43.49 891.01,-33.45 863.01,-26.84"/>
<polygon fill="black" stroke="black" points="863.62,-23.38 853.09,-24.56 862.06,-30.21 863.62,-23.38"/>
<text text-anchor="middle" x="957" y="-454.5" font-family="Courier,monospace" font-size="10.00">否</text>
</g>
<!-- init_cleanup -->
<g id="node6" class="node">
<title>init_cleanup</title>
<polygon fill="none" stroke="black" points="784,-777 538,-777 538,-741 784,-741 784,-777"/>
<text text-anchor="middle" x="661" y="-756.5" font-family="Courier,monospace" font-size="10.00">初始化 cleanup_dir_parent 和 cleanup_dir</text>
</g>
<!-- check_subpath&#45;&gt;init_cleanup -->
<g id="edge5" class="edge">
<title>check_subpath&#45;&gt;init_cleanup</title>
<path fill="none" stroke="black" d="M802.2,-829.74C777.04,-817.31 735.98,-797.03 704.6,-781.53"/>
<polygon fill="black" stroke="black" points="706.13,-778.39 695.62,-777.1 703.03,-784.66 706.13,-778.39"/>
<text text-anchor="middle" x="757" y="-798" font-family="Courier,monospace" font-size="10.00">是</text>
</g>
<!-- scan_dir_loop -->
<g id="node7" class="node">
<title>scan_dir_loop</title>
<polygon fill="none" stroke="black" points="319,-704 229,-704 229,-668 319,-668 319,-704"/>
<text text-anchor="middle" x="274" y="-683.5" font-family="Courier,monospace" font-size="10.00">scan_dir 循环</text>
</g>
<!-- init_cleanup&#45;&gt;scan_dir_loop -->
<g id="edge6" class="edge">
<title>init_cleanup&#45;&gt;scan_dir_loop</title>
<path fill="none" stroke="black" d="M568.3,-740.99C493.74,-727.31 391.48,-708.55 329.21,-697.13"/>
<polygon fill="black" stroke="black" points="329.67,-693.65 319.2,-695.29 328.4,-700.54 329.67,-693.65"/>
</g>
<!-- dir_iterate -->
<g id="node8" class="node">
<title>dir_iterate</title>
<polygon fill="none" stroke="black" points="418.5,-631 129.5,-631 129.5,-595 418.5,-595 418.5,-631"/>
<text text-anchor="middle" x="274" y="-610.5" font-family="Courier,monospace" font-size="10.00">创建目录迭代器 (dir.iterateAssumeFirstIteration)</text>
</g>
<!-- scan_dir_loop&#45;&gt;dir_iterate -->
<g id="edge7" class="edge">
<title>scan_dir_loop&#45;&gt;dir_iterate</title>
<path fill="none" stroke="black" d="M274,-667.81C274,-659.79 274,-650.05 274,-641.07"/>
<polygon fill="black" stroke="black" points="277.5,-641.03 274,-631.03 270.5,-641.03 277.5,-641.03"/>
</g>
<!-- next_entry -->
<g id="node9" class="node">
<title>next_entry</title>
<polygon fill="none" stroke="black" points="274,-558 123.14,-540 274,-522 424.86,-540 274,-558"/>
<text text-anchor="middle" x="274" y="-537.5" font-family="Courier,monospace" font-size="10.00">获取下一个条目 (dir_it.next())</text>
</g>
<!-- dir_iterate&#45;&gt;next_entry -->
<g id="edge8" class="edge">
<title>dir_iterate&#45;&gt;next_entry</title>
<path fill="none" stroke="black" d="M274,-594.81C274,-586.79 274,-577.05 274,-568.07"/>
<polygon fill="black" stroke="black" points="277.5,-568.03 274,-558.03 270.5,-568.03 277.5,-568.03"/>
</g>
<!-- handle_entry -->
<g id="node10" class="node">
<title>handle_entry</title>
<polygon fill="none" stroke="black" points="406,-475 350,-475 350,-439 406,-439 406,-475"/>
<text text-anchor="middle" x="378" y="-454.5" font-family="Courier,monospace" font-size="10.00">处理条目</text>
</g>
<!-- next_entry&#45;&gt;handle_entry -->
<g id="edge9" class="edge">
<title>next_entry&#45;&gt;handle_entry</title>
<path fill="none" stroke="black" d="M293.08,-524.14C308.4,-512.21 330.19,-495.24 347.87,-481.47"/>
<polygon fill="black" stroke="black" points="350.43,-483.91 356.17,-475 346.13,-478.39 350.43,-483.91"/>
<text text-anchor="middle" x="361.5" y="-496" font-family="Courier,monospace" font-size="10.00">有下一个条目</text>
</g>
<!-- end_of_entries -->
<g id="node17" class="node">
<title>end_of_entries</title>
<polygon fill="none" stroke="black" points="564.5,-475 469.5,-475 469.5,-439 564.5,-439 564.5,-475"/>
<text text-anchor="middle" x="517" y="-454.5" font-family="Courier,monospace" font-size="10.00">所有条目处理完毕</text>
</g>
<!-- next_entry&#45;&gt;end_of_entries -->
<g id="edge10" class="edge">
<title>next_entry&#45;&gt;end_of_entries</title>
<path fill="none" stroke="black" d="M317.94,-527.19C341.02,-520.76 369.68,-512.42 395,-504 418.1,-496.32 443.32,-486.97 464.8,-478.72"/>
<polygon fill="black" stroke="black" points="466.32,-481.88 474.39,-475.01 463.8,-475.35 466.32,-481.88"/>
<text text-anchor="middle" x="449.5" y="-496" font-family="Courier,monospace" font-size="10.00">无更多条目</text>
</g>
<!-- is_directory -->
<g id="node11" class="node">
<title>is_directory</title>
<polygon fill="none" stroke="black" points="430,-392 367.63,-374 430,-356 492.37,-374 430,-392"/>
<text text-anchor="middle" x="430" y="-371.5" font-family="Courier,monospace" font-size="10.00">条目是目录？</text>
</g>
<!-- handle_entry&#45;&gt;is_directory -->
<g id="edge11" class="edge">
<title>handle_entry&#45;&gt;is_directory</title>
<path fill="none" stroke="black" d="M389.03,-438.82C396.68,-426.9 406.96,-410.88 415.31,-397.88"/>
<polygon fill="black" stroke="black" points="418.27,-399.75 420.73,-389.45 412.38,-395.97 418.27,-399.75"/>
</g>
<!-- open_new_dir -->
<g id="node12" class="node">
<title>open_new_dir</title>
<polygon fill="none" stroke="black" points="429.5,-309 284.5,-309 284.5,-273 429.5,-273 429.5,-309"/>
<text text-anchor="middle" x="357" y="-288.5" font-family="Courier,monospace" font-size="10.00">尝试打开新目录 (openDir)</text>
</g>
<!-- is_directory&#45;&gt;open_new_dir -->
<g id="edge12" class="edge">
<title>is_directory&#45;&gt;open_new_dir</title>
<path fill="none" stroke="black" d="M417.62,-359.26C407.21,-347.71 392.07,-330.92 379.53,-317"/>
<polygon fill="black" stroke="black" points="381.79,-314.28 372.5,-309.2 376.59,-318.97 381.79,-314.28"/>
<text text-anchor="middle" x="402" y="-330" font-family="Courier,monospace" font-size="10.00">是</text>
</g>
<!-- delete_file -->
<g id="node15" class="node">
<title>delete_file</title>
<polygon fill="none" stroke="black" points="468,-119 334,-119 334,-83 468,-83 468,-119"/>
<text text-anchor="middle" x="401" y="-98.5" font-family="Courier,monospace" font-size="10.00">删除文件 (deleteFile)</text>
</g>
<!-- is_directory&#45;&gt;delete_file -->
<g id="edge13" class="edge">
<title>is_directory&#45;&gt;delete_file</title>
<path fill="none" stroke="black" d="M435.85,-357.39C449.57,-318.1 480.04,-212.8 444,-137 442.14,-133.09 439.61,-129.47 436.69,-126.16"/>
<polygon fill="black" stroke="black" points="438.95,-123.48 429.34,-119.02 434.07,-128.5 438.95,-123.48"/>
<text text-anchor="middle" x="465" y="-247" font-family="Courier,monospace" font-size="10.00">否</text>
</g>
<!-- handle_open_error -->
<g id="node13" class="node">
<title>handle_open_error</title>
<polygon fill="none" stroke="black" points="266,-226 102,-196 266,-166 430,-196 266,-226"/>
<text text-anchor="middle" x="266" y="-199" font-family="Courier,monospace" font-size="10.00">处理错误：NotDir =&gt; 视为文件</text>
<text text-anchor="middle" x="266" y="-188" font-family="Courier,monospace" font-size="10.00">FileNotFound =&gt; 继续迭代</text>
</g>
<!-- open_new_dir&#45;&gt;handle_open_error -->
<g id="edge14" class="edge">
<title>open_new_dir&#45;&gt;handle_open_error</title>
<path fill="none" stroke="black" d="M340.31,-272.94C328.34,-260.71 311.84,-243.85 297.44,-229.13"/>
<polygon fill="black" stroke="black" points="299.62,-226.36 290.13,-221.66 294.62,-231.25 299.62,-226.36"/>
</g>
<!-- handle_open_error&#45;&gt;next_entry -->
<g id="edge16" class="edge">
<title>handle_open_error&#45;&gt;next_entry</title>
<path fill="none" stroke="black" d="M261.35,-225.41C258.74,-243.78 256,-268.24 256,-290 256,-458 256,-458 256,-458 256,-476.67 260.61,-497.2 265.17,-512.92"/>
<polygon fill="black" stroke="black" points="261.83,-513.95 268.11,-522.48 268.52,-511.9 261.83,-513.95"/>
<text text-anchor="middle" x="292.5" y="-371.5" font-family="Courier,monospace" font-size="10.00">FileNotFound</text>
</g>
<!-- update_dirs -->
<g id="node14" class="node">
<title>update_dirs</title>
<polygon fill="none" stroke="black" points="299,-119 111,-119 111,-83 299,-83 299,-119"/>
<text text-anchor="middle" x="205" y="-104" font-family="Courier,monospace" font-size="10.00">更新 cleanup_dir_parent 和 dir</text>
<text text-anchor="middle" x="205" y="-93" font-family="Courier,monospace" font-size="10.00">记录目录名到 dir_name_buf</text>
</g>
<!-- handle_open_error&#45;&gt;update_dirs -->
<g id="edge15" class="edge">
<title>handle_open_error&#45;&gt;update_dirs</title>
<path fill="none" stroke="black" d="M249.01,-169.09C240.53,-156.17 230.31,-140.58 221.85,-127.69"/>
<polygon fill="black" stroke="black" points="224.73,-125.7 216.32,-119.25 218.88,-129.54 224.73,-125.7"/>
<text text-anchor="middle" x="254" y="-140" font-family="Courier,monospace" font-size="10.00">成功打开</text>
</g>
<!-- handle_open_error&#45;&gt;delete_file -->
<g id="edge17" class="edge">
<title>handle_open_error&#45;&gt;delete_file</title>
<path fill="none" stroke="black" d="M299.5,-171.83C314.88,-161.21 333.36,-148.46 350,-137 355.71,-133.07 361.77,-128.9 367.66,-124.86"/>
<polygon fill="black" stroke="black" points="369.82,-127.62 376.09,-119.08 365.86,-121.85 369.82,-127.62"/>
<text text-anchor="middle" x="397" y="-140" font-family="Courier,monospace" font-size="10.00">NotDir (视为文件)</text>
</g>
<!-- update_dirs&#45;&gt;scan_dir_loop -->
<g id="edge18" class="edge">
<title>update_dirs&#45;&gt;scan_dir_loop</title>
<path fill="none" stroke="black" d="M110.9,-109.33C57.01,-119.26 0,-142.24 0,-195 0,-614 0,-614 0,-614 0,-658.68 138.24,-675.71 218.34,-681.83"/>
<polygon fill="black" stroke="black" points="218.53,-685.35 228.75,-682.58 219.04,-678.37 218.53,-685.35"/>
<text text-anchor="middle" x="29.5" y="-413" font-family="Courier,monospace" font-size="10.00">切换到新目录</text>
</g>
<!-- delete_error -->
<g id="node16" class="node">
<title>delete_error</title>
<polygon fill="none" stroke="black" points="401,-36 338.63,-18 401,0 463.37,-18 401,-36"/>
<text text-anchor="middle" x="401" y="-15.5" font-family="Courier,monospace" font-size="10.00">处理删除错误</text>
</g>
<!-- delete_file&#45;&gt;delete_error -->
<g id="edge19" class="edge">
<title>delete_file&#45;&gt;delete_error</title>
<path fill="none" stroke="black" d="M401,-82.82C401,-72.19 401,-58.31 401,-46.2"/>
<polygon fill="black" stroke="black" points="404.5,-46.15 401,-36.15 397.5,-46.15 404.5,-46.15"/>
</g>
<!-- delete_error&#45;&gt;next_entry -->
<g id="edge20" class="edge">
<title>delete_error&#45;&gt;next_entry</title>
<path fill="none" stroke="black" d="M349.19,-21.17C256.98,-26.46 74,-44 74,-100 74,-458 74,-458 74,-458 74,-502.06 116.22,-522.73 161.86,-532.21"/>
<polygon fill="black" stroke="black" points="161.47,-535.7 171.95,-534.12 162.77,-528.82 161.47,-535.7"/>
<text text-anchor="middle" x="125" y="-288.5" font-family="Courier,monospace" font-size="10.00">成功或FileNotFound</text>
</g>
<!-- delete_error&#45;&gt;is_directory -->
<g id="edge21" class="edge">
<title>delete_error&#45;&gt;is_directory</title>
<path fill="none" stroke="black" d="M429.69,-27.79C460.17,-39.11 504,-62.01 504,-100 504,-292 504,-292 504,-292 504,-319.67 480.18,-342.01 459.57,-356.17"/>
<polygon fill="black" stroke="black" points="457.49,-353.35 451.01,-361.73 461.3,-359.22 457.49,-353.35"/>
<text text-anchor="middle" x="572" y="-193.5" font-family="Courier,monospace" font-size="10.00">IsDir (标记为目录重新处理)</text>
</g>
<!-- close_dir -->
<g id="node18" class="node">
<title>close_dir</title>
<polygon fill="none" stroke="black" points="680.5,-392 521.5,-392 521.5,-356 680.5,-356 680.5,-392"/>
<text text-anchor="middle" x="601" y="-377" font-family="Courier,monospace" font-size="10.00">关闭当前目录 (dir.close())</text>
<text text-anchor="middle" x="601" y="-366" font-family="Courier,monospace" font-size="10.00">设置 cleanup_dir=false</text>
</g>
<!-- end_of_entries&#45;&gt;close_dir -->
<g id="edge22" class="edge">
<title>end_of_entries&#45;&gt;close_dir</title>
<path fill="none" stroke="black" d="M534.81,-438.82C546.73,-427.33 562.59,-412.04 575.79,-399.31"/>
<polygon fill="black" stroke="black" points="578.44,-401.61 583.21,-392.15 573.58,-396.58 578.44,-401.61"/>
</g>
<!-- delete_current_dir -->
<g id="node19" class="node">
<title>delete_current_dir</title>
<polygon fill="none" stroke="black" points="726.5,-309 579.5,-309 579.5,-273 726.5,-273 726.5,-309"/>
<text text-anchor="middle" x="653" y="-288.5" font-family="Courier,monospace" font-size="10.00">删除当前目录 (deleteDir)</text>
</g>
<!-- close_dir&#45;&gt;delete_current_dir -->
<g id="edge23" class="edge">
<title>close_dir&#45;&gt;delete_current_dir</title>
<path fill="none" stroke="black" d="M612.03,-355.82C619.13,-344.76 628.49,-330.18 636.47,-317.75"/>
<polygon fill="black" stroke="black" points="639.53,-319.46 641.99,-309.15 633.64,-315.68 639.53,-319.46"/>
</g>
<!-- check_cleanup_parent -->
<g id="node20" class="node">
<title>check_cleanup_parent</title>
<polygon fill="none" stroke="black" points="791,-214 657.6,-196 791,-178 924.4,-196 791,-214"/>
<text text-anchor="middle" x="791" y="-193.5" font-family="Courier,monospace" font-size="10.00">cleanup_dir_parent 存在？</text>
</g>
<!-- delete_current_dir&#45;&gt;check_cleanup_parent -->
<g id="edge24" class="edge">
<title>delete_current_dir&#45;&gt;check_cleanup_parent</title>
<path fill="none" stroke="black" d="M678.31,-272.94C701.73,-257.16 736.57,-233.68 761.3,-217.02"/>
<polygon fill="black" stroke="black" points="763.58,-219.7 769.91,-211.21 759.67,-213.9 763.58,-219.7"/>
</g>
<!-- handle_dir_error -->
<g id="node21" class="node">
<title>handle_dir_error</title>
<polygon fill="none" stroke="black" points="924,-119 652,-119 652,-83 924,-83 924,-119"/>
<text text-anchor="middle" x="788" y="-104" font-family="Courier,monospace" font-size="10.00">处理错误：FileNotFound/DirNotEmpty =&gt; 重启循环</text>
<text text-anchor="middle" x="788" y="-93" font-family="Courier,monospace" font-size="10.00">其他错误 =&gt; 返回错误</text>
</g>
<!-- check_cleanup_parent&#45;&gt;handle_dir_error -->
<g id="edge25" class="edge">
<title>check_cleanup_parent&#45;&gt;handle_dir_error</title>
<path fill="none" stroke="black" d="M793.08,-178.23C794.22,-166.64 795.18,-150.86 794,-137 793.78,-134.42 793.47,-131.74 793.11,-129.07"/>
<polygon fill="black" stroke="black" points="796.54,-128.34 791.51,-119.02 789.62,-129.44 796.54,-128.34"/>
<text text-anchor="middle" x="804" y="-140" font-family="Courier,monospace" font-size="10.00">存在</text>
</g>
<!-- check_cleanup_parent&#45;&gt;handle_dir_error -->
<g id="edge26" class="edge">
<title>check_cleanup_parent&#45;&gt;handle_dir_error</title>
<path fill="none" stroke="black" d="M777.55,-179.66C770.87,-171 763.48,-159.61 760,-148 757.94,-141.14 759.62,-134.27 762.99,-128.01"/>
<polygon fill="black" stroke="black" points="766.15,-129.57 768.88,-119.34 760.37,-125.64 766.15,-129.57"/>
<text text-anchor="middle" x="775" y="-140" font-family="Courier,monospace" font-size="10.00">不存在</text>
</g>
<!-- handle_dir_error&#45;&gt;return1 -->
<g id="edge28" class="edge">
<title>handle_dir_error&#45;&gt;return1</title>
<path fill="none" stroke="black" d="M796.06,-82.82C801.15,-71.98 807.82,-57.74 813.58,-45.47"/>
<polygon fill="black" stroke="black" points="816.87,-46.69 817.95,-36.15 810.54,-43.72 816.87,-46.69"/>
<text text-anchor="middle" x="819" y="-57" font-family="Courier,monospace" font-size="10.00">成功</text>
</g>
<!-- restart_loop -->
<g id="node22" class="node">
<title>restart_loop</title>
<polygon fill="none" stroke="black" points="1040.5,-36 913.5,-36 913.5,0 1040.5,0 1040.5,-36"/>
<text text-anchor="middle" x="977" y="-15.5" font-family="Courier,monospace" font-size="10.00">继续 start_over 循环</text>
</g>
<!-- handle_dir_error&#45;&gt;restart_loop -->
<g id="edge27" class="edge">
<title>handle_dir_error&#45;&gt;restart_loop</title>
<path fill="none" stroke="black" d="M828.08,-82.82C857.25,-70.32 896.9,-53.33 927.96,-40.02"/>
<polygon fill="black" stroke="black" points="929.49,-43.17 937.3,-36.01 926.73,-36.74 929.49,-43.17"/>
<text text-anchor="middle" x="913" y="-57" font-family="Courier,monospace" font-size="10.00">需要重试</text>
</g>
<!-- restart_loop&#45;&gt;start_over -->
<g id="edge29" class="edge">
<title>restart_loop&#45;&gt;start_over</title>
<path fill="none" stroke="black" d="M984.11,-36.05C990.2,-52.22 998,-77.34 998,-100 998,-916 998,-916 998,-916 998,-937.28 982.19,-953.32 964.04,-964.72"/>
<polygon fill="black" stroke="black" points="961.91,-961.91 955.01,-969.94 965.42,-967.97 961.91,-961.91"/>
<text text-anchor="middle" x="1018" y="-537.5" font-family="Courier,monospace" font-size="10.00">重新开始</text>
</g>
</g>
</svg>
