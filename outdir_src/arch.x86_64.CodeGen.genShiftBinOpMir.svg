<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: flowchart Pages: 1 -->
<svg width="505pt" height="1084pt"
 viewBox="0.00 0.00 504.50 1084.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1080)">
<title>flowchart</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-1080 500.5,-1080 500.5,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<path fill="none" stroke="black" d="M291,-1076C291,-1076 163,-1076 163,-1076 157,-1076 151,-1070 151,-1064 151,-1064 151,-1052 151,-1052 151,-1046 157,-1040 163,-1040 163,-1040 291,-1040 291,-1040 297,-1040 303,-1046 303,-1052 303,-1052 303,-1064 303,-1064 303,-1070 297,-1076 291,-1076"/>
<text text-anchor="middle" x="227" y="-1054.3" font-family="Arial" font-size="14.00">genShiftBinOpMir开始</text>
</g>
<!-- check_abi_size_16 -->
<g id="node2" class="node">
<title>check_abi_size_16</title>
<path fill="none" stroke="black" d="M267,-1003C267,-1003 187,-1003 187,-1003 181,-1003 175,-997 175,-991 175,-991 175,-979 175,-979 175,-973 181,-967 187,-967 187,-967 267,-967 267,-967 273,-967 279,-973 279,-979 279,-979 279,-991 279,-991 279,-997 273,-1003 267,-1003"/>
<text text-anchor="middle" x="227" y="-981.3" font-family="Arial" font-size="14.00">abi_size &gt; 16?</text>
</g>
<!-- start&#45;&gt;check_abi_size_16 -->
<g id="edge1" class="edge">
<title>start&#45;&gt;check_abi_size_16</title>
<path fill="none" stroke="black" d="M227,-1039.81C227,-1031.79 227,-1022.05 227,-1013.07"/>
<polygon fill="black" stroke="black" points="230.5,-1013.03 227,-1003.03 223.5,-1013.03 230.5,-1013.03"/>
</g>
<!-- handle_large_shift -->
<g id="node3" class="node">
<title>handle_large_shift</title>
<path fill="none" stroke="black" d="M206,-916C206,-916 12,-916 12,-916 6,-916 0,-910 0,-904 0,-904 0,-892 0,-892 0,-886 6,-880 12,-880 12,-880 206,-880 206,-880 212,-880 218,-886 218,-892 218,-892 218,-904 218,-904 218,-910 212,-916 206,-916"/>
<text text-anchor="middle" x="109" y="-894.3" font-family="Arial" font-size="14.00">处理大整数移位（abi_size&gt;16）</text>
</g>
<!-- check_abi_size_16&#45;&gt;handle_large_shift -->
<g id="edge2" class="edge">
<title>check_abi_size_16&#45;&gt;handle_large_shift</title>
<path fill="none" stroke="black" d="M203.12,-966.8C185.29,-953.95 160.72,-936.26 141.16,-922.17"/>
<polygon fill="black" stroke="black" points="143,-919.18 132.84,-916.18 138.91,-924.86 143,-919.18"/>
<text text-anchor="middle" x="183.5" y="-937.8" font-family="Arial" font-size="14.00">是</text>
</g>
<!-- handle_small_shift -->
<g id="node11" class="node">
<title>handle_small_shift</title>
<path fill="none" stroke="black" d="M441.5,-916C441.5,-916 248.5,-916 248.5,-916 242.5,-916 236.5,-910 236.5,-904 236.5,-904 236.5,-892 236.5,-892 236.5,-886 242.5,-880 248.5,-880 248.5,-880 441.5,-880 441.5,-880 447.5,-880 453.5,-886 453.5,-892 453.5,-892 453.5,-904 453.5,-904 453.5,-910 447.5,-916 441.5,-916"/>
<text text-anchor="middle" x="345" y="-894.3" font-family="Arial" font-size="14.00">处理小整数移位（abi_size≤16）</text>
</g>
<!-- check_abi_size_16&#45;&gt;handle_small_shift -->
<g id="edge3" class="edge">
<title>check_abi_size_16&#45;&gt;handle_small_shift</title>
<path fill="none" stroke="black" d="M250.88,-966.8C268.71,-953.95 293.28,-936.26 312.84,-922.17"/>
<polygon fill="black" stroke="black" points="315.09,-924.86 321.16,-916.18 311,-919.18 315.09,-924.86"/>
<text text-anchor="middle" x="300.5" y="-937.8" font-family="Arial" font-size="14.00">否</text>
</g>
<!-- check_shift_imm_zero -->
<g id="node4" class="node">
<title>check_shift_imm_zero</title>
<path fill="none" stroke="black" d="M144.5,-756C144.5,-756 73.5,-756 73.5,-756 67.5,-756 61.5,-750 61.5,-744 61.5,-744 61.5,-732 61.5,-732 61.5,-726 67.5,-720 73.5,-720 73.5,-720 144.5,-720 144.5,-720 150.5,-720 156.5,-726 156.5,-732 156.5,-732 156.5,-744 156.5,-744 156.5,-750 150.5,-756 144.5,-756"/>
<text text-anchor="middle" x="109" y="-734.3" font-family="Arial" font-size="14.00">移位值是0？</text>
</g>
<!-- handle_large_shift&#45;&gt;check_shift_imm_zero -->
<g id="edge4" class="edge">
<title>handle_large_shift&#45;&gt;check_shift_imm_zero</title>
<path fill="none" stroke="black" d="M109,-879.79C109,-852.48 109,-798.99 109,-766.38"/>
<polygon fill="black" stroke="black" points="112.5,-766.19 109,-756.19 105.5,-766.19 112.5,-766.19"/>
</g>
<!-- lock_rcx -->
<g id="node5" class="node">
<title>lock_rcx</title>
<path fill="none" stroke="black" d="M239,-648C239,-648 147,-648 147,-648 141,-648 135,-642 135,-636 135,-636 135,-624 135,-624 135,-618 141,-612 147,-612 147,-612 239,-612 239,-612 245,-612 251,-618 251,-624 251,-624 251,-636 251,-636 251,-642 245,-648 239,-648"/>
<text text-anchor="middle" x="193" y="-626.3" font-family="Arial" font-size="14.00">锁定RCX寄存器</text>
</g>
<!-- check_shift_imm_zero&#45;&gt;lock_rcx -->
<g id="edge6" class="edge">
<title>check_shift_imm_zero&#45;&gt;lock_rcx</title>
<path fill="none" stroke="black" d="M122.5,-719.97C136.13,-702.76 157.35,-675.98 172.95,-656.29"/>
<polygon fill="black" stroke="black" points="175.79,-658.35 179.26,-648.34 170.3,-654 175.79,-658.35"/>
<text text-anchor="middle" x="171.5" y="-680.3" font-family="Arial" font-size="14.00">否</text>
</g>
<!-- end -->
<g id="node18" class="node">
<title>end</title>
<path fill="none" stroke="black" d="M129,-36C129,-36 99,-36 99,-36 93,-36 87,-30 87,-24 87,-24 87,-12 87,-12 87,-6 93,0 99,0 99,0 129,0 129,0 135,0 141,-6 141,-12 141,-12 141,-24 141,-24 141,-30 135,-36 129,-36"/>
<text text-anchor="middle" x="114" y="-14.3" font-family="Arial" font-size="14.00">返回</text>
</g>
<!-- check_shift_imm_zero&#45;&gt;end -->
<g id="edge5" class="edge">
<title>check_shift_imm_zero&#45;&gt;end</title>
<path fill="none" stroke="black" d="M107.16,-719.76C105.09,-698.81 102,-662.35 102,-631 102,-631 102,-631 102,-90 102,-75.3 104.53,-59.13 107.27,-45.94"/>
<polygon fill="black" stroke="black" points="110.71,-46.6 109.46,-36.08 103.87,-45.08 110.71,-46.6"/>
<text text-anchor="middle" x="109.5" y="-363.8" font-family="Arial" font-size="14.00">是</text>
</g>
<!-- alloc_temp_regs -->
<g id="node6" class="node">
<title>alloc_temp_regs</title>
<path fill="none" stroke="black" d="M263,-575C263,-575 149,-575 149,-575 143,-575 137,-569 137,-563 137,-563 137,-551 137,-551 137,-545 143,-539 149,-539 149,-539 263,-539 263,-539 269,-539 275,-545 275,-551 275,-551 275,-563 275,-563 275,-569 269,-575 263,-575"/>
<text text-anchor="middle" x="206" y="-553.3" font-family="Arial" font-size="14.00">分配4个临时寄存器</text>
</g>
<!-- lock_rcx&#45;&gt;alloc_temp_regs -->
<g id="edge7" class="edge">
<title>lock_rcx&#45;&gt;alloc_temp_regs</title>
<path fill="none" stroke="black" d="M196.15,-611.81C197.62,-603.79 199.4,-594.05 201.04,-585.07"/>
<polygon fill="black" stroke="black" points="204.52,-585.5 202.88,-575.03 197.64,-584.23 204.52,-585.5"/>
</g>
<!-- handle_shift_direction -->
<g id="node7" class="node">
<title>handle_shift_direction</title>
<path fill="none" stroke="black" d="M300,-502C300,-502 142,-502 142,-502 136,-502 130,-496 130,-490 130,-490 130,-478 130,-478 130,-472 136,-466 142,-466 142,-466 300,-466 300,-466 306,-466 312,-472 312,-478 312,-478 312,-490 312,-490 312,-496 306,-502 300,-502"/>
<text text-anchor="middle" x="221" y="-480.3" font-family="Arial" font-size="14.00">根据tag选择左移/右移逻辑</text>
</g>
<!-- alloc_temp_regs&#45;&gt;handle_shift_direction -->
<g id="edge8" class="edge">
<title>alloc_temp_regs&#45;&gt;handle_shift_direction</title>
<path fill="none" stroke="black" d="M209.63,-538.81C211.33,-530.79 213.38,-521.05 215.28,-512.07"/>
<polygon fill="black" stroke="black" points="218.76,-512.54 217.4,-502.03 211.91,-511.09 218.76,-512.54"/>
</g>
<!-- generate_loop -->
<g id="node8" class="node">
<title>generate_loop</title>
<path fill="none" stroke="black" d="M295.5,-429C295.5,-429 146.5,-429 146.5,-429 140.5,-429 134.5,-423 134.5,-417 134.5,-417 134.5,-405 134.5,-405 134.5,-399 140.5,-393 146.5,-393 146.5,-393 295.5,-393 295.5,-393 301.5,-393 307.5,-399 307.5,-405 307.5,-405 307.5,-417 307.5,-417 307.5,-423 301.5,-429 295.5,-429"/>
<text text-anchor="middle" x="221" y="-407.3" font-family="Arial" font-size="14.00">生成循环处理多精度移位</text>
</g>
<!-- handle_shift_direction&#45;&gt;generate_loop -->
<g id="edge9" class="edge">
<title>handle_shift_direction&#45;&gt;generate_loop</title>
<path fill="none" stroke="black" d="M221,-465.81C221,-457.79 221,-448.05 221,-439.07"/>
<polygon fill="black" stroke="black" points="224.5,-439.03 221,-429.03 217.5,-439.03 224.5,-439.03"/>
</g>
<!-- check_shift_imm_remaining -->
<g id="node9" class="node">
<title>check_shift_imm_remaining</title>
<path fill="none" stroke="black" d="M299.5,-342C299.5,-342 192.5,-342 192.5,-342 186.5,-342 180.5,-336 180.5,-330 180.5,-330 180.5,-318 180.5,-318 180.5,-312 186.5,-306 192.5,-306 192.5,-306 299.5,-306 299.5,-306 305.5,-306 311.5,-312 311.5,-318 311.5,-318 311.5,-330 311.5,-330 311.5,-336 305.5,-342 299.5,-342"/>
<text text-anchor="middle" x="246" y="-320.3" font-family="Arial" font-size="14.00">检查剩余移位位数</text>
</g>
<!-- generate_loop&#45;&gt;check_shift_imm_remaining -->
<g id="edge10" class="edge">
<title>generate_loop&#45;&gt;check_shift_imm_remaining</title>
<path fill="none" stroke="black" d="M223.56,-392.65C225.22,-382.93 227.69,-370.65 231,-360 231.86,-357.22 232.87,-354.36 233.96,-351.53"/>
<polygon fill="black" stroke="black" points="237.23,-352.76 237.8,-342.18 230.76,-350.1 237.23,-352.76"/>
</g>
<!-- check_shift_imm_remaining&#45;&gt;generate_loop -->
<g id="edge12" class="edge">
<title>check_shift_imm_remaining&#45;&gt;generate_loop</title>
<path fill="none" stroke="black" d="M240.95,-342.18C237.49,-353.92 232.84,-369.73 228.9,-383.13"/>
<polygon fill="black" stroke="black" points="225.52,-382.22 226.06,-392.8 232.24,-384.19 225.52,-382.22"/>
<text text-anchor="middle" x="255.5" y="-363.8" font-family="Arial" font-size="14.00">有剩余</text>
</g>
<!-- cleanup_temp_regs -->
<g id="node10" class="node">
<title>cleanup_temp_regs</title>
<path fill="none" stroke="black" d="M296,-255C296,-255 204,-255 204,-255 198,-255 192,-249 192,-243 192,-243 192,-231 192,-231 192,-225 198,-219 204,-219 204,-219 296,-219 296,-219 302,-219 308,-225 308,-231 308,-231 308,-243 308,-243 308,-249 302,-255 296,-255"/>
<text text-anchor="middle" x="250" y="-233.3" font-family="Arial" font-size="14.00">释放临时寄存器</text>
</g>
<!-- check_shift_imm_remaining&#45;&gt;cleanup_temp_regs -->
<g id="edge11" class="edge">
<title>check_shift_imm_remaining&#45;&gt;cleanup_temp_regs</title>
<path fill="none" stroke="black" d="M246.81,-305.8C247.36,-294.16 248.09,-278.55 248.72,-265.24"/>
<polygon fill="black" stroke="black" points="252.22,-265.33 249.19,-255.18 245.23,-265 252.22,-265.33"/>
<text text-anchor="middle" x="269.5" y="-276.8" font-family="Arial" font-size="14.00">无剩余</text>
</g>
<!-- finalize -->
<g id="node16" class="node">
<title>finalize</title>
<path fill="none" stroke="black" d="M373.5,-182C373.5,-182 266.5,-182 266.5,-182 260.5,-182 254.5,-176 254.5,-170 254.5,-170 254.5,-158 254.5,-158 254.5,-152 260.5,-146 266.5,-146 266.5,-146 373.5,-146 373.5,-146 379.5,-146 385.5,-152 385.5,-158 385.5,-158 385.5,-170 385.5,-170 385.5,-176 379.5,-182 373.5,-182"/>
<text text-anchor="middle" x="320" y="-160.3" font-family="Arial" font-size="14.00">生成最终移位指令</text>
</g>
<!-- cleanup_temp_regs&#45;&gt;finalize -->
<g id="edge13" class="edge">
<title>cleanup_temp_regs&#45;&gt;finalize</title>
<path fill="none" stroke="black" d="M266.95,-218.81C275.72,-209.92 286.57,-198.91 296.17,-189.17"/>
<polygon fill="black" stroke="black" points="298.68,-191.61 303.21,-182.03 293.7,-186.69 298.68,-191.61"/>
</g>
<!-- check_shift_mcv -->
<g id="node12" class="node">
<title>check_shift_mcv</title>
<path fill="none" stroke="black" d="M421.5,-843C421.5,-843 268.5,-843 268.5,-843 262.5,-843 256.5,-837 256.5,-831 256.5,-831 256.5,-819 256.5,-819 256.5,-813 262.5,-807 268.5,-807 268.5,-807 421.5,-807 421.5,-807 427.5,-807 433.5,-813 433.5,-819 433.5,-819 433.5,-831 433.5,-831 433.5,-837 427.5,-843 421.5,-843"/>
<text text-anchor="middle" x="345" y="-821.3" font-family="Arial" font-size="14.00">移位值是立即数/寄存器？</text>
</g>
<!-- handle_small_shift&#45;&gt;check_shift_mcv -->
<g id="edge14" class="edge">
<title>handle_small_shift&#45;&gt;check_shift_mcv</title>
<path fill="none" stroke="black" d="M345,-879.81C345,-871.79 345,-862.05 345,-853.07"/>
<polygon fill="black" stroke="black" points="348.5,-853.03 345,-843.03 341.5,-853.03 348.5,-853.03"/>
</g>
<!-- lock_rcx_small -->
<g id="node13" class="node">
<title>lock_rcx_small</title>
<path fill="none" stroke="black" d="M297,-756C297,-756 205,-756 205,-756 199,-756 193,-750 193,-744 193,-744 193,-732 193,-732 193,-726 199,-720 205,-720 205,-720 297,-720 297,-720 303,-720 309,-726 309,-732 309,-732 309,-744 309,-744 309,-750 303,-756 297,-756"/>
<text text-anchor="middle" x="251" y="-734.3" font-family="Arial" font-size="14.00">锁定RCX寄存器</text>
</g>
<!-- check_shift_mcv&#45;&gt;lock_rcx_small -->
<g id="edge15" class="edge">
<title>check_shift_mcv&#45;&gt;lock_rcx_small</title>
<path fill="none" stroke="black" d="M297.64,-806.92C288.67,-802.13 279.94,-796.21 273,-789 266.73,-782.49 262.08,-773.9 258.72,-765.68"/>
<polygon fill="black" stroke="black" points="261.91,-764.22 255.22,-756.01 255.33,-766.6 261.91,-764.22"/>
<text text-anchor="middle" x="302" y="-777.8" font-family="Arial" font-size="14.00">需要RCX</text>
</g>
<!-- handle_register_pair -->
<g id="node14" class="node">
<title>handle_register_pair</title>
<path fill="none" stroke="black" d="M390.5,-648C390.5,-648 283.5,-648 283.5,-648 277.5,-648 271.5,-642 271.5,-636 271.5,-636 271.5,-624 271.5,-624 271.5,-618 277.5,-612 283.5,-612 283.5,-612 390.5,-612 390.5,-612 396.5,-612 402.5,-618 402.5,-624 402.5,-624 402.5,-636 402.5,-636 402.5,-642 396.5,-648 390.5,-648"/>
<text text-anchor="middle" x="337" y="-626.3" font-family="Arial" font-size="14.00">处理寄存器对操作</text>
</g>
<!-- check_shift_mcv&#45;&gt;handle_register_pair -->
<g id="edge16" class="edge">
<title>check_shift_mcv&#45;&gt;handle_register_pair</title>
<path fill="none" stroke="black" d="M344.29,-806.87C342.9,-773.32 339.81,-698.71 338.13,-658.29"/>
<polygon fill="black" stroke="black" points="341.62,-657.94 337.71,-648.09 334.63,-658.23 341.62,-657.94"/>
<text text-anchor="middle" x="371" y="-734.3" font-family="Arial" font-size="14.00">寄存器对</text>
</g>
<!-- handle_memory_shift -->
<g id="node15" class="node">
<title>handle_memory_shift</title>
<path fill="none" stroke="black" d="M484.5,-702C484.5,-702 377.5,-702 377.5,-702 371.5,-702 365.5,-696 365.5,-690 365.5,-690 365.5,-678 365.5,-678 365.5,-672 371.5,-666 377.5,-666 377.5,-666 484.5,-666 484.5,-666 490.5,-666 496.5,-672 496.5,-678 496.5,-678 496.5,-690 496.5,-690 496.5,-696 490.5,-702 484.5,-702"/>
<text text-anchor="middle" x="431" y="-680.3" font-family="Arial" font-size="14.00">处理内存中的移位</text>
</g>
<!-- check_shift_mcv&#45;&gt;handle_memory_shift -->
<g id="edge17" class="edge">
<title>check_shift_mcv&#45;&gt;handle_memory_shift</title>
<path fill="none" stroke="black" d="M364.37,-806.91C377.91,-794.06 395.56,-775.41 407,-756 415,-742.42 420.81,-725.8 424.7,-712.05"/>
<polygon fill="black" stroke="black" points="428.13,-712.76 427.31,-702.2 421.36,-710.97 428.13,-712.76"/>
<text text-anchor="middle" x="422" y="-777.8" font-family="Arial" font-size="14.00">内存操作</text>
</g>
<!-- lock_rcx_small&#45;&gt;handle_register_pair -->
<g id="edge18" class="edge">
<title>lock_rcx_small&#45;&gt;handle_register_pair</title>
<path fill="none" stroke="black" d="M264.82,-719.97C278.78,-702.76 300.51,-675.98 316.48,-656.29"/>
<polygon fill="black" stroke="black" points="319.35,-658.31 322.93,-648.34 313.91,-653.9 319.35,-658.31"/>
</g>
<!-- handle_register_pair&#45;&gt;finalize -->
<g id="edge19" class="edge">
<title>handle_register_pair&#45;&gt;finalize</title>
<path fill="none" stroke="black" d="M338.13,-611.79C338.98,-597.42 340,-576.38 340,-558 340,-558 340,-558 340,-236 340,-220.9 335.76,-204.64 331.18,-191.5"/>
<polygon fill="black" stroke="black" points="334.45,-190.27 327.68,-182.13 327.9,-192.72 334.45,-190.27"/>
</g>
<!-- handle_memory_shift&#45;&gt;finalize -->
<g id="edge20" class="edge">
<title>handle_memory_shift&#45;&gt;finalize</title>
<path fill="none" stroke="black" d="M431,-665.94C431,-648.02 431,-619.03 431,-594 431,-594 431,-594 431,-236 431,-213.08 414,-197.23 393.3,-186.42"/>
<polygon fill="black" stroke="black" points="394.78,-183.24 384.25,-182.09 391.76,-189.56 394.78,-183.24"/>
</g>
<!-- error_handling -->
<g id="node17" class="node">
<title>error_handling</title>
<path fill="none" stroke="black" d="M302,-109C302,-109 220,-109 220,-109 214,-109 208,-103 208,-97 208,-97 208,-85 208,-85 208,-79 214,-73 220,-73 220,-73 302,-73 302,-73 308,-73 314,-79 314,-85 314,-85 314,-97 314,-97 314,-103 308,-109 302,-109"/>
<text text-anchor="middle" x="261" y="-87.3" font-family="Arial" font-size="14.00">错误处理/断言</text>
</g>
<!-- finalize&#45;&gt;error_handling -->
<g id="edge21" class="edge">
<title>finalize&#45;&gt;error_handling</title>
<path fill="none" stroke="black" d="M305.72,-145.81C298.47,-137.09 289.54,-126.34 281.56,-116.75"/>
<polygon fill="black" stroke="black" points="284.23,-114.48 275.15,-109.03 278.85,-118.96 284.23,-114.48"/>
</g>
<!-- error_handling&#45;&gt;end -->
<g id="edge22" class="edge">
<title>error_handling&#45;&gt;end</title>
<path fill="none" stroke="black" d="M225.79,-72.99C202.95,-61.96 173.26,-47.62 150.21,-36.49"/>
<polygon fill="black" stroke="black" points="151.63,-33.29 141.11,-32.09 148.59,-39.59 151.63,-33.29"/>
</g>
</g>
</svg>
