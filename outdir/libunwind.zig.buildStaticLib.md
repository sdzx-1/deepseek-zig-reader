flowchart TD
    A[开始] --> B{检查LLVM是否启用}
    B -->|否| C[返回ZigCompilerNotBuiltWithLLVMExtensions错误]
    B -->|是| D[初始化跟踪和Arena分配器]
    D --> E[配置编译参数（目标平台、输出模式等）]
    E --> F{配置是否成功？}
    F -->|失败| G[设置错误信息并返回SubCompilationFailed]
    F -->|成功| H[创建root_mod模块]
    H --> I{模块创建是否成功？}
    I -->|失败| J[设置错误信息并返回SubCompilationFailed]
    I -->|成功| K[遍历unwind_src_list生成编译选项]
    K --> L[添加平台特定宏和编译标志]
    L --> M[创建sub_compilation实例]
    M --> N{sub_compilation创建成功？}
    N -->|失败| O[设置错误信息并返回SubCompilationFailed]
    N -->|成功| P[执行子编译过程]
    P --> Q{编译是否成功？}
    Q -->|失败| R[设置错误信息并返回SubCompilationFailed]
    Q -->|成功| S[获取生成的crt_file]
    S --> T[将crt_file加入链接队列]
    T --> U[结束]

    style A fill:#4CAF50,stroke:#388E3C
    style C fill:#FF5252,stroke:#D32F2F
    style G fill:#FF5252,stroke:#D32F2F
    style J fill:#FF5252,stroke:#D32F2F
    style O fill:#FF5252,stroke:#D32F2F
    style R fill:#FF5252,stroke:#D32F2F
    style U fill:#4CAF50,stroke:#388E3C
