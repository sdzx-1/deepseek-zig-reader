graph TD
    A[开始] --> B[获取类型和操作数信息]
    B --> C[检查源和目标位宽组合]
    C -->|需要调用运行时函数| D[生成Callee名称并调用运行时函数]
    C -->|可以直接生成指令| E[处理寄存器/内存操作数]
    E --> F[是否重用寄存器?]
    F -->|是| G[锁定寄存器]
    F -->|否| H[复制到新寄存器]
    G --> I[根据源位宽生成指令]
    H --> I
    I -->|源16位| J[使用f16c特性生成v_cvtph2ps]
    J --> K[目标64位?]
    K -->|是| L[生成cvtss2sd]
    K -->|否| M[完成]
    I -->|源32位, 目标64位| N[检查AVX特性]
    N -->|支持AVX| O[根据向量长度生成指令]
    O -->|向量长度1| P[生成cvtss2sd]
    O -->|向量长度2-4| Q[生成cvtps2pd]
    N -->|不支持AVX| R[生成基本指令]
    I -->|其他情况| S[无法处理]
    S --> T[抛出TODO错误]
    D --> U[返回结果或错误]
    M --> U
    P --> U
    Q --> U
    R --> U
    T --> U
    U --> V[结束]
