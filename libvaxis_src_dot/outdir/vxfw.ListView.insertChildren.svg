<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: flowchart Pages: 1 -->
<svg width="813pt" height="1217pt"
 viewBox="0.00 0.00 812.59 1217.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1213)">
<title>flowchart</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-1213 808.59,-1213 808.59,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<polygon fill="none" stroke="black" points="495.59,-1209 441.59,-1209 441.59,-1173 495.59,-1173 495.59,-1209"/>
<text text-anchor="middle" x="468.59" y="-1187.3" font-family="Courier New" font-size="14.00">开始</text>
</g>
<!-- assert -->
<g id="node2" class="node">
<title>assert</title>
<polygon fill="none" stroke="black" points="577.59,-1136 359.59,-1136 359.59,-1100 577.59,-1100 577.59,-1136"/>
<text text-anchor="middle" x="468.59" y="-1114.3" font-family="Courier New" font-size="14.00">断言: self.scroll.top &gt; 0</text>
</g>
<!-- start&#45;&gt;assert -->
<g id="edge1" class="edge">
<title>start&#45;&gt;assert</title>
<path fill="none" stroke="black" d="M468.59,-1172.81C468.59,-1164.79 468.59,-1155.05 468.59,-1146.07"/>
<polygon fill="black" stroke="black" points="472.09,-1146.03 468.59,-1136.03 465.09,-1146.03 472.09,-1146.03"/>
</g>
<!-- init1 -->
<g id="node3" class="node">
<title>init1</title>
<polygon fill="none" stroke="black" points="563.59,-1063 373.59,-1063 373.59,-1025 563.59,-1025 563.59,-1063"/>
<text text-anchor="middle" x="468.59" y="-1047.8" font-family="Courier New" font-size="14.00">self.scroll.top &#45;= 1</text>
<text text-anchor="middle" x="468.59" y="-1032.8" font-family="Courier New" font-size="14.00">upheight = add_height</text>
</g>
<!-- assert&#45;&gt;init1 -->
<g id="edge2" class="edge">
<title>assert&#45;&gt;init1</title>
<path fill="none" stroke="black" d="M468.59,-1099.94C468.59,-1091.99 468.59,-1082.31 468.59,-1073.31"/>
<polygon fill="black" stroke="black" points="472.09,-1073.2 468.59,-1063.2 465.09,-1073.2 472.09,-1073.2"/>
</g>
<!-- loop_cond -->
<g id="node4" class="node">
<title>loop_cond</title>
<polygon fill="none" stroke="black" points="468.59,-988 226.61,-970 468.59,-952 710.56,-970 468.59,-988"/>
<text text-anchor="middle" x="468.59" y="-966.3" font-family="Courier New" font-size="14.00">循环条件: self.scroll.top &gt;= 0?</text>
</g>
<!-- init1&#45;&gt;loop_cond -->
<g id="edge3" class="edge">
<title>init1&#45;&gt;loop_cond</title>
<path fill="none" stroke="black" d="M468.59,-1024.83C468.59,-1016.89 468.59,-1007.41 468.59,-998.63"/>
<polygon fill="black" stroke="black" points="472.09,-998.42 468.59,-988.42 465.09,-998.42 472.09,-998.42"/>
</g>
<!-- get_child -->
<g id="node5" class="node">
<title>get_child</title>
<polygon fill="none" stroke="black" points="600.59,-901 336.59,-901 336.59,-863 600.59,-863 600.59,-901"/>
<text text-anchor="middle" x="468.59" y="-885.8" font-family="Courier New" font-size="14.00">child = builder.itemAtIdx(...)</text>
<text text-anchor="middle" x="468.59" y="-870.8" font-family="Courier New" font-size="14.00">如果不存在则break</text>
</g>
<!-- loop_cond&#45;&gt;get_child -->
<g id="edge4" class="edge">
<title>loop_cond&#45;&gt;get_child</title>
<path fill="none" stroke="black" d="M468.59,-951.6C468.59,-940.06 468.59,-924.65 468.59,-911.36"/>
<polygon fill="black" stroke="black" points="472.09,-911.27 468.59,-901.27 465.09,-911.27 472.09,-911.27"/>
<text text-anchor="middle" x="476.09" y="-922.8" font-family="Times,serif" font-size="14.00">是</text>
</g>
<!-- set_offset -->
<g id="node14" class="node">
<title>set_offset</title>
<polygon fill="none" stroke="black" points="405.59,-271 149.59,-271 149.59,-235 405.59,-235 405.59,-271"/>
<text text-anchor="middle" x="277.59" y="-249.3" font-family="Courier New" font-size="14.00">self.scroll.offset = upheight</text>
</g>
<!-- loop_cond&#45;&gt;set_offset -->
<g id="edge5" class="edge">
<title>loop_cond&#45;&gt;set_offset</title>
<path fill="none" stroke="black" d="M355.51,-960.41C308.9,-950.06 265.59,-928.26 265.59,-883 265.59,-883 265.59,-883 265.59,-325 265.59,-310.3 268.12,-294.13 270.85,-280.94"/>
<polygon fill="black" stroke="black" points="274.29,-281.6 273.05,-271.08 267.46,-280.08 274.29,-281.6"/>
<text text-anchor="middle" x="273.09" y="-598.8" font-family="Times,serif" font-size="14.00">否</text>
</g>
<!-- calc_offset -->
<g id="node6" class="node">
<title>calc_offset</title>
<polygon fill="none" stroke="black" points="658.59,-812 344.59,-812 344.59,-774 658.59,-774 658.59,-812"/>
<text text-anchor="middle" x="501.59" y="-796.8" font-family="Courier New" font-size="14.00">child_offset = (draw_cursor ? 2 : 0)</text>
<text text-anchor="middle" x="501.59" y="-781.8" font-family="Courier New" font-size="14.00">max_size = ctx.max.size()</text>
</g>
<!-- get_child&#45;&gt;calc_offset -->
<g id="edge6" class="edge">
<title>get_child&#45;&gt;calc_offset</title>
<path fill="none" stroke="black" d="M475.42,-862.97C479.98,-850.96 486.06,-834.94 491.21,-821.36"/>
<polygon fill="black" stroke="black" points="494.48,-822.59 494.76,-812 487.94,-820.11 494.48,-822.59"/>
<text text-anchor="middle" x="519.59" y="-833.8" font-family="Times,serif" font-size="14.00">child存在</text>
</g>
<!-- break_loop -->
<g id="node12" class="node">
<title>break_loop</title>
<polygon fill="none" stroke="black" points="367.59,-344 293.59,-344 293.59,-308 367.59,-308 367.59,-344"/>
<text text-anchor="middle" x="330.59" y="-322.3" font-family="Courier New" font-size="14.00">跳出循环</text>
</g>
<!-- get_child&#45;&gt;break_loop -->
<g id="edge7" class="edge">
<title>get_child&#45;&gt;break_loop</title>
<path fill="none" stroke="black" d="M368.32,-862.97C333.77,-850.5 303.59,-829.46 303.59,-794 303.59,-794 303.59,-794 303.59,-412 303.59,-391.74 310.64,-369.99 317.54,-353.56"/>
<polygon fill="black" stroke="black" points="320.89,-354.64 321.74,-344.08 314.49,-351.8 320.89,-354.64"/>
<text text-anchor="middle" x="342.59" y="-598.8" font-family="Times,serif" font-size="14.00">child不存在</text>
</g>
<!-- set_constraint -->
<g id="node7" class="node">
<title>set_constraint</title>
<polygon fill="none" stroke="black" points="741.59,-737 331.59,-737 331.59,-701 741.59,-701 741.59,-737"/>
<text text-anchor="middle" x="536.59" y="-715.3" font-family="Courier New" font-size="14.00">创建子约束: width = max_size.width &#45; child_offset</text>
</g>
<!-- calc_offset&#45;&gt;set_constraint -->
<g id="edge8" class="edge">
<title>calc_offset&#45;&gt;set_constraint</title>
<path fill="none" stroke="black" d="M510.42,-773.83C514.45,-765.55 519.29,-755.57 523.72,-746.47"/>
<polygon fill="black" stroke="black" points="526.89,-747.94 528.12,-737.42 520.6,-744.88 526.89,-747.94"/>
</g>
<!-- draw_child -->
<g id="node8" class="node">
<title>draw_child</title>
<polygon fill="none" stroke="black" points="699.59,-664 373.59,-664 373.59,-628 699.59,-628 699.59,-664"/>
<text text-anchor="middle" x="536.59" y="-642.3" font-family="Courier New" font-size="14.00">绘制子元素 surf = child.draw(child_ctx)</text>
</g>
<!-- set_constraint&#45;&gt;draw_child -->
<g id="edge9" class="edge">
<title>set_constraint&#45;&gt;draw_child</title>
<path fill="none" stroke="black" d="M536.59,-700.81C536.59,-692.79 536.59,-683.05 536.59,-674.07"/>
<polygon fill="black" stroke="black" points="540.09,-674.03 536.59,-664.03 533.09,-674.03 540.09,-674.03"/>
</g>
<!-- update_height -->
<g id="node9" class="node">
<title>update_height</title>
<polygon fill="none" stroke="black" points="660.59,-577 412.59,-577 412.59,-541 660.59,-541 660.59,-577"/>
<text text-anchor="middle" x="536.59" y="-555.3" font-family="Courier New" font-size="14.00">upheight &#45;= surf.size.height</text>
</g>
<!-- draw_child&#45;&gt;update_height -->
<g id="edge10" class="edge">
<title>draw_child&#45;&gt;update_height</title>
<path fill="none" stroke="black" d="M536.59,-627.8C536.59,-616.16 536.59,-600.55 536.59,-587.24"/>
<polygon fill="black" stroke="black" points="540.09,-587.18 536.59,-577.18 533.09,-587.18 540.09,-587.18"/>
</g>
<!-- insert_child -->
<g id="node10" class="node">
<title>insert_child</title>
<polygon fill="none" stroke="black" points="643.09,-504 430.09,-504 430.09,-468 643.09,-468 643.09,-504"/>
<text text-anchor="middle" x="536.59" y="-482.3" font-family="Courier New" font-size="14.00">插入子元素到child_list头部</text>
</g>
<!-- update_height&#45;&gt;insert_child -->
<g id="edge11" class="edge">
<title>update_height&#45;&gt;insert_child</title>
<path fill="none" stroke="black" d="M536.59,-540.81C536.59,-532.79 536.59,-523.05 536.59,-514.07"/>
<polygon fill="black" stroke="black" points="540.09,-514.03 536.59,-504.03 533.09,-514.03 540.09,-514.03"/>
</g>
<!-- check_break1 -->
<g id="node11" class="node">
<title>check_break1</title>
<polygon fill="none" stroke="black" points="536.59,-431 349.91,-413 536.59,-395 723.26,-413 536.59,-431"/>
<text text-anchor="middle" x="536.59" y="-409.3" font-family="Courier New" font-size="14.00">upheight &lt;=0 或 top==0?</text>
</g>
<!-- insert_child&#45;&gt;check_break1 -->
<g id="edge12" class="edge">
<title>insert_child&#45;&gt;check_break1</title>
<path fill="none" stroke="black" d="M536.59,-467.81C536.59,-459.79 536.59,-450.05 536.59,-441.07"/>
<polygon fill="black" stroke="black" points="540.09,-441.03 536.59,-431.03 533.09,-441.03 540.09,-441.03"/>
</g>
<!-- check_break1&#45;&gt;break_loop -->
<g id="edge13" class="edge">
<title>check_break1&#45;&gt;break_loop</title>
<path fill="none" stroke="black" d="M503.03,-398.15C468.77,-384.02 415.31,-361.96 377,-346.15"/>
<polygon fill="black" stroke="black" points="378.19,-342.86 367.61,-342.28 375.52,-349.33 378.19,-342.86"/>
<text text-anchor="middle" x="454.09" y="-365.8" font-family="Times,serif" font-size="14.00">是</text>
</g>
<!-- dec_top -->
<g id="node13" class="node">
<title>dec_top</title>
<polygon fill="none" stroke="black" points="804.59,-344 622.59,-344 622.59,-308 804.59,-308 804.59,-344"/>
<text text-anchor="middle" x="713.59" y="-322.3" font-family="Courier New" font-size="14.00">self.scroll.top &#45;= 1</text>
</g>
<!-- check_break1&#45;&gt;dec_top -->
<g id="edge14" class="edge">
<title>check_break1&#45;&gt;dec_top</title>
<path fill="none" stroke="black" d="M566.21,-397.77C594.25,-384.31 636.71,-363.92 668.86,-348.48"/>
<polygon fill="black" stroke="black" points="670.56,-351.54 678.06,-344.06 667.53,-345.23 670.56,-351.54"/>
<text text-anchor="middle" x="644.09" y="-365.8" font-family="Times,serif" font-size="14.00">否</text>
</g>
<!-- break_loop&#45;&gt;set_offset -->
<g id="edge16" class="edge">
<title>break_loop&#45;&gt;set_offset</title>
<path fill="none" stroke="black" d="M317.76,-307.81C311.38,-299.27 303.54,-288.77 296.49,-279.32"/>
<polygon fill="black" stroke="black" points="299.08,-276.95 290.3,-271.03 293.47,-281.14 299.08,-276.95"/>
</g>
<!-- dec_top&#45;&gt;loop_cond -->
<g id="edge15" class="edge">
<title>dec_top&#45;&gt;loop_cond</title>
<path fill="none" stroke="black" d="M733.49,-344.08C749.58,-359.88 769.59,-384.96 769.59,-412 769.59,-883 769.59,-883 769.59,-883 769.59,-923.97 665.17,-946.51 579.33,-958.12"/>
<polygon fill="black" stroke="black" points="578.69,-954.68 569.23,-959.45 579.6,-961.62 578.69,-954.68"/>
</g>
<!-- check_reset -->
<g id="node15" class="node">
<title>check_reset</title>
<polygon fill="none" stroke="black" points="277.59,-198 -0.09,-180 277.59,-162 555.26,-180 277.59,-198"/>
<text text-anchor="middle" x="277.59" y="-176.3" font-family="Courier New" font-size="14.00">self.scroll.top ==0 且 upheight &gt;0?</text>
</g>
<!-- set_offset&#45;&gt;check_reset -->
<g id="edge17" class="edge">
<title>set_offset&#45;&gt;check_reset</title>
<path fill="none" stroke="black" d="M277.59,-234.81C277.59,-226.79 277.59,-217.05 277.59,-208.07"/>
<polygon fill="black" stroke="black" points="281.09,-208.03 277.59,-198.03 274.09,-208.03 281.09,-208.03"/>
</g>
<!-- reset_offset -->
<g id="node16" class="node">
<title>reset_offset</title>
<polygon fill="none" stroke="black" points="534.09,-111 295.09,-111 295.09,-73 534.09,-73 534.09,-111"/>
<text text-anchor="middle" x="414.59" y="-95.8" font-family="Courier New" font-size="14.00">self.scroll.offset = 0</text>
<text text-anchor="middle" x="414.59" y="-80.8" font-family="Courier New" font-size="14.00">遍历child_list调整origin.row</text>
</g>
<!-- check_reset&#45;&gt;reset_offset -->
<g id="edge18" class="edge">
<title>check_reset&#45;&gt;reset_offset</title>
<path fill="none" stroke="black" d="M302.4,-163.43C323.18,-150.38 353.18,-131.55 376.93,-116.64"/>
<polygon fill="black" stroke="black" points="379.08,-119.42 385.69,-111.14 375.36,-113.49 379.08,-119.42"/>
<text text-anchor="middle" x="362.09" y="-132.8" font-family="Times,serif" font-size="14.00">是</text>
</g>
<!-- end -->
<g id="node17" class="node">
<title>end</title>
<polygon fill="none" stroke="black" points="300.59,-36 246.59,-36 246.59,0 300.59,0 300.59,-36"/>
<text text-anchor="middle" x="273.59" y="-14.3" font-family="Courier New" font-size="14.00">结束</text>
</g>
<!-- check_reset&#45;&gt;end -->
<g id="edge19" class="edge">
<title>check_reset&#45;&gt;end</title>
<path fill="none" stroke="black" d="M275.35,-161.99C273.66,-148.26 271.48,-128.42 270.59,-111 269.72,-94.13 270.12,-89.88 270.59,-73 270.83,-64.29 271.29,-54.8 271.78,-46.23"/>
<polygon fill="black" stroke="black" points="275.29,-46.21 272.4,-36.01 268.3,-45.78 275.29,-46.21"/>
<text text-anchor="middle" x="278.09" y="-88.3" font-family="Times,serif" font-size="14.00">否</text>
</g>
<!-- reset_offset&#45;&gt;end -->
<g id="edge20" class="edge">
<title>reset_offset&#45;&gt;end</title>
<path fill="none" stroke="black" d="M379.01,-72.83C357.83,-62.02 331.03,-48.33 309.75,-37.47"/>
<polygon fill="black" stroke="black" points="311.2,-34.28 300.7,-32.85 308.01,-40.51 311.2,-34.28"/>
</g>
</g>
</svg>
