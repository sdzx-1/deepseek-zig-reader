<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: saveState Pages: 1 -->
<svg width="413pt" height="1129pt"
 viewBox="0.00 0.00 412.53 1129.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1125)">
<title>saveState</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-1125 408.53,-1125 408.53,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_zcu</title>
<polygon fill="none" stroke="black" points="45,-398 45,-746 263,-746 263,-398 45,-398"/>
<text text-anchor="middle" x="154" y="-730.8" font-family="Times,serif" font-size="14.00">处理 zcu 数据</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_wasm</title>
<polygon fill="none" stroke="black" points="152,-138 152,-369 303,-369 303,-138 152,-138"/>
<text text-anchor="middle" x="227.5" y="-353.8" font-family="Times,serif" font-size="14.00">Wasm 处理分支</text>
</g>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<polygon fill="none" stroke="black" points="315.5,-1121 220.5,-1121 220.5,-1085 315.5,-1085 315.5,-1121"/>
<text text-anchor="middle" x="268" y="-1100.5" font-family="Courier,monospace" font-size="10.00">开始 saveState</text>
</g>
<!-- check_incremental -->
<g id="node2" class="node">
<title>check_incremental</title>
<polygon fill="none" stroke="black" points="345.5,-1048 190.5,-1048 190.5,-1012 345.5,-1012 345.5,-1048"/>
<text text-anchor="middle" x="268" y="-1027.5" font-family="Courier,monospace" font-size="10.00">dev.check(.incremental)</text>
</g>
<!-- start&#45;&gt;check_incremental -->
<g id="edge1" class="edge">
<title>start&#45;&gt;check_incremental</title>
<path fill="none" stroke="black" d="M268,-1084.81C268,-1076.79 268,-1067.05 268,-1058.07"/>
<polygon fill="black" stroke="black" points="271.5,-1058.03 268,-1048.03 264.5,-1058.03 271.5,-1058.03"/>
</g>
<!-- check_bin_file -->
<g id="node3" class="node">
<title>check_bin_file</title>
<polygon fill="none" stroke="black" points="268,-975 131.44,-957 268,-939 404.56,-957 268,-975"/>
<text text-anchor="middle" x="268" y="-954.5" font-family="Courier,monospace" font-size="10.00">检查 comp.bin_file 是否存在</text>
</g>
<!-- check_incremental&#45;&gt;check_bin_file -->
<g id="edge2" class="edge">
<title>check_incremental&#45;&gt;check_bin_file</title>
<path fill="none" stroke="black" d="M268,-1011.81C268,-1003.79 268,-994.05 268,-985.07"/>
<polygon fill="black" stroke="black" points="271.5,-985.03 268,-975.03 264.5,-985.03 271.5,-985.03"/>
</g>
<!-- init_buffers -->
<g id="node4" class="node">
<title>init_buffers</title>
<polygon fill="none" stroke="black" points="278,-892 122,-892 122,-856 278,-856 278,-892"/>
<text text-anchor="middle" x="200" y="-871.5" font-family="Courier,monospace" font-size="10.00">初始化 bufs 和 pt_headers</text>
</g>
<!-- check_bin_file&#45;&gt;init_buffers -->
<g id="edge3" class="edge">
<title>check_bin_file&#45;&gt;init_buffers</title>
<path fill="none" stroke="black" d="M254.89,-940.38C245.3,-928.96 232.09,-913.23 221.04,-900.06"/>
<polygon fill="black" stroke="black" points="223.59,-897.66 214.48,-892.25 218.23,-902.16 223.59,-897.66"/>
<text text-anchor="middle" x="248" y="-913" font-family="Courier,monospace" font-size="10.00">存在</text>
</g>
<!-- end -->
<g id="node14" class="node">
<title>end</title>
<polygon fill="none" stroke="black" points="303,-36 249,-36 249,0 303,0 303,-36"/>
<text text-anchor="middle" x="276" y="-15.5" font-family="Courier,monospace" font-size="10.00">结束</text>
</g>
<!-- check_bin_file&#45;&gt;end -->
<g id="edge4" class="edge">
<title>check_bin_file&#45;&gt;end</title>
<path fill="none" stroke="black" d="M285.35,-941.15C300.81,-926.18 321,-901.55 321,-875 321,-875 321,-875 321,-90 321,-72.88 311.55,-56.54 301.31,-43.86"/>
<polygon fill="black" stroke="black" points="303.76,-41.35 294.56,-36.09 298.48,-45.94 303.76,-41.35"/>
<text text-anchor="middle" x="336" y="-487" font-family="Courier,monospace" font-size="10.00">不存在</text>
</g>
<!-- process_zcu -->
<g id="node5" class="node">
<title>process_zcu</title>
<polygon fill="none" stroke="black" points="148,-819 52.03,-801 148,-783 243.97,-801 148,-819"/>
<text text-anchor="middle" x="148" y="-798.5" font-family="Courier,monospace" font-size="10.00">处理 comp.zcu 存在</text>
</g>
<!-- init_buffers&#45;&gt;process_zcu -->
<g id="edge5" class="edge">
<title>init_buffers&#45;&gt;process_zcu</title>
<path fill="none" stroke="black" d="M187.41,-855.81C180.72,-846.67 172.39,-835.3 165.11,-825.37"/>
<polygon fill="black" stroke="black" points="167.79,-823.1 159.06,-817.1 162.14,-827.24 167.79,-823.1"/>
</g>
<!-- fill_header -->
<g id="node6" class="node">
<title>fill_header</title>
<polygon fill="none" stroke="black" points="199.5,-715 96.5,-715 96.5,-679 199.5,-679 199.5,-715"/>
<text text-anchor="middle" x="148" y="-694.5" font-family="Courier,monospace" font-size="10.00">填充 Header 结构</text>
</g>
<!-- process_zcu&#45;&gt;fill_header -->
<g id="edge6" class="edge">
<title>process_zcu&#45;&gt;fill_header</title>
<path fill="none" stroke="black" d="M148,-782.7C148,-766.92 148,-743.36 148,-725.09"/>
<polygon fill="black" stroke="black" points="151.5,-725.05 148,-715.05 144.5,-725.05 151.5,-725.05"/>
<text text-anchor="middle" x="153" y="-757" font-family="Courier,monospace" font-size="10.00">是</text>
</g>
<!-- process_linker -->
<g id="node9" class="node">
<title>process_linker</title>
<polygon fill="none" stroke="black" points="154,-466 53,-436 154,-406 255,-436 154,-466"/>
<text text-anchor="middle" x="154" y="-439" font-family="Courier,monospace" font-size="10.00">处理链接器状态</text>
<text text-anchor="middle" x="154" y="-428" font-family="Courier,monospace" font-size="10.00">switch(lf.tag)</text>
</g>
<!-- process_zcu&#45;&gt;process_linker -->
<g id="edge10" class="edge">
<title>process_zcu&#45;&gt;process_linker</title>
<path fill="none" stroke="black" d="M107.17,-790.6C63.36,-777.81 0,-750.27 0,-698 0,-698 0,-698 0,-530 0,-487.49 43.52,-463.9 84.29,-451.12"/>
<polygon fill="black" stroke="black" points="85.42,-454.44 94.02,-448.25 83.44,-447.72 85.42,-454.44"/>
<text text-anchor="middle" x="5" y="-611.5" font-family="Courier,monospace" font-size="10.00">否</text>
</g>
<!-- loop_locals -->
<g id="node7" class="node">
<title>loop_locals</title>
<polygon fill="none" stroke="black" points="207.5,-632 92.5,-632 92.5,-596 207.5,-596 207.5,-632"/>
<text text-anchor="middle" x="150" y="-617" font-family="Courier,monospace" font-size="10.00">循环处理 ip.locals</text>
<text text-anchor="middle" x="150" y="-606" font-family="Courier,monospace" font-size="10.00">填充 pt_headers</text>
</g>
<!-- fill_header&#45;&gt;loop_locals -->
<g id="edge7" class="edge">
<title>fill_header&#45;&gt;loop_locals</title>
<path fill="none" stroke="black" d="M143.14,-678.99C141.25,-670.33 139.78,-659.62 141,-650 141.32,-647.44 141.78,-644.8 142.31,-642.17"/>
<polygon fill="black" stroke="black" points="145.75,-642.82 144.64,-632.28 138.94,-641.21 145.75,-642.82"/>
</g>
<!-- fill_header&#45;&gt;loop_locals -->
<g id="edge17" class="edge">
<title>fill_header&#45;&gt;loop_locals</title>
<path fill="none" stroke="black" d="M148.42,-678.82C148.69,-668.19 149.03,-654.31 149.33,-642.2"/>
<polygon fill="black" stroke="black" points="152.83,-642.24 149.58,-632.15 145.83,-642.06 152.83,-642.24"/>
<text text-anchor="middle" x="179.5" y="-653" font-family="Courier,monospace" font-size="10.00">遍历 locals</text>
</g>
<!-- add_deps -->
<g id="node8" class="node">
<title>add_deps</title>
<polygon fill="none" stroke="black" points="225.5,-549 82.5,-549 82.5,-513 225.5,-513 225.5,-549"/>
<text text-anchor="middle" x="154" y="-528.5" font-family="Courier,monospace" font-size="10.00">添加所有依赖项数据到 bufs</text>
</g>
<!-- loop_locals&#45;&gt;add_deps -->
<g id="edge8" class="edge">
<title>loop_locals&#45;&gt;add_deps</title>
<path fill="none" stroke="black" d="M144.93,-595.96C142.98,-587.29 141.53,-576.58 143,-567 143.41,-564.32 143.99,-561.56 144.67,-558.83"/>
<polygon fill="black" stroke="black" points="148.04,-559.78 147.45,-549.2 141.31,-557.83 148.04,-559.78"/>
</g>
<!-- loop_locals&#45;&gt;add_deps -->
<g id="edge18" class="edge">
<title>loop_locals&#45;&gt;add_deps</title>
<path fill="none" stroke="black" d="M150.85,-595.82C151.37,-585.19 152.06,-571.31 152.66,-559.2"/>
<polygon fill="black" stroke="black" points="156.16,-559.31 153.15,-549.15 149.16,-558.97 156.16,-559.31"/>
<text text-anchor="middle" x="186.5" y="-570" font-family="Courier,monospace" font-size="10.00">添加内存段数据</text>
</g>
<!-- add_deps&#45;&gt;process_linker -->
<g id="edge9" class="edge">
<title>add_deps&#45;&gt;process_linker</title>
<path fill="none" stroke="black" d="M148.64,-512.94C147.45,-502.18 147.02,-487.85 147.36,-474.54"/>
<polygon fill="black" stroke="black" points="150.88,-474.31 147.8,-464.17 143.88,-474.02 150.88,-474.31"/>
</g>
<!-- add_deps&#45;&gt;process_linker -->
<g id="edge19" class="edge">
<title>add_deps&#45;&gt;process_linker</title>
<path fill="none" stroke="black" d="M159.36,-512.94C160.55,-502.18 160.98,-487.85 160.64,-474.54"/>
<polygon fill="black" stroke="black" points="164.12,-474.02 160.2,-464.17 157.12,-474.31 164.12,-474.02"/>
</g>
<!-- handle_wasm -->
<g id="node10" class="node">
<title>handle_wasm</title>
<polygon fill="none" stroke="black" points="270,-338 160,-338 160,-302 270,-302 270,-338"/>
<text text-anchor="middle" x="215" y="-317.5" font-family="Courier,monospace" font-size="10.00">处理 Wasm 链接状态</text>
</g>
<!-- add_deps&#45;&gt;handle_wasm -->
<!-- handle_other -->
<g id="node11" class="node">
<title>handle_other</title>
<polygon fill="none" stroke="black" points="142,-338 38,-338 38,-302 142,-302 142,-338"/>
<text text-anchor="middle" x="90" y="-323" font-family="Courier,monospace" font-size="10.00">处理其他链接器类型</text>
<text text-anchor="middle" x="90" y="-312" font-family="Courier,monospace" font-size="10.00">记录错误</text>
</g>
<!-- add_deps&#45;&gt;handle_other -->
<!-- process_linker&#45;&gt;handle_wasm -->
<g id="edge11" class="edge">
<title>process_linker&#45;&gt;handle_wasm</title>
<path fill="none" stroke="black" d="M167.54,-409.7C177.51,-391.07 191.02,-365.81 201.08,-347.02"/>
<polygon fill="black" stroke="black" points="204.22,-348.57 205.85,-338.11 198.04,-345.27 204.22,-348.57"/>
<text text-anchor="middle" x="199.5" y="-380" font-family="Courier,monospace" font-size="10.00">.wasm</text>
</g>
<!-- process_linker&#45;&gt;handle_other -->
<g id="edge12" class="edge">
<title>process_linker&#45;&gt;handle_other</title>
<path fill="none" stroke="black" d="M139.95,-409.98C129.5,-391.37 115.28,-366.02 104.68,-347.14"/>
<polygon fill="black" stroke="black" points="107.6,-345.2 99.65,-338.19 101.5,-348.63 107.6,-345.2"/>
<text text-anchor="middle" x="135" y="-380" font-family="Courier,monospace" font-size="10.00">其他</text>
</g>
<!-- prepare_filename -->
<g id="node12" class="node">
<title>prepare_filename</title>
<polygon fill="none" stroke="black" points="283.5,-182 164.5,-182 164.5,-146 283.5,-146 283.5,-182"/>
<text text-anchor="middle" x="224" y="-161.5" font-family="Courier,monospace" font-size="10.00">生成文件名 basename</text>
</g>
<!-- handle_wasm&#45;&gt;prepare_filename -->
<g id="edge13" class="edge">
<title>handle_wasm&#45;&gt;prepare_filename</title>
<path fill="none" stroke="black" d="M198.74,-301.76C182.09,-281.91 160.2,-248.27 172,-219 176.55,-207.7 184.73,-197.45 193.27,-188.99"/>
<polygon fill="black" stroke="black" points="195.82,-191.39 200.78,-182.03 191.07,-186.25 195.82,-191.39"/>
</g>
<!-- add_wasm_data -->
<g id="node15" class="node">
<title>add_wasm_data</title>
<polygon fill="none" stroke="black" points="275.5,-255 180.5,-255 180.5,-219 275.5,-219 275.5,-255"/>
<text text-anchor="middle" x="228" y="-234.5" font-family="Courier,monospace" font-size="10.00">add_wasm_data</text>
</g>
<!-- handle_wasm&#45;&gt;add_wasm_data -->
<g id="edge20" class="edge">
<title>handle_wasm&#45;&gt;add_wasm_data</title>
<path fill="none" stroke="black" d="M202.07,-301.99C197.08,-293.33 193.35,-282.62 197,-273 198.28,-269.63 200.04,-266.38 202.09,-263.31"/>
<polygon fill="black" stroke="black" points="205.04,-265.21 208.42,-255.17 199.52,-260.91 205.04,-265.21"/>
<text text-anchor="middle" x="252" y="-276" font-family="Courier,monospace" font-size="10.00">添加函数/全局/表等数据</text>
</g>
<!-- handle_other&#45;&gt;prepare_filename -->
<g id="edge14" class="edge">
<title>handle_other&#45;&gt;prepare_filename</title>
<path fill="none" stroke="black" d="M100.58,-301.66C115.88,-277.37 145.88,-232.56 178,-200 181.88,-196.07 186.21,-192.21 190.63,-188.58"/>
<polygon fill="black" stroke="black" points="192.89,-191.25 198.58,-182.31 188.56,-185.75 192.89,-191.25"/>
</g>
<!-- write_file -->
<g id="node13" class="node">
<title>write_file</title>
<polygon fill="none" stroke="black" points="289.5,-109 174.5,-109 174.5,-73 289.5,-73 289.5,-109"/>
<text text-anchor="middle" x="232" y="-88.5" font-family="Courier,monospace" font-size="10.00">原子写入文件到 .zcs</text>
</g>
<!-- prepare_filename&#45;&gt;write_file -->
<g id="edge15" class="edge">
<title>prepare_filename&#45;&gt;write_file</title>
<path fill="none" stroke="black" d="M225.94,-145.81C226.84,-137.79 227.94,-128.05 228.95,-119.07"/>
<polygon fill="black" stroke="black" points="232.44,-119.36 230.08,-109.03 225.48,-118.57 232.44,-119.36"/>
</g>
<!-- write_file&#45;&gt;end -->
<g id="edge16" class="edge">
<title>write_file&#45;&gt;end</title>
<path fill="none" stroke="black" d="M242.65,-72.81C247.89,-64.35 254.32,-53.98 260.13,-44.61"/>
<polygon fill="black" stroke="black" points="263.15,-46.37 265.45,-36.03 257.2,-42.69 263.15,-46.37"/>
</g>
<!-- add_wasm_data&#45;&gt;prepare_filename -->
</g>
</svg>
