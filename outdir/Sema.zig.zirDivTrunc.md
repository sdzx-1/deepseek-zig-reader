flowchart TD
    A[开始] --> B[初始化PT/ZCU/指令数据]
    B --> C[获取左右操作数源码位置]
    C --> D[解析左右操作数值和类型]
    D --> E[检查向量化操作数和指针算术]
    E --> F[统一操作数类型]
    F --> G[类型转换左右操作数]
    G --> H[确定标量类型和是否为整数]
    
    H --> I{左操作数是零?}
    I --> |是| J[创建零值返回]
    I --> |否| K{右操作数存在?}
    
    K --> |存在| L{右操作数是零/未定义?}
    L --> |是零| M[抛出除零错误]
    L --> |是未定义| N[抛出未定义错误]
    
    K --> |不存在| O[标记运行时源码位置]
    
    L --> |正常| P{左操作数未定义?}
    P --> |是| Q{是否为有符号整型?}
    Q --> |是| R{右操作数是否为-1?}
    R --> |是| S[抛出未定义错误]
    R --> |否| T[返回未定义值]
    Q --> |否| T
    
    P --> |否| U[执行除法运算]
    U --> V{是否整数运算?}
    V --> |是| W[检查整数溢出]
    W --> X[溢出?]
    X --> |是| Y[抛出溢出错误]
    X --> |否| Z[返回整型结果]
    
    V --> |否| AA[执行浮点截断除法]
    AA --> AB[返回浮点结果]
    
    O --> AC[添加运行时安全检查]
    AC --> AD[生成AIR二元操作指令]
    
    J --> AE[返回]
    M --> AE
    N --> AE
    S --> AE
    T --> AE
    Y --> AE
    Z --> AE
    AB --> AE
    AD --> AE
