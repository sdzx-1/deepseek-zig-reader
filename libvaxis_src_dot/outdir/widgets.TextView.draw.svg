<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: flowchart Pages: 1 -->
<svg width="657pt" height="1084pt"
 viewBox="0.00 0.00 657.00 1084.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1080)">
<title>flowchart</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-1080 653,-1080 653,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<polygon fill="#f0f0f0" stroke="black" points="404,-1076 350,-1076 350,-1040 404,-1040 404,-1076"/>
<text text-anchor="middle" x="377" y="-1054.3" font-family="Arial" font-size="14.00">开始</text>
</g>
<!-- call_draw -->
<g id="node2" class="node">
<title>call_draw</title>
<polygon fill="#f0f0f0" stroke="black" points="454.5,-1003 299.5,-1003 299.5,-967 454.5,-967 454.5,-1003"/>
<text text-anchor="middle" x="377" y="-981.3" font-family="Arial" font-size="14.00">调用 scroll_view.draw()</text>
</g>
<!-- start&#45;&gt;call_draw -->
<g id="edge1" class="edge">
<title>start&#45;&gt;call_draw</title>
<path fill="none" stroke="black" d="M377,-1039.81C377,-1031.79 377,-1022.05 377,-1013.07"/>
<polygon fill="black" stroke="black" points="380.5,-1013.03 377,-1003.03 373.5,-1013.03 380.5,-1013.03"/>
</g>
<!-- init_vars -->
<g id="node3" class="node">
<title>init_vars</title>
<polygon fill="#f0f0f0" stroke="black" points="462,-930 292,-930 292,-894 462,-894 462,-930"/>
<text text-anchor="middle" x="377" y="-908.3" font-family="Arial" font-size="14.00">初始化 pos 和 byte_index</text>
</g>
<!-- call_draw&#45;&gt;init_vars -->
<g id="edge2" class="edge">
<title>call_draw&#45;&gt;init_vars</title>
<path fill="none" stroke="black" d="M377,-966.81C377,-958.79 377,-949.05 377,-940.07"/>
<polygon fill="black" stroke="black" points="380.5,-940.03 377,-930.03 373.5,-940.03 380.5,-940.03"/>
</g>
<!-- get_bounds -->
<g id="node4" class="node">
<title>get_bounds</title>
<polygon fill="#f0f0f0" stroke="black" points="462,-857 292,-857 292,-821 462,-821 462,-857"/>
<text text-anchor="middle" x="377" y="-835.3" font-family="Arial" font-size="14.00">获取 scroll_view.bounds()</text>
</g>
<!-- init_vars&#45;&gt;get_bounds -->
<g id="edge3" class="edge">
<title>init_vars&#45;&gt;get_bounds</title>
<path fill="none" stroke="black" d="M377,-893.81C377,-885.79 377,-876.05 377,-867.07"/>
<polygon fill="black" stroke="black" points="380.5,-867.03 377,-857.03 373.5,-867.03 380.5,-867.03"/>
</g>
<!-- loop_start -->
<g id="node5" class="node">
<title>loop_start</title>
<ellipse fill="#f0f0f0" stroke="black" cx="377" cy="-766" rx="119.68" ry="18"/>
<text text-anchor="middle" x="377" y="-762.3" font-family="Arial" font-size="14.00">遍历 buffer.grapheme.items</text>
</g>
<!-- get_bounds&#45;&gt;loop_start -->
<g id="edge4" class="edge">
<title>get_bounds&#45;&gt;loop_start</title>
<path fill="none" stroke="black" d="M377,-820.81C377,-812.79 377,-803.05 377,-794.07"/>
<polygon fill="black" stroke="black" points="380.5,-794.03 377,-784.03 373.5,-794.03 380.5,-794.03"/>
</g>
<!-- check_above -->
<g id="node6" class="node">
<title>check_above</title>
<polygon fill="#f0f0f0" stroke="black" points="294,-711 156.25,-693 294,-675 431.75,-693 294,-711"/>
<text text-anchor="middle" x="294" y="-689.3" font-family="Arial" font-size="14.00">bounds.above(pos.y)?</text>
</g>
<!-- loop_start&#45;&gt;check_above -->
<g id="edge5" class="edge">
<title>loop_start&#45;&gt;check_above</title>
<path fill="none" stroke="black" d="M357.33,-748.17C345.85,-738.35 331.25,-725.86 318.96,-715.35"/>
<polygon fill="black" stroke="black" points="321.15,-712.62 311.28,-708.78 316.6,-717.94 321.15,-712.62"/>
</g>
<!-- break_loop -->
<g id="node7" class="node">
<title>break_loop</title>
<polygon fill="#f0f0f0" stroke="black" points="88,-386 14,-386 14,-350 88,-350 88,-386"/>
<text text-anchor="middle" x="51" y="-364.3" font-family="Arial" font-size="14.00">退出循环</text>
</g>
<!-- check_above&#45;&gt;break_loop -->
<g id="edge6" class="edge">
<title>check_above&#45;&gt;break_loop</title>
<path fill="none" stroke="black" d="M214.05,-685.41C126.99,-675.98 0,-654.58 0,-610 0,-610 0,-610 0,-451 0,-429.64 12.63,-409.23 25.32,-394.12"/>
<polygon fill="black" stroke="black" points="28.26,-396.09 32.3,-386.29 23.03,-391.43 28.26,-396.09"/>
<text text-anchor="middle" x="5" y="-532.5" font-family="Arial" font-size="10.00">是</text>
</g>
<!-- process_cluster -->
<g id="node8" class="node">
<title>process_cluster</title>
<polygon fill="#f0f0f0" stroke="black" points="350.5,-628 237.5,-628 237.5,-590 350.5,-590 350.5,-628"/>
<text text-anchor="middle" x="294" y="-612.8" font-family="Arial" font-size="14.00">处理 cluster</text>
<text text-anchor="middle" x="294" y="-597.8" font-family="Arial" font-size="14.00">更新 byte_index</text>
</g>
<!-- check_above&#45;&gt;process_cluster -->
<g id="edge7" class="edge">
<title>check_above&#45;&gt;process_cluster</title>
<path fill="none" stroke="black" d="M294,-674.61C294,-664.07 294,-650.36 294,-638.29"/>
<polygon fill="black" stroke="black" points="297.5,-638.22 294,-628.22 290.5,-638.22 297.5,-638.22"/>
<text text-anchor="middle" x="299" y="-649" font-family="Arial" font-size="10.00">否</text>
</g>
<!-- end -->
<g id="node18" class="node">
<title>end</title>
<polygon fill="#f0f0f0" stroke="black" points="78,-275 24,-275 24,-239 78,-239 78,-275"/>
<text text-anchor="middle" x="51" y="-253.3" font-family="Arial" font-size="14.00">结束</text>
</g>
<!-- break_loop&#45;&gt;end -->
<g id="edge22" class="edge">
<title>break_loop&#45;&gt;end</title>
<path fill="none" stroke="black" d="M51,-349.97C51,-332.71 51,-305.74 51,-285.46"/>
<polygon fill="black" stroke="black" points="54.5,-285.27 51,-275.27 47.5,-285.27 54.5,-285.27"/>
</g>
<!-- check_newline -->
<g id="node9" class="node">
<title>check_newline</title>
<polygon fill="#f0f0f0" stroke="black" points="294,-553 192.79,-535 294,-517 395.21,-535 294,-553"/>
<text text-anchor="middle" x="294" y="-531.3" font-family="Arial" font-size="14.00">cluster == &quot;\n&quot;?</text>
</g>
<!-- process_cluster&#45;&gt;check_newline -->
<g id="edge8" class="edge">
<title>process_cluster&#45;&gt;check_newline</title>
<path fill="none" stroke="black" d="M294,-589.83C294,-581.89 294,-572.41 294,-563.63"/>
<polygon fill="black" stroke="black" points="297.5,-563.42 294,-553.42 290.5,-563.42 297.5,-563.42"/>
</g>
<!-- check_last -->
<g id="node10" class="node">
<title>check_last</title>
<polygon fill="#f0f0f0" stroke="black" points="154,-470 28.15,-452 154,-434 279.85,-452 154,-470"/>
<text text-anchor="middle" x="154" y="-448.3" font-family="Arial" font-size="14.00">index == 最后元素?</text>
</g>
<!-- check_newline&#45;&gt;check_last -->
<g id="edge9" class="edge">
<title>check_newline&#45;&gt;check_last</title>
<path fill="none" stroke="black" d="M271.51,-520.99C248.55,-507.7 212.69,-486.96 186.62,-471.87"/>
<polygon fill="black" stroke="black" points="188.25,-468.77 177.84,-466.8 184.75,-474.83 188.25,-468.77"/>
<text text-anchor="middle" x="238" y="-491" font-family="Arial" font-size="10.00">是</text>
</g>
<!-- check_below -->
<g id="node12" class="node">
<title>check_below</title>
<polygon fill="#f0f0f0" stroke="black" points="435,-470 298.09,-452 435,-434 571.91,-452 435,-470"/>
<text text-anchor="middle" x="435" y="-448.3" font-family="Arial" font-size="14.00">bounds.below(pos.y)?</text>
</g>
<!-- check_newline&#45;&gt;check_below -->
<g id="edge10" class="edge">
<title>check_newline&#45;&gt;check_below</title>
<path fill="none" stroke="black" d="M316.65,-520.99C339.63,-507.78 375.46,-487.21 401.67,-472.15"/>
<polygon fill="black" stroke="black" points="403.58,-475.09 410.51,-467.07 400.09,-469.02 403.58,-475.09"/>
<text text-anchor="middle" x="378" y="-491" font-family="Arial" font-size="10.00">否</text>
</g>
<!-- check_last&#45;&gt;break_loop -->
<g id="edge11" class="edge">
<title>check_last&#45;&gt;break_loop</title>
<path fill="none" stroke="black" d="M135.59,-436.34C120.23,-424.12 98.07,-406.47 80.29,-392.31"/>
<polygon fill="black" stroke="black" points="82.46,-389.58 72.46,-386.09 78.1,-395.05 82.46,-389.58"/>
<text text-anchor="middle" x="114" y="-408" font-family="Arial" font-size="10.00">是</text>
</g>
<!-- update_pos_newline -->
<g id="node11" class="node">
<title>update_pos_newline</title>
<polygon fill="#f0f0f0" stroke="black" points="203,-331 123,-331 123,-293 203,-293 203,-331"/>
<text text-anchor="middle" x="163" y="-315.8" font-family="Arial" font-size="14.00">pos.y += 1</text>
<text text-anchor="middle" x="163" y="-300.8" font-family="Arial" font-size="14.00">pos.x = 0</text>
</g>
<!-- check_last&#45;&gt;update_pos_newline -->
<g id="edge12" class="edge">
<title>check_last&#45;&gt;update_pos_newline</title>
<path fill="none" stroke="black" d="M155.1,-434.08C156.6,-411.08 159.31,-369.62 161.13,-341.7"/>
<polygon fill="black" stroke="black" points="164.64,-341.59 161.8,-331.38 157.66,-341.13 164.64,-341.59"/>
<text text-anchor="middle" x="162" y="-408" font-family="Arial" font-size="10.00">否</text>
</g>
<!-- continue_loop -->
<g id="node17" class="node">
<title>continue_loop</title>
<ellipse fill="#f0f0f0" stroke="black" cx="453" cy="-18" rx="48.19" ry="18"/>
<text text-anchor="middle" x="453" y="-14.3" font-family="Arial" font-size="14.00">继续循环</text>
</g>
<!-- update_pos_newline&#45;&gt;continue_loop -->
<g id="edge13" class="edge">
<title>update_pos_newline&#45;&gt;continue_loop</title>
<path fill="none" stroke="black" d="M163.92,-292.89C164.8,-273.87 166,-243.09 166,-216.5 166,-216.5 166,-216.5 166,-90 166,-43.25 311.3,-27.08 395.13,-21.65"/>
<polygon fill="black" stroke="black" points="395.52,-25.13 405.29,-21.02 395.09,-18.14 395.52,-25.13"/>
</g>
<!-- calc_width -->
<g id="node13" class="node">
<title>calc_width</title>
<polygon fill="#f0f0f0" stroke="black" points="427,-387 347,-387 347,-349 427,-349 427,-387"/>
<text text-anchor="middle" x="387" y="-371.8" font-family="Arial" font-size="14.00">计算宽度</text>
<text text-anchor="middle" x="387" y="-356.8" font-family="Arial" font-size="14.00">更新 pos.x</text>
</g>
<!-- check_below&#45;&gt;calc_width -->
<g id="edge15" class="edge">
<title>check_below&#45;&gt;calc_width</title>
<path fill="none" stroke="black" d="M425.75,-435.19C419.26,-424.1 410.42,-409.01 402.82,-396.03"/>
<polygon fill="black" stroke="black" points="405.64,-393.91 397.56,-387.05 399.59,-397.44 405.64,-393.91"/>
<text text-anchor="middle" x="419" y="-408" font-family="Arial" font-size="10.00">否</text>
</g>
<!-- check_below&#45;&gt;continue_loop -->
<g id="edge14" class="edge">
<title>check_below&#45;&gt;continue_loop</title>
<path fill="none" stroke="black" d="M477.86,-439.61C510.91,-427.93 551,-406.12 551,-369 551,-369 551,-369 551,-90 551,-62.33 525.07,-44.34 499.89,-33.4"/>
<polygon fill="black" stroke="black" points="500.91,-30.04 490.33,-29.54 498.29,-36.53 500.91,-30.04"/>
<text text-anchor="middle" x="556" y="-213" font-family="Arial" font-size="10.00">是</text>
</g>
<!-- check_col_inside -->
<g id="node14" class="node">
<title>check_col_inside</title>
<polygon fill="#f0f0f0" stroke="black" points="370,-275 216.5,-257 370,-239 523.5,-257 370,-275"/>
<text text-anchor="middle" x="370" y="-253.3" font-family="Arial" font-size="14.00">bounds.colInside(pos.x)?</text>
</g>
<!-- calc_width&#45;&gt;check_col_inside -->
<g id="edge16" class="edge">
<title>calc_width&#45;&gt;check_col_inside</title>
<path fill="none" stroke="black" d="M384.12,-348.51C381.39,-331 377.26,-304.53 374.17,-284.73"/>
<polygon fill="black" stroke="black" points="377.62,-284.13 372.62,-274.79 370.7,-285.21 377.62,-284.13"/>
</g>
<!-- get_style -->
<g id="node15" class="node">
<title>get_style</title>
<polygon fill="#f0f0f0" stroke="black" points="408,-192 332,-192 332,-156 408,-156 408,-192"/>
<text text-anchor="middle" x="370" y="-170.3" font-family="Arial" font-size="14.00">获取 style</text>
</g>
<!-- check_col_inside&#45;&gt;get_style -->
<g id="edge17" class="edge">
<title>check_col_inside&#45;&gt;get_style</title>
<path fill="none" stroke="black" d="M370,-238.82C370,-228.19 370,-214.31 370,-202.2"/>
<polygon fill="black" stroke="black" points="373.5,-202.15 370,-192.15 366.5,-202.15 373.5,-202.15"/>
<text text-anchor="middle" x="375" y="-213" font-family="Arial" font-size="10.00">是</text>
</g>
<!-- check_col_inside&#45;&gt;continue_loop -->
<g id="edge18" class="edge">
<title>check_col_inside&#45;&gt;continue_loop</title>
<path fill="none" stroke="black" d="M384.26,-240.63C394.86,-228.36 408.86,-210.26 417,-192 438.58,-143.58 447.43,-81.7 450.9,-46.6"/>
<polygon fill="black" stroke="black" points="454.43,-46.47 451.85,-36.19 447.46,-45.83 454.43,-46.47"/>
<text text-anchor="middle" x="443" y="-130" font-family="Arial" font-size="10.00">否</text>
</g>
<!-- write_cell -->
<g id="node16" class="node">
<title>write_cell</title>
<polygon fill="#f0f0f0" stroke="black" points="424.5,-109 315.5,-109 315.5,-73 424.5,-73 424.5,-109"/>
<text text-anchor="middle" x="370" y="-87.3" font-family="Arial" font-size="14.00">调用 writeCell()</text>
</g>
<!-- get_style&#45;&gt;write_cell -->
<g id="edge19" class="edge">
<title>get_style&#45;&gt;write_cell</title>
<path fill="none" stroke="black" d="M370,-155.82C370,-145.19 370,-131.31 370,-119.2"/>
<polygon fill="black" stroke="black" points="373.5,-119.15 370,-109.15 366.5,-119.15 373.5,-119.15"/>
</g>
<!-- write_cell&#45;&gt;continue_loop -->
<g id="edge20" class="edge">
<title>write_cell&#45;&gt;continue_loop</title>
<path fill="none" stroke="black" d="M390.09,-72.81C401.08,-63.41 414.84,-51.65 426.68,-41.52"/>
<polygon fill="black" stroke="black" points="429.19,-43.98 434.51,-34.82 424.64,-38.66 429.19,-43.98"/>
</g>
<!-- continue_loop&#45;&gt;loop_start -->
<g id="edge21" class="edge">
<title>continue_loop&#45;&gt;loop_start</title>
<path fill="none" stroke="black" d="M499.92,-22.39C542.94,-28.36 600,-44.79 600,-90 600,-694 600,-694 600,-694 600,-722.29 534.02,-740.81 473.84,-751.82"/>
<polygon fill="black" stroke="black" points="473.09,-748.4 463.86,-753.59 474.31,-755.29 473.09,-748.4"/>
<text text-anchor="middle" x="624.5" y="-442.19" font-family="Arial" font-size="10.00">下一个迭代</text>
</g>
</g>
</svg>
