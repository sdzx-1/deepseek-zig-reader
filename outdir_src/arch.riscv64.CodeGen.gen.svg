<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: flowchart Pages: 1 -->
<svg width="363pt" height="1485pt"
 viewBox="0.00 0.00 363.00 1485.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1481)">
<title>flowchart</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-1481 359,-1481 359,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<polygon fill="none" stroke="black" points="124,-1477 29,-1477 29,-1441 124,-1441 124,-1477"/>
<text text-anchor="middle" x="76.5" y="-1456.5" font-family="Courier,monospace" font-size="10.00">开始 gen(func)</text>
</g>
<!-- check_features -->
<g id="node2" class="node">
<title>check_features</title>
<polygon fill="none" stroke="black" points="148,-1404 5,-1404 5,-1368 148,-1368 148,-1404"/>
<text text-anchor="middle" x="76.5" y="-1383.5" font-family="Courier,monospace" font-size="10.00">检查 required_features</text>
</g>
<!-- start&#45;&gt;check_features -->
<g id="edge1" class="edge">
<title>start&#45;&gt;check_features</title>
<path fill="none" stroke="black" d="M76.5,-1440.81C76.5,-1432.79 76.5,-1423.05 76.5,-1414.07"/>
<polygon fill="black" stroke="black" points="80,-1414.03 76.5,-1404.03 73,-1414.03 80,-1414.03"/>
</g>
<!-- error -->
<g id="node3" class="node">
<title>error</title>
<polygon fill="none" stroke="black" points="101,-1321 0,-1321 0,-1285 101,-1285 101,-1321"/>
<text text-anchor="middle" x="50.5" y="-1306" font-family="Courier,monospace" font-size="10.00">返回错误</text>
<text text-anchor="middle" x="50.5" y="-1295" font-family="Courier,monospace" font-size="10.00">func.fail(...)</text>
</g>
<!-- check_features&#45;&gt;error -->
<g id="edge2" class="edge">
<title>check_features&#45;&gt;error</title>
<path fill="none" stroke="black" d="M70.99,-1367.82C67.54,-1357.08 63.03,-1343.03 59.11,-1330.84"/>
<polygon fill="black" stroke="black" points="62.39,-1329.61 56.01,-1321.15 55.73,-1331.74 62.39,-1329.61"/>
<text text-anchor="middle" x="80.5" y="-1342" font-family="Courier,monospace" font-size="10.00">有缺失</text>
</g>
<!-- check_naked -->
<g id="node4" class="node">
<title>check_naked</title>
<polygon fill="none" stroke="black" points="262,-1321 119,-1321 119,-1285 262,-1285 262,-1321"/>
<text text-anchor="middle" x="190.5" y="-1300.5" font-family="Courier,monospace" font-size="10.00">fn_info.cc == .naked?</text>
</g>
<!-- check_features&#45;&gt;check_naked -->
<g id="edge3" class="edge">
<title>check_features&#45;&gt;check_naked</title>
<path fill="none" stroke="black" d="M100.68,-1367.82C117.3,-1356.01 139.58,-1340.18 157.79,-1327.24"/>
<polygon fill="black" stroke="black" points="160.23,-1329.8 166.36,-1321.15 156.18,-1324.09 160.23,-1329.8"/>
<text text-anchor="middle" x="160.5" y="-1342" font-family="Courier,monospace" font-size="10.00">全部满足</text>
</g>
<!-- handle_naked -->
<g id="node5" class="node">
<title>handle_naked</title>
<polygon fill="none" stroke="black" points="178,-1238 91,-1238 91,-1202 178,-1202 178,-1238"/>
<text text-anchor="middle" x="134.5" y="-1217.5" font-family="Courier,monospace" font-size="10.00">非 naked 分支</text>
</g>
<!-- check_naked&#45;&gt;handle_naked -->
<g id="edge5" class="edge">
<title>check_naked&#45;&gt;handle_naked</title>
<path fill="none" stroke="black" d="M178.62,-1284.82C170.9,-1273.65 160.7,-1258.9 152.05,-1246.38"/>
<polygon fill="black" stroke="black" points="154.92,-1244.39 146.36,-1238.15 149.17,-1248.37 154.92,-1244.39"/>
<text text-anchor="middle" x="171.5" y="-1259" font-family="Courier,monospace" font-size="10.00">是</text>
</g>
<!-- handle_non_naked -->
<g id="node6" class="node">
<title>handle_non_naked</title>
<polygon fill="none" stroke="black" points="282.5,-1238 210.5,-1238 210.5,-1202 282.5,-1202 282.5,-1238"/>
<text text-anchor="middle" x="246.5" y="-1217.5" font-family="Courier,monospace" font-size="10.00">naked 分支</text>
</g>
<!-- check_naked&#45;&gt;handle_non_naked -->
<g id="edge4" class="edge">
<title>check_naked&#45;&gt;handle_non_naked</title>
<path fill="none" stroke="black" d="M202.38,-1284.82C210.1,-1273.65 220.3,-1258.9 228.95,-1246.38"/>
<polygon fill="black" stroke="black" points="231.83,-1248.37 234.64,-1238.15 226.08,-1244.39 231.83,-1248.37"/>
<text text-anchor="middle" x="227.5" y="-1259" font-family="Courier,monospace" font-size="10.00">否</text>
</g>
<!-- add_prologue_end_naked -->
<g id="node22" class="node">
<title>add_prologue_end_naked</title>
<polygon fill="none" stroke="black" points="175,-1144 20,-1144 20,-1108 175,-1108 175,-1144"/>
<text text-anchor="middle" x="97.5" y="-1129" font-family="Courier,monospace" font-size="10.00">添加伪指令</text>
<text text-anchor="middle" x="97.5" y="-1118" font-family="Courier,monospace" font-size="10.00">pseudo_dbg_prologue_end</text>
</g>
<!-- handle_naked&#45;&gt;add_prologue_end_naked -->
<g id="edge21" class="edge">
<title>handle_naked&#45;&gt;add_prologue_end_naked</title>
<path fill="none" stroke="black" d="M122.86,-1201.68C119.52,-1196.19 116.08,-1189.99 113.5,-1184 109.41,-1174.5 106.06,-1163.67 103.5,-1154.01"/>
<polygon fill="black" stroke="black" points="106.85,-1152.98 101.04,-1144.12 100.06,-1154.67 106.85,-1152.98"/>
<text text-anchor="middle" x="183" y="-1176" font-family="Courier,monospace" font-size="10.00">添加伪指令</text>
<text text-anchor="middle" x="183" y="-1165" font-family="Courier,monospace" font-size="10.00">pseudo_dbg_prologue_end</text>
</g>
<!-- add_prologue_end -->
<g id="node7" class="node">
<title>add_prologue_end</title>
<polygon fill="none" stroke="black" points="348,-1144 193,-1144 193,-1108 348,-1108 348,-1144"/>
<text text-anchor="middle" x="270.5" y="-1129" font-family="Courier,monospace" font-size="10.00">添加伪指令</text>
<text text-anchor="middle" x="270.5" y="-1118" font-family="Courier,monospace" font-size="10.00">pseudo_dbg_prologue_end</text>
</g>
<!-- handle_non_naked&#45;&gt;add_prologue_end -->
<g id="edge6" class="edge">
<title>handle_non_naked&#45;&gt;add_prologue_end</title>
<path fill="none" stroke="black" d="M251.01,-1201.7C254.5,-1188.33 259.39,-1169.59 263.4,-1154.22"/>
<polygon fill="black" stroke="black" points="266.87,-1154.79 266.01,-1144.23 260.1,-1153.02 266.87,-1154.79"/>
</g>
<!-- setup_backpatches -->
<g id="node8" class="node">
<title>setup_backpatches</title>
<polygon fill="none" stroke="black" points="318,-1061 223,-1061 223,-1025 318,-1025 318,-1061"/>
<text text-anchor="middle" x="270.5" y="-1046" font-family="Courier,monospace" font-size="10.00">创建多个伪指令</text>
<text text-anchor="middle" x="270.5" y="-1035" font-family="Courier,monospace" font-size="10.00">(backpatch_*)</text>
</g>
<!-- add_prologue_end&#45;&gt;setup_backpatches -->
<g id="edge7" class="edge">
<title>add_prologue_end&#45;&gt;setup_backpatches</title>
<path fill="none" stroke="black" d="M270.5,-1107.82C270.5,-1097.19 270.5,-1083.31 270.5,-1071.2"/>
<polygon fill="black" stroke="black" points="274,-1071.15 270.5,-1061.15 267,-1071.15 274,-1071.15"/>
</g>
<!-- handle_ret_mcv -->
<g id="node9" class="node">
<title>handle_ret_mcv</title>
<polygon fill="none" stroke="black" points="329.5,-967 213.5,-967 213.5,-931 329.5,-931 329.5,-967"/>
<text text-anchor="middle" x="271.5" y="-952" font-family="Courier,monospace" font-size="10.00">处理返回值存储</text>
<text text-anchor="middle" x="271.5" y="-941" font-family="Courier,monospace" font-size="10.00">(间接返回值存储到栈)</text>
</g>
<!-- setup_backpatches&#45;&gt;handle_ret_mcv -->
<g id="edge8" class="edge">
<title>setup_backpatches&#45;&gt;handle_ret_mcv</title>
<path fill="none" stroke="black" d="M270.69,-1024.7C270.83,-1011.46 271.03,-992.95 271.2,-977.66"/>
<polygon fill="black" stroke="black" points="274.7,-977.26 271.31,-967.23 267.7,-977.19 274.7,-977.26"/>
<text text-anchor="middle" x="306" y="-993.5" font-family="Courier,monospace" font-size="10.00">处理间接返回值</text>
</g>
<!-- gen_body -->
<g id="node10" class="node">
<title>gen_body</title>
<polygon fill="none" stroke="black" points="331,-859 212,-859 212,-823 331,-823 331,-859"/>
<text text-anchor="middle" x="271.5" y="-844" font-family="Courier,monospace" font-size="10.00">生成函数体</text>
<text text-anchor="middle" x="271.5" y="-833" font-family="Courier,monospace" font-size="10.00">func.genBody(...)</text>
</g>
<!-- handle_ret_mcv&#45;&gt;gen_body -->
<g id="edge9" class="edge">
<title>handle_ret_mcv&#45;&gt;gen_body</title>
<path fill="none" stroke="black" d="M271.5,-930.97C271.5,-914.38 271.5,-888.88 271.5,-869.43"/>
<polygon fill="black" stroke="black" points="275,-869.34 271.5,-859.34 268,-869.34 275,-869.34"/>
</g>
<!-- process_exitlude -->
<g id="node11" class="node">
<title>process_exitlude</title>
<polygon fill="none" stroke="black" points="352,-786 191,-786 191,-750 352,-750 352,-786"/>
<text text-anchor="middle" x="271.5" y="-765.5" font-family="Courier,monospace" font-size="10.00">处理 exitlude_jump_relocs</text>
</g>
<!-- gen_body&#45;&gt;process_exitlude -->
<g id="edge10" class="edge">
<title>gen_body&#45;&gt;process_exitlude</title>
<path fill="none" stroke="black" d="M271.5,-822.81C271.5,-814.79 271.5,-805.05 271.5,-796.07"/>
<polygon fill="black" stroke="black" points="275,-796.03 271.5,-786.03 268,-796.03 275,-796.03"/>
</g>
<!-- add_epilogue_begin -->
<g id="node12" class="node">
<title>add_epilogue_begin</title>
<polygon fill="none" stroke="black" points="355,-713 188,-713 188,-677 355,-677 355,-713"/>
<text text-anchor="middle" x="271.5" y="-698" font-family="Courier,monospace" font-size="10.00">添加伪指令</text>
<text text-anchor="middle" x="271.5" y="-687" font-family="Courier,monospace" font-size="10.00">pseudo_dbg_epilogue_begin</text>
</g>
<!-- process_exitlude&#45;&gt;add_epilogue_begin -->
<g id="edge11" class="edge">
<title>process_exitlude&#45;&gt;add_epilogue_begin</title>
<path fill="none" stroke="black" d="M271.5,-749.81C271.5,-741.79 271.5,-732.05 271.5,-723.07"/>
<polygon fill="black" stroke="black" points="275,-723.03 271.5,-713.03 268,-723.03 275,-723.03"/>
</g>
<!-- setup_restore -->
<g id="node13" class="node">
<title>setup_restore</title>
<polygon fill="none" stroke="black" points="343,-640 200,-640 200,-604 343,-604 343,-640"/>
<text text-anchor="middle" x="271.5" y="-625" font-family="Courier,monospace" font-size="10.00">创建恢复伪指令</text>
<text text-anchor="middle" x="271.5" y="-614" font-family="Courier,monospace" font-size="10.00">(backpatch_*_restore)</text>
</g>
<!-- add_epilogue_begin&#45;&gt;setup_restore -->
<g id="edge12" class="edge">
<title>add_epilogue_begin&#45;&gt;setup_restore</title>
<path fill="none" stroke="black" d="M271.5,-676.81C271.5,-668.79 271.5,-659.05 271.5,-650.07"/>
<polygon fill="black" stroke="black" points="275,-650.03 271.5,-640.03 268,-650.03 275,-650.03"/>
</g>
<!-- jalr_ret -->
<g id="node14" class="node">
<title>jalr_ret</title>
<polygon fill="none" stroke="black" points="328,-567 215,-567 215,-531 328,-531 328,-567"/>
<text text-anchor="middle" x="271.5" y="-552" font-family="Courier,monospace" font-size="10.00">添加 ret 指令</text>
<text text-anchor="middle" x="271.5" y="-541" font-family="Courier,monospace" font-size="10.00">jalr zero, ra, 0</text>
</g>
<!-- setup_restore&#45;&gt;jalr_ret -->
<g id="edge13" class="edge">
<title>setup_restore&#45;&gt;jalr_ret</title>
<path fill="none" stroke="black" d="M271.5,-603.81C271.5,-595.79 271.5,-586.05 271.5,-577.07"/>
<polygon fill="black" stroke="black" points="275,-577.03 271.5,-567.03 268,-577.03 275,-577.03"/>
</g>
<!-- compute_frame -->
<g id="node15" class="node">
<title>compute_frame</title>
<polygon fill="none" stroke="black" points="328,-494 215,-494 215,-458 328,-458 328,-494"/>
<text text-anchor="middle" x="271.5" y="-479" font-family="Courier,monospace" font-size="10.00">计算 frame_layout</text>
<text text-anchor="middle" x="271.5" y="-468" font-family="Courier,monospace" font-size="10.00">和 need_save_reg</text>
</g>
<!-- jalr_ret&#45;&gt;compute_frame -->
<g id="edge14" class="edge">
<title>jalr_ret&#45;&gt;compute_frame</title>
<path fill="none" stroke="black" d="M271.5,-530.81C271.5,-522.79 271.5,-513.05 271.5,-504.07"/>
<polygon fill="black" stroke="black" points="275,-504.03 271.5,-494.03 268,-504.03 275,-504.03"/>
</g>
<!-- update_backpatches -->
<g id="node16" class="node">
<title>update_backpatches</title>
<polygon fill="none" stroke="black" points="351,-421 192,-421 192,-385 351,-385 351,-421"/>
<text text-anchor="middle" x="271.5" y="-406" font-family="Courier,monospace" font-size="10.00">更新伪指令</text>
<text text-anchor="middle" x="271.5" y="-395" font-family="Courier,monospace" font-size="10.00">设置堆栈调整、寄存器保存/恢复</text>
</g>
<!-- compute_frame&#45;&gt;update_backpatches -->
<g id="edge15" class="edge">
<title>compute_frame&#45;&gt;update_backpatches</title>
<path fill="none" stroke="black" d="M271.5,-457.81C271.5,-449.79 271.5,-440.05 271.5,-431.07"/>
<polygon fill="black" stroke="black" points="275,-431.03 271.5,-421.03 268,-431.03 275,-431.03"/>
</g>
<!-- need_save_reg_check -->
<g id="node17" class="node">
<title>need_save_reg_check</title>
<polygon fill="none" stroke="black" points="322,-348 221,-348 221,-312 322,-312 322,-348"/>
<text text-anchor="middle" x="271.5" y="-327.5" font-family="Courier,monospace" font-size="10.00">need_save_reg?</text>
</g>
<!-- update_backpatches&#45;&gt;need_save_reg_check -->
<g id="edge16" class="edge">
<title>update_backpatches&#45;&gt;need_save_reg_check</title>
<path fill="none" stroke="black" d="M271.5,-384.81C271.5,-376.79 271.5,-367.05 271.5,-358.07"/>
<polygon fill="black" stroke="black" points="275,-358.03 271.5,-348.03 268,-358.03 275,-358.03"/>
</g>
<!-- spill_regs -->
<g id="node18" class="node">
<title>spill_regs</title>
<polygon fill="none" stroke="black" points="247,-265 128,-265 128,-229 247,-229 247,-265"/>
<text text-anchor="middle" x="187.5" y="-250" font-family="Courier,monospace" font-size="10.00">设置伪指令</text>
<text text-anchor="middle" x="187.5" y="-239" font-family="Courier,monospace" font-size="10.00">pseudo_spill_regs</text>
</g>
<!-- need_save_reg_check&#45;&gt;spill_regs -->
<g id="edge17" class="edge">
<title>need_save_reg_check&#45;&gt;spill_regs</title>
<path fill="none" stroke="black" d="M253.69,-311.82C241.77,-300.33 225.91,-285.04 212.71,-272.31"/>
<polygon fill="black" stroke="black" points="214.92,-269.58 205.29,-265.15 210.06,-274.61 214.92,-269.58"/>
<text text-anchor="middle" x="240.5" y="-286" font-family="Courier,monospace" font-size="10.00">是</text>
</g>
<!-- restore_regs -->
<g id="node19" class="node">
<title>restore_regs</title>
<polygon fill="none" stroke="black" points="257,-192 126,-192 126,-156 257,-156 257,-192"/>
<text text-anchor="middle" x="191.5" y="-177" font-family="Courier,monospace" font-size="10.00">设置伪指令</text>
<text text-anchor="middle" x="191.5" y="-166" font-family="Courier,monospace" font-size="10.00">pseudo_restore_regs</text>
</g>
<!-- need_save_reg_check&#45;&gt;restore_regs -->
<g id="edge19" class="edge">
<title>need_save_reg_check&#45;&gt;restore_regs</title>
<path fill="none" stroke="black" d="M272.27,-311.9C272.46,-291 270.29,-255.18 255.5,-229 248.78,-217.1 238.36,-206.65 227.86,-198.2"/>
<polygon fill="black" stroke="black" points="229.96,-195.4 219.89,-192.14 225.73,-200.98 229.96,-195.4"/>
<text text-anchor="middle" x="273.5" y="-244.5" font-family="Courier,monospace" font-size="10.00">否</text>
</g>
<!-- spill_regs&#45;&gt;restore_regs -->
<g id="edge18" class="edge">
<title>spill_regs&#45;&gt;restore_regs</title>
<path fill="none" stroke="black" d="M188.47,-228.81C188.92,-220.79 189.47,-211.05 189.97,-202.07"/>
<polygon fill="black" stroke="black" points="193.47,-202.21 190.54,-192.03 186.48,-201.82 193.47,-202.21"/>
</g>
<!-- add_debug_end -->
<g id="node20" class="node">
<title>add_debug_end</title>
<polygon fill="none" stroke="black" points="184,-119 35,-119 35,-83 184,-83 184,-119"/>
<text text-anchor="middle" x="109.5" y="-104" font-family="Courier,monospace" font-size="10.00">添加调试信息</text>
<text text-anchor="middle" x="109.5" y="-93" font-family="Courier,monospace" font-size="10.00">pseudo_dbg_line_column</text>
</g>
<!-- restore_regs&#45;&gt;add_debug_end -->
<g id="edge20" class="edge">
<title>restore_regs&#45;&gt;add_debug_end</title>
<path fill="none" stroke="black" d="M171.65,-155.81C161.17,-146.74 148.16,-135.48 136.76,-125.6"/>
<polygon fill="black" stroke="black" points="139.02,-122.93 129.17,-119.03 134.44,-128.22 139.02,-122.93"/>
</g>
<!-- end -->
<g id="node21" class="node">
<title>end</title>
<polygon fill="none" stroke="black" points="136.5,-36 82.5,-36 82.5,0 136.5,0 136.5,-36"/>
<text text-anchor="middle" x="109.5" y="-15.5" font-family="Courier,monospace" font-size="10.00">结束</text>
</g>
<!-- add_debug_end&#45;&gt;end -->
<g id="edge25" class="edge">
<title>add_debug_end&#45;&gt;end</title>
<path fill="none" stroke="black" d="M109.5,-82.82C109.5,-72.19 109.5,-58.31 109.5,-46.2"/>
<polygon fill="black" stroke="black" points="113,-46.15 109.5,-36.15 106,-46.15 113,-46.15"/>
<text text-anchor="middle" x="149" y="-57" font-family="Courier,monospace" font-size="10.00">添加结束调试信息</text>
</g>
<!-- gen_body_naked -->
<g id="node23" class="node">
<title>gen_body_naked</title>
<polygon fill="none" stroke="black" points="157,-1061 38,-1061 38,-1025 157,-1025 157,-1061"/>
<text text-anchor="middle" x="97.5" y="-1046" font-family="Courier,monospace" font-size="10.00">生成函数体</text>
<text text-anchor="middle" x="97.5" y="-1035" font-family="Courier,monospace" font-size="10.00">func.genBody(...)</text>
</g>
<!-- add_prologue_end_naked&#45;&gt;gen_body_naked -->
<g id="edge22" class="edge">
<title>add_prologue_end_naked&#45;&gt;gen_body_naked</title>
<path fill="none" stroke="black" d="M97.5,-1107.82C97.5,-1097.19 97.5,-1083.31 97.5,-1071.2"/>
<polygon fill="black" stroke="black" points="101,-1071.15 97.5,-1061.15 94,-1071.15 101,-1071.15"/>
<text text-anchor="middle" x="122" y="-1082" font-family="Courier,monospace" font-size="10.00">生成函数体</text>
</g>
<!-- add_epilogue_begin_naked -->
<g id="node24" class="node">
<title>add_epilogue_begin_naked</title>
<polygon fill="none" stroke="black" points="181,-913 14,-913 14,-877 181,-877 181,-913"/>
<text text-anchor="middle" x="97.5" y="-898" font-family="Courier,monospace" font-size="10.00">添加伪指令</text>
<text text-anchor="middle" x="97.5" y="-887" font-family="Courier,monospace" font-size="10.00">pseudo_dbg_epilogue_begin</text>
</g>
<!-- gen_body_naked&#45;&gt;add_epilogue_begin_naked -->
<g id="edge23" class="edge">
<title>gen_body_naked&#45;&gt;add_epilogue_begin_naked</title>
<path fill="none" stroke="black" d="M97.5,-1024.97C97.5,-1000.04 97.5,-953.37 97.5,-923.54"/>
<polygon fill="black" stroke="black" points="101,-923.38 97.5,-913.38 94,-923.38 101,-923.38"/>
<text text-anchor="middle" x="173" y="-999" font-family="Courier,monospace" font-size="10.00">添加伪指令</text>
<text text-anchor="middle" x="173" y="-988" font-family="Courier,monospace" font-size="10.00">pseudo_dbg_epilogue_begin</text>
</g>
<!-- add_epilogue_begin_naked&#45;&gt;add_debug_end -->
<g id="edge24" class="edge">
<title>add_epilogue_begin_naked&#45;&gt;add_debug_end</title>
<path fill="none" stroke="black" d="M97.5,-876.94C97.5,-859.02 97.5,-830.03 97.5,-805 97.5,-805 97.5,-805 97.5,-173 97.5,-158.3 100.03,-142.13 102.77,-128.94"/>
<polygon fill="black" stroke="black" points="106.21,-129.6 104.96,-119.08 99.37,-128.08 106.21,-129.6"/>
</g>
</g>
</svg>
