flowchart TD
    A[开始] --> B[解析指令: 条件、then/else块、活跃性信息]
    B --> C[生成条件分支指令reloc]
    C --> D{操作数是否死亡?}
    D -- 是 --> E[处理操作数死亡]
    D -- 否 --> F[保存父状态: 寄存器、堆栈]
    E --> F
    F --> G[压入分支栈]
    G --> H[处理then分支的死亡操作数]
    H --> I[生成then分支代码]
    I --> J[恢复父状态]
    J --> K[执行reloc跳转到else]
    K --> L[处理else分支的死亡操作数]
    L --> M[生成else分支代码]
    M --> N[合并then和else分支状态]
    N --> O[遍历else分支指令表]
    O --> P{是否在then分支存在?}
    P -- 是 --> Q[使用then分支的值]
    P -- 否 --> R[查找父分支的值]
    Q --> S[统一寄存器/堆栈分配]
    R --> S
    S --> T[遍历then分支指令表]
    T --> U[合并到父分支]
    U --> V[清理分支栈]
    V --> W[结束指令处理]
