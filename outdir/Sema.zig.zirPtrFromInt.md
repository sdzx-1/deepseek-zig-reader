graph TD
    A[开始] --> B[获取上下文信息]
    B --> C[解析操作数和目标类型]
    C --> D{目标类型是切片?}
    D --> |是| E[生成错误：无法转换整数为切片]
    D --> |否| F{操作数值可解析为常量?}
    F --> |是| G[生成编译时指针值]
    G --> H{是向量类型?}
    H --> |是| I[逐个元素处理生成向量指针]
    H --> |否| J[返回单个指针]
    F --> |否| K{目标类型需编译时确定?}
    K --> |是| L[生成错误：运行时已知操作数]
    K --> |否| M[进入运行时处理]
    M --> N{需要安全检查?}
    N --> |是| O[检查指针非零和对齐]
    O --> P{是向量类型?}
    P --> |是| Q[逐个元素验证并转换]
    P --> |否| R[整体转换并返回]
    Q --> S[生成向量聚合指针]
    N --> |否| T[直接转换类型]
    T --> U[返回结果]
    E --> V[结束]
    J --> V
    L --> V
    R --> V
    S --> V
    U --> V
    I --> V

    style A fill:#90EE90,stroke:#006400
    style V fill:#FFB6C1,stroke:#8B0000
    style E fill:#FFA07A,stroke:#FF4500
    style L fill:#FFA07A,stroke:#FF4500
