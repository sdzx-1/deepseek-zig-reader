<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: flowchart Pages: 1 -->
<svg width="521pt" height="1073pt"
 viewBox="0.00 0.00 521.00 1073.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1069)">
<title>flowchart</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-1069 517,-1069 517,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<path fill="none" stroke="black" d="M284,-1065C284,-1065 188,-1065 188,-1065 182,-1065 176,-1059 176,-1053 176,-1053 176,-1041 176,-1041 176,-1035 182,-1029 188,-1029 188,-1029 284,-1029 284,-1029 290,-1029 296,-1035 296,-1041 296,-1041 296,-1053 296,-1053 296,-1059 290,-1065 284,-1065"/>
<text text-anchor="middle" x="236" y="-1043.3" font-family="Arial" font-size="14.00">开始allocate函数</text>
</g>
<!-- init_vars -->
<g id="node2" class="node">
<title>init_vars</title>
<path fill="none" stroke="black" d="M422.5,-992C422.5,-992 49.5,-992 49.5,-992 43.5,-992 37.5,-986 37.5,-980 37.5,-980 37.5,-966 37.5,-966 37.5,-960 43.5,-954 49.5,-954 49.5,-954 422.5,-954 422.5,-954 428.5,-954 434.5,-960 434.5,-966 434.5,-966 434.5,-980 434.5,-980 434.5,-986 428.5,-992 422.5,-992"/>
<text text-anchor="middle" x="236" y="-976.8" font-family="Arial" font-size="14.00">初始化变量</text>
<text text-anchor="middle" x="236" y="-961.8" font-family="Arial" font-size="14.00">(zo, sect, free_list, last_atom_index, new_atom_ideal_capacity)</text>
</g>
<!-- start&#45;&gt;init_vars -->
<g id="edge1" class="edge">
<title>start&#45;&gt;init_vars</title>
<path fill="none" stroke="black" d="M236,-1028.94C236,-1020.99 236,-1011.31 236,-1002.31"/>
<polygon fill="black" stroke="black" points="239.5,-1002.2 236,-992.2 232.5,-1002.2 239.5,-1002.2"/>
</g>
<!-- find_free_block -->
<g id="node3" class="node">
<title>find_free_block</title>
<path fill="none" stroke="black" d="M320,-917C320,-917 152,-917 152,-917 146,-917 140,-911 140,-905 140,-905 140,-893 140,-893 140,-887 146,-881 152,-881 152,-881 320,-881 320,-881 326,-881 332,-887 332,-893 332,-893 332,-905 332,-905 332,-911 326,-917 320,-917"/>
<text text-anchor="middle" x="236" y="-895.3" font-family="Arial" font-size="14.00">遍历free_list寻找合适空闲块</text>
</g>
<!-- init_vars&#45;&gt;find_free_block -->
<g id="edge2" class="edge">
<title>init_vars&#45;&gt;find_free_block</title>
<path fill="none" stroke="black" d="M236,-953.83C236,-945.89 236,-936.41 236,-927.63"/>
<polygon fill="black" stroke="black" points="239.5,-927.42 236,-917.42 232.5,-927.42 239.5,-927.42"/>
</g>
<!-- check_block -->
<g id="node4" class="node">
<title>check_block</title>
<path fill="none" stroke="black" d="M208,-830C208,-830 30,-830 30,-830 24,-830 18,-824 18,-818 18,-818 18,-806 18,-806 18,-800 24,-794 30,-794 30,-794 208,-794 208,-794 214,-794 220,-800 220,-806 220,-806 220,-818 220,-818 220,-824 214,-830 208,-830"/>
<text text-anchor="middle" x="119" y="-808.3" font-family="Arial" font-size="14.00">检查当前空闲块容量是否足够</text>
</g>
<!-- find_free_block&#45;&gt;check_block -->
<g id="edge3" class="edge">
<title>find_free_block&#45;&gt;check_block</title>
<path fill="none" stroke="black" d="M212.32,-880.8C194.64,-867.95 170.28,-850.26 150.89,-836.17"/>
<polygon fill="black" stroke="black" points="152.79,-833.22 142.64,-830.18 148.67,-838.88 152.79,-833.22"/>
<text text-anchor="middle" x="244.5" y="-851.8" font-family="Arial" font-size="14.00">遍历每个free_list项</text>
</g>
<!-- check_last_atom -->
<g id="node8" class="node">
<title>check_last_atom</title>
<path fill="none" stroke="black" d="M435.5,-668C435.5,-668 268.5,-668 268.5,-668 262.5,-668 256.5,-662 256.5,-656 256.5,-656 256.5,-644 256.5,-644 256.5,-638 262.5,-632 268.5,-632 268.5,-632 435.5,-632 435.5,-632 441.5,-632 447.5,-638 447.5,-644 447.5,-644 447.5,-656 447.5,-656 447.5,-662 441.5,-668 435.5,-668"/>
<text text-anchor="middle" x="352" y="-646.3" font-family="Arial" font-size="14.00">检查最后一个Atom是否存在</text>
</g>
<!-- find_free_block&#45;&gt;check_last_atom -->
<g id="edge9" class="edge">
<title>find_free_block&#45;&gt;check_last_atom</title>
<path fill="none" stroke="black" d="M279.49,-880.93C289.41,-875.97 299.51,-869.97 308,-863 322.22,-851.32 326.23,-847.11 333,-830 353.07,-779.31 354.61,-714.58 353.55,-678.49"/>
<polygon fill="black" stroke="black" points="357.04,-678.11 353.16,-668.25 350.05,-678.38 357.04,-678.11"/>
<text text-anchor="middle" x="392" y="-764.8" font-family="Arial" font-size="14.00">未找到合适块</text>
</g>
<!-- check_block&#45;&gt;check_block -->
<g id="edge5" class="edge">
<title>check_block&#45;&gt;check_block</title>
<path fill="none" stroke="red" d="M220.14,-818.58C231.01,-817.31 238,-815.12 238,-812 238,-810 235.13,-808.39 230.21,-807.15"/>
<polygon fill="red" stroke="red" points="230.58,-803.66 220.14,-805.42 229.4,-810.56 230.58,-803.66"/>
<text text-anchor="middle" x="281" y="-808.3" font-family="Arial" font-size="14.00">继续下一个项</text>
</g>
<!-- update_metadata -->
<g id="node5" class="node">
<title>update_metadata</title>
<path fill="none" stroke="black" d="M226,-743C226,-743 12,-743 12,-743 6,-743 0,-737 0,-731 0,-731 0,-717 0,-717 0,-711 6,-705 12,-705 12,-705 226,-705 226,-705 232,-705 238,-711 238,-717 238,-717 238,-731 238,-731 238,-737 232,-743 226,-743"/>
<text text-anchor="middle" x="119" y="-727.8" font-family="Arial" font-size="14.00">标记需要更新的元数据</text>
<text text-anchor="middle" x="119" y="-712.8" font-family="Arial" font-size="14.00">(atom_placement, free_list_removal)</text>
</g>
<!-- check_block&#45;&gt;update_metadata -->
<g id="edge4" class="edge">
<title>check_block&#45;&gt;update_metadata</title>
<path fill="none" stroke="black" d="M119,-793.6C119,-782.06 119,-766.65 119,-753.36"/>
<polygon fill="black" stroke="black" points="122.5,-753.27 119,-743.27 115.5,-753.27 122.5,-753.27"/>
<text text-anchor="middle" x="148" y="-764.8" font-family="Arial" font-size="14.00">容量足够</text>
</g>
<!-- check_remaining -->
<g id="node6" class="node">
<title>check_remaining</title>
<path fill="none" stroke="black" d="M222,-668C222,-668 16,-668 16,-668 10,-668 4,-662 4,-656 4,-656 4,-644 4,-644 4,-638 10,-632 16,-632 16,-632 222,-632 222,-632 228,-632 234,-638 234,-644 234,-644 234,-656 234,-656 234,-662 228,-668 222,-668"/>
<text text-anchor="middle" x="119" y="-646.3" font-family="Arial" font-size="14.00">剩余容量是否足够保留空闲节点？</text>
</g>
<!-- update_metadata&#45;&gt;check_remaining -->
<g id="edge6" class="edge">
<title>update_metadata&#45;&gt;check_remaining</title>
<path fill="none" stroke="black" d="M119,-704.83C119,-696.89 119,-687.41 119,-678.63"/>
<polygon fill="black" stroke="black" points="122.5,-678.42 119,-668.42 115.5,-678.42 122.5,-678.42"/>
</g>
<!-- set_value -->
<g id="node7" class="node">
<title>set_value</title>
<path fill="none" stroke="black" d="M296,-581C296,-581 118,-581 118,-581 112,-581 106,-575 106,-569 106,-569 106,-557 106,-557 106,-551 112,-545 118,-545 118,-545 296,-545 296,-545 302,-545 308,-551 308,-557 308,-557 308,-569 308,-569 308,-575 302,-581 296,-581"/>
<text text-anchor="middle" x="207" y="-559.3" font-family="Arial" font-size="14.00">设置self.value为新分配的地址</text>
</g>
<!-- check_remaining&#45;&gt;set_value -->
<g id="edge7" class="edge">
<title>check_remaining&#45;&gt;set_value</title>
<path fill="none" stroke="black" d="M92.54,-631.95C80.91,-622.32 71.59,-610.03 80,-599 84.28,-593.38 93.88,-588.44 106,-584.17"/>
<polygon fill="black" stroke="black" points="107.26,-587.44 115.7,-581.04 105.11,-580.78 107.26,-587.44"/>
<text text-anchor="middle" x="109" y="-602.8" font-family="Arial" font-size="14.00">保留节点</text>
</g>
<!-- check_remaining&#45;&gt;set_value -->
<g id="edge8" class="edge">
<title>check_remaining&#45;&gt;set_value</title>
<path fill="none" stroke="black" d="M131.75,-631.97C139.67,-621.9 150.33,-609.17 161,-599 165.09,-595.11 169.6,-591.23 174.15,-587.56"/>
<polygon fill="black" stroke="black" points="176.57,-590.11 182.31,-581.2 172.27,-584.59 176.57,-590.11"/>
<text text-anchor="middle" x="197" y="-602.8" font-family="Arial" font-size="14.00">不保留节点</text>
</g>
<!-- expand_section -->
<g id="node9" class="node">
<title>expand_section</title>
<path fill="none" stroke="black" d="M219.5,-494C219.5,-494 72.5,-494 72.5,-494 66.5,-494 60.5,-488 60.5,-482 60.5,-482 60.5,-468 60.5,-468 60.5,-462 66.5,-456 72.5,-456 72.5,-456 219.5,-456 219.5,-456 225.5,-456 231.5,-462 231.5,-468 231.5,-468 231.5,-482 231.5,-482 231.5,-488 225.5,-494 219.5,-494"/>
<text text-anchor="middle" x="146" y="-478.8" font-family="Arial" font-size="14.00">扩展节(调用growSection)</text>
<text text-anchor="middle" x="146" y="-463.8" font-family="Arial" font-size="14.00">更新last_atom_index</text>
</g>
<!-- set_value&#45;&gt;expand_section -->
<g id="edge12" class="edge">
<title>set_value&#45;&gt;expand_section</title>
<path fill="none" stroke="black" d="M194.77,-544.92C190.7,-539.23 186.15,-532.84 182,-527 176.44,-519.17 170.41,-510.64 164.91,-502.85"/>
<polygon fill="black" stroke="black" points="167.6,-500.58 158.97,-494.43 161.88,-504.62 167.6,-500.58"/>
<text text-anchor="middle" x="218" y="-515.8" font-family="Arial" font-size="14.00">需要扩展节</text>
</g>
<!-- update_section_align -->
<g id="node10" class="node">
<title>update_section_align</title>
<path fill="none" stroke="black" d="M260.5,-419C260.5,-419 153.5,-419 153.5,-419 147.5,-419 141.5,-413 141.5,-407 141.5,-407 141.5,-395 141.5,-395 141.5,-389 147.5,-383 153.5,-383 153.5,-383 260.5,-383 260.5,-383 266.5,-383 272.5,-389 272.5,-395 272.5,-395 272.5,-407 272.5,-407 272.5,-413 266.5,-419 260.5,-419"/>
<text text-anchor="middle" x="207" y="-397.3" font-family="Arial" font-size="14.00">更新节的align属性</text>
</g>
<!-- set_value&#45;&gt;update_section_align -->
<g id="edge13" class="edge">
<title>set_value&#45;&gt;update_section_align</title>
<path fill="none" stroke="black" d="M238.89,-544.67C244.98,-539.8 250.53,-533.91 254,-527 256.99,-521.04 254.81,-518.62 254,-512 250.87,-486.54 249.91,-479.66 240,-456 235.97,-446.37 230.38,-436.45 224.95,-427.79"/>
<polygon fill="black" stroke="black" points="227.81,-425.75 219.42,-419.27 221.93,-429.56 227.81,-425.75"/>
<text text-anchor="middle" x="281" y="-471.3" font-family="Arial" font-size="14.00">无需扩展</text>
</g>
<!-- check_last_atom&#45;&gt;set_value -->
<g id="edge10" class="edge">
<title>check_last_atom&#45;&gt;set_value</title>
<path fill="none" stroke="black" d="M292.41,-631.96C279.88,-627.12 267.11,-621.16 256,-614 245.41,-607.18 235.37,-597.68 227.16,-588.8"/>
<polygon fill="black" stroke="black" points="229.7,-586.39 220.45,-581.23 224.47,-591.04 229.7,-586.39"/>
<text text-anchor="middle" x="315" y="-602.8" font-family="Arial" font-size="14.00">存在最后一个Atom</text>
</g>
<!-- check_last_atom&#45;&gt;set_value -->
<g id="edge11" class="edge">
<title>check_last_atom&#45;&gt;set_value</title>
<path fill="none" stroke="black" d="M368.39,-631.54C375.98,-621.31 381.77,-608.57 374,-599 365.84,-588.96 343.81,-581.69 318.33,-576.48"/>
<polygon fill="black" stroke="black" points="318.89,-573.03 308.41,-574.58 317.57,-579.9 318.89,-573.03"/>
<text text-anchor="middle" x="445" y="-602.8" font-family="Arial" font-size="14.00">不存在（分配地址0）</text>
</g>
<!-- expand_section&#45;&gt;update_section_align -->
<g id="edge14" class="edge">
<title>expand_section&#45;&gt;update_section_align</title>
<path fill="none" stroke="black" d="M161.39,-455.83C168.71,-447.2 177.58,-436.73 185.54,-427.33"/>
<polygon fill="black" stroke="black" points="188.45,-429.31 192.24,-419.42 183.11,-424.79 188.45,-429.31"/>
</g>
<!-- handle_reallocation -->
<g id="node11" class="node">
<title>handle_reallocation</title>
<path fill="none" stroke="black" d="M274.5,-346C274.5,-346 139.5,-346 139.5,-346 133.5,-346 127.5,-340 127.5,-334 127.5,-334 127.5,-320 127.5,-320 127.5,-314 133.5,-308 139.5,-308 139.5,-308 274.5,-308 274.5,-308 280.5,-308 286.5,-314 286.5,-320 286.5,-320 286.5,-334 286.5,-334 286.5,-340 280.5,-346 274.5,-346"/>
<text text-anchor="middle" x="207" y="-330.8" font-family="Arial" font-size="14.00">解除旧位置的前后链接</text>
<text text-anchor="middle" x="207" y="-315.8" font-family="Arial" font-size="14.00">(prev/next_index处理)</text>
</g>
<!-- update_section_align&#45;&gt;handle_reallocation -->
<g id="edge15" class="edge">
<title>update_section_align&#45;&gt;handle_reallocation</title>
<path fill="none" stroke="black" d="M207,-382.94C207,-374.99 207,-365.31 207,-356.31"/>
<polygon fill="black" stroke="black" points="210.5,-356.2 207,-346.2 203.5,-356.2 210.5,-356.2"/>
</g>
<!-- insert_new_atom -->
<g id="node12" class="node">
<title>insert_new_atom</title>
<path fill="none" stroke="black" d="M262,-271C262,-271 152,-271 152,-271 146,-271 140,-265 140,-259 140,-259 140,-245 140,-245 140,-239 146,-233 152,-233 152,-233 262,-233 262,-233 268,-233 274,-239 274,-245 274,-245 274,-259 274,-259 274,-265 268,-271 262,-271"/>
<text text-anchor="middle" x="207" y="-255.8" font-family="Arial" font-size="14.00">插入新Atom到链表</text>
<text text-anchor="middle" x="207" y="-240.8" font-family="Arial" font-size="14.00">更新前后指针</text>
</g>
<!-- handle_reallocation&#45;&gt;insert_new_atom -->
<g id="edge16" class="edge">
<title>handle_reallocation&#45;&gt;insert_new_atom</title>
<path fill="none" stroke="black" d="M207,-307.96C207,-299.88 207,-290.18 207,-281.18"/>
<polygon fill="black" stroke="black" points="210.5,-281.09 207,-271.09 203.5,-281.09 210.5,-281.09"/>
</g>
<!-- remove_free_list -->
<g id="node13" class="node">
<title>remove_free_list</title>
<path fill="none" stroke="black" d="M217.5,-182C217.5,-182 82.5,-182 82.5,-182 76.5,-182 70.5,-176 70.5,-170 70.5,-170 70.5,-158 70.5,-158 70.5,-152 76.5,-146 82.5,-146 82.5,-146 217.5,-146 217.5,-146 223.5,-146 229.5,-152 229.5,-158 229.5,-158 229.5,-170 229.5,-170 229.5,-176 223.5,-182 217.5,-182"/>
<text text-anchor="middle" x="150" y="-160.3" font-family="Arial" font-size="14.00">移除已使用的空闲节点</text>
</g>
<!-- insert_new_atom&#45;&gt;remove_free_list -->
<g id="edge17" class="edge">
<title>insert_new_atom&#45;&gt;remove_free_list</title>
<path fill="none" stroke="black" d="M139.98,-233.35C132.11,-228.61 125.09,-222.61 120,-215 114.74,-207.13 117.33,-198.34 122.73,-190.35"/>
<polygon fill="black" stroke="black" points="125.6,-192.36 129.16,-182.38 120.16,-187.96 125.6,-192.36"/>
<text text-anchor="middle" x="200.5" y="-203.8" font-family="Arial" font-size="14.00">如果free_list_removal存在</text>
</g>
<!-- set_alive -->
<g id="node14" class="node">
<title>set_alive</title>
<path fill="none" stroke="black" d="M299.5,-109C299.5,-109 174.5,-109 174.5,-109 168.5,-109 162.5,-103 162.5,-97 162.5,-97 162.5,-85 162.5,-85 162.5,-79 168.5,-73 174.5,-73 174.5,-73 299.5,-73 299.5,-73 305.5,-73 311.5,-79 311.5,-85 311.5,-85 311.5,-97 311.5,-97 311.5,-103 305.5,-109 299.5,-109"/>
<text text-anchor="middle" x="237" y="-87.3" font-family="Arial" font-size="14.00">设置Atom为存活状态</text>
</g>
<!-- insert_new_atom&#45;&gt;set_alive -->
<g id="edge18" class="edge">
<title>insert_new_atom&#45;&gt;set_alive</title>
<path fill="none" stroke="black" d="M262.72,-232.79C269.97,-228.11 276.45,-222.27 281,-215 300.34,-184.08 278.02,-143.47 258.75,-117.54"/>
<polygon fill="black" stroke="black" points="261.29,-115.11 252.39,-109.35 255.75,-119.4 261.29,-115.11"/>
<text text-anchor="middle" x="303.5" y="-160.3" font-family="Arial" font-size="14.00">否则</text>
</g>
<!-- remove_free_list&#45;&gt;set_alive -->
<g id="edge19" class="edge">
<title>remove_free_list&#45;&gt;set_alive</title>
<path fill="none" stroke="black" d="M171.06,-145.81C182.17,-136.74 195.98,-125.48 208.08,-115.6"/>
<polygon fill="black" stroke="black" points="210.6,-118.06 216.13,-109.03 206.17,-112.64 210.6,-118.06"/>
</g>
<!-- end -->
<g id="node15" class="node">
<title>end</title>
<path fill="none" stroke="black" d="M252,-36C252,-36 222,-36 222,-36 216,-36 210,-30 210,-24 210,-24 210,-12 210,-12 210,-6 216,0 222,0 222,0 252,0 252,0 258,0 264,-6 264,-12 264,-12 264,-24 264,-24 264,-30 258,-36 252,-36"/>
<text text-anchor="middle" x="237" y="-14.3" font-family="Arial" font-size="14.00">结束</text>
</g>
<!-- set_alive&#45;&gt;end -->
<g id="edge20" class="edge">
<title>set_alive&#45;&gt;end</title>
<path fill="none" stroke="black" d="M237,-72.81C237,-64.79 237,-55.05 237,-46.07"/>
<polygon fill="black" stroke="black" points="240.5,-46.03 237,-36.03 233.5,-46.03 240.5,-46.03"/>
</g>
</g>
</svg>
