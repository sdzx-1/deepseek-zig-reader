<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: flowchart Pages: 1 -->
<svg width="694pt" height="829pt"
 viewBox="0.00 0.00 694.00 829.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 825)">
<title>flowchart</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-825 690,-825 690,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<polygon fill="none" stroke="black" points="352,-821 203,-821 203,-785 352,-785 352,-821"/>
<text text-anchor="middle" x="277.5" y="-800.5" font-family="Courier,monospace" font-size="10.00">开始 switchExprErrUnion</text>
</g>
<!-- parse_node_ty -->
<g id="node2" class="node">
<title>parse_node_ty</title>
<polygon fill="none" stroke="black" points="351.5,-748 203.5,-748 203.5,-712 351.5,-712 351.5,-748"/>
<text text-anchor="middle" x="277.5" y="-733" font-family="Courier,monospace" font-size="10.00">根据 node_ty 解析节点类型</text>
<text text-anchor="middle" x="277.5" y="-722" font-family="Courier,monospace" font-size="10.00">（.@&quot;catch&quot; 或 .@&quot;if&quot;）</text>
</g>
<!-- start&#45;&gt;parse_node_ty -->
<g id="edge1" class="edge">
<title>start&#45;&gt;parse_node_ty</title>
<path fill="none" stroke="black" d="M277.5,-784.81C277.5,-776.79 277.5,-767.05 277.5,-758.07"/>
<polygon fill="black" stroke="black" points="281,-758.03 277.5,-748.03 274,-758.03 281,-758.03"/>
</g>
<!-- check_switch_cases -->
<g id="node3" class="node">
<title>check_switch_cases</title>
<polygon fill="none" stroke="black" points="368,-675 187,-675 187,-634 368,-634 368,-675"/>
<text text-anchor="middle" x="277.5" y="-663" font-family="Courier,monospace" font-size="10.00">遍历所有 switch case</text>
<text text-anchor="middle" x="277.5" y="-652" font-family="Courier,monospace" font-size="10.00">统计 scalar/multi/inline 数量</text>
<text text-anchor="middle" x="277.5" y="-641" font-family="Courier,monospace" font-size="10.00">检测 else 分支冲突</text>
</g>
<!-- parse_node_ty&#45;&gt;check_switch_cases -->
<g id="edge2" class="edge">
<title>parse_node_ty&#45;&gt;check_switch_cases</title>
<path fill="none" stroke="black" d="M277.5,-711.95C277.5,-704.03 277.5,-694.37 277.5,-685.29"/>
<polygon fill="black" stroke="black" points="281,-685.05 277.5,-675.05 274,-685.05 281,-685.05"/>
</g>
<!-- handle_errors -->
<g id="node4" class="node">
<title>handle_errors</title>
<polygon fill="none" stroke="black" points="289,-587 184,-587 184,-546 289,-546 289,-587"/>
<text text-anchor="middle" x="236.5" y="-575" font-family="Courier,monospace" font-size="10.00">处理错误情况</text>
<text text-anchor="middle" x="236.5" y="-564" font-family="Courier,monospace" font-size="10.00">&#45; 多个 else 分支</text>
<text text-anchor="middle" x="236.5" y="-553" font-family="Courier,monospace" font-size="10.00">&#45; 禁止的 _ 标识符</text>
</g>
<!-- check_switch_cases&#45;&gt;handle_errors -->
<g id="edge3" class="edge">
<title>check_switch_cases&#45;&gt;handle_errors</title>
<path fill="none" stroke="black" d="M268.2,-633.99C262.89,-622.85 256.13,-608.68 250.22,-596.29"/>
<polygon fill="black" stroke="black" points="253.37,-594.76 245.91,-587.24 247.05,-597.77 253.37,-594.76"/>
<text text-anchor="middle" x="289" y="-608" font-family="Courier,monospace" font-size="10.00">检测到错误时</text>
</g>
<!-- gen_operand -->
<g id="node5" class="node">
<title>gen_operand</title>
<polygon fill="none" stroke="black" points="521.5,-584.5 307.5,-584.5 307.5,-548.5 521.5,-548.5 521.5,-584.5"/>
<text text-anchor="middle" x="414.5" y="-564" font-family="Courier,monospace" font-size="10.00">生成操作数 (raw_operand) 的 ZIR 指令</text>
</g>
<!-- check_switch_cases&#45;&gt;gen_operand -->
<g id="edge4" class="edge">
<title>check_switch_cases&#45;&gt;gen_operand</title>
<path fill="none" stroke="black" d="M308.59,-633.99C329.4,-620.92 356.87,-603.68 378.61,-590.03"/>
<polygon fill="black" stroke="black" points="380.64,-592.89 387.24,-584.61 376.91,-586.96 380.64,-592.89"/>
<text text-anchor="middle" x="374.5" y="-608" font-family="Courier,monospace" font-size="10.00">无错误时</text>
</g>
<!-- create_switch_block -->
<g id="node6" class="node">
<title>create_switch_block</title>
<polygon fill="none" stroke="black" points="514,-509 315,-509 315,-473 514,-473 514,-509"/>
<text text-anchor="middle" x="414.5" y="-488.5" font-family="Courier,monospace" font-size="10.00">创建 switch_block_err_union 指令</text>
</g>
<!-- gen_operand&#45;&gt;create_switch_block -->
<g id="edge5" class="edge">
<title>gen_operand&#45;&gt;create_switch_block</title>
<path fill="none" stroke="black" d="M414.5,-548.45C414.5,-539.8 414.5,-529.07 414.5,-519.29"/>
<polygon fill="black" stroke="black" points="418,-519.21 414.5,-509.21 411,-519.21 418,-519.21"/>
</g>
<!-- process_non_error -->
<g id="node7" class="node">
<title>process_non_error</title>
<polygon fill="none" stroke="black" points="499.5,-436 329.5,-436 329.5,-400 499.5,-400 499.5,-436"/>
<text text-anchor="middle" x="414.5" y="-421" font-family="Courier,monospace" font-size="10.00">处理非错误分支</text>
<text text-anchor="middle" x="414.5" y="-410" font-family="Courier,monospace" font-size="10.00">（catch 或 if 的 then 部分）</text>
</g>
<!-- create_switch_block&#45;&gt;process_non_error -->
<g id="edge6" class="edge">
<title>create_switch_block&#45;&gt;process_non_error</title>
<path fill="none" stroke="black" d="M414.5,-472.81C414.5,-464.79 414.5,-455.05 414.5,-446.07"/>
<polygon fill="black" stroke="black" points="418,-446.03 414.5,-436.03 411,-446.03 418,-446.03"/>
</g>
<!-- handle_err_capture -->
<g id="node8" class="node">
<title>handle_err_capture</title>
<polygon fill="none" stroke="black" points="481.5,-363 347.5,-363 347.5,-327 481.5,-327 481.5,-363"/>
<text text-anchor="middle" x="414.5" y="-348" font-family="Courier,monospace" font-size="10.00">生成错误捕获变量</text>
<text text-anchor="middle" x="414.5" y="-337" font-family="Courier,monospace" font-size="10.00">err_inst 和 err_name</text>
</g>
<!-- process_non_error&#45;&gt;handle_err_capture -->
<g id="edge7" class="edge">
<title>process_non_error&#45;&gt;handle_err_capture</title>
<path fill="none" stroke="black" d="M414.5,-399.81C414.5,-391.79 414.5,-382.05 414.5,-373.07"/>
<polygon fill="black" stroke="black" points="418,-373.03 414.5,-363.03 411,-373.03 418,-373.03"/>
</g>
<!-- loop_cases -->
<g id="node9" class="node">
<title>loop_cases</title>
<polygon fill="none" stroke="black" points="466.5,-290 362.5,-290 362.5,-254 466.5,-254 466.5,-290"/>
<text text-anchor="middle" x="414.5" y="-269.5" font-family="Courier,monospace" font-size="10.00">循环处理每个 case</text>
</g>
<!-- handle_err_capture&#45;&gt;loop_cases -->
<g id="edge8" class="edge">
<title>handle_err_capture&#45;&gt;loop_cases</title>
<path fill="none" stroke="black" d="M414.5,-326.81C414.5,-318.79 414.5,-309.05 414.5,-300.07"/>
<polygon fill="black" stroke="black" points="418,-300.03 414.5,-290.03 411,-300.03 418,-300.03"/>
</g>
<!-- check_case_type -->
<g id="node10" class="node">
<title>check_case_type</title>
<polygon fill="none" stroke="black" points="263.5,-207 200.46,-189 263.5,-171 326.54,-189 263.5,-207"/>
<text text-anchor="middle" x="263.5" y="-186.5" font-family="Courier,monospace" font-size="10.00">case 类型？</text>
</g>
<!-- loop_cases&#45;&gt;check_case_type -->
<g id="edge9" class="edge">
<title>loop_cases&#45;&gt;check_case_type</title>
<path fill="none" stroke="black" d="M382.48,-253.82C356.11,-239.68 319.01,-219.77 293.27,-205.97"/>
<polygon fill="black" stroke="black" points="294.81,-202.83 284.35,-201.18 291.5,-208.99 294.81,-202.83"/>
</g>
<!-- finalize_switch -->
<g id="node15" class="node">
<title>finalize_switch</title>
<polygon fill="none" stroke="black" points="598,-207 443,-207 443,-171 598,-171 598,-207"/>
<text text-anchor="middle" x="520.5" y="-186.5" font-family="Courier,monospace" font-size="10.00">组装 ZIR 指令到 extra 数组</text>
</g>
<!-- loop_cases&#45;&gt;finalize_switch -->
<g id="edge17" class="edge">
<title>loop_cases&#45;&gt;finalize_switch</title>
<path fill="none" stroke="black" d="M436.98,-253.82C452.44,-242.01 473.15,-226.18 490.08,-213.24"/>
<polygon fill="black" stroke="black" points="492.23,-216.01 498.05,-207.15 487.98,-210.44 492.23,-216.01"/>
<text text-anchor="middle" x="521.5" y="-228" font-family="Courier,monospace" font-size="10.00">所有 case 处理完成</text>
</g>
<!-- process_scalar -->
<g id="node11" class="node">
<title>process_scalar</title>
<polygon fill="none" stroke="black" points="386.5,-124 266.5,-124 266.5,-88 386.5,-88 386.5,-124"/>
<text text-anchor="middle" x="326.5" y="-109" font-family="Courier,monospace" font-size="10.00">处理标量 case</text>
<text text-anchor="middle" x="326.5" y="-98" font-family="Courier,monospace" font-size="10.00">生成单个 item 表达式</text>
</g>
<!-- check_case_type&#45;&gt;process_scalar -->
<g id="edge10" class="edge">
<title>check_case_type&#45;&gt;process_scalar</title>
<path fill="none" stroke="black" d="M274.47,-173.89C283.41,-162.4 296.24,-145.9 306.93,-132.16"/>
<polygon fill="black" stroke="black" points="309.87,-134.08 313.25,-124.04 304.35,-129.78 309.87,-134.08"/>
<text text-anchor="middle" x="324" y="-145" font-family="Courier,monospace" font-size="10.00">标量 case</text>
</g>
<!-- process_multi -->
<g id="node12" class="node">
<title>process_multi</title>
<polygon fill="none" stroke="black" points="139,-124 0,-124 0,-88 139,-88 139,-124"/>
<text text-anchor="middle" x="69.5" y="-109" font-family="Courier,monospace" font-size="10.00">处理多值 case</text>
<text text-anchor="middle" x="69.5" y="-98" font-family="Courier,monospace" font-size="10.00">生成 items/ranges 列表</text>
</g>
<!-- check_case_type&#45;&gt;process_multi -->
<g id="edge11" class="edge">
<title>check_case_type&#45;&gt;process_multi</title>
<path fill="none" stroke="black" d="M236.55,-178.57C217.64,-171.81 191.85,-162.29 169.5,-153 151.19,-145.39 131.29,-136.39 114.1,-128.38"/>
<polygon fill="black" stroke="black" points="115.39,-125.12 104.85,-124.04 112.42,-131.46 115.39,-125.12"/>
<text text-anchor="middle" x="194" y="-145" font-family="Courier,monospace" font-size="10.00">多值 case</text>
</g>
<!-- process_else -->
<g id="node13" class="node">
<title>process_else</title>
<polygon fill="none" stroke="black" points="248,-124 157,-124 157,-88 248,-88 248,-124"/>
<text text-anchor="middle" x="202.5" y="-103.5" font-family="Courier,monospace" font-size="10.00">处理 else 分支</text>
</g>
<!-- check_case_type&#45;&gt;process_else -->
<g id="edge12" class="edge">
<title>check_case_type&#45;&gt;process_else</title>
<path fill="none" stroke="black" d="M249.12,-174.73C242.73,-168.46 235.35,-160.68 229.5,-153 224.79,-146.82 220.27,-139.75 216.32,-133.04"/>
<polygon fill="black" stroke="black" points="219.3,-131.2 211.32,-124.23 213.21,-134.65 219.3,-131.2"/>
<text text-anchor="middle" x="254.5" y="-145" font-family="Courier,monospace" font-size="10.00">else 分支</text>
</g>
<!-- generate_case_body -->
<g id="node14" class="node">
<title>generate_case_body</title>
<polygon fill="none" stroke="black" points="284,-41 183,-41 183,0 284,0 284,-41"/>
<text text-anchor="middle" x="233.5" y="-29" font-family="Courier,monospace" font-size="10.00">生成 case 代码体</text>
<text text-anchor="middle" x="233.5" y="-18" font-family="Courier,monospace" font-size="10.00">处理错误跟踪</text>
<text text-anchor="middle" x="233.5" y="-7" font-family="Courier,monospace" font-size="10.00">添加 break 指令</text>
</g>
<!-- process_scalar&#45;&gt;generate_case_body -->
<g id="edge13" class="edge">
<title>process_scalar&#45;&gt;generate_case_body</title>
<path fill="none" stroke="black" d="M307.23,-87.7C294.48,-76.25 277.52,-61.02 263.07,-48.05"/>
<polygon fill="black" stroke="black" points="265.13,-45.2 255.35,-41.12 260.45,-50.41 265.13,-45.2"/>
</g>
<!-- process_multi&#45;&gt;generate_case_body -->
<g id="edge14" class="edge">
<title>process_multi&#45;&gt;generate_case_body</title>
<path fill="none" stroke="black" d="M103.08,-87.9C126.97,-75.74 159.41,-59.22 185.95,-45.71"/>
<polygon fill="black" stroke="black" points="187.75,-48.72 195.07,-41.06 184.57,-42.48 187.75,-48.72"/>
</g>
<!-- process_else&#45;&gt;generate_case_body -->
<g id="edge15" class="edge">
<title>process_else&#45;&gt;generate_case_body</title>
<path fill="none" stroke="black" d="M208.92,-87.7C212.9,-76.99 218.1,-62.98 222.7,-50.6"/>
<polygon fill="black" stroke="black" points="226.02,-51.71 226.22,-41.12 219.45,-49.28 226.02,-51.71"/>
</g>
<!-- generate_case_body&#45;&gt;loop_cases -->
<g id="edge16" class="edge">
<title>generate_case_body&#45;&gt;loop_cases</title>
<path fill="none" stroke="black" d="M284.33,-28.42C321.29,-36.29 369.27,-52.95 395.5,-88 429.78,-133.82 425.39,-205.13 419.66,-243.82"/>
<polygon fill="black" stroke="black" points="416.18,-243.38 418.04,-253.82 423.09,-244.5 416.18,-243.38"/>
<text text-anchor="middle" x="461" y="-145" font-family="Courier,monospace" font-size="10.00">继续下一个 case</text>
</g>
<!-- return_result -->
<g id="node16" class="node">
<title>return_result</title>
<polygon fill="none" stroke="black" points="520.5,-124 466.28,-106 520.5,-88 574.72,-106 520.5,-124"/>
<text text-anchor="middle" x="520.5" y="-103.5" font-family="Courier,monospace" font-size="10.00">需要右值？</text>
</g>
<!-- finalize_switch&#45;&gt;return_result -->
<g id="edge18" class="edge">
<title>finalize_switch&#45;&gt;return_result</title>
<path fill="none" stroke="black" d="M520.5,-170.82C520.5,-160.19 520.5,-146.31 520.5,-134.2"/>
<polygon fill="black" stroke="black" points="524,-134.15 520.5,-124.15 517,-134.15 524,-134.15"/>
</g>
<!-- rvalue_return -->
<g id="node17" class="node">
<title>rvalue_return</title>
<polygon fill="none" stroke="black" points="535,-38.5 432,-38.5 432,-2.5 535,-2.5 535,-38.5"/>
<text text-anchor="middle" x="483.5" y="-18" font-family="Courier,monospace" font-size="10.00">返回 rvalue 结果</text>
</g>
<!-- return_result&#45;&gt;rvalue_return -->
<g id="edge19" class="edge">
<title>return_result&#45;&gt;rvalue_return</title>
<path fill="none" stroke="black" d="M513.89,-90.07C508.73,-78.45 501.45,-62.01 495.3,-48.14"/>
<polygon fill="black" stroke="black" points="498.33,-46.33 491.08,-38.6 491.93,-49.16 498.33,-46.33"/>
<text text-anchor="middle" x="509.5" y="-62" font-family="Courier,monospace" font-size="10.00">是</text>
</g>
<!-- direct_return -->
<g id="node18" class="node">
<title>direct_return</title>
<polygon fill="none" stroke="black" points="686,-38.5 553,-38.5 553,-2.5 686,-2.5 686,-38.5"/>
<text text-anchor="middle" x="619.5" y="-18" font-family="Courier,monospace" font-size="10.00">直接返回 switch_block</text>
</g>
<!-- return_result&#45;&gt;direct_return -->
<g id="edge20" class="edge">
<title>return_result&#45;&gt;direct_return</title>
<path fill="none" stroke="black" d="M535.11,-92.68C549.85,-80.25 572.98,-60.73 591.31,-45.28"/>
<polygon fill="black" stroke="black" points="593.95,-47.63 599.34,-38.5 589.44,-42.28 593.95,-47.63"/>
<text text-anchor="middle" x="578.5" y="-62" font-family="Courier,monospace" font-size="10.00">否</text>
</g>
</g>
</svg>
