graph TD
    A[开始] --> B[遍历所有cases]
    B --> C{检查required_features?}
    C -->|不满足| B
    C -->|满足| D{检查src_constraints?}
    D -->|不满足| B
    D -->|满足| E{检查dst_constraints?}
    E -->|不满足| B
    E -->|满足| F[遍历所有patterns]
    F --> G{src_pattern匹配?}
    G -->|不匹配| F
    G -->|匹配| H[处理call_frame对齐]
    H --> I[初始化Select结构体s]
    I --> J[配置s的临时变量]
    J --> K[处理caller_preserved寄存器]
    K --> L[锁定目标/临时寄存器]
    L --> M[转换src_temp]
    M --> N[溢出eflags(如果需要)]
    N --> O[创建临时变量]
    O --> P[生成指令体]
    P --> Q[释放寄存器锁]
    Q --> R[处理目标变量]
    R --> S[销毁临时变量]
    S --> T[返回成功]
    B -->|所有case遍历完毕| U[返回SelectFailed错误]
