<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: flowchart Pages: 1 -->
<svg width="461pt" height="1121pt"
 viewBox="0.00 0.00 461.00 1121.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1117)">
<title>flowchart</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-1117 457,-1117 457,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<polygon fill="none" stroke="black" points="337.5,-1113 216.5,-1113 216.5,-1077 337.5,-1077 337.5,-1113"/>
<text text-anchor="middle" x="277" y="-1092.5" font-family="Courier,monospace" font-size="10.00">开始处理switch表达式</text>
</g>
<!-- check_label -->
<g id="node2" class="node">
<title>check_label</title>
<polygon fill="none" stroke="black" points="337.5,-1040 216.5,-1040 216.5,-1004 337.5,-1004 337.5,-1040"/>
<text text-anchor="middle" x="277" y="-1019.5" font-family="Courier,monospace" font-size="10.00">检查switch标签重定义</text>
</g>
<!-- start&#45;&gt;check_label -->
<g id="edge1" class="edge">
<title>start&#45;&gt;check_label</title>
<path fill="none" stroke="black" d="M277,-1076.81C277,-1068.79 277,-1059.05 277,-1050.07"/>
<polygon fill="black" stroke="black" points="280.5,-1050.03 277,-1040.03 273.5,-1050.03 280.5,-1050.03"/>
</g>
<!-- first_pass -->
<g id="node3" class="node">
<title>first_pass</title>
<polygon fill="none" stroke="black" points="339.5,-967 214.5,-967 214.5,-926 339.5,-926 339.5,-967"/>
<text text-anchor="middle" x="277" y="-955" font-family="Courier,monospace" font-size="10.00">第一次遍历case节点</text>
<text text-anchor="middle" x="277" y="-944" font-family="Courier,monospace" font-size="10.00">收集特殊prong信息</text>
<text text-anchor="middle" x="277" y="-933" font-family="Courier,monospace" font-size="10.00">统计标量/多值case数量</text>
</g>
<!-- check_label&#45;&gt;first_pass -->
<g id="edge2" class="edge">
<title>check_label&#45;&gt;first_pass</title>
<path fill="none" stroke="black" d="M277,-1003.95C277,-996.03 277,-986.37 277,-977.29"/>
<polygon fill="black" stroke="black" points="280.5,-977.05 277,-967.05 273.5,-977.05 280.5,-977.05"/>
</g>
<!-- check_duplicates -->
<g id="node4" class="node">
<title>check_duplicates</title>
<polygon fill="none" stroke="black" points="292,-879 164,-879 164,-843 292,-843 292,-879"/>
<text text-anchor="middle" x="228" y="-858.5" font-family="Courier,monospace" font-size="10.00">检查else/_ prong重复</text>
</g>
<!-- first_pass&#45;&gt;check_duplicates -->
<g id="edge3" class="edge">
<title>first_pass&#45;&gt;check_duplicates</title>
<path fill="none" stroke="black" d="M240.16,-925.86C234.05,-920.88 228.55,-914.94 225,-908 222.1,-902.34 221.29,-895.76 221.55,-889.38"/>
<polygon fill="black" stroke="black" points="225.08,-889.38 222.82,-879.03 218.13,-888.53 225.08,-889.38"/>
<text text-anchor="middle" x="271" y="-900" font-family="Courier,monospace" font-size="10.00">发现else/_ prong</text>
</g>
<!-- validate_items -->
<g id="node5" class="node">
<title>validate_items</title>
<polygon fill="none" stroke="black" points="342,-796 216,-796 216,-760 342,-760 342,-796"/>
<text text-anchor="middle" x="279" y="-781" font-family="Courier,monospace" font-size="10.00">验证case项</text>
<text text-anchor="middle" x="279" y="-770" font-family="Courier,monospace" font-size="10.00">(排除字符串，检查范围)</text>
</g>
<!-- first_pass&#45;&gt;validate_items -->
<g id="edge4" class="edge">
<title>first_pass&#45;&gt;validate_items</title>
<path fill="none" stroke="black" d="M304.25,-925.8C309.43,-920.64 314.12,-914.64 317,-908 331.94,-873.51 313.06,-831.37 296.98,-804.85"/>
<polygon fill="black" stroke="black" points="299.79,-802.73 291.48,-796.16 293.87,-806.48 299.79,-802.73"/>
<text text-anchor="middle" x="354" y="-858.5" font-family="Courier,monospace" font-size="10.00">处理普通case</text>
</g>
<!-- check_duplicates&#45;&gt;validate_items -->
<g id="edge5" class="edge">
<title>check_duplicates&#45;&gt;validate_items</title>
<path fill="none" stroke="black" d="M238.82,-842.82C245.78,-831.76 254.96,-817.18 262.79,-804.75"/>
<polygon fill="black" stroke="black" points="265.83,-806.48 268.2,-796.15 259.91,-802.75 265.83,-806.48"/>
<text text-anchor="middle" x="272" y="-817" font-family="Courier,monospace" font-size="10.00">无冲突</text>
</g>
<!-- handle_operand -->
<g id="node6" class="node">
<title>handle_operand</title>
<polygon fill="none" stroke="black" points="326.5,-723 231.5,-723 231.5,-687 326.5,-687 326.5,-723"/>
<text text-anchor="middle" x="279" y="-708" font-family="Courier,monospace" font-size="10.00">处理操作数表达式</text>
<text text-anchor="middle" x="279" y="-697" font-family="Courier,monospace" font-size="10.00">记录源码位置</text>
</g>
<!-- validate_items&#45;&gt;handle_operand -->
<g id="edge6" class="edge">
<title>validate_items&#45;&gt;handle_operand</title>
<path fill="none" stroke="black" d="M279,-759.81C279,-751.79 279,-742.05 279,-733.07"/>
<polygon fill="black" stroke="black" points="282.5,-733.03 279,-723.03 275.5,-733.03 282.5,-733.03"/>
</g>
<!-- create_block -->
<g id="node7" class="node">
<title>create_block</title>
<polygon fill="none" stroke="black" points="331.5,-650 226.5,-650 226.5,-614 331.5,-614 331.5,-650"/>
<text text-anchor="middle" x="279" y="-635" font-family="Courier,monospace" font-size="10.00">创建父块作用域</text>
<text text-anchor="middle" x="279" y="-624" font-family="Courier,monospace" font-size="10.00">设置break结果信息</text>
</g>
<!-- handle_operand&#45;&gt;create_block -->
<g id="edge7" class="edge">
<title>handle_operand&#45;&gt;create_block</title>
<path fill="none" stroke="black" d="M279,-686.81C279,-678.79 279,-669.05 279,-660.07"/>
<polygon fill="black" stroke="black" points="282.5,-660.03 279,-650.03 275.5,-660.03 282.5,-660.03"/>
</g>
<!-- emit_dbg_stmt -->
<g id="node8" class="node">
<title>emit_dbg_stmt</title>
<polygon fill="none" stroke="black" points="316.5,-577 241.5,-577 241.5,-541 316.5,-541 316.5,-577"/>
<text text-anchor="middle" x="279" y="-556.5" font-family="Courier,monospace" font-size="10.00">生成调试语句</text>
</g>
<!-- create_block&#45;&gt;emit_dbg_stmt -->
<g id="edge8" class="edge">
<title>create_block&#45;&gt;emit_dbg_stmt</title>
<path fill="none" stroke="black" d="M279,-613.81C279,-605.79 279,-596.05 279,-587.07"/>
<polygon fill="black" stroke="black" points="282.5,-587.03 279,-577.03 275.5,-587.03 282.5,-587.03"/>
</g>
<!-- make_switch_block -->
<g id="node9" class="node">
<title>make_switch_block</title>
<polygon fill="none" stroke="black" points="343,-504 215,-504 215,-468 343,-468 343,-504"/>
<text text-anchor="middle" x="279" y="-483.5" font-family="Courier,monospace" font-size="10.00">创建switch_block指令</text>
</g>
<!-- emit_dbg_stmt&#45;&gt;make_switch_block -->
<g id="edge9" class="edge">
<title>emit_dbg_stmt&#45;&gt;make_switch_block</title>
<path fill="none" stroke="black" d="M279,-540.81C279,-532.79 279,-523.05 279,-514.07"/>
<polygon fill="black" stroke="black" points="282.5,-514.03 279,-504.03 275.5,-514.03 282.5,-514.03"/>
</g>
<!-- handle_label -->
<g id="node10" class="node">
<title>handle_label</title>
<polygon fill="none" stroke="black" points="294.5,-421 161.5,-421 161.5,-385 294.5,-385 294.5,-421"/>
<text text-anchor="middle" x="228" y="-400.5" font-family="Courier,monospace" font-size="10.00">处理标签的continue逻辑</text>
</g>
<!-- make_switch_block&#45;&gt;handle_label -->
<g id="edge10" class="edge">
<title>make_switch_block&#45;&gt;handle_label</title>
<path fill="none" stroke="black" d="M268.18,-467.82C261.22,-456.76 252.04,-442.18 244.21,-429.75"/>
<polygon fill="black" stroke="black" points="247.09,-427.75 238.8,-421.15 241.17,-431.48 247.09,-427.75"/>
<text text-anchor="middle" x="277" y="-442" font-family="Courier,monospace" font-size="10.00">存在标签</text>
</g>
<!-- second_pass -->
<g id="node11" class="node">
<title>second_pass</title>
<polygon fill="none" stroke="black" points="333.5,-348 224.5,-348 224.5,-312 333.5,-312 333.5,-348"/>
<text text-anchor="middle" x="279" y="-327.5" font-family="Courier,monospace" font-size="10.00">第二次遍历case节点</text>
</g>
<!-- make_switch_block&#45;&gt;second_pass -->
<g id="edge12" class="edge">
<title>make_switch_block&#45;&gt;second_pass</title>
<path fill="none" stroke="black" d="M291.87,-468C295.4,-462.52 298.85,-456.24 301,-450 310.43,-422.66 310.22,-413.24 304,-385 301.93,-375.62 298.07,-365.92 293.99,-357.39"/>
<polygon fill="black" stroke="black" points="297.02,-355.64 289.37,-348.31 290.78,-358.81 297.02,-355.64"/>
<text text-anchor="middle" x="323" y="-400.5" font-family="Courier,monospace" font-size="10.00">无标签</text>
</g>
<!-- handle_label&#45;&gt;second_pass -->
<g id="edge11" class="edge">
<title>handle_label&#45;&gt;second_pass</title>
<path fill="none" stroke="black" d="M240.35,-384.81C246.48,-376.27 254.02,-365.77 260.81,-356.32"/>
<polygon fill="black" stroke="black" points="263.78,-358.19 266.77,-348.03 258.09,-354.11 263.78,-358.19"/>
</g>
<!-- handle_payload -->
<g id="node12" class="node">
<title>handle_payload</title>
<polygon fill="none" stroke="black" points="189.5,-265 86.5,-265 86.5,-229 189.5,-229 189.5,-265"/>
<text text-anchor="middle" x="138" y="-250" font-family="Courier,monospace" font-size="10.00">处理payload捕获</text>
<text text-anchor="middle" x="138" y="-239" font-family="Courier,monospace" font-size="10.00">(引用/值捕获检测)</text>
</g>
<!-- second_pass&#45;&gt;handle_payload -->
<g id="edge13" class="edge">
<title>second_pass&#45;&gt;handle_payload</title>
<path fill="none" stroke="black" d="M244.44,-311.95C233.63,-306.42 221.72,-300.12 211,-294 198.23,-286.71 184.52,-278.24 172.47,-270.58"/>
<polygon fill="black" stroke="black" points="174.33,-267.62 164.02,-265.17 170.55,-273.51 174.33,-267.62"/>
<text text-anchor="middle" x="243" y="-286" font-family="Courier,monospace" font-size="10.00">处理每个case</text>
</g>
<!-- finalize_block -->
<g id="node16" class="node">
<title>finalize_block</title>
<polygon fill="none" stroke="black" points="343,-265 215,-265 215,-229 343,-229 343,-265"/>
<text text-anchor="middle" x="279" y="-250" font-family="Courier,monospace" font-size="10.00">完成switch_block构造</text>
<text text-anchor="middle" x="279" y="-239" font-family="Courier,monospace" font-size="10.00">写入extra数据</text>
</g>
<!-- second_pass&#45;&gt;finalize_block -->
<g id="edge18" class="edge">
<title>second_pass&#45;&gt;finalize_block</title>
<path fill="none" stroke="black" d="M279,-311.82C279,-301.19 279,-287.31 279,-275.2"/>
<polygon fill="black" stroke="black" points="282.5,-275.15 279,-265.15 275.5,-275.15 282.5,-275.15"/>
<text text-anchor="middle" x="320.5" y="-286" font-family="Courier,monospace" font-size="10.00">所有case处理完成</text>
</g>
<!-- generate_items -->
<g id="node13" class="node">
<title>generate_items</title>
<polygon fill="none" stroke="black" points="128.5,-192 29.5,-192 29.5,-156 128.5,-156 128.5,-192"/>
<text text-anchor="middle" x="79" y="-177" font-family="Courier,monospace" font-size="10.00">生成case项表达式</text>
<text text-anchor="middle" x="79" y="-166" font-family="Courier,monospace" font-size="10.00">(标量/多值/范围)</text>
</g>
<!-- handle_payload&#45;&gt;generate_items -->
<g id="edge14" class="edge">
<title>handle_payload&#45;&gt;generate_items</title>
<path fill="none" stroke="black" d="M123.72,-228.81C116.47,-220.09 107.54,-209.34 99.56,-199.75"/>
<polygon fill="black" stroke="black" points="102.23,-197.48 93.15,-192.03 96.85,-201.96 102.23,-197.48"/>
</g>
<!-- build_prong -->
<g id="node14" class="node">
<title>build_prong</title>
<polygon fill="none" stroke="black" points="76,-109 0,-109 0,-73 76,-73 76,-109"/>
<text text-anchor="middle" x="38" y="-94" font-family="Courier,monospace" font-size="10.00">构建prong体</text>
<text text-anchor="middle" x="38" y="-83" font-family="Courier,monospace" font-size="10.00">处理标签捕获</text>
</g>
<!-- generate_items&#45;&gt;build_prong -->
<g id="edge15" class="edge">
<title>generate_items&#45;&gt;build_prong</title>
<path fill="none" stroke="black" d="M70.3,-155.82C64.76,-144.87 57.47,-130.46 51.22,-118.11"/>
<polygon fill="black" stroke="black" points="54.32,-116.49 46.68,-109.15 48.08,-119.66 54.32,-116.49"/>
</g>
<!-- check_break -->
<g id="node15" class="node">
<title>check_break</title>
<polygon fill="none" stroke="black" points="265.5,-36 152.5,-36 152.5,0 265.5,0 265.5,-36"/>
<text text-anchor="middle" x="209" y="-21" font-family="Courier,monospace" font-size="10.00">检测非noreturn分支</text>
<text text-anchor="middle" x="209" y="-10" font-family="Courier,monospace" font-size="10.00">添加break指令</text>
</g>
<!-- build_prong&#45;&gt;check_break -->
<g id="edge16" class="edge">
<title>build_prong&#45;&gt;check_break</title>
<path fill="none" stroke="black" d="M76.38,-74.07C100.58,-64.02 132.11,-50.92 158.36,-40.03"/>
<polygon fill="black" stroke="black" points="159.87,-43.19 167.77,-36.12 157.19,-36.72 159.87,-43.19"/>
</g>
<!-- check_break&#45;&gt;second_pass -->
<g id="edge17" class="edge">
<title>check_break&#45;&gt;second_pass</title>
<path fill="none" stroke="black" d="M265.94,-20C315.68,-24.26 380,-39.53 380,-90 380,-248 380,-248 380,-248 380,-269.37 380.44,-278.25 366,-294 359.55,-301.04 351.49,-306.69 342.9,-311.22"/>
<polygon fill="black" stroke="black" points="341.33,-308.09 333.8,-315.54 344.33,-314.41 341.33,-308.09"/>
<text text-anchor="middle" x="416.5" y="-171.5" font-family="Courier,monospace" font-size="10.00">继续下一个case</text>
</g>
<!-- need_rvalue -->
<g id="node17" class="node">
<title>need_rvalue</title>
<polygon fill="none" stroke="black" points="328,-192 230,-192 230,-156 328,-156 328,-192"/>
<text text-anchor="middle" x="279" y="-171.5" font-family="Courier,monospace" font-size="10.00">需要rvalue转换?</text>
</g>
<!-- finalize_block&#45;&gt;need_rvalue -->
<g id="edge19" class="edge">
<title>finalize_block&#45;&gt;need_rvalue</title>
<path fill="none" stroke="black" d="M279,-228.81C279,-220.79 279,-211.05 279,-202.07"/>
<polygon fill="black" stroke="black" points="282.5,-202.03 279,-192.03 275.5,-202.03 282.5,-202.03"/>
</g>
<!-- return_result -->
<g id="node18" class="node">
<title>return_result</title>
<polygon fill="none" stroke="black" points="222,-109 94,-109 94,-73 222,-73 222,-109"/>
<text text-anchor="middle" x="158" y="-88.5" font-family="Courier,monospace" font-size="10.00">返回switch_block引用</text>
</g>
<!-- need_rvalue&#45;&gt;return_result -->
<g id="edge21" class="edge">
<title>need_rvalue&#45;&gt;return_result</title>
<path fill="none" stroke="black" d="M253.34,-155.82C235.53,-143.9 211.62,-127.89 192.19,-114.89"/>
<polygon fill="black" stroke="black" points="193.88,-111.81 183.62,-109.15 189.99,-117.62 193.88,-111.81"/>
<text text-anchor="middle" x="231" y="-130" font-family="Courier,monospace" font-size="10.00">否</text>
</g>
<!-- return_rvalue -->
<g id="node19" class="node">
<title>return_rvalue</title>
<polygon fill="none" stroke="black" points="351.5,-109 240.5,-109 240.5,-73 351.5,-73 351.5,-109"/>
<text text-anchor="middle" x="296" y="-88.5" font-family="Courier,monospace" font-size="10.00">返回rvalue转换结果</text>
</g>
<!-- need_rvalue&#45;&gt;return_rvalue -->
<g id="edge20" class="edge">
<title>need_rvalue&#45;&gt;return_rvalue</title>
<path fill="none" stroke="black" d="M282.61,-155.82C284.84,-145.19 287.75,-131.31 290.29,-119.2"/>
<polygon fill="black" stroke="black" points="293.77,-119.66 292.4,-109.15 286.92,-118.22 293.77,-119.66"/>
<text text-anchor="middle" x="293" y="-130" font-family="Courier,monospace" font-size="10.00">是</text>
</g>
</g>
</svg>
