flowchart TD
    A[开始] --> B[初始化变量和解析数据]
    B --> C[解析Flags并验证ptr_cast标志]
    C --> D[获取源位置信息]
    D --> E[解析父指针类型]
    E --> F{父指针类型检查}
    F --> |失败| G[报错: 非单指针类型]
    F --> |通过| H[检查父类型为struct/union]
    H --> |失败| I[报错: 非结构体/联合体]
    H --> |通过| J[解析字段名称]
    J --> K{字段类型检查}
    K --> |是comptime字段| L[报错: 无法获取comptime字段指针]
    K --> |通过| M[解析字段指针类型]
    M --> N[构建实际指针类型信息]
    N --> O{容器布局类型判断}
    O --> |auto布局| P[处理auto布局对齐]
    O --> |extern布局| Q[计算字段偏移量]
    O --> |packed布局| R[处理位偏移计算]
    P --> S[生成实际指针类型]
    Q --> S
    R --> S
    S --> T{能否静态解析字段指针值?}
    T --> |能| U[静态计算父指针]
    T --> |不能| V[生成运行时指令]
    U --> W[指针类型转换]
    V --> W
    W --> X[返回结果]
    G --> X
    I --> X
    L --> X
