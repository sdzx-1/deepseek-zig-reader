<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: detectNativeFeatures Pages: 1 -->
<svg width="301pt" height="891pt"
 viewBox="0.00 0.00 301.00 891.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 887)">
<title>detectNativeFeatures</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-887 297,-887 297,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<path fill="none" stroke="black" d="M161.5,-883C161.5,-883 131.5,-883 131.5,-883 125.5,-883 119.5,-877 119.5,-871 119.5,-871 119.5,-859 119.5,-859 119.5,-853 125.5,-847 131.5,-847 131.5,-847 161.5,-847 161.5,-847 167.5,-847 173.5,-853 173.5,-859 173.5,-859 173.5,-871 173.5,-871 173.5,-877 167.5,-883 161.5,-883"/>
<text text-anchor="middle" x="146.5" y="-861.3" font-family="Times,serif" font-size="14.00">开始</text>
</g>
<!-- detect_basic -->
<g id="node2" class="node">
<title>detect_basic</title>
<path fill="none" stroke="black" d="M193,-810C193,-810 100,-810 100,-810 94,-810 88,-804 88,-798 88,-798 88,-784 88,-784 88,-778 94,-772 100,-772 100,-772 193,-772 193,-772 199,-772 205,-778 205,-784 205,-784 205,-798 205,-798 205,-804 199,-810 193,-810"/>
<text text-anchor="middle" x="146.5" y="-794.8" font-family="Times,serif" font-size="14.00">调用cpuid(0,0)</text>
<text text-anchor="middle" x="146.5" y="-779.8" font-family="Times,serif" font-size="14.00">获取max_level</text>
</g>
<!-- start&#45;&gt;detect_basic -->
<g id="edge1" class="edge">
<title>start&#45;&gt;detect_basic</title>
<path fill="none" stroke="black" d="M146.5,-846.94C146.5,-838.99 146.5,-829.31 146.5,-820.31"/>
<polygon fill="black" stroke="black" points="150,-820.2 146.5,-810.2 143,-820.2 150,-820.2"/>
</g>
<!-- detect_leaf1 -->
<g id="node3" class="node">
<title>detect_leaf1</title>
<path fill="none" stroke="black" d="M248.5,-735C248.5,-735 44.5,-735 44.5,-735 38.5,-735 32.5,-729 32.5,-723 32.5,-723 32.5,-709 32.5,-709 32.5,-703 38.5,-697 44.5,-697 44.5,-697 248.5,-697 248.5,-697 254.5,-697 260.5,-703 260.5,-709 260.5,-709 260.5,-723 260.5,-723 260.5,-729 254.5,-735 248.5,-735"/>
<text text-anchor="middle" x="146.5" y="-719.8" font-family="Times,serif" font-size="14.00">调用cpuid(1,0)</text>
<text text-anchor="middle" x="146.5" y="-704.8" font-family="Times,serif" font-size="14.00">设置基本特性(cx8, cmov, sse等)</text>
</g>
<!-- detect_basic&#45;&gt;detect_leaf1 -->
<g id="edge2" class="edge">
<title>detect_basic&#45;&gt;detect_leaf1</title>
<path fill="none" stroke="black" d="M146.5,-771.96C146.5,-763.88 146.5,-754.18 146.5,-745.18"/>
<polygon fill="black" stroke="black" points="150,-745.09 146.5,-735.09 143,-745.09 150,-745.09"/>
</g>
<!-- check_xsave_avx -->
<g id="node4" class="node">
<title>check_xsave_avx</title>
<path fill="none" stroke="black" d="M218,-660C218,-660 75,-660 75,-660 69,-660 63,-654 63,-648 63,-648 63,-636 63,-636 63,-630 69,-624 75,-624 75,-624 218,-624 218,-624 224,-624 230,-630 230,-636 230,-636 230,-648 230,-648 230,-654 224,-660 218,-660"/>
<text text-anchor="middle" x="146.5" y="-638.3" font-family="Times,serif" font-size="14.00">检查XSAVE和AVX支持</text>
</g>
<!-- detect_leaf1&#45;&gt;check_xsave_avx -->
<g id="edge3" class="edge">
<title>detect_leaf1&#45;&gt;check_xsave_avx</title>
<path fill="none" stroke="black" d="M146.5,-696.83C146.5,-688.89 146.5,-679.41 146.5,-670.63"/>
<polygon fill="black" stroke="black" points="150,-670.42 146.5,-660.42 143,-670.42 150,-670.42"/>
</g>
<!-- handle_avx512 -->
<g id="node5" class="node">
<title>handle_avx512</title>
<path fill="none" stroke="black" d="M238.5,-587C238.5,-587 54.5,-587 54.5,-587 48.5,-587 42.5,-581 42.5,-575 42.5,-575 42.5,-563 42.5,-563 42.5,-557 48.5,-551 54.5,-551 54.5,-551 238.5,-551 238.5,-551 244.5,-551 250.5,-557 250.5,-563 250.5,-563 250.5,-575 250.5,-575 250.5,-581 244.5,-587 238.5,-587"/>
<text text-anchor="middle" x="146.5" y="-565.3" font-family="Times,serif" font-size="14.00">根据OS处理AVX512保存状态</text>
</g>
<!-- check_xsave_avx&#45;&gt;handle_avx512 -->
<g id="edge4" class="edge">
<title>check_xsave_avx&#45;&gt;handle_avx512</title>
<path fill="none" stroke="black" d="M146.5,-623.81C146.5,-615.79 146.5,-606.05 146.5,-597.07"/>
<polygon fill="black" stroke="black" points="150,-597.03 146.5,-587.03 143,-597.03 150,-597.03"/>
</g>
<!-- detect_extended -->
<g id="node6" class="node">
<title>detect_extended</title>
<path fill="none" stroke="black" d="M234.5,-514C234.5,-514 58.5,-514 58.5,-514 52.5,-514 46.5,-508 46.5,-502 46.5,-502 46.5,-488 46.5,-488 46.5,-482 52.5,-476 58.5,-476 58.5,-476 234.5,-476 234.5,-476 240.5,-476 246.5,-482 246.5,-488 246.5,-488 246.5,-502 246.5,-502 246.5,-508 240.5,-514 234.5,-514"/>
<text text-anchor="middle" x="146.5" y="-498.8" font-family="Times,serif" font-size="14.00">调用cpuid(0x80000000)</text>
<text text-anchor="middle" x="146.5" y="-483.8" font-family="Times,serif" font-size="14.00">处理扩展特性(sahf, lzcnt等)</text>
</g>
<!-- handle_avx512&#45;&gt;detect_extended -->
<g id="edge5" class="edge">
<title>handle_avx512&#45;&gt;detect_extended</title>
<path fill="none" stroke="black" d="M146.5,-550.94C146.5,-542.99 146.5,-533.31 146.5,-524.31"/>
<polygon fill="black" stroke="black" points="150,-524.2 146.5,-514.2 143,-524.2 150,-524.2"/>
</g>
<!-- check_ext_level -->
<g id="node7" class="node">
<title>check_ext_level</title>
<path fill="none" stroke="black" d="M257.5,-439C257.5,-439 35.5,-439 35.5,-439 29.5,-439 23.5,-433 23.5,-427 23.5,-427 23.5,-413 23.5,-413 23.5,-407 29.5,-401 35.5,-401 35.5,-401 257.5,-401 257.5,-401 263.5,-401 269.5,-407 269.5,-413 269.5,-413 269.5,-427 269.5,-427 269.5,-433 263.5,-439 257.5,-439"/>
<text text-anchor="middle" x="146.5" y="-423.8" font-family="Times,serif" font-size="14.00">max_ext_level &gt;= 0x80000008?</text>
<text text-anchor="middle" x="146.5" y="-408.8" font-family="Times,serif" font-size="14.00">设置内存特性(clzero, wbnoinvd)</text>
</g>
<!-- detect_extended&#45;&gt;check_ext_level -->
<g id="edge6" class="edge">
<title>detect_extended&#45;&gt;check_ext_level</title>
<path fill="none" stroke="black" d="M146.5,-475.96C146.5,-467.88 146.5,-458.18 146.5,-449.18"/>
<polygon fill="black" stroke="black" points="150,-449.09 146.5,-439.09 143,-449.09 150,-449.09"/>
</g>
<!-- handle_level7 -->
<g id="node8" class="node">
<title>handle_level7</title>
<path fill="none" stroke="black" d="M281,-350C281,-350 12,-350 12,-350 6,-350 0,-344 0,-338 0,-338 0,-324 0,-324 0,-318 6,-312 12,-312 12,-312 281,-312 281,-312 287,-312 293,-318 293,-324 293,-324 293,-338 293,-338 293,-344 287,-350 281,-350"/>
<text text-anchor="middle" x="146.5" y="-334.8" font-family="Times,serif" font-size="14.00">max_level &gt;= 0x7</text>
<text text-anchor="middle" x="146.5" y="-319.8" font-family="Times,serif" font-size="14.00">设置高级特性(fsgsbase, avx2, avx512等)</text>
</g>
<!-- check_ext_level&#45;&gt;handle_level7 -->
<g id="edge7" class="edge">
<title>check_ext_level&#45;&gt;handle_level7</title>
<path fill="none" stroke="black" d="M135.43,-400.94C132.6,-395.39 129.94,-389.12 128.5,-383 126.67,-375.25 128.03,-367.03 130.66,-359.51"/>
<polygon fill="black" stroke="black" points="133.97,-360.7 134.7,-350.13 127.54,-357.93 133.97,-360.7"/>
<text text-anchor="middle" x="136" y="-371.8" font-family="Times,serif" font-size="14.00">是</text>
</g>
<!-- check_ext_level&#45;&gt;handle_level7 -->
<g id="edge8" class="edge">
<title>check_ext_level&#45;&gt;handle_level7</title>
<path fill="none" stroke="black" d="M146.5,-400.97C146.5,-389.19 146.5,-373.56 146.5,-360.16"/>
<polygon fill="black" stroke="black" points="150,-360 146.5,-350 143,-360 150,-360"/>
<text text-anchor="middle" x="154" y="-371.8" font-family="Times,serif" font-size="14.00">否</text>
</g>
<!-- handle_leaf7_1 -->
<g id="node9" class="node">
<title>handle_leaf7_1</title>
<path fill="none" stroke="black" d="M159.5,-261C159.5,-261 31.5,-261 31.5,-261 25.5,-261 19.5,-255 19.5,-249 19.5,-249 19.5,-235 19.5,-235 19.5,-229 25.5,-223 31.5,-223 31.5,-223 159.5,-223 159.5,-223 165.5,-223 171.5,-229 171.5,-235 171.5,-235 171.5,-249 171.5,-249 171.5,-255 165.5,-261 159.5,-261"/>
<text text-anchor="middle" x="95.5" y="-245.8" font-family="Times,serif" font-size="14.00">处理cpuid(0x7,0x1)</text>
<text text-anchor="middle" x="95.5" y="-230.8" font-family="Times,serif" font-size="14.00">设置avx512bf16</text>
</g>
<!-- handle_level7&#45;&gt;handle_leaf7_1 -->
<g id="edge9" class="edge">
<title>handle_level7&#45;&gt;handle_leaf7_1</title>
<path fill="none" stroke="black" d="M111.16,-311.88C104.85,-306.97 99.14,-301.02 95.5,-294 91.97,-287.19 90.83,-279.15 90.87,-271.49"/>
<polygon fill="black" stroke="black" points="94.36,-271.64 91.53,-261.43 87.38,-271.18 94.36,-271.64"/>
<text text-anchor="middle" x="140.5" y="-282.8" font-family="Times,serif" font-size="14.00">has_leaf_7_1</text>
</g>
<!-- handle_levelD -->
<g id="node10" class="node">
<title>handle_levelD</title>
<path fill="none" stroke="black" d="M274.5,-186C274.5,-186 20.5,-186 20.5,-186 14.5,-186 8.5,-180 8.5,-174 8.5,-174 8.5,-160 8.5,-160 8.5,-154 14.5,-148 20.5,-148 20.5,-148 274.5,-148 274.5,-148 280.5,-148 286.5,-154 286.5,-160 286.5,-160 286.5,-174 286.5,-174 286.5,-180 280.5,-186 274.5,-186"/>
<text text-anchor="middle" x="147.5" y="-170.8" font-family="Times,serif" font-size="14.00">max_level &gt;= 0xD &amp;&amp; has_avx_save</text>
<text text-anchor="middle" x="147.5" y="-155.8" font-family="Times,serif" font-size="14.00">设置XSAVE选项</text>
</g>
<!-- handle_level7&#45;&gt;handle_levelD -->
<g id="edge10" class="edge">
<title>handle_level7&#45;&gt;handle_levelD</title>
<path fill="none" stroke="black" d="M172.26,-311.92C177.63,-306.8 182.54,-300.75 185.5,-294 200.01,-260.86 182.04,-220.52 166.21,-194.56"/>
<polygon fill="black" stroke="black" points="169.09,-192.56 160.76,-186.01 163.18,-196.32 169.09,-192.56"/>
</g>
<!-- handle_leaf7_1&#45;&gt;handle_levelD -->
<g id="edge11" class="edge">
<title>handle_leaf7_1&#45;&gt;handle_levelD</title>
<path fill="none" stroke="black" d="M108.35,-222.96C114.48,-214.36 121.93,-203.9 128.67,-194.43"/>
<polygon fill="black" stroke="black" points="131.66,-196.27 134.61,-186.09 125.96,-192.2 131.66,-196.27"/>
</g>
<!-- handle_level14 -->
<g id="node11" class="node">
<title>handle_level14</title>
<path fill="none" stroke="black" d="M213,-111C213,-111 82,-111 82,-111 76,-111 70,-105 70,-99 70,-99 70,-85 70,-85 70,-79 76,-73 82,-73 82,-73 213,-73 213,-73 219,-73 225,-79 225,-85 225,-85 225,-99 225,-99 225,-105 219,-111 213,-111"/>
<text text-anchor="middle" x="147.5" y="-95.8" font-family="Times,serif" font-size="14.00">max_level &gt;= 0x14</text>
<text text-anchor="middle" x="147.5" y="-80.8" font-family="Times,serif" font-size="14.00">设置ptwrite</text>
</g>
<!-- handle_levelD&#45;&gt;handle_level14 -->
<g id="edge12" class="edge">
<title>handle_levelD&#45;&gt;handle_level14</title>
<path fill="none" stroke="black" d="M147.5,-147.96C147.5,-139.88 147.5,-130.18 147.5,-121.18"/>
<polygon fill="black" stroke="black" points="151,-121.09 147.5,-111.09 144,-121.09 151,-121.09"/>
</g>
<!-- end -->
<g id="node12" class="node">
<title>end</title>
<path fill="none" stroke="black" d="M162.5,-36C162.5,-36 132.5,-36 132.5,-36 126.5,-36 120.5,-30 120.5,-24 120.5,-24 120.5,-12 120.5,-12 120.5,-6 126.5,0 132.5,0 132.5,0 162.5,0 162.5,0 168.5,0 174.5,-6 174.5,-12 174.5,-12 174.5,-24 174.5,-24 174.5,-30 168.5,-36 162.5,-36"/>
<text text-anchor="middle" x="147.5" y="-14.3" font-family="Times,serif" font-size="14.00">结束</text>
</g>
<!-- handle_level14&#45;&gt;end -->
<g id="edge13" class="edge">
<title>handle_level14&#45;&gt;end</title>
<path fill="none" stroke="black" d="M147.5,-72.83C147.5,-64.89 147.5,-55.41 147.5,-46.63"/>
<polygon fill="black" stroke="black" points="151,-46.42 147.5,-36.42 144,-46.42 151,-46.42"/>
</g>
</g>
</svg>
