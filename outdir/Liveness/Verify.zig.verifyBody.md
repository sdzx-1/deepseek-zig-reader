graph TD
    A[开始] --> B[初始化ip, tags, data]
    B --> C[遍历body中的每个指令inst]
    C --> D{inst未被使用且无需lower?}
    D -->|是| C
    D -->|否| E[根据inst的tag进行分支]
    E -->|无操作数指令| F[调用verifyInstOperands]
    F --> G{指令是否终止函数?}
    G -->|是| H[检查存活状态并报错]
    G -->|否| C
    E -->|一元操作数| I[提取操作数并验证]
    I --> C
    E -->|二元操作数| J[提取lhs和rhs并验证]
    J --> C
    E -->|三元操作数| K[提取三个操作数并验证]
    K --> C
    E -->|聚合初始化/调用/汇编| L[遍历所有元素/参数并验证]
    L --> C
    E -->|控制流指令| M[处理块存活状态]
    M --> N[克隆存活状态]
    N --> O[验证子块body]
    O --> P[恢复/合并存活状态]
    P --> C
    E -->|其他指令| Q[处理对应操作数并验证]
    Q --> C
    C --> R{所有指令处理完成?}
    R -->|是| S[结束]
