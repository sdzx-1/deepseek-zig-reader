<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: flowchart Pages: 1 -->
<svg width="802pt" height="938pt"
 viewBox="0.00 0.00 801.50 938.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 934)">
<title>flowchart</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-934 797.5,-934 797.5,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<path fill="none" stroke="black" d="M381.5,-930C381.5,-930 351.5,-930 351.5,-930 345.5,-930 339.5,-924 339.5,-918 339.5,-918 339.5,-906 339.5,-906 339.5,-900 345.5,-894 351.5,-894 351.5,-894 381.5,-894 381.5,-894 387.5,-894 393.5,-900 393.5,-906 393.5,-906 393.5,-918 393.5,-918 393.5,-924 387.5,-930 381.5,-930"/>
<text text-anchor="middle" x="366.5" y="-908.3" font-family="Arial" font-size="14.00">开始</text>
</g>
<!-- check_namespace -->
<g id="node2" class="node">
<title>check_namespace</title>
<path fill="none" stroke="black" d="M430.5,-857C430.5,-857 302.5,-857 302.5,-857 296.5,-857 290.5,-851 290.5,-845 290.5,-845 290.5,-831 290.5,-831 290.5,-825 296.5,-819 302.5,-819 302.5,-819 430.5,-819 430.5,-819 436.5,-819 442.5,-825 442.5,-831 442.5,-831 442.5,-845 442.5,-845 442.5,-851 436.5,-857 430.5,-857"/>
<text text-anchor="middle" x="366.5" y="-841.8" font-family="Arial" font-size="14.00">检查路径前缀类型</text>
<text text-anchor="middle" x="366.5" y="-826.8" font-family="Arial" font-size="14.00">(getNamespacePrefix)</text>
</g>
<!-- start&#45;&gt;check_namespace -->
<g id="edge1" class="edge">
<title>start&#45;&gt;check_namespace</title>
<path fill="none" stroke="black" d="M366.5,-893.94C366.5,-885.99 366.5,-876.31 366.5,-867.31"/>
<polygon fill="black" stroke="black" points="370,-867.2 366.5,-857.2 363,-867.2 370,-867.2"/>
</g>
<!-- nt_verbatim -->
<g id="node3" class="node">
<title>nt_verbatim</title>
<path fill="none" stroke="black" d="M613,-714C613,-714 488,-714 488,-714 482,-714 476,-708 476,-702 476,-702 476,-690 476,-690 476,-684 482,-678 488,-678 488,-678 613,-678 613,-678 619,-678 625,-684 625,-690 625,-690 625,-702 625,-702 625,-708 619,-714 613,-714"/>
<text text-anchor="middle" x="550.5" y="-692.3" font-family="Arial" font-size="14.00">处理.nt/.verbatim路径</text>
</g>
<!-- check_namespace&#45;&gt;nt_verbatim -->
<g id="edge2" class="edge">
<title>check_namespace&#45;&gt;nt_verbatim</title>
<path fill="none" stroke="black" d="M390.18,-818.98C423.25,-793.82 483.29,-748.14 519.77,-720.38"/>
<polygon fill="black" stroke="black" points="522.23,-722.91 528.06,-714.07 517.99,-717.34 522.23,-722.91"/>
<text text-anchor="middle" x="468.5" y="-789.8" font-family="Arial" font-size="14.00">.nt/.verbatim</text>
</g>
<!-- local_fake -->
<g id="node4" class="node">
<title>local_fake</title>
<path fill="none" stroke="black" d="M233,-604C233,-604 12,-604 12,-604 6,-604 0,-598 0,-592 0,-592 0,-580 0,-580 0,-574 6,-568 12,-568 12,-568 233,-568 233,-568 239,-568 245,-574 245,-580 245,-580 245,-592 245,-592 245,-598 239,-604 233,-604"/>
<text text-anchor="middle" x="122.5" y="-582.3" font-family="Arial" font-size="14.00">处理.local_device/.fake_verbatim路径</text>
</g>
<!-- check_namespace&#45;&gt;local_fake -->
<g id="edge3" class="edge">
<title>check_namespace&#45;&gt;local_fake</title>
<path fill="none" stroke="black" d="M290.41,-824.29C229.94,-812.51 152.32,-793.03 132.5,-768 97.5,-723.79 106.59,-652.81 115.2,-614.19"/>
<polygon fill="black" stroke="black" points="118.67,-614.74 117.58,-604.2 111.86,-613.11 118.67,-614.74"/>
<text text-anchor="middle" x="218.5" y="-746.3" font-family="Arial" font-size="14.00">.local_device/.fake_verbatim</text>
</g>
<!-- none_case -->
<g id="node5" class="node">
<title>none_case</title>
<path fill="none" stroke="black" d="M408,-768C408,-768 325,-768 325,-768 319,-768 313,-762 313,-756 313,-756 313,-744 313,-744 313,-738 319,-732 325,-732 325,-732 408,-732 408,-732 414,-732 420,-738 420,-744 420,-744 420,-756 420,-756 420,-762 414,-768 408,-768"/>
<text text-anchor="middle" x="366.5" y="-746.3" font-family="Arial" font-size="14.00">处理.none路径</text>
</g>
<!-- check_namespace&#45;&gt;none_case -->
<g id="edge4" class="edge">
<title>check_namespace&#45;&gt;none_case</title>
<path fill="none" stroke="black" d="M366.5,-818.76C366.5,-806.93 366.5,-791.32 366.5,-778.05"/>
<polygon fill="black" stroke="black" points="370,-778.04 366.5,-768.04 363,-778.04 370,-778.04"/>
<text text-anchor="middle" x="383.5" y="-789.8" font-family="Arial" font-size="14.00">.none</text>
</g>
<!-- finalize_path -->
<g id="node14" class="node">
<title>finalize_path</title>
<path fill="none" stroke="black" d="M444,-111C444,-111 343,-111 343,-111 337,-111 331,-105 331,-99 331,-99 331,-85 331,-85 331,-79 337,-73 343,-73 343,-73 444,-73 444,-73 450,-73 456,-79 456,-85 456,-85 456,-99 456,-99 456,-105 450,-111 444,-111"/>
<text text-anchor="middle" x="393.5" y="-95.8" font-family="Arial" font-size="14.00">填充路径前缀</text>
<text text-anchor="middle" x="393.5" y="-80.8" font-family="Arial" font-size="14.00">并返回PathSpace</text>
</g>
<!-- nt_verbatim&#45;&gt;finalize_path -->
<g id="edge5" class="edge">
<title>nt_verbatim&#45;&gt;finalize_path</title>
<path fill="none" stroke="black" d="M580.61,-677.93C608.77,-659.49 646.5,-627.26 646.5,-587 646.5,-587 646.5,-587 646.5,-179 646.5,-143.6 616.64,-143.84 584.5,-129 547.53,-111.94 502.99,-102.96 466.21,-98.24"/>
<polygon fill="black" stroke="black" points="466.41,-94.74 456.06,-97.02 465.57,-101.69 466.41,-94.74"/>
<text text-anchor="middle" x="720" y="-395.8" font-family="Arial" font-size="14.00">复制路径并添加NT前缀</text>
</g>
<!-- call_rtl -->
<g id="node11" class="node">
<title>call_rtl</title>
<path fill="none" stroke="black" d="M248.5,-285C248.5,-285 84.5,-285 84.5,-285 78.5,-285 72.5,-279 72.5,-273 72.5,-273 72.5,-261 72.5,-261 72.5,-255 78.5,-249 84.5,-249 84.5,-249 248.5,-249 248.5,-249 254.5,-249 260.5,-255 260.5,-261 260.5,-261 260.5,-273 260.5,-273 260.5,-279 254.5,-285 248.5,-285"/>
<text text-anchor="middle" x="166.5" y="-263.3" font-family="Arial" font-size="14.00">调用RtlGetFullPathName_U</text>
</g>
<!-- local_fake&#45;&gt;call_rtl -->
<g id="edge6" class="edge">
<title>local_fake&#45;&gt;call_rtl</title>
<path fill="none" stroke="black" d="M124.2,-567.76C125.98,-548.29 128.5,-515.65 128.5,-487.5 128.5,-487.5 128.5,-487.5 128.5,-354 128.5,-332.38 138.67,-310.1 148.49,-293.64"/>
<polygon fill="black" stroke="black" points="151.48,-295.47 153.85,-285.14 145.56,-291.74 151.48,-295.47"/>
<text text-anchor="middle" x="171.5" y="-439.3" font-family="Arial" font-size="14.00">获取完整路径</text>
</g>
<!-- check_path_type -->
<g id="node6" class="node">
<title>check_path_type</title>
<path fill="none" stroke="black" d="M437,-660C437,-660 294,-660 294,-660 288,-660 282,-654 282,-648 282,-648 282,-634 282,-634 282,-628 288,-622 294,-622 294,-622 437,-622 437,-622 443,-622 449,-628 449,-634 449,-634 449,-648 449,-648 449,-654 443,-660 437,-660"/>
<text text-anchor="middle" x="365.5" y="-644.8" font-family="Arial" font-size="14.00">检查路径类型</text>
<text text-anchor="middle" x="365.5" y="-629.8" font-family="Arial" font-size="14.00">(getUnprefixedPathType)</text>
</g>
<!-- none_case&#45;&gt;check_path_type -->
<g id="edge10" class="edge">
<title>none_case&#45;&gt;check_path_type</title>
<path fill="none" stroke="black" d="M366.34,-731.81C366.18,-715.26 365.95,-689.94 365.77,-670.39"/>
<polygon fill="black" stroke="black" points="369.26,-670.19 365.67,-660.22 362.26,-670.26 369.26,-670.19"/>
</g>
<!-- handle_relative -->
<g id="node7" class="node">
<title>handle_relative</title>
<path fill="none" stroke="black" d="M553,-550C553,-550 446,-550 446,-550 440,-550 434,-544 434,-538 434,-538 434,-524 434,-524 434,-518 440,-512 446,-512 446,-512 553,-512 553,-512 559,-512 565,-518 565,-524 565,-524 565,-538 565,-538 565,-544 559,-550 553,-550"/>
<text text-anchor="middle" x="499.5" y="-534.8" font-family="Arial" font-size="14.00">尝试处理相对路径</text>
<text text-anchor="middle" x="499.5" y="-519.8" font-family="Arial" font-size="14.00">(normalizePath)</text>
</g>
<!-- check_path_type&#45;&gt;handle_relative -->
<g id="edge11" class="edge">
<title>check_path_type&#45;&gt;handle_relative</title>
<path fill="none" stroke="black" d="M387.93,-621.92C410.15,-604.01 444.35,-576.45 469.03,-556.56"/>
<polygon fill="black" stroke="black" points="471.41,-559.14 477,-550.14 467.02,-553.69 471.41,-559.14"/>
<text text-anchor="middle" x="473.5" y="-582.3" font-family="Arial" font-size="14.00">relative</text>
</g>
<!-- handle_absolute -->
<g id="node9" class="node">
<title>handle_absolute</title>
<path fill="none" stroke="black" d="M444.5,-373C444.5,-373 348.5,-373 348.5,-373 342.5,-373 336.5,-367 336.5,-361 336.5,-361 336.5,-349 336.5,-349 336.5,-343 342.5,-337 348.5,-337 348.5,-337 444.5,-337 444.5,-337 450.5,-337 456.5,-343 456.5,-349 456.5,-349 456.5,-361 456.5,-361 456.5,-367 450.5,-373 444.5,-373"/>
<text text-anchor="middle" x="396.5" y="-351.3" font-family="Arial" font-size="14.00">构造绝对NT路径</text>
</g>
<!-- check_path_type&#45;&gt;handle_absolute -->
<g id="edge12" class="edge">
<title>check_path_type&#45;&gt;handle_absolute</title>
<path fill="none" stroke="black" d="M363.1,-621.54C359.62,-591.5 354.35,-530.23 361.5,-479 366.22,-445.14 377.93,-407.5 386.51,-382.89"/>
<polygon fill="black" stroke="black" points="389.91,-383.78 389.96,-373.19 383.31,-381.44 389.91,-383.78"/>
<text text-anchor="middle" x="441.5" y="-482.8" font-family="Arial" font-size="14.00">absolute/root_local_device</text>
</g>
<!-- handle_unc -->
<g id="node10" class="node">
<title>handle_unc</title>
<path fill="none" stroke="black" d="M304,-374C304,-374 217,-374 217,-374 211,-374 205,-368 205,-362 205,-362 205,-348 205,-348 205,-342 211,-336 217,-336 217,-336 304,-336 304,-336 310,-336 316,-342 316,-348 316,-348 316,-362 316,-362 316,-368 310,-374 304,-374"/>
<text text-anchor="middle" x="260.5" y="-358.8" font-family="Arial" font-size="14.00">处理UNC路径</text>
<text text-anchor="middle" x="260.5" y="-343.8" font-family="Arial" font-size="14.00">替换为\??\UNC</text>
</g>
<!-- check_path_type&#45;&gt;handle_unc -->
<g id="edge13" class="edge">
<title>check_path_type&#45;&gt;handle_unc</title>
<path fill="none" stroke="black" d="M350.09,-621.61C328.97,-595.24 291.69,-544.31 274.5,-494 262.07,-457.63 259.7,-412.97 259.67,-384.49"/>
<polygon fill="black" stroke="black" points="263.17,-384.45 259.76,-374.42 256.17,-384.39 263.17,-384.45"/>
<text text-anchor="middle" x="315" y="-482.8" font-family="Arial" font-size="14.00">unc_absolute</text>
</g>
<!-- check_relative_success -->
<g id="node8" class="node">
<title>check_relative_success</title>
<path fill="none" stroke="black" d="M585.5,-461C585.5,-461 493.5,-461 493.5,-461 487.5,-461 481.5,-455 481.5,-449 481.5,-449 481.5,-437 481.5,-437 481.5,-431 487.5,-425 493.5,-425 493.5,-425 585.5,-425 585.5,-425 591.5,-425 597.5,-431 597.5,-437 597.5,-437 597.5,-449 597.5,-449 597.5,-455 591.5,-461 585.5,-461"/>
<text text-anchor="middle" x="539.5" y="-439.3" font-family="Arial" font-size="14.00">是否成功处理？</text>
</g>
<!-- handle_relative&#45;&gt;check_relative_success -->
<g id="edge14" class="edge">
<title>handle_relative&#45;&gt;check_relative_success</title>
<path fill="none" stroke="black" d="M514.59,-511.73C518.56,-506.27 522.55,-500.11 525.5,-494 528.95,-486.85 531.68,-478.71 533.78,-471.11"/>
<polygon fill="black" stroke="black" points="537.22,-471.76 536.26,-461.2 530.43,-470.05 537.22,-471.76"/>
</g>
<!-- check_relative_success&#45;&gt;handle_absolute -->
<g id="edge16" class="edge">
<title>check_relative_success&#45;&gt;handle_absolute</title>
<path fill="none" stroke="black" d="M481.22,-434.66C447.3,-429.08 409.17,-420.1 398.5,-407 393.23,-400.53 391.57,-391.91 391.57,-383.6"/>
<polygon fill="black" stroke="black" points="395.08,-383.67 392.32,-373.43 388.09,-383.15 395.08,-383.67"/>
<text text-anchor="middle" x="487" y="-395.8" font-family="Arial" font-size="14.00">失败（TooManyParentDirs）</text>
</g>
<!-- check_relative_success&#45;&gt;finalize_path -->
<g id="edge15" class="edge">
<title>check_relative_success&#45;&gt;finalize_path</title>
<path fill="none" stroke="black" d="M561,-424.73C566.37,-419.52 571.69,-413.45 575.5,-407 587.46,-386.76 589.5,-379.51 589.5,-356 589.5,-356 589.5,-356 589.5,-179 589.5,-123.2 522.07,-103.27 466.31,-96.33"/>
<polygon fill="black" stroke="black" points="466.38,-92.82 456.05,-95.18 465.6,-99.78 466.38,-92.82"/>
<text text-anchor="middle" x="604" y="-263.3" font-family="Arial" font-size="14.00">成功</text>
</g>
<!-- handle_absolute&#45;&gt;call_rtl -->
<g id="edge17" class="edge">
<title>handle_absolute&#45;&gt;call_rtl</title>
<path fill="none" stroke="black" d="M355.19,-336.95C330.21,-326.79 297.66,-313.8 268.5,-303 255.29,-298.11 241.04,-293.07 227.49,-288.39"/>
<polygon fill="black" stroke="black" points="228.37,-284.99 217.78,-285.05 226.1,-291.61 228.37,-284.99"/>
<text text-anchor="middle" x="393.5" y="-306.8" font-family="Arial" font-size="14.00">可能需要拼接目录句柄路径</text>
</g>
<!-- handle_absolute&#45;&gt;finalize_path -->
<g id="edge19" class="edge">
<title>handle_absolute&#45;&gt;finalize_path</title>
<path fill="none" stroke="black" d="M456.59,-340.11C467.22,-334.91 476.96,-327.78 483.5,-318 487.2,-312.46 484.84,-309.53 483.5,-303 469.31,-233.87 431.37,-159.39 409.55,-120.4"/>
<polygon fill="black" stroke="black" points="412.35,-118.24 404.37,-111.27 406.26,-121.69 412.35,-118.24"/>
<text text-anchor="middle" x="498.5" y="-219.8" font-family="Arial" font-size="14.00">填充NT前缀</text>
</g>
<!-- handle_unc&#45;&gt;call_rtl -->
<g id="edge18" class="edge">
<title>handle_unc&#45;&gt;call_rtl</title>
<path fill="none" stroke="black" d="M204.6,-337.83C194.77,-332.82 185.48,-326.35 178.5,-318 173.24,-311.71 170.22,-303.51 168.49,-295.57"/>
<polygon fill="black" stroke="black" points="171.91,-294.8 166.9,-285.47 165,-295.89 171.91,-294.8"/>
<text text-anchor="middle" x="221.5" y="-306.8" font-family="Arial" font-size="14.00">特殊偏移处理</text>
</g>
<!-- handle_unc&#45;&gt;finalize_path -->
<g id="edge20" class="edge">
<title>handle_unc&#45;&gt;finalize_path</title>
<path fill="none" stroke="black" d="M269.85,-335.65C292.84,-290.53 352.22,-174.01 379.46,-120.55"/>
<polygon fill="black" stroke="black" points="382.74,-121.83 384.16,-111.33 376.5,-118.65 382.74,-121.83"/>
<text text-anchor="middle" x="374" y="-219.8" font-family="Arial" font-size="14.00">插入UNC标识</text>
</g>
<!-- check_rtl_result -->
<g id="node12" class="node">
<title>check_rtl_result</title>
<path fill="none" stroke="black" d="M205.5,-198C205.5,-198 127.5,-198 127.5,-198 121.5,-198 115.5,-192 115.5,-186 115.5,-186 115.5,-174 115.5,-174 115.5,-168 121.5,-162 127.5,-162 127.5,-162 205.5,-162 205.5,-162 211.5,-162 217.5,-168 217.5,-174 217.5,-174 217.5,-186 217.5,-186 217.5,-192 211.5,-198 205.5,-198"/>
<text text-anchor="middle" x="166.5" y="-176.3" font-family="Arial" font-size="14.00">检查结果长度</text>
</g>
<!-- call_rtl&#45;&gt;check_rtl_result -->
<g id="edge7" class="edge">
<title>call_rtl&#45;&gt;check_rtl_result</title>
<path fill="none" stroke="black" d="M166.5,-248.8C166.5,-237.16 166.5,-221.55 166.5,-208.24"/>
<polygon fill="black" stroke="black" points="170,-208.18 166.5,-198.18 163,-208.18 170,-208.18"/>
</g>
<!-- handle_error -->
<g id="node13" class="node">
<title>handle_error</title>
<path fill="none" stroke="black" d="M284.5,-111C284.5,-111 102.5,-111 102.5,-111 96.5,-111 90.5,-105 90.5,-99 90.5,-99 90.5,-85 90.5,-85 90.5,-79 96.5,-73 102.5,-73 102.5,-73 284.5,-73 284.5,-73 290.5,-73 296.5,-79 296.5,-85 296.5,-85 296.5,-99 296.5,-99 296.5,-105 290.5,-111 284.5,-111"/>
<text text-anchor="middle" x="193.5" y="-95.8" font-family="Arial" font-size="14.00">返回错误</text>
<text text-anchor="middle" x="193.5" y="-80.8" font-family="Arial" font-size="14.00">(BadPathName/NameTooLong)</text>
</g>
<!-- check_rtl_result&#45;&gt;handle_error -->
<g id="edge8" class="edge">
<title>check_rtl_result&#45;&gt;handle_error</title>
<path fill="none" stroke="black" d="M115.5,-169.78C86.4,-162.15 58.45,-149.22 73.5,-129 76.91,-124.42 80.88,-120.4 85.26,-116.87"/>
<polygon fill="black" stroke="black" points="87.39,-119.66 93.56,-111.05 83.37,-113.93 87.39,-119.66"/>
<text text-anchor="middle" x="117.5" y="-132.8" font-family="Arial" font-size="14.00">长度=0或溢出</text>
</g>
<!-- check_rtl_result&#45;&gt;finalize_path -->
<g id="edge9" class="edge">
<title>check_rtl_result&#45;&gt;finalize_path</title>
<path fill="none" stroke="black" d="M168.26,-161.58C170.32,-150.57 174.79,-136.95 184.5,-129 205.53,-111.77 278.73,-115.73 305.5,-111 310.46,-110.12 315.57,-109.18 320.71,-108.21"/>
<polygon fill="black" stroke="black" points="321.45,-111.63 330.61,-106.29 320.12,-104.76 321.45,-111.63"/>
<text text-anchor="middle" x="229.5" y="-132.8" font-family="Arial" font-size="14.00">替换为NT前缀</text>
</g>
<!-- end -->
<g id="node15" class="node">
<title>end</title>
<path fill="none" stroke="black" d="M328,-36C328,-36 241,-36 241,-36 235,-36 229,-30 229,-24 229,-24 229,-12 229,-12 229,-6 235,0 241,0 241,0 328,0 328,0 334,0 340,-6 340,-12 340,-12 340,-24 340,-24 340,-30 334,-36 328,-36"/>
<text text-anchor="middle" x="284.5" y="-14.3" font-family="Arial" font-size="14.00">返回PathSpace</text>
</g>
<!-- handle_error&#45;&gt;end -->
<g id="edge22" class="edge">
<title>handle_error&#45;&gt;end</title>
<path fill="none" stroke="black" d="M216.46,-72.83C228.12,-63.6 242.43,-52.29 254.91,-42.41"/>
<polygon fill="black" stroke="black" points="257.13,-45.12 262.8,-36.17 252.78,-39.63 257.13,-45.12"/>
</g>
<!-- finalize_path&#45;&gt;end -->
<g id="edge21" class="edge">
<title>finalize_path&#45;&gt;end</title>
<path fill="none" stroke="black" d="M365.99,-72.83C351.76,-63.43 334.24,-51.86 319.09,-41.85"/>
<polygon fill="black" stroke="black" points="320.77,-38.76 310.5,-36.17 316.91,-44.6 320.77,-38.76"/>
</g>
</g>
</svg>
