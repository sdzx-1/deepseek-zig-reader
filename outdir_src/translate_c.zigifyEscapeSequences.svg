<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: flowchart Pages: 1 -->
<svg width="782pt" height="844pt"
 viewBox="0.00 0.00 782.43 844.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 840)">
<title>flowchart</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-840 778.43,-840 778.43,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<polygon fill="none" stroke="black" points="690.43,-836 636.43,-836 636.43,-800 690.43,-800 690.43,-836"/>
<text text-anchor="middle" x="663.43" y="-814.9" font-family="Courier,monospace" font-size="12.00">开始</text>
</g>
<!-- find_quote -->
<g id="node2" class="node">
<title>find_quote</title>
<polygon fill="none" stroke="black" points="731.93,-763 594.93,-763 594.93,-727 731.93,-727 731.93,-763"/>
<text text-anchor="middle" x="663.43" y="-741.9" font-family="Courier,monospace" font-size="12.00">跳过前导引号或单引号</text>
</g>
<!-- start&#45;&gt;find_quote -->
<g id="edge1" class="edge">
<title>start&#45;&gt;find_quote</title>
<path fill="none" stroke="black" d="M663.43,-799.81C663.43,-791.79 663.43,-782.05 663.43,-773.07"/>
<polygon fill="black" stroke="black" points="666.93,-773.03 663.43,-763.03 659.93,-773.03 666.93,-773.03"/>
</g>
<!-- check_escape -->
<g id="node3" class="node">
<title>check_escape</title>
<polygon fill="none" stroke="black" points="755.93,-690 570.93,-690 570.93,-654 755.93,-654 755.93,-690"/>
<text text-anchor="middle" x="663.43" y="-668.9" font-family="Courier,monospace" font-size="12.00">检查是否存在转义字符或制表符</text>
</g>
<!-- find_quote&#45;&gt;check_escape -->
<g id="edge2" class="edge">
<title>find_quote&#45;&gt;check_escape</title>
<path fill="none" stroke="black" d="M663.43,-726.81C663.43,-718.79 663.43,-709.05 663.43,-700.07"/>
<polygon fill="black" stroke="black" points="666.93,-700.03 663.43,-690.03 659.93,-700.03 666.93,-700.03"/>
</g>
<!-- alloc_mem -->
<g id="node4" class="node">
<title>alloc_mem</title>
<polygon fill="none" stroke="black" points="686.43,-607 492.43,-607 492.43,-571 686.43,-571 686.43,-607"/>
<text text-anchor="middle" x="589.43" y="-585.9" font-family="Courier,monospace" font-size="12.00">分配内存（source.len * 2）</text>
</g>
<!-- check_escape&#45;&gt;alloc_mem -->
<g id="edge3" class="edge">
<title>check_escape&#45;&gt;alloc_mem</title>
<path fill="none" stroke="black" d="M647.73,-653.82C637.33,-642.44 623.53,-627.33 611.96,-614.66"/>
<polygon fill="black" stroke="black" points="614.43,-612.18 605.1,-607.15 609.26,-616.9 614.43,-612.18"/>
<text text-anchor="middle" x="660.93" y="-628" font-family="Courier,monospace" font-size="10.00">存在转义字符</text>
</g>
<!-- return_result -->
<g id="node14" class="node">
<title>return_result</title>
<polygon fill="none" stroke="black" points="754.93,-285 631.93,-285 631.93,-249 754.93,-249 754.93,-285"/>
<text text-anchor="middle" x="693.43" y="-263.9" font-family="Courier,monospace" font-size="12.00">返回bytes[0..i]</text>
</g>
<!-- check_escape&#45;&gt;return_result -->
<g id="edge4" class="edge">
<title>check_escape&#45;&gt;return_result</title>
<path fill="none" stroke="black" d="M687.22,-653.91C704.71,-639.19 725.43,-616.21 725.43,-590 725.43,-590 725.43,-590 725.43,-349 725.43,-329.72 717.49,-309.54 709.52,-294.15"/>
<polygon fill="black" stroke="black" points="712.5,-292.32 704.62,-285.24 706.37,-295.69 712.5,-292.32"/>
<text text-anchor="middle" x="749.93" y="-472" font-family="Courier,monospace" font-size="10.00">无转义字符</text>
</g>
<!-- init_state -->
<g id="node5" class="node">
<title>init_state</title>
<polygon fill="none" stroke="black" points="587.43,-534 461.43,-534 461.43,-498 587.43,-498 587.43,-534"/>
<text text-anchor="middle" x="524.43" y="-512.9" font-family="Courier,monospace" font-size="12.00">初始化状态为start</text>
</g>
<!-- alloc_mem&#45;&gt;init_state -->
<g id="edge5" class="edge">
<title>alloc_mem&#45;&gt;init_state</title>
<path fill="none" stroke="black" d="M573.69,-570.81C565.63,-562 555.67,-551.13 546.82,-541.46"/>
<polygon fill="black" stroke="black" points="549.35,-539.04 540.02,-534.03 544.19,-543.77 549.35,-539.04"/>
</g>
<!-- loop_start -->
<g id="node6" class="node">
<title>loop_start</title>
<polygon fill="none" stroke="black" points="498.43,-451 364.43,-451 364.43,-415 498.43,-415 498.43,-451"/>
<text text-anchor="middle" x="431.43" y="-429.9" font-family="Courier,monospace" font-size="12.00">遍历source每个字符</text>
</g>
<!-- init_state&#45;&gt;loop_start -->
<g id="edge6" class="edge">
<title>init_state&#45;&gt;loop_start</title>
<path fill="none" stroke="black" d="M504.7,-497.82C491.39,-486.22 473.63,-470.75 458.93,-457.95"/>
<polygon fill="black" stroke="black" points="460.96,-455.08 451.12,-451.15 456.36,-460.36 460.96,-455.08"/>
</g>
<!-- handle_state -->
<g id="node7" class="node">
<title>handle_state</title>
<polygon fill="none" stroke="black" points="330.93,-368 241.93,-368 241.93,-332 330.93,-332 330.93,-368"/>
<text text-anchor="middle" x="286.43" y="-346.9" font-family="Courier,monospace" font-size="12.00">处理当前状态</text>
</g>
<!-- loop_start&#45;&gt;handle_state -->
<g id="edge7" class="edge">
<title>loop_start&#45;&gt;handle_state</title>
<path fill="none" stroke="black" d="M399.26,-414.91C388.76,-409.27 377.07,-402.92 366.43,-397 352.67,-389.34 337.67,-380.78 324.43,-373.14"/>
<polygon fill="black" stroke="black" points="325.98,-369.99 315.57,-368.02 322.48,-376.05 325.98,-369.99"/>
<text text-anchor="middle" x="389.43" y="-389" font-family="Courier,monospace" font-size="10.00">处理字符c</text>
</g>
<!-- final_format -->
<g id="node13" class="node">
<title>final_format</title>
<polygon fill="none" stroke="black" points="697.43,-368 541.43,-368 541.43,-332 697.43,-332 697.43,-368"/>
<text text-anchor="middle" x="619.43" y="-346.9" font-family="Courier,monospace" font-size="12.00">处理未完成的hex/octal</text>
</g>
<!-- loop_start&#45;&gt;final_format -->
<g id="edge22" class="edge">
<title>loop_start&#45;&gt;final_format</title>
<path fill="none" stroke="black" d="M481.68,-414.9C496.55,-409.52 512.76,-403.31 527.43,-397 544.43,-389.68 562.75,-380.74 578.53,-372.7"/>
<polygon fill="black" stroke="black" points="580.2,-375.78 587.49,-368.09 577,-369.55 580.2,-375.78"/>
<text text-anchor="middle" x="571.43" y="-389" font-family="Courier,monospace" font-size="10.00">循环结束</text>
</g>
<!-- handle_escape -->
<g id="node8" class="node">
<title>handle_escape</title>
<polygon fill="none" stroke="black" points="412.93,-202 323.93,-202 323.93,-166 412.93,-166 412.93,-202"/>
<text text-anchor="middle" x="368.43" y="-180.9" font-family="Courier,monospace" font-size="12.00">处理转义字符</text>
</g>
<!-- handle_state&#45;&gt;handle_escape -->
<g id="edge8" class="edge">
<title>handle_state&#45;&gt;handle_escape</title>
<path fill="none" stroke="black" d="M284.25,-331.67C282.44,-310.85 282,-275.41 295.43,-249 303.65,-232.83 317.87,-218.94 331.58,-208.27"/>
<polygon fill="black" stroke="black" points="334.04,-210.81 340,-202.06 329.88,-205.18 334.04,-210.81"/>
<text text-anchor="middle" x="331.93" y="-264.5" font-family="Courier,monospace" font-size="10.00">state=escape</text>
</g>
<!-- handle_hex -->
<g id="node9" class="node">
<title>handle_hex</title>
<polygon fill="none" stroke="black" points="249.93,-285 136.93,-285 136.93,-249 249.93,-249 249.93,-285"/>
<text text-anchor="middle" x="193.43" y="-263.9" font-family="Courier,monospace" font-size="12.00">处理十六进制转义</text>
</g>
<!-- handle_state&#45;&gt;handle_hex -->
<g id="edge10" class="edge">
<title>handle_state&#45;&gt;handle_hex</title>
<path fill="none" stroke="black" d="M242.47,-331.87C233.48,-327.02 224.59,-321.08 217.43,-314 211.88,-308.51 207.34,-301.47 203.76,-294.56"/>
<polygon fill="black" stroke="black" points="206.87,-292.95 199.46,-285.37 200.52,-295.91 206.87,-292.95"/>
<text text-anchor="middle" x="244.93" y="-306" font-family="Courier,monospace" font-size="10.00">state=hex</text>
</g>
<!-- handle_octal -->
<g id="node10" class="node">
<title>handle_octal</title>
<polygon fill="none" stroke="black" points="116.93,-285 15.93,-285 15.93,-249 116.93,-249 116.93,-285"/>
<text text-anchor="middle" x="66.43" y="-263.9" font-family="Courier,monospace" font-size="12.00">处理八进制转义</text>
</g>
<!-- handle_state&#45;&gt;handle_octal -->
<g id="edge11" class="edge">
<title>handle_state&#45;&gt;handle_octal</title>
<path fill="none" stroke="black" d="M241.81,-342.48C211.78,-337.13 171.74,-328.1 138.43,-314 124.25,-308 109.73,-299.3 97.48,-291.08"/>
<polygon fill="black" stroke="black" points="99.21,-288.03 89,-285.22 95.24,-293.79 99.21,-288.03"/>
<text text-anchor="middle" x="171.93" y="-306" font-family="Courier,monospace" font-size="10.00">state=octal</text>
</g>
<!-- handle_start -->
<g id="node15" class="node">
<title>handle_start</title>
<polygon fill="none" stroke="black" points="484.93,-285 377.93,-285 377.93,-249 484.93,-249 484.93,-285"/>
<text text-anchor="middle" x="431.43" y="-263.9" font-family="Courier,monospace" font-size="12.00">handle_start</text>
</g>
<!-- handle_state&#45;&gt;handle_start -->
<g id="edge9" class="edge">
<title>handle_state&#45;&gt;handle_start</title>
<path fill="none" stroke="black" d="M305.66,-331.8C316.75,-322.46 331.26,-311.19 345.43,-303 354.11,-297.98 363.66,-293.33 373.14,-289.16"/>
<polygon fill="black" stroke="black" points="374.71,-292.3 382.55,-285.17 371.98,-285.85 374.71,-292.3"/>
<text text-anchor="middle" x="378.93" y="-306" font-family="Courier,monospace" font-size="10.00">state=start</text>
</g>
<!-- handle_escape&#45;&gt;loop_start -->
<g id="edge15" class="edge">
<title>handle_escape&#45;&gt;loop_start</title>
<path fill="none" stroke="black" d="M413.06,-194.59C441.83,-203.41 476.86,-219.72 493.43,-249 508.96,-276.44 501.82,-349.94 494.43,-368 488.03,-383.62 475.77,-397.48 463.76,-408.27"/>
<polygon fill="black" stroke="black" points="461.31,-405.76 455.96,-414.9 465.84,-411.09 461.31,-405.76"/>
<text text-anchor="middle" x="532.93" y="-306" font-family="Courier,monospace" font-size="10.00">完成转义处理</text>
</g>
<!-- error_handling -->
<g id="node12" class="node">
<title>error_handling</title>
<polygon fill="none" stroke="black" points="295.93,-119 230.93,-119 230.93,-83 295.93,-83 295.93,-119"/>
<text text-anchor="middle" x="263.43" y="-97.9" font-family="Courier,monospace" font-size="12.00">错误处理</text>
</g>
<!-- handle_escape&#45;&gt;error_handling -->
<g id="edge14" class="edge">
<title>handle_escape&#45;&gt;error_handling</title>
<path fill="none" stroke="black" d="M346.16,-165.82C330.99,-154.12 310.7,-138.47 294.02,-125.6"/>
<polygon fill="black" stroke="black" points="295.72,-122.49 285.66,-119.15 291.44,-128.03 295.72,-122.49"/>
<text text-anchor="middle" x="367.93" y="-140" font-family="Courier,monospace" font-size="10.00">未知转义或unicode</text>
</g>
<!-- format_num -->
<g id="node11" class="node">
<title>format_num</title>
<polygon fill="none" stroke="black" points="175.93,-202 50.93,-202 50.93,-166 175.93,-166 175.93,-202"/>
<text text-anchor="middle" x="113.43" y="-180.9" font-family="Courier,monospace" font-size="12.00">格式化数字到缓冲区</text>
</g>
<!-- handle_hex&#45;&gt;format_num -->
<g id="edge16" class="edge">
<title>handle_hex&#45;&gt;format_num</title>
<path fill="none" stroke="black" d="M181.33,-248.6C174.73,-239.64 166.14,-228.78 157.43,-220 153.56,-216.1 149.27,-212.23 144.93,-208.55"/>
<polygon fill="black" stroke="black" points="147.09,-205.81 137.13,-202.2 142.67,-211.23 147.09,-205.81"/>
<text text-anchor="middle" x="201.93" y="-223" font-family="Courier,monospace" font-size="10.00">非十六进制字符</text>
</g>
<!-- handle_hex&#45;&gt;error_handling -->
<g id="edge17" class="edge">
<title>handle_hex&#45;&gt;error_handling</title>
<path fill="none" stroke="black" d="M223.46,-248.93C229.95,-243.94 236.15,-237.92 240.43,-231 259.64,-199.91 263.8,-157.03 264.23,-129.41"/>
<polygon fill="black" stroke="black" points="267.73,-129.28 264.23,-119.28 260.73,-129.28 267.73,-129.28"/>
<text text-anchor="middle" x="272.43" y="-181.5" font-family="Courier,monospace" font-size="10.00">溢出</text>
</g>
<!-- handle_octal&#45;&gt;format_num -->
<g id="edge18" class="edge">
<title>handle_octal&#45;&gt;format_num</title>
<path fill="none" stroke="black" d="M51.2,-248.85C45.21,-239.96 40.92,-229.09 46.43,-220 49.12,-215.55 52.59,-211.65 56.52,-208.22"/>
<polygon fill="black" stroke="black" points="58.66,-210.98 64.57,-202.19 54.47,-205.38 58.66,-210.98"/>
<text text-anchor="middle" x="101.93" y="-223" font-family="Courier,monospace" font-size="10.00">非八进制字符或count=3</text>
</g>
<!-- handle_octal&#45;&gt;error_handling -->
<g id="edge19" class="edge">
<title>handle_octal&#45;&gt;error_handling</title>
<path fill="none" stroke="black" d="M48.27,-248.78C28.32,-227.75 1.57,-191.8 21.43,-166 45.6,-134.6 158.12,-115.46 220.86,-107.05"/>
<polygon fill="black" stroke="black" points="221.39,-110.51 230.86,-105.74 220.49,-103.57 221.39,-110.51"/>
<text text-anchor="middle" x="31.43" y="-181.5" font-family="Courier,monospace" font-size="10.00">溢出</text>
</g>
<!-- format_num&#45;&gt;loop_start -->
<g id="edge20" class="edge">
<title>format_num&#45;&gt;loop_start</title>
<path fill="none" stroke="black" d="M70.84,-202.05C31.66,-220.34 -17.08,-251.33 6.43,-285 84.63,-397.03 254.5,-424.59 354.18,-430.81"/>
<polygon fill="black" stroke="black" points="354.01,-434.31 364.2,-431.38 354.41,-427.32 354.01,-434.31"/>
</g>
<!-- return_error -->
<g id="node16" class="node">
<title>return_error</title>
<ellipse fill="none" stroke="black" cx="263.43" cy="-18" rx="40.03" ry="18"/>
<text text-anchor="middle" x="263.43" y="-14.9" font-family="Courier,monospace" font-size="12.00">返回错误</text>
</g>
<!-- error_handling&#45;&gt;return_error -->
<g id="edge21" class="edge">
<title>error_handling&#45;&gt;return_error</title>
<path fill="none" stroke="black" d="M263.43,-82.82C263.43,-72.19 263.43,-58.31 263.43,-46.2"/>
<polygon fill="black" stroke="black" points="266.93,-46.15 263.43,-36.15 259.93,-46.15 266.93,-46.15"/>
<text text-anchor="middle" x="283.43" y="-57" font-family="Courier,monospace" font-size="10.00">返回错误</text>
</g>
<!-- final_format&#45;&gt;return_result -->
<g id="edge23" class="edge">
<title>final_format&#45;&gt;return_result</title>
<path fill="none" stroke="black" d="M635.12,-331.82C645.52,-320.44 659.33,-305.33 670.89,-292.66"/>
<polygon fill="black" stroke="black" points="673.6,-294.9 677.76,-285.15 668.43,-290.18 673.6,-294.9"/>
</g>
<!-- handle_start&#45;&gt;loop_start -->
<g id="edge12" class="edge">
<title>handle_start&#45;&gt;loop_start</title>
<path fill="none" stroke="black" d="M431.43,-285.01C431.43,-313.35 431.43,-370.48 431.43,-404.57"/>
<polygon fill="black" stroke="black" points="427.93,-404.76 431.43,-414.76 434.93,-404.76 427.93,-404.76"/>
<text text-anchor="middle" x="460.93" y="-347.5" font-family="Courier,monospace" font-size="10.00">处理普通字符</text>
</g>
<!-- handle_start&#45;&gt;handle_escape -->
<g id="edge13" class="edge">
<title>handle_start&#45;&gt;handle_escape</title>
<path fill="none" stroke="black" d="M418.07,-248.82C409.38,-237.65 397.9,-222.9 388.17,-210.38"/>
<polygon fill="black" stroke="black" points="390.67,-207.9 381.77,-202.15 385.15,-212.2 390.67,-207.9"/>
<text text-anchor="middle" x="423.43" y="-223" font-family="Courier,monospace" font-size="10.00">遇到&#39;\&#39;</text>
</g>
</g>
</svg>
