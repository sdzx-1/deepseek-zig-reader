<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: flowchart Pages: 1 -->
<svg width="505pt" height="753pt"
 viewBox="0.00 0.00 505.00 753.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 749)">
<title>flowchart</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-749 501,-749 501,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<polygon fill="none" stroke="black" points="141.5,-745 28.5,-745 28.5,-709 141.5,-709 141.5,-745"/>
<text text-anchor="middle" x="85" y="-724.5" font-family="Courier,monospace" font-size="10.00">开始 airAtomicRmw</text>
</g>
<!-- check_unused -->
<g id="node2" class="node">
<title>check_unused</title>
<polygon fill="none" stroke="black" points="170,-672 0,-672 0,-636 170,-636 170,-672"/>
<text text-anchor="middle" x="85" y="-651.5" font-family="Courier,monospace" font-size="10.00">检查指令是否未使用 (isUnused)</text>
</g>
<!-- start&#45;&gt;check_unused -->
<g id="edge1" class="edge">
<title>start&#45;&gt;check_unused</title>
<path fill="none" stroke="black" d="M85,-708.81C85,-700.79 85,-691.05 85,-682.07"/>
<polygon fill="black" stroke="black" points="88.5,-682.03 85,-672.03 81.5,-682.03 88.5,-682.03"/>
</g>
<!-- return_unreach -->
<g id="node3" class="node">
<title>return_unreach</title>
<polygon fill="none" stroke="black" points="114,-535 24,-535 24,-499 114,-499 114,-535"/>
<text text-anchor="middle" x="69" y="-514.5" font-family="Courier,monospace" font-size="10.00">返回 .unreach</text>
</g>
<!-- check_unused&#45;&gt;return_unreach -->
<g id="edge2" class="edge">
<title>check_unused&#45;&gt;return_unreach</title>
<path fill="none" stroke="black" d="M82.97,-635.9C80.27,-613.1 75.46,-572.48 72.25,-545.39"/>
<polygon fill="black" stroke="black" points="75.71,-544.9 71.06,-535.39 68.76,-545.73 75.71,-544.9"/>
<text text-anchor="middle" x="86" y="-610" font-family="Courier,monospace" font-size="10.00">是</text>
</g>
<!-- get_op_order -->
<g id="node4" class="node">
<title>get_op_order</title>
<polygon fill="none" stroke="black" points="287,-589 97,-589 97,-553 287,-553 287,-589"/>
<text text-anchor="middle" x="192" y="-568.5" font-family="Courier,monospace" font-size="10.00">获取操作类型(op)和内存顺序(order)</text>
</g>
<!-- check_unused&#45;&gt;get_op_order -->
<g id="edge3" class="edge">
<title>check_unused&#45;&gt;get_op_order</title>
<path fill="none" stroke="black" d="M107.69,-635.82C123.3,-624.01 144.21,-608.18 161.3,-595.24"/>
<polygon fill="black" stroke="black" points="163.48,-597.98 169.34,-589.15 159.26,-592.4 163.48,-597.98"/>
<text text-anchor="middle" x="150" y="-610" font-family="Courier,monospace" font-size="10.00">否</text>
</g>
<!-- end -->
<g id="node13" class="node">
<title>end</title>
<polygon fill="none" stroke="black" points="196,-36 142,-36 142,0 196,0 196,-36"/>
<text text-anchor="middle" x="169" y="-15.5" font-family="Courier,monospace" font-size="10.00">结束</text>
</g>
<!-- return_unreach&#45;&gt;end -->
<g id="edge15" class="edge">
<title>return_unreach&#45;&gt;end</title>
<path fill="none" stroke="black" d="M69,-498.77C69,-480.01 69,-449.12 69,-422.5 69,-422.5 69,-422.5 69,-90 69,-57.91 103.67,-38.99 132.18,-28.86"/>
<polygon fill="black" stroke="black" points="133.54,-32.1 141.94,-25.64 131.35,-25.45 133.54,-32.1"/>
</g>
<!-- check_val_size_power2 -->
<g id="node5" class="node">
<title>check_val_size_power2</title>
<polygon fill="none" stroke="black" points="271,-481 113,-481 113,-445 271,-445 271,-481"/>
<text text-anchor="middle" x="192" y="-460.5" font-family="Courier,monospace" font-size="10.00">检查val_size是否为2的幂次方</text>
</g>
<!-- get_op_order&#45;&gt;check_val_size_power2 -->
<g id="edge4" class="edge">
<title>get_op_order&#45;&gt;check_val_size_power2</title>
<path fill="none" stroke="black" d="M192,-552.97C192,-536.38 192,-510.88 192,-491.43"/>
<polygon fill="black" stroke="black" points="195.5,-491.34 192,-481.34 188.5,-491.34 195.5,-491.34"/>
</g>
<!-- error_size -->
<g id="node6" class="node">
<title>error_size</title>
<polygon fill="none" stroke="black" points="216,-344 84,-344 84,-308 216,-308 216,-344"/>
<text text-anchor="middle" x="150" y="-323.5" font-family="Courier,monospace" font-size="10.00">报错: TODO non&#45;pow 2</text>
</g>
<!-- check_val_size_power2&#45;&gt;error_size -->
<g id="edge5" class="edge">
<title>check_val_size_power2&#45;&gt;error_size</title>
<path fill="none" stroke="black" d="M185.36,-444.75C180.54,-431.94 174.01,-414 169,-398 164.49,-383.59 160.09,-367.32 156.66,-354"/>
<polygon fill="black" stroke="black" points="159.99,-352.88 154.14,-344.04 153.2,-354.6 159.99,-352.88"/>
<text text-anchor="middle" x="183" y="-419" font-family="Courier,monospace" font-size="10.00">否</text>
</g>
<!-- check_type_support -->
<g id="node7" class="node">
<title>check_type_support</title>
<polygon fill="none" stroke="black" points="329.5,-398 178.5,-398 178.5,-362 329.5,-362 329.5,-398"/>
<text text-anchor="middle" x="254" y="-377.5" font-family="Courier,monospace" font-size="10.00">检查类型支持 (int/enum等)</text>
</g>
<!-- check_val_size_power2&#45;&gt;check_type_support -->
<g id="edge6" class="edge">
<title>check_val_size_power2&#45;&gt;check_type_support</title>
<path fill="none" stroke="black" d="M205.15,-444.82C213.7,-433.65 224.99,-418.9 234.57,-406.38"/>
<polygon fill="black" stroke="black" points="237.57,-408.22 240.87,-398.15 232.01,-403.97 237.57,-408.22"/>
<text text-anchor="middle" x="231" y="-419" font-family="Courier,monospace" font-size="10.00">是</text>
</g>
<!-- error_size&#45;&gt;end -->
<g id="edge13" class="edge">
<title>error_size&#45;&gt;end</title>
<path fill="none" stroke="red" stroke-dasharray="5,2" d="M150,-307.74C150,-286.76 150,-250.28 150,-219 150,-219 150,-219 150,-90 150,-75.1 153.95,-59.02 158.25,-45.93"/>
<polygon fill="red" stroke="red" points="161.67,-46.76 161.71,-36.16 155.08,-44.43 161.67,-46.76"/>
</g>
<!-- error_type -->
<g id="node8" class="node">
<title>error_type</title>
<polygon fill="none" stroke="black" points="303.5,-236 166.5,-236 166.5,-200 303.5,-200 303.5,-236"/>
<text text-anchor="middle" x="235" y="-215.5" font-family="Courier,monospace" font-size="10.00">报错: TODO 不支持的类型</text>
</g>
<!-- check_type_support&#45;&gt;error_type -->
<g id="edge7" class="edge">
<title>check_type_support&#45;&gt;error_type</title>
<path fill="none" stroke="black" d="M250.23,-361.97C249.07,-356.28 247.87,-349.89 247,-344 242.04,-310.41 238.67,-271.42 236.8,-246.04"/>
<polygon fill="black" stroke="black" points="240.29,-245.78 236.08,-236.05 233.31,-246.27 240.29,-245.78"/>
<text text-anchor="middle" x="262" y="-323.5" font-family="Courier,monospace" font-size="10.00">不支持</text>
</g>
<!-- choose_method -->
<g id="node9" class="node">
<title>choose_method</title>
<polygon fill="none" stroke="black" points="398.5,-290 267.5,-290 267.5,-254 398.5,-254 398.5,-290"/>
<text text-anchor="middle" x="333" y="-275" font-family="Courier,monospace" font-size="10.00">根据val_size选择方法</text>
<text text-anchor="middle" x="333" y="-264" font-family="Courier,monospace" font-size="10.00">(4/8→amo, 1/2→loop)</text>
</g>
<!-- check_type_support&#45;&gt;choose_method -->
<g id="edge8" class="edge">
<title>check_type_support&#45;&gt;choose_method</title>
<path fill="none" stroke="black" d="M266.69,-361.97C279.46,-344.84 299.3,-318.22 313.95,-298.56"/>
<polygon fill="black" stroke="black" points="316.91,-300.45 320.08,-290.34 311.29,-296.27 316.91,-300.45"/>
<text text-anchor="middle" x="315" y="-323.5" font-family="Courier,monospace" font-size="10.00">支持</text>
</g>
<!-- error_type&#45;&gt;end -->
<g id="edge14" class="edge">
<title>error_type&#45;&gt;end</title>
<path fill="none" stroke="red" stroke-dasharray="5,2" d="M219.42,-199.8C215.2,-194.41 210.98,-188.23 208,-182 186.6,-137.23 176.4,-79.77 171.98,-46.4"/>
<polygon fill="red" stroke="red" points="175.45,-45.95 170.74,-36.46 168.51,-46.81 175.45,-45.95"/>
</g>
<!-- handle_amo -->
<g id="node10" class="node">
<title>handle_amo</title>
<polygon fill="none" stroke="black" points="339.5,-182 216.5,-182 216.5,-146 339.5,-146 339.5,-182"/>
<text text-anchor="middle" x="278" y="-167" font-family="Courier,monospace" font-size="10.00">处理AMO方法</text>
<text text-anchor="middle" x="278" y="-156" font-family="Courier,monospace" font-size="10.00">生成对应mnemonic指令</text>
</g>
<!-- choose_method&#45;&gt;handle_amo -->
<g id="edge9" class="edge">
<title>choose_method&#45;&gt;handle_amo</title>
<path fill="none" stroke="black" d="M327.72,-253.75C322.84,-238.97 314.88,-217.4 305,-200 303.15,-196.74 301.02,-193.45 298.79,-190.25"/>
<polygon fill="black" stroke="black" points="301.52,-188.07 292.75,-182.13 295.9,-192.24 301.52,-188.07"/>
<text text-anchor="middle" x="358" y="-215.5" font-family="Courier,monospace" font-size="10.00">amo (4/8字节)</text>
</g>
<!-- handle_loop -->
<g id="node11" class="node">
<title>handle_loop</title>
<polygon fill="none" stroke="black" points="490,-182 358,-182 358,-146 490,-146 490,-182"/>
<text text-anchor="middle" x="424" y="-167" font-family="Courier,monospace" font-size="10.00">处理LOOP方法</text>
<text text-anchor="middle" x="424" y="-156" font-family="Courier,monospace" font-size="10.00">加载→运算→条件存储→跳转</text>
</g>
<!-- choose_method&#45;&gt;handle_loop -->
<g id="edge10" class="edge">
<title>choose_method&#45;&gt;handle_loop</title>
<path fill="none" stroke="black" d="M376.49,-253.91C384.8,-249.1 392.82,-243.17 399,-236 409.64,-223.65 415.84,-206.48 419.41,-192.12"/>
<polygon fill="black" stroke="black" points="422.85,-192.78 421.57,-182.27 416.01,-191.29 422.85,-192.78"/>
<text text-anchor="middle" x="457" y="-215.5" font-family="Courier,monospace" font-size="10.00">loop (1/2字节)</text>
</g>
<!-- return_result -->
<g id="node12" class="node">
<title>return_result</title>
<polygon fill="none" stroke="black" points="338.5,-109 217.5,-109 217.5,-73 338.5,-73 338.5,-109"/>
<text text-anchor="middle" x="278" y="-88.5" font-family="Courier,monospace" font-size="10.00">返回结果 result_mcv</text>
</g>
<!-- handle_amo&#45;&gt;return_result -->
<g id="edge11" class="edge">
<title>handle_amo&#45;&gt;return_result</title>
<path fill="none" stroke="black" d="M278,-145.81C278,-137.79 278,-128.05 278,-119.07"/>
<polygon fill="black" stroke="black" points="281.5,-119.03 278,-109.03 274.5,-119.03 281.5,-119.03"/>
</g>
<!-- handle_loop&#45;&gt;return_result -->
<g id="edge12" class="edge">
<title>handle_loop&#45;&gt;return_result</title>
<path fill="none" stroke="black" d="M389.03,-145.99C369.04,-136.27 343.78,-123.99 322.4,-113.59"/>
<polygon fill="black" stroke="black" points="323.71,-110.34 313.19,-109.11 320.65,-116.63 323.71,-110.34"/>
</g>
<!-- return_result&#45;&gt;end -->
<g id="edge16" class="edge">
<title>return_result&#45;&gt;end</title>
<path fill="none" stroke="black" d="M251.89,-72.99C237.44,-63.58 219.29,-51.76 203.66,-41.57"/>
<polygon fill="black" stroke="black" points="205.56,-38.64 195.27,-36.11 201.74,-44.5 205.56,-38.64"/>
</g>
</g>
</svg>
