graph TD
    A[开始] --> B[初始化变量]
    B --> C[处理zcu相关逻辑]
    C --> D[处理函数和数据导入]
    D --> E[检查未定义符号]
    E --> F{存在错误?}
    F -->|是| G[返回LinkFailure错误]
    F -->|否| H[合并间接函数表]
    H --> I[处理初始化函数]
    I --> J[合并和排序数据段]
    J --> K[内存布局计算]
    K --> L[设置内存页限制]
    L --> M[处理TLS和全局变量]
    M --> N[生成WASM段]
    N --> O[类型段]
    N --> P[导入段]
    N --> Q[函数段]
    N --> R[表段]
    N --> S[内存段]
    N --> T[全局段]
    N --> U[导出段]
    N --> V[起始段]
    N --> W[元素段]
    N --> X[数据计数段]
    N --> Y[代码段]
    N --> Z[数据段]
    Z --> AA[处理调试信息]
    AA --> AB[生成构建ID]
    AB --> AC[写入二进制文件]
    AC --> AD[结束]
    
    style A fill:#90EE90,stroke:#006400
    style G fill:#FFB6C1,stroke:#8B0000
    style AD fill:#90EE90,stroke:#006400
    
    E -->|检查全局/函数/数据导入| F
    K -->|计算堆/栈/TLS地址| L
    M -->|共享内存处理| N
    Y -->|应用重定位| Z
    Z -->|对象文件特殊处理| AA
