graph TD
    A[开始] --> B[获取pt, zcu, inst_data等上下文信息]
    B --> C[解析目标类型dest_ty和操作数operand]
    C --> D[检查是否可向量化]
    D --> E{操作数是编译时值?}
    E -- 是 --> F[计算编译时结果]
    E -- 否 --> G{目标类型是comptime_int?}
    G -- 是 --> H[报错: 需要编译时值]
    G -- 否 --> I[进入运行时处理]
    I --> J{目标类型位数是否为0?}
    J -- 是 --> K{是否向量类型?}
    K -- 否 --> L[添加0值安全检查]
    K -- 是 --> M[遍历向量元素添加安全检查]
    J -- 否 --> N{支持向量指令?}
    N -- 是 --> O[生成向量化转换指令]
    O --> P[添加舍入误差安全检查]
    N -- 否 --> Q[遍历向量元素逐个转换]
    Q --> R[对每个元素添加安全检查]
    R --> S[聚合结果]
    F --> T[返回编译时结果]
    L --> T
    M --> T
    P --> T
    S --> T
    H --> U[结束]
    T --> U
