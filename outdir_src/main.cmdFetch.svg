<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: flowchart Pages: 1 -->
<svg width="288pt" height="1255pt"
 viewBox="0.00 0.00 288.00 1255.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1251)">
<title>flowchart</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-1251 284,-1251 284,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_main</title>
<polygon fill="none" stroke="black" points="8,-8 8,-1239 272,-1239 272,-8 8,-8"/>
<text text-anchor="middle" x="140" y="-1223.8" font-family="Times,serif" font-size="14.00">cmdFetch 流程图</text>
</g>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<ellipse fill="none" stroke="black" cx="122" cy="-1190" rx="29.5" ry="18"/>
<text text-anchor="middle" x="122" y="-1186.3" font-family="Times,serif" font-size="14.00">开始</text>
</g>
<!-- init_check -->
<g id="node3" class="node">
<title>init_check</title>
<path fill="none" stroke="black" d="M216,-1135C216,-1135 28,-1135 28,-1135 22,-1135 16,-1129 16,-1123 16,-1123 16,-1109 16,-1109 16,-1103 22,-1097 28,-1097 28,-1097 216,-1097 216,-1097 222,-1097 228,-1103 228,-1109 228,-1109 228,-1123 228,-1123 228,-1129 222,-1135 216,-1135"/>
<text text-anchor="middle" x="122" y="-1119.8" font-family="Times,serif" font-size="14.00">初始化检查</text>
<text text-anchor="middle" x="122" y="-1104.8" font-family="Times,serif" font-size="14.00">dev.check(.fetch_command)</text>
</g>
<!-- start&#45;&gt;init_check -->
<g id="edge1" class="edge">
<title>start&#45;&gt;init_check</title>
<path fill="none" stroke="black" d="M122,-1171.94C122,-1163.99 122,-1154.31 122,-1145.31"/>
<polygon fill="black" stroke="black" points="125.5,-1145.2 122,-1135.2 118.5,-1145.2 125.5,-1145.2"/>
</g>
<!-- end -->
<g id="node2" class="node">
<title>end</title>
<ellipse fill="none" stroke="black" cx="89" cy="-34" rx="29.5" ry="18"/>
<text text-anchor="middle" x="89" y="-30.3" font-family="Times,serif" font-size="14.00">退出</text>
</g>
<!-- parse_args -->
<g id="node4" class="node">
<title>parse_args</title>
<path fill="none" stroke="black" d="M172.5,-1060C172.5,-1060 65.5,-1060 65.5,-1060 59.5,-1060 53.5,-1054 53.5,-1048 53.5,-1048 53.5,-1034 53.5,-1034 53.5,-1028 59.5,-1022 65.5,-1022 65.5,-1022 172.5,-1022 172.5,-1022 178.5,-1022 184.5,-1028 184.5,-1034 184.5,-1034 184.5,-1048 184.5,-1048 184.5,-1054 178.5,-1060 172.5,-1060"/>
<text text-anchor="middle" x="119" y="-1044.8" font-family="Times,serif" font-size="14.00">解析命令行参数</text>
<text text-anchor="middle" x="119" y="-1029.8" font-family="Times,serif" font-size="14.00">循环处理每个参数</text>
</g>
<!-- init_check&#45;&gt;parse_args -->
<g id="edge2" class="edge">
<title>init_check&#45;&gt;parse_args</title>
<path fill="none" stroke="black" d="M121.26,-1096.96C120.93,-1088.88 120.53,-1079.18 120.16,-1070.18"/>
<polygon fill="black" stroke="black" points="123.65,-1069.94 119.74,-1060.09 116.66,-1070.23 123.65,-1069.94"/>
</g>
<!-- parse_args&#45;&gt;end -->
<g id="edge16" class="edge">
<title>parse_args&#45;&gt;end</title>
<path fill="none" stroke="black" d="M81.84,-1021.8C62.57,-1010.18 40.84,-993.12 30,-971 22.57,-955.83 29.92,-949.89 30,-933 30.89,-747.66 34,-701.34 34,-516 34,-516 34,-516 34,-107 34,-86.3 48.54,-67.85 62.67,-54.81"/>
<polygon fill="black" stroke="black" points="65.1,-57.33 70.38,-48.14 60.53,-52.04 65.1,-57.33"/>
<text text-anchor="middle" x="71" y="-570.8" font-family="Times,serif" font-size="14.00">致命错误</text>
<text text-anchor="middle" x="71" y="-555.8" font-family="Times,serif" font-size="14.00">fatal() 调用</text>
</g>
<!-- validate_path -->
<g id="node5" class="node">
<title>validate_path</title>
<path fill="none" stroke="black" d="M187,-971C187,-971 51,-971 51,-971 45,-971 39,-965 39,-959 39,-959 39,-945 39,-945 39,-939 45,-933 51,-933 51,-933 187,-933 187,-933 193,-933 199,-939 199,-945 199,-945 199,-959 199,-959 199,-965 193,-971 187,-971"/>
<text text-anchor="middle" x="119" y="-955.8" font-family="Times,serif" font-size="14.00">验证路径/URL</text>
<text text-anchor="middle" x="119" y="-940.8" font-family="Times,serif" font-size="14.00">检查 opt_path_or_url</text>
</g>
<!-- parse_args&#45;&gt;validate_path -->
<g id="edge3" class="edge">
<title>parse_args&#45;&gt;validate_path</title>
<path fill="none" stroke="black" d="M119,-1021.97C119,-1010.19 119,-994.56 119,-981.16"/>
<polygon fill="black" stroke="black" points="122.5,-981 119,-971 115.5,-981 122.5,-981"/>
<text text-anchor="middle" x="162" y="-992.8" font-family="Times,serif" font-size="14.00">参数解析完成</text>
</g>
<!-- validate_path&#45;&gt;end -->
<g id="edge17" class="edge">
<title>validate_path&#45;&gt;end</title>
<path fill="none" stroke="black" d="M91,-932.91C74.83,-920.71 55.97,-903.02 47,-882 40.72,-867.28 44.99,-861.87 47,-846 62.01,-727.62 98.99,-704.38 114,-586 116.12,-569.25 114.87,-564.87 114,-548 107.1,-414.13 89.9,-381.87 83,-248 79.56,-181.33 83.95,-102.82 86.84,-62.28"/>
<polygon fill="black" stroke="black" points="90.35,-62.36 87.59,-52.13 83.37,-61.84 90.35,-62.36"/>
<text text-anchor="middle" x="150" y="-518.8" font-family="Times,serif" font-size="14.00">缺少参数</text>
<text text-anchor="middle" x="150" y="-503.8" font-family="Times,serif" font-size="14.00">fatal() 调用</text>
</g>
<!-- init_thread_http -->
<g id="node6" class="node">
<title>init_thread_http</title>
<path fill="none" stroke="black" d="M252,-882C252,-882 68,-882 68,-882 62,-882 56,-876 56,-870 56,-870 56,-858 56,-858 56,-852 62,-846 68,-846 68,-846 252,-846 252,-846 258,-846 264,-852 264,-858 264,-858 264,-870 264,-870 264,-876 258,-882 252,-882"/>
<text text-anchor="middle" x="160" y="-860.3" font-family="Times,serif" font-size="14.00">初始化线程池和 HTTP 客户端</text>
</g>
<!-- validate_path&#45;&gt;init_thread_http -->
<g id="edge4" class="edge">
<title>validate_path&#45;&gt;init_thread_http</title>
<path fill="none" stroke="black" d="M127.7,-932.76C133.45,-920.7 141.08,-904.7 147.48,-891.27"/>
<polygon fill="black" stroke="black" points="150.73,-892.58 151.88,-882.04 144.41,-889.56 150.73,-892.58"/>
<text text-anchor="middle" x="200" y="-903.8" font-family="Times,serif" font-size="14.00">存在 path_or_url</text>
</g>
<!-- setup_progress -->
<g id="node7" class="node">
<title>setup_progress</title>
<path fill="none" stroke="black" d="M230.5,-809C230.5,-809 127.5,-809 127.5,-809 121.5,-809 115.5,-803 115.5,-797 115.5,-797 115.5,-783 115.5,-783 115.5,-777 121.5,-771 127.5,-771 127.5,-771 230.5,-771 230.5,-771 236.5,-771 242.5,-777 242.5,-783 242.5,-783 242.5,-797 242.5,-797 242.5,-803 236.5,-809 230.5,-809"/>
<text text-anchor="middle" x="179" y="-793.8" font-family="Times,serif" font-size="14.00">设置进度跟踪</text>
<text text-anchor="middle" x="179" y="-778.8" font-family="Times,serif" font-size="14.00">root_prog_node</text>
</g>
<!-- init_thread_http&#45;&gt;setup_progress -->
<g id="edge5" class="edge">
<title>init_thread_http&#45;&gt;setup_progress</title>
<path fill="none" stroke="black" d="M164.5,-845.94C166.62,-837.9 169.21,-828.1 171.61,-819.02"/>
<polygon fill="black" stroke="black" points="175.03,-819.76 174.2,-809.2 168.26,-817.98 175.03,-819.76"/>
</g>
<!-- handle_cache -->
<g id="node8" class="node">
<title>handle_cache</title>
<path fill="none" stroke="black" d="M242.5,-734C242.5,-734 135.5,-734 135.5,-734 129.5,-734 123.5,-728 123.5,-722 123.5,-722 123.5,-710 123.5,-710 123.5,-704 129.5,-698 135.5,-698 135.5,-698 242.5,-698 242.5,-698 248.5,-698 254.5,-704 254.5,-710 254.5,-710 254.5,-722 254.5,-722 254.5,-728 248.5,-734 242.5,-734"/>
<text text-anchor="middle" x="189" y="-712.3" font-family="Times,serif" font-size="14.00">处理全局缓存目录</text>
</g>
<!-- setup_progress&#45;&gt;handle_cache -->
<g id="edge6" class="edge">
<title>setup_progress&#45;&gt;handle_cache</title>
<path fill="none" stroke="black" d="M181.52,-770.83C182.64,-762.81 183.97,-753.2 185.2,-744.34"/>
<polygon fill="black" stroke="black" points="188.67,-744.8 186.58,-734.42 181.74,-743.84 188.67,-744.8"/>
</g>
<!-- init_job_queue -->
<g id="node9" class="node">
<title>init_job_queue</title>
<path fill="none" stroke="black" d="M241,-661C241,-661 149,-661 149,-661 143,-661 137,-655 137,-649 137,-649 137,-635 137,-635 137,-629 143,-623 149,-623 149,-623 241,-623 241,-623 247,-623 253,-629 253,-635 253,-635 253,-649 253,-649 253,-655 247,-661 241,-661"/>
<text text-anchor="middle" x="195" y="-645.8" font-family="Times,serif" font-size="14.00">初始化作业队列</text>
<text text-anchor="middle" x="195" y="-630.8" font-family="Times,serif" font-size="14.00">job_queue</text>
</g>
<!-- handle_cache&#45;&gt;init_job_queue -->
<g id="edge7" class="edge">
<title>handle_cache&#45;&gt;init_job_queue</title>
<path fill="none" stroke="black" d="M190.42,-697.94C191.08,-689.99 191.89,-680.31 192.64,-671.31"/>
<polygon fill="black" stroke="black" points="196.14,-671.46 193.48,-661.2 189.16,-670.87 196.14,-671.46"/>
</g>
<!-- run_fetch -->
<g id="node10" class="node">
<title>run_fetch</title>
<path fill="none" stroke="black" d="M238,-586C238,-586 160,-586 160,-586 154,-586 148,-580 148,-574 148,-574 148,-560 148,-560 148,-554 154,-548 160,-548 160,-548 238,-548 238,-548 244,-548 250,-554 250,-560 250,-560 250,-574 250,-574 250,-580 244,-586 238,-586"/>
<text text-anchor="middle" x="199" y="-570.8" font-family="Times,serif" font-size="14.00">执行获取操作</text>
<text text-anchor="middle" x="199" y="-555.8" font-family="Times,serif" font-size="14.00">fetch.run()</text>
</g>
<!-- init_job_queue&#45;&gt;run_fetch -->
<g id="edge8" class="edge">
<title>init_job_queue&#45;&gt;run_fetch</title>
<path fill="none" stroke="black" d="M195.99,-622.96C196.43,-614.88 196.96,-605.18 197.46,-596.18"/>
<polygon fill="black" stroke="black" points="200.96,-596.27 198.01,-586.09 193.97,-595.88 200.96,-596.27"/>
</g>
<!-- error_handling -->
<g id="node11" class="node">
<title>error_handling</title>
<path fill="none" stroke="black" d="M251.5,-482C251.5,-482 134.5,-482 134.5,-482 128.5,-482 122.5,-476 122.5,-470 122.5,-470 122.5,-456 122.5,-456 122.5,-450 128.5,-444 134.5,-444 134.5,-444 251.5,-444 251.5,-444 257.5,-444 263.5,-450 263.5,-456 263.5,-456 263.5,-470 263.5,-470 263.5,-476 257.5,-482 251.5,-482"/>
<text text-anchor="middle" x="193" y="-466.8" font-family="Times,serif" font-size="14.00">错误处理</text>
<text text-anchor="middle" x="193" y="-451.8" font-family="Times,serif" font-size="14.00">检查 error_bundle</text>
</g>
<!-- run_fetch&#45;&gt;error_handling -->
<g id="edge9" class="edge">
<title>run_fetch&#45;&gt;error_handling</title>
<path fill="none" stroke="black" d="M197.93,-547.76C197.02,-532.32 195.7,-509.91 194.66,-492.16"/>
<polygon fill="black" stroke="black" points="198.14,-491.85 194.06,-482.08 191.16,-492.27 198.14,-491.85"/>
<text text-anchor="middle" x="225" y="-511.3" font-family="Times,serif" font-size="14.00">捕获错误</text>
</g>
<!-- error_handling&#45;&gt;end -->
<g id="edge15" class="edge">
<title>error_handling&#45;&gt;end</title>
<path fill="none" stroke="black" d="M154.67,-443.92C129.8,-429.25 102,-405.93 102,-375 102,-375 102,-375 99,-232 99,-171.38 94.22,-100.39 91.27,-62.37"/>
<polygon fill="black" stroke="black" points="94.73,-61.81 90.45,-52.11 87.76,-62.36 94.73,-61.81"/>
<text text-anchor="middle" x="152" y="-236.8" font-family="Times,serif" font-size="14.00">存在错误</text>
<text text-anchor="middle" x="152" y="-221.8" font-family="Times,serif" font-size="14.00">渲染错误并退出</text>
</g>
<!-- handle_save -->
<g id="node12" class="node">
<title>handle_save</title>
<path fill="none" stroke="black" d="M245,-393C245,-393 155,-393 155,-393 149,-393 143,-387 143,-381 143,-381 143,-367 143,-367 143,-361 149,-355 155,-355 155,-355 245,-355 245,-355 251,-355 257,-361 257,-367 257,-367 257,-381 257,-381 257,-387 251,-393 245,-393"/>
<text text-anchor="middle" x="200" y="-377.8" font-family="Times,serif" font-size="14.00">处理保存选项</text>
<text text-anchor="middle" x="200" y="-362.8" font-family="Times,serif" font-size="14.00">根据 save 类型</text>
</g>
<!-- error_handling&#45;&gt;handle_save -->
<g id="edge10" class="edge">
<title>error_handling&#45;&gt;handle_save</title>
<path fill="none" stroke="black" d="M194.45,-443.97C195.4,-432.19 196.66,-416.56 197.73,-403.16"/>
<polygon fill="black" stroke="black" points="201.24,-403.25 198.55,-393 194.26,-402.69 201.24,-403.25"/>
<text text-anchor="middle" x="217.5" y="-414.8" font-family="Times,serif" font-size="14.00">无错误</text>
</g>
<!-- update_manifest -->
<g id="node13" class="node">
<title>update_manifest</title>
<path fill="none" stroke="black" d="M251,-304C251,-304 159,-304 159,-304 153,-304 147,-298 147,-292 147,-292 147,-278 147,-278 147,-272 153,-266 159,-266 159,-266 251,-266 251,-266 257,-266 263,-272 263,-278 263,-278 263,-292 263,-292 263,-298 257,-304 251,-304"/>
<text text-anchor="middle" x="205" y="-288.8" font-family="Times,serif" font-size="14.00">更新清单文件</text>
<text text-anchor="middle" x="205" y="-273.8" font-family="Times,serif" font-size="14.00">检查现有依赖项</text>
</g>
<!-- handle_save&#45;&gt;update_manifest -->
<g id="edge11" class="edge">
<title>handle_save&#45;&gt;update_manifest</title>
<path fill="none" stroke="black" d="M201.04,-354.97C201.71,-343.19 202.61,-327.56 203.38,-314.16"/>
<polygon fill="black" stroke="black" points="206.89,-314.19 203.97,-304 199.9,-313.79 206.89,-314.19"/>
<text text-anchor="middle" x="231" y="-325.8" font-family="Times,serif" font-size="14.00">需要保存</text>
</g>
<!-- write_manifest -->
<g id="node14" class="node">
<title>write_manifest</title>
<path fill="none" stroke="black" d="M250,-200C250,-200 134,-200 134,-200 128,-200 122,-194 122,-188 122,-188 122,-176 122,-176 122,-170 128,-164 134,-164 134,-164 250,-164 250,-164 256,-164 262,-170 262,-176 262,-176 262,-188 262,-188 262,-194 256,-200 250,-200"/>
<text text-anchor="middle" x="192" y="-178.3" font-family="Times,serif" font-size="14.00">写入 build.zig.zon</text>
</g>
<!-- update_manifest&#45;&gt;write_manifest -->
<g id="edge12" class="edge">
<title>update_manifest&#45;&gt;write_manifest</title>
<path fill="none" stroke="black" d="M205.78,-265.94C206.03,-252.6 205.71,-234.05 203,-218 202.55,-215.32 201.94,-212.57 201.25,-209.84"/>
<polygon fill="black" stroke="black" points="204.6,-208.84 198.44,-200.22 197.88,-210.8 204.6,-208.84"/>
</g>
<!-- cleanup -->
<g id="node15" class="node">
<title>cleanup</title>
<path fill="none" stroke="black" d="M251.5,-127C251.5,-127 130.5,-127 130.5,-127 124.5,-127 118.5,-121 118.5,-115 118.5,-115 118.5,-101 118.5,-101 118.5,-95 124.5,-89 130.5,-89 130.5,-89 251.5,-89 251.5,-89 257.5,-89 263.5,-95 263.5,-101 263.5,-101 263.5,-115 263.5,-115 263.5,-121 257.5,-127 251.5,-127"/>
<text text-anchor="middle" x="191" y="-111.8" font-family="Times,serif" font-size="14.00">清理资源</text>
<text text-anchor="middle" x="191" y="-96.8" font-family="Times,serif" font-size="14.00">关闭句柄、释放内存</text>
</g>
<!-- write_manifest&#45;&gt;cleanup -->
<g id="edge13" class="edge">
<title>write_manifest&#45;&gt;cleanup</title>
<path fill="none" stroke="black" d="M191.76,-163.94C191.65,-155.99 191.52,-146.31 191.39,-137.31"/>
<polygon fill="black" stroke="black" points="194.89,-137.15 191.25,-127.2 187.89,-137.25 194.89,-137.15"/>
</g>
<!-- cleanup&#45;&gt;end -->
<g id="edge14" class="edge">
<title>cleanup&#45;&gt;end</title>
<path fill="none" stroke="black" d="M165.26,-88.83C150.26,-78.24 131.37,-64.91 116.14,-54.15"/>
<polygon fill="black" stroke="black" points="117.84,-51.07 107.65,-48.16 113.8,-56.79 117.84,-51.07"/>
</g>
</g>
</svg>
