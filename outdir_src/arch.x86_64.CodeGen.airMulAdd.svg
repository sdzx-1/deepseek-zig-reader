<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: flowchart Pages: 1 -->
<svg width="472pt" height="618pt"
 viewBox="0.00 0.00 472.00 618.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 614)">
<title>flowchart</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-614 468,-614 468,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<path fill="none" stroke="black" d="M289,-610C289,-610 203,-610 203,-610 197,-610 191,-604 191,-598 191,-598 191,-586 191,-586 191,-580 197,-574 203,-574 203,-574 289,-574 289,-574 295,-574 301,-580 301,-586 301,-586 301,-598 301,-598 301,-604 295,-610 289,-610"/>
<text text-anchor="middle" x="246" y="-588.3" font-family="Arial" font-size="14.00">开始 airMulAdd</text>
</g>
<!-- get_context -->
<g id="node2" class="node">
<title>get_context</title>
<path fill="none" stroke="black" d="M352,-537C352,-537 140,-537 140,-537 134,-537 128,-531 128,-525 128,-525 128,-513 128,-513 128,-507 134,-501 140,-501 140,-501 352,-501 352,-501 358,-501 364,-507 364,-513 364,-513 364,-525 364,-525 364,-531 358,-537 352,-537"/>
<text text-anchor="middle" x="246" y="-515.3" font-family="Arial" font-size="14.00">获取上下文 (pt, zcu, pl_op, extra, ty)</text>
</g>
<!-- start&#45;&gt;get_context -->
<g id="edge1" class="edge">
<title>start&#45;&gt;get_context</title>
<path fill="none" stroke="black" d="M246,-573.81C246,-565.79 246,-556.05 246,-547.07"/>
<polygon fill="black" stroke="black" points="249.5,-547.03 246,-537.03 242.5,-547.03 249.5,-547.03"/>
</g>
<!-- check_fma_support -->
<g id="node3" class="node">
<title>check_fma_support</title>
<path fill="none" stroke="black" d="M321,-464C321,-464 171,-464 171,-464 165,-464 159,-458 159,-452 159,-452 159,-440 159,-440 159,-434 165,-428 171,-428 171,-428 321,-428 321,-428 327,-428 333,-434 333,-440 333,-440 333,-452 333,-452 333,-458 327,-464 321,-464"/>
<text text-anchor="middle" x="246" y="-442.3" font-family="Arial" font-size="14.00">检查浮点类型和FMA支持</text>
</g>
<!-- get_context&#45;&gt;check_fma_support -->
<g id="edge2" class="edge">
<title>get_context&#45;&gt;check_fma_support</title>
<path fill="none" stroke="black" d="M246,-500.81C246,-492.79 246,-483.05 246,-474.07"/>
<polygon fill="black" stroke="black" points="249.5,-474.03 246,-464.03 242.5,-474.03 249.5,-474.03"/>
</g>
<!-- call_fma_libc -->
<g id="node4" class="node">
<title>call_fma_libc</title>
<path fill="none" stroke="black" d="M162,-323C162,-323 12,-323 12,-323 6,-323 0,-317 0,-311 0,-311 0,-299 0,-299 0,-293 6,-287 12,-287 12,-287 162,-287 162,-287 168,-287 174,-293 174,-299 174,-299 174,-311 174,-311 174,-317 168,-323 162,-323"/>
<text text-anchor="middle" x="87" y="-301.3" font-family="Arial" font-size="14.00">构造并调用libc的fma函数</text>
</g>
<!-- check_fma_support&#45;&gt;call_fma_libc -->
<g id="edge3" class="edge">
<title>check_fma_support&#45;&gt;call_fma_libc</title>
<path fill="none" stroke="black" d="M158.86,-442.09C106.44,-438.29 46.71,-429.64 30,-410 9.17,-385.52 34.94,-352.23 58.22,-329.97"/>
<polygon fill="black" stroke="black" points="60.64,-332.5 65.63,-323.15 55.9,-327.35 60.64,-332.5"/>
<text text-anchor="middle" x="116" y="-398.8" font-family="Arial" font-size="14.00">不支持FMA或特殊浮点类型</text>
</g>
<!-- check_fma_support&#45;&gt;call_fma_libc -->
<g id="edge10" class="edge">
<title>check_fma_support&#45;&gt;call_fma_libc</title>
<path fill="none" stroke="red" d="M232.09,-427.6C223.79,-417.63 212.79,-405.13 202,-395 176.1,-370.68 143.93,-346.21 120.2,-329.1"/>
<polygon fill="red" stroke="red" points="122.04,-326.11 111.87,-323.14 117.97,-331.8 122.04,-326.11"/>
<text text-anchor="middle" x="131.83" y="-360.35" font-family="Arial" font-size="14.00" fill="red">16/80/128位</text>
<text text-anchor="middle" x="131.83" y="-345.35" font-family="Arial" font-size="14.00" fill="red">或未启用FMA</text>
</g>
<!-- handle_operands -->
<g id="node5" class="node">
<title>handle_operands</title>
<path fill="none" stroke="black" d="M442,-377C442,-377 256,-377 256,-377 250,-377 244,-371 244,-365 244,-365 244,-353 244,-353 244,-347 250,-341 256,-341 256,-341 442,-341 442,-341 448,-341 454,-347 454,-353 454,-353 454,-365 454,-365 454,-371 448,-377 442,-377"/>
<text text-anchor="middle" x="349" y="-355.3" font-family="Arial" font-size="14.00">处理操作数 (mcvs, locks, order)</text>
</g>
<!-- check_fma_support&#45;&gt;handle_operands -->
<g id="edge4" class="edge">
<title>check_fma_support&#45;&gt;handle_operands</title>
<path fill="none" stroke="black" d="M250.85,-427.88C254.6,-417.26 260.74,-403.98 270,-395 275.18,-389.97 281.21,-385.6 287.58,-381.81"/>
<polygon fill="black" stroke="black" points="289.31,-384.85 296.43,-377 285.97,-378.7 289.31,-384.85"/>
<text text-anchor="middle" x="299" y="-398.8" font-family="Arial" font-size="14.00">支持FMA</text>
</g>
<!-- check_fma_support&#45;&gt;handle_operands -->
<g id="edge11" class="edge">
<title>check_fma_support&#45;&gt;handle_operands</title>
<path fill="none" stroke="red" d="M302.13,-427.96C311.59,-423.26 320.69,-417.35 328,-410 334.32,-403.64 338.85,-395.09 342.04,-386.86"/>
<polygon fill="red" stroke="red" points="345.43,-387.74 345.3,-377.15 338.8,-385.51 345.43,-387.74"/>
<text text-anchor="middle" x="390.23" y="-411.96" font-family="Arial" font-size="14.00" fill="red">32/64位且启用FMA</text>
</g>
<!-- finish_air -->
<g id="node9" class="node">
<title>finish_air</title>
<ellipse fill="none" stroke="black" cx="197" cy="-18" rx="48.19" ry="18"/>
<text text-anchor="middle" x="197" y="-14.3" font-family="Arial" font-size="14.00">返回结果</text>
</g>
<!-- call_fma_libc&#45;&gt;finish_air -->
<g id="edge5" class="edge">
<title>call_fma_libc&#45;&gt;finish_air</title>
<path fill="none" stroke="black" d="M61.37,-286.74C41.03,-270.79 16,-245.04 16,-215 16,-215 16,-215 16,-90 16,-62.17 91.08,-40.74 144.52,-29.01"/>
<polygon fill="black" stroke="black" points="145.52,-32.37 154.56,-26.86 144.05,-25.53 145.52,-32.37"/>
<text text-anchor="middle" x="69" y="-174.3" font-family="Arial" font-size="14.00">直接通过libc调用</text>
</g>
<!-- call_fma_libc&#45;&gt;finish_air -->
<g id="edge12" class="edge">
<title>call_fma_libc&#45;&gt;finish_air</title>
<path fill="none" stroke="red" stroke-dasharray="5,2" d="M112.63,-286.74C132.97,-270.79 158,-245.04 158,-215 158,-215 158,-215 158,-90 158,-73.09 166.61,-56.4 175.73,-43.45"/>
<polygon fill="red" stroke="red" points="178.79,-45.22 182.03,-35.13 173.21,-40.99 178.79,-45.22"/>
<text text-anchor="middle" x="187" y="-174.3" font-family="Arial" font-size="14.00" fill="red">可能失败</text>
</g>
<!-- adjust_operand_order -->
<g id="node6" class="node">
<title>adjust_operand_order</title>
<path fill="none" stroke="black" d="M395,-269C395,-269 303,-269 303,-269 297,-269 291,-263 291,-257 291,-257 291,-245 291,-245 291,-239 297,-233 303,-233 303,-233 395,-233 395,-233 401,-233 407,-239 407,-245 407,-245 407,-257 407,-257 407,-263 401,-269 395,-269"/>
<text text-anchor="middle" x="349" y="-247.3" font-family="Arial" font-size="14.00">调整操作数顺序</text>
</g>
<!-- handle_operands&#45;&gt;adjust_operand_order -->
<g id="edge6" class="edge">
<title>handle_operands&#45;&gt;adjust_operand_order</title>
<path fill="none" stroke="black" d="M349,-340.97C349,-324.38 349,-298.88 349,-279.43"/>
<polygon fill="black" stroke="black" points="352.5,-279.34 349,-269.34 345.5,-279.34 352.5,-279.34"/>
<text text-anchor="middle" x="406.5" y="-301.3" font-family="Arial" font-size="14.00">分配寄存器和锁定</text>
</g>
<!-- select_mir_tag -->
<g id="node7" class="node">
<title>select_mir_tag</title>
<path fill="none" stroke="black" d="M415,-196C415,-196 283,-196 283,-196 277,-196 271,-190 271,-184 271,-184 271,-172 271,-172 271,-166 277,-160 283,-160 283,-160 415,-160 415,-160 421,-160 427,-166 427,-172 427,-172 427,-184 427,-184 427,-190 421,-196 415,-196"/>
<text text-anchor="middle" x="349" y="-174.3" font-family="Arial" font-size="14.00">根据顺序选择MIR指令</text>
</g>
<!-- adjust_operand_order&#45;&gt;select_mir_tag -->
<g id="edge7" class="edge">
<title>adjust_operand_order&#45;&gt;select_mir_tag</title>
<path fill="none" stroke="black" d="M349,-232.81C349,-224.79 349,-215.05 349,-206.07"/>
<polygon fill="black" stroke="black" points="352.5,-206.03 349,-196.03 345.5,-206.03 352.5,-206.03"/>
</g>
<!-- gen_asm -->
<g id="node8" class="node">
<title>gen_asm</title>
<path fill="none" stroke="black" d="M276,-109C276,-109 198,-109 198,-109 192,-109 186,-103 186,-97 186,-97 186,-85 186,-85 186,-79 192,-73 198,-73 198,-73 276,-73 276,-73 282,-73 288,-79 288,-85 288,-85 288,-97 288,-97 288,-103 282,-109 276,-109"/>
<text text-anchor="middle" x="237" y="-87.3" font-family="Arial" font-size="14.00">生成汇编指令</text>
</g>
<!-- select_mir_tag&#45;&gt;gen_asm -->
<g id="edge8" class="edge">
<title>select_mir_tag&#45;&gt;gen_asm</title>
<path fill="none" stroke="black" d="M270.73,-164.94C245.74,-159.38 222.57,-151.8 215,-142 209.47,-134.83 211.12,-126.06 215.37,-117.87"/>
<polygon fill="black" stroke="black" points="218.39,-119.64 220.78,-109.32 212.47,-115.9 218.39,-119.64"/>
<text text-anchor="middle" x="293.5" y="-130.8" font-family="Arial" font-size="14.00">选择fmadd132/213/231等</text>
</g>
<!-- select_mir_tag&#45;&gt;finish_air -->
<g id="edge13" class="edge">
<title>select_mir_tag&#45;&gt;finish_air</title>
<path fill="none" stroke="red" stroke-dasharray="5,2" d="M365.02,-159.7C372,-150 377.49,-137.72 372,-127 346.48,-77.18 286.58,-47.87 243.98,-32.64"/>
<polygon fill="red" stroke="red" points="244.96,-29.28 234.37,-29.34 242.68,-35.9 244.96,-29.28"/>
<text text-anchor="middle" x="403" y="-87.3" font-family="Arial" font-size="14.00" fill="red">不支持的类型</text>
</g>
<!-- gen_asm&#45;&gt;finish_air -->
<g id="edge9" class="edge">
<title>gen_asm&#45;&gt;finish_air</title>
<path fill="none" stroke="black" d="M227.32,-72.81C222.6,-64.44 216.83,-54.2 211.59,-44.9"/>
<polygon fill="black" stroke="black" points="214.55,-43.02 206.59,-36.03 208.45,-46.46 214.55,-43.02"/>
</g>
</g>
</svg>
