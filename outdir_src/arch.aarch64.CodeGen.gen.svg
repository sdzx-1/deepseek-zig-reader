<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: flowchart Pages: 1 -->
<svg width="336pt" height="1510pt"
 viewBox="0.00 0.00 336.00 1510.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1506)">
<title>flowchart</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-1506 332,-1506 332,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<polygon fill="none" stroke="black" points="244.5,-1502 173.5,-1502 173.5,-1466 244.5,-1466 244.5,-1502"/>
<text text-anchor="middle" x="209" y="-1481.5" font-family="Courier,monospace" font-size="10.00">开始 gen()</text>
</g>
<!-- check_naked -->
<g id="node2" class="node">
<title>check_naked</title>
<polygon fill="none" stroke="black" points="209,-1429 90,-1399 209,-1369 328,-1399 209,-1429"/>
<text text-anchor="middle" x="209" y="-1402" font-family="Courier,monospace" font-size="10.00">检查调用约定</text>
<text text-anchor="middle" x="209" y="-1391" font-family="Courier,monospace" font-size="10.00">if (cc != .naked)</text>
</g>
<!-- start&#45;&gt;check_naked -->
<g id="edge1" class="edge">
<title>start&#45;&gt;check_naked</title>
<path fill="none" stroke="black" d="M209,-1465.8C209,-1458.14 209,-1448.78 209,-1439.55"/>
<polygon fill="black" stroke="black" points="212.5,-1439.27 209,-1429.27 205.5,-1439.27 212.5,-1439.27"/>
</g>
<!-- non_naked_prologue -->
<g id="node3" class="node">
<title>non_naked_prologue</title>
<polygon fill="none" stroke="black" points="210.5,-1322 115.5,-1322 115.5,-1286 210.5,-1286 210.5,-1322"/>
<text text-anchor="middle" x="163" y="-1301.5" font-family="Courier,monospace" font-size="10.00">非Naked调用处理</text>
</g>
<!-- check_naked&#45;&gt;non_naked_prologue -->
<g id="edge2" class="edge">
<title>check_naked&#45;&gt;non_naked_prologue</title>
<path fill="none" stroke="black" d="M196.19,-1372.09C189.92,-1359.42 182.38,-1344.18 176.07,-1331.43"/>
<polygon fill="black" stroke="black" points="179.11,-1329.67 171.53,-1322.25 172.83,-1332.77 179.11,-1329.67"/>
<text text-anchor="middle" x="190" y="-1343" font-family="Courier,monospace" font-size="10.00">是</text>
</g>
<!-- naked_prologue -->
<g id="node19" class="node">
<title>naked_prologue</title>
<polygon fill="none" stroke="black" points="294,-1268 208,-1268 208,-1232 294,-1232 294,-1268"/>
<text text-anchor="middle" x="251" y="-1247.5" font-family="Courier,monospace" font-size="10.00">Naked调用处理</text>
</g>
<!-- check_naked&#45;&gt;naked_prologue -->
<g id="edge3" class="edge">
<title>check_naked&#45;&gt;naked_prologue</title>
<path fill="none" stroke="black" d="M216.8,-1370.69C224.38,-1344.16 235.82,-1304.12 243.35,-1277.77"/>
<polygon fill="black" stroke="black" points="246.74,-1278.64 246.13,-1268.06 240.01,-1276.72 246.74,-1278.64"/>
<text text-anchor="middle" x="230" y="-1343" font-family="Courier,monospace" font-size="10.00">否</text>
</g>
<!-- save_fp_lr -->
<g id="node4" class="node">
<title>save_fp_lr</title>
<polygon fill="none" stroke="black" points="228,-1214 0,-1214 0,-1178 228,-1178 228,-1214"/>
<text text-anchor="middle" x="114" y="-1193.5" font-family="Courier,monospace" font-size="10.00">保存FP/LR: stp x29, x30, [sp, #&#45;16]!</text>
</g>
<!-- non_naked_prologue&#45;&gt;save_fp_lr -->
<g id="edge4" class="edge">
<title>non_naked_prologue&#45;&gt;save_fp_lr</title>
<path fill="none" stroke="black" d="M155.13,-1285.97C147.35,-1269.15 135.34,-1243.17 126.31,-1223.62"/>
<polygon fill="black" stroke="black" points="129.39,-1221.95 122.02,-1214.34 123.04,-1224.89 129.39,-1221.95"/>
</g>
<!-- backpatch_save -->
<g id="node5" class="node">
<title>backpatch_save</title>
<polygon fill="none" stroke="black" points="194.5,-1141 33.5,-1141 33.5,-1105 194.5,-1105 194.5,-1141"/>
<text text-anchor="middle" x="114" y="-1126" font-family="Courier,monospace" font-size="10.00">添加寄存器保存占位符</text>
<text text-anchor="middle" x="114" y="-1115" font-family="Courier,monospace" font-size="10.00">backpatch_save_registers</text>
</g>
<!-- save_fp_lr&#45;&gt;backpatch_save -->
<g id="edge5" class="edge">
<title>save_fp_lr&#45;&gt;backpatch_save</title>
<path fill="none" stroke="black" d="M114,-1177.81C114,-1169.79 114,-1160.05 114,-1151.07"/>
<polygon fill="black" stroke="black" points="117.5,-1151.03 114,-1141.03 110.5,-1151.03 117.5,-1151.03"/>
</g>
<!-- mov_fp_sp -->
<g id="node6" class="node">
<title>mov_fp_sp</title>
<polygon fill="none" stroke="black" points="185.5,-1068 42.5,-1068 42.5,-1032 185.5,-1032 185.5,-1068"/>
<text text-anchor="middle" x="114" y="-1047.5" font-family="Courier,monospace" font-size="10.00">设置帧指针: mov x29, sp</text>
</g>
<!-- backpatch_save&#45;&gt;mov_fp_sp -->
<g id="edge6" class="edge">
<title>backpatch_save&#45;&gt;mov_fp_sp</title>
<path fill="none" stroke="black" d="M114,-1104.81C114,-1096.79 114,-1087.05 114,-1078.07"/>
<polygon fill="black" stroke="black" points="117.5,-1078.03 114,-1068.03 110.5,-1078.03 117.5,-1078.03"/>
</g>
<!-- backpatch_reloc -->
<g id="node7" class="node">
<title>backpatch_reloc</title>
<polygon fill="none" stroke="black" points="167.5,-995 60.5,-995 60.5,-959 167.5,-959 167.5,-995"/>
<text text-anchor="middle" x="114" y="-980" font-family="Courier,monospace" font-size="10.00">添加栈调整占位符</text>
<text text-anchor="middle" x="114" y="-969" font-family="Courier,monospace" font-size="10.00">backpatch_reloc</text>
</g>
<!-- mov_fp_sp&#45;&gt;backpatch_reloc -->
<g id="edge7" class="edge">
<title>mov_fp_sp&#45;&gt;backpatch_reloc</title>
<path fill="none" stroke="black" d="M114,-1031.81C114,-1023.79 114,-1014.05 114,-1005.07"/>
<polygon fill="black" stroke="black" points="117.5,-1005.03 114,-995.03 110.5,-1005.03 117.5,-1005.03"/>
</g>
<!-- handle_ret_mcv -->
<g id="node8" class="node">
<title>handle_ret_mcv</title>
<polygon fill="none" stroke="black" points="114,-922 27.34,-904 114,-886 200.66,-904 114,-922"/>
<text text-anchor="middle" x="114" y="-901.5" font-family="Courier,monospace" font-size="10.00">处理返回值存储到栈</text>
</g>
<!-- backpatch_reloc&#45;&gt;handle_ret_mcv -->
<g id="edge8" class="edge">
<title>backpatch_reloc&#45;&gt;handle_ret_mcv</title>
<path fill="none" stroke="black" d="M114,-958.81C114,-950.79 114,-941.05 114,-932.07"/>
<polygon fill="black" stroke="black" points="117.5,-932.03 114,-922.03 110.5,-932.03 117.5,-932.03"/>
</g>
<!-- copy_args -->
<g id="node9" class="node">
<title>copy_args</title>
<polygon fill="none" stroke="black" points="228,-839 104,-839 104,-803 228,-803 228,-839"/>
<text text-anchor="middle" x="166" y="-818.5" font-family="Courier,monospace" font-size="10.00">循环复制寄存器参数到栈</text>
</g>
<!-- handle_ret_mcv&#45;&gt;copy_args -->
<g id="edge9" class="edge">
<title>handle_ret_mcv&#45;&gt;copy_args</title>
<path fill="none" stroke="black" d="M100.49,-888.36C93.58,-879.03 87.81,-866.89 94,-857 96.83,-852.48 100.43,-848.52 104.51,-845.07"/>
<polygon fill="black" stroke="black" points="106.81,-847.73 112.86,-839.03 102.7,-842.06 106.81,-847.73"/>
<text text-anchor="middle" x="125" y="-860" font-family="Courier,monospace" font-size="10.00">存在ret_mcv</text>
</g>
<!-- handle_ret_mcv&#45;&gt;copy_args -->
<g id="edge10" class="edge">
<title>handle_ret_mcv&#45;&gt;copy_args</title>
<path fill="none" stroke="black" d="M134.55,-890.22C142.38,-884.36 150.69,-876.77 156,-868 159.45,-862.31 161.71,-855.59 163.2,-849.07"/>
<polygon fill="black" stroke="black" points="166.66,-849.62 164.96,-839.17 159.77,-848.4 166.66,-849.62"/>
<text text-anchor="middle" x="187" y="-860" font-family="Courier,monospace" font-size="10.00">无ret_mcv</text>
</g>
<!-- dbg_prologue -->
<g id="node10" class="node">
<title>dbg_prologue</title>
<polygon fill="none" stroke="black" points="267.5,-766 154.5,-766 154.5,-730 267.5,-730 267.5,-766"/>
<text text-anchor="middle" x="211" y="-751" font-family="Courier,monospace" font-size="10.00">插入调试标记</text>
<text text-anchor="middle" x="211" y="-740" font-family="Courier,monospace" font-size="10.00">dbg_prologue_end</text>
</g>
<!-- copy_args&#45;&gt;dbg_prologue -->
<g id="edge11" class="edge">
<title>copy_args&#45;&gt;dbg_prologue</title>
<path fill="none" stroke="black" d="M176.89,-802.81C182.25,-794.35 188.83,-783.98 194.77,-774.61"/>
<polygon fill="black" stroke="black" points="197.81,-776.35 200.21,-766.03 191.9,-772.6 197.81,-776.35"/>
</g>
<!-- gen_body -->
<g id="node11" class="node">
<title>gen_body</title>
<polygon fill="none" stroke="black" points="273.5,-693 148.5,-693 148.5,-657 273.5,-657 273.5,-693"/>
<text text-anchor="middle" x="211" y="-672.5" font-family="Courier,monospace" font-size="10.00">生成函数体 genBody()</text>
</g>
<!-- dbg_prologue&#45;&gt;gen_body -->
<g id="edge12" class="edge">
<title>dbg_prologue&#45;&gt;gen_body</title>
<path fill="none" stroke="black" d="M205.12,-729.81C204.28,-721.79 204.05,-712.05 204.42,-703.07"/>
<polygon fill="black" stroke="black" points="207.92,-703.25 205.14,-693.03 200.94,-702.75 207.92,-703.25"/>
</g>
<!-- dbg_prologue&#45;&gt;gen_body -->
<g id="edge22" class="edge">
<title>dbg_prologue&#45;&gt;gen_body</title>
<path fill="none" stroke="black" d="M216.88,-729.81C217.72,-721.79 217.95,-712.05 217.58,-703.07"/>
<polygon fill="black" stroke="black" points="221.06,-702.75 216.86,-693.03 214.08,-703.25 221.06,-702.75"/>
</g>
<!-- backpatch_regs -->
<g id="node12" class="node">
<title>backpatch_regs</title>
<polygon fill="none" stroke="black" points="219,-620 115,-620 115,-584 219,-584 219,-620"/>
<text text-anchor="middle" x="167" y="-599.5" font-family="Courier,monospace" font-size="10.00">回填保存寄存器指令</text>
</g>
<!-- gen_body&#45;&gt;backpatch_regs -->
<g id="edge13" class="edge">
<title>gen_body&#45;&gt;backpatch_regs</title>
<path fill="none" stroke="black" d="M200.35,-656.81C195.11,-648.35 188.68,-637.98 182.87,-628.61"/>
<polygon fill="black" stroke="black" points="185.8,-626.69 177.55,-620.03 179.85,-630.37 185.8,-626.69"/>
</g>
<!-- dbg_line -->
<g id="node20" class="node">
<title>dbg_line</title>
<polygon fill="none" stroke="black" points="250.5,-109 175.5,-109 175.5,-73 250.5,-73 250.5,-109"/>
<text text-anchor="middle" x="213" y="-94" font-family="Courier,monospace" font-size="10.00">插入调试信息</text>
<text text-anchor="middle" x="213" y="-83" font-family="Courier,monospace" font-size="10.00">dbg_line</text>
</g>
<!-- gen_body&#45;&gt;dbg_line -->
<g id="edge23" class="edge">
<title>gen_body&#45;&gt;dbg_line</title>
<path fill="none" stroke="black" d="M229.15,-656.83C241.27,-643.46 255,-623.74 255,-603 255,-603 255,-603 255,-163 255,-146.08 246.06,-129.66 236.43,-116.88"/>
<polygon fill="black" stroke="black" points="239.09,-114.61 230.08,-109.04 233.65,-119.01 239.09,-114.61"/>
</g>
<!-- calc_stack -->
<g id="node13" class="node">
<title>calc_stack</title>
<polygon fill="none" stroke="black" points="222.5,-547 67.5,-547 67.5,-511 222.5,-511 222.5,-547"/>
<text text-anchor="middle" x="145" y="-532" font-family="Courier,monospace" font-size="10.00">计算总栈大小</text>
<text text-anchor="middle" x="145" y="-521" font-family="Courier,monospace" font-size="10.00">aligned_total_stack_end</text>
</g>
<!-- backpatch_regs&#45;&gt;calc_stack -->
<g id="edge14" class="edge">
<title>backpatch_regs&#45;&gt;calc_stack</title>
<path fill="none" stroke="black" d="M161.67,-583.81C159.16,-575.7 156.1,-565.84 153.3,-556.78"/>
<polygon fill="black" stroke="black" points="156.58,-555.54 150.28,-547.03 149.89,-557.62 156.58,-555.54"/>
</g>
<!-- handle_exitlude -->
<g id="node14" class="node">
<title>handle_exitlude</title>
<polygon fill="none" stroke="black" points="219.5,-474 58.5,-474 58.5,-438 219.5,-438 219.5,-474"/>
<text text-anchor="middle" x="139" y="-459" font-family="Courier,monospace" font-size="10.00">处理退出跳转</text>
<text text-anchor="middle" x="139" y="-448" font-family="Courier,monospace" font-size="10.00">backpatch exitlude jumps</text>
</g>
<!-- calc_stack&#45;&gt;handle_exitlude -->
<g id="edge15" class="edge">
<title>calc_stack&#45;&gt;handle_exitlude</title>
<path fill="none" stroke="black" d="M143.55,-510.81C142.87,-502.79 142.05,-493.05 141.29,-484.07"/>
<polygon fill="black" stroke="black" points="144.77,-483.7 140.44,-474.03 137.79,-484.29 144.77,-483.7"/>
</g>
<!-- restore_stack -->
<g id="node15" class="node">
<title>restore_stack</title>
<polygon fill="none" stroke="black" points="226.5,-401 11.5,-401 11.5,-365 226.5,-365 226.5,-401"/>
<text text-anchor="middle" x="119" y="-380.5" font-family="Courier,monospace" font-size="10.00">恢复栈指针: add sp, sp, #stack_size</text>
</g>
<!-- handle_exitlude&#45;&gt;restore_stack -->
<g id="edge16" class="edge">
<title>handle_exitlude&#45;&gt;restore_stack</title>
<path fill="none" stroke="black" d="M134.16,-437.81C131.87,-429.7 129.09,-419.84 126.54,-410.78"/>
<polygon fill="black" stroke="black" points="129.88,-409.71 123.8,-401.03 123.14,-411.6 129.88,-409.71"/>
</g>
<!-- pop_regs -->
<g id="node16" class="node">
<title>pop_regs</title>
<polygon fill="none" stroke="black" points="196.5,-328 41.5,-328 41.5,-292 196.5,-292 196.5,-328"/>
<text text-anchor="middle" x="119" y="-307.5" font-family="Courier,monospace" font-size="10.00">恢复保存的寄存器: pop_regs</text>
</g>
<!-- restore_stack&#45;&gt;pop_regs -->
<g id="edge17" class="edge">
<title>restore_stack&#45;&gt;pop_regs</title>
<path fill="none" stroke="black" d="M119,-364.81C119,-356.79 119,-347.05 119,-338.07"/>
<polygon fill="black" stroke="black" points="122.5,-338.03 119,-328.03 115.5,-338.03 122.5,-338.03"/>
</g>
<!-- restore_fp_lr -->
<g id="node17" class="node">
<title>restore_fp_lr</title>
<polygon fill="none" stroke="black" points="227,-255 11,-255 11,-219 227,-219 227,-255"/>
<text text-anchor="middle" x="119" y="-234.5" font-family="Courier,monospace" font-size="10.00">恢复FP/LR: ldp x29, x30, [sp], #16</text>
</g>
<!-- pop_regs&#45;&gt;restore_fp_lr -->
<g id="edge18" class="edge">
<title>pop_regs&#45;&gt;restore_fp_lr</title>
<path fill="none" stroke="black" d="M119,-291.81C119,-283.79 119,-274.05 119,-265.07"/>
<polygon fill="black" stroke="black" points="122.5,-265.03 119,-255.03 115.5,-265.03 122.5,-265.03"/>
</g>
<!-- ret_lr -->
<g id="node18" class="node">
<title>ret_lr</title>
<polygon fill="none" stroke="black" points="214,-182 104,-182 104,-146 214,-146 214,-182"/>
<text text-anchor="middle" x="159" y="-161.5" font-family="Courier,monospace" font-size="10.00">返回指令: ret x30</text>
</g>
<!-- restore_fp_lr&#45;&gt;ret_lr -->
<g id="edge19" class="edge">
<title>restore_fp_lr&#45;&gt;ret_lr</title>
<path fill="none" stroke="black" d="M128.68,-218.81C133.4,-210.44 139.17,-200.2 144.41,-190.9"/>
<polygon fill="black" stroke="black" points="147.55,-192.46 149.41,-182.03 141.45,-189.02 147.55,-192.46"/>
</g>
<!-- ret_lr&#45;&gt;dbg_line -->
<g id="edge20" class="edge">
<title>ret_lr&#45;&gt;dbg_line</title>
<path fill="none" stroke="black" d="M172.07,-145.81C178.64,-137.18 186.72,-126.56 193.96,-117.03"/>
<polygon fill="black" stroke="black" points="196.78,-119.11 200.05,-109.03 191.21,-114.87 196.78,-119.11"/>
</g>
<!-- naked_prologue&#45;&gt;dbg_prologue -->
<g id="edge21" class="edge">
<title>naked_prologue&#45;&gt;dbg_prologue</title>
<path fill="none" stroke="black" d="M252.53,-1231.95C254,-1214.05 256,-1185.07 256,-1160 256,-1160 256,-1160 256,-820 256,-802.88 246.55,-786.54 236.31,-773.86"/>
<polygon fill="black" stroke="black" points="238.76,-771.35 229.56,-766.09 233.48,-775.94 238.76,-771.35"/>
</g>
<!-- end -->
<g id="node21" class="node">
<title>end</title>
<polygon fill="none" stroke="black" points="240,-36 186,-36 186,0 240,0 240,-36"/>
<text text-anchor="middle" x="213" y="-15.5" font-family="Courier,monospace" font-size="10.00">结束</text>
</g>
<!-- dbg_line&#45;&gt;end -->
<g id="edge24" class="edge">
<title>dbg_line&#45;&gt;end</title>
<path fill="none" stroke="black" d="M213,-72.81C213,-64.79 213,-55.05 213,-46.07"/>
<polygon fill="black" stroke="black" points="216.5,-46.03 213,-36.03 209.5,-46.03 216.5,-46.03"/>
</g>
</g>
</svg>
