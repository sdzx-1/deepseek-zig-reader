<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: block_sort_flowchart Pages: 1 -->
<svg width="570pt" height="903pt"
 viewBox="0.00 0.00 570.00 903.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 899)">
<title>block_sort_flowchart</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-899 566,-899 566,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<path fill="none" stroke="black" d="M354.5,-895C354.5,-895 259.5,-895 259.5,-895 253.5,-895 247.5,-889 247.5,-883 247.5,-883 247.5,-871 247.5,-871 247.5,-865 253.5,-859 259.5,-859 259.5,-859 354.5,-859 354.5,-859 360.5,-859 366.5,-865 366.5,-871 366.5,-871 366.5,-883 366.5,-883 366.5,-889 360.5,-895 354.5,-895"/>
<text text-anchor="middle" x="307" y="-873.3" font-family="Times,serif" font-size="14.00">开始 block 函数</text>
</g>
<!-- check_len -->
<g id="node2" class="node">
<title>check_len</title>
<path fill="none" stroke="black" d="M352.5,-822C352.5,-822 261.5,-822 261.5,-822 255.5,-822 249.5,-816 249.5,-810 249.5,-810 249.5,-798 249.5,-798 249.5,-792 255.5,-786 261.5,-786 261.5,-786 352.5,-786 352.5,-786 358.5,-786 364.5,-792 364.5,-798 364.5,-798 364.5,-810 364.5,-810 364.5,-816 358.5,-822 352.5,-822"/>
<text text-anchor="middle" x="307" y="-800.3" font-family="Times,serif" font-size="14.00">检查 items.len</text>
</g>
<!-- start&#45;&gt;check_len -->
<g id="edge1" class="edge">
<title>start&#45;&gt;check_len</title>
<path fill="none" stroke="black" d="M307,-858.81C307,-850.79 307,-841.05 307,-832.07"/>
<polygon fill="black" stroke="black" points="310.5,-832.03 307,-822.03 303.5,-832.03 310.5,-832.03"/>
</g>
<!-- len_less_4 -->
<g id="node3" class="node">
<title>len_less_4</title>
<path fill="none" stroke="black" d="M283,-735C283,-735 187,-735 187,-735 181,-735 175,-729 175,-723 175,-723 175,-711 175,-711 175,-705 181,-699 187,-699 187,-699 283,-699 283,-699 289,-699 295,-705 295,-711 295,-711 295,-723 295,-723 295,-729 289,-735 283,-735"/>
<text text-anchor="middle" x="235" y="-713.3" font-family="Times,serif" font-size="14.00">items.len &lt; 4?</text>
</g>
<!-- check_len&#45;&gt;len_less_4 -->
<g id="edge2" class="edge">
<title>check_len&#45;&gt;len_less_4</title>
<path fill="none" stroke="black" d="M292.43,-785.8C281.99,-773.47 267.76,-756.68 256.08,-742.89"/>
<polygon fill="black" stroke="black" points="258.68,-740.54 249.55,-735.18 253.34,-745.07 258.68,-740.54"/>
<text text-anchor="middle" x="282.5" y="-756.8" font-family="Times,serif" font-size="14.00">是</text>
</g>
<!-- len_ge8 -->
<g id="node7" class="node">
<title>len_ge8</title>
<path fill="none" stroke="black" d="M441,-735C441,-735 333,-735 333,-735 327,-735 321,-729 321,-723 321,-723 321,-711 321,-711 321,-705 327,-699 333,-699 333,-699 441,-699 441,-699 447,-699 453,-705 453,-711 453,-711 453,-723 453,-723 453,-729 447,-735 441,-735"/>
<text text-anchor="middle" x="387" y="-713.3" font-family="Times,serif" font-size="14.00">items.len &gt;= 8?</text>
</g>
<!-- check_len&#45;&gt;len_ge8 -->
<g id="edge3" class="edge">
<title>check_len&#45;&gt;len_ge8</title>
<path fill="none" stroke="black" d="M323.19,-785.8C334.9,-773.36 350.89,-756.36 363.94,-742.5"/>
<polygon fill="black" stroke="black" points="366.53,-744.86 370.83,-735.18 361.43,-740.06 366.53,-744.86"/>
<text text-anchor="middle" x="358.5" y="-756.8" font-family="Times,serif" font-size="14.00">否</text>
</g>
<!-- handle_len3 -->
<g id="node4" class="node">
<title>handle_len3</title>
<path fill="none" stroke="black" d="M142,-648C142,-648 12,-648 12,-648 6,-648 0,-642 0,-636 0,-636 0,-624 0,-624 0,-618 6,-612 12,-612 12,-612 142,-612 142,-612 148,-612 154,-618 154,-624 154,-624 154,-636 154,-636 154,-642 148,-648 142,-648"/>
<text text-anchor="middle" x="77" y="-626.3" font-family="Times,serif" font-size="14.00">处理长度3的插入排序</text>
</g>
<!-- len_less_4&#45;&gt;handle_len3 -->
<g id="edge4" class="edge">
<title>len_less_4&#45;&gt;handle_len3</title>
<path fill="none" stroke="black" d="M203.03,-698.8C178.42,-685.56 144.26,-667.18 117.7,-652.9"/>
<polygon fill="black" stroke="black" points="119.12,-649.69 108.66,-648.03 115.8,-655.85 119.12,-649.69"/>
<text text-anchor="middle" x="185" y="-669.8" font-family="Times,serif" font-size="14.00">长度3</text>
</g>
<!-- handle_len2 -->
<g id="node5" class="node">
<title>handle_len2</title>
<path fill="none" stroke="black" d="M285.5,-648C285.5,-648 184.5,-648 184.5,-648 178.5,-648 172.5,-642 172.5,-636 172.5,-636 172.5,-624 172.5,-624 172.5,-618 178.5,-612 184.5,-612 184.5,-612 285.5,-612 285.5,-612 291.5,-612 297.5,-618 297.5,-624 297.5,-624 297.5,-636 297.5,-636 297.5,-642 291.5,-648 285.5,-648"/>
<text text-anchor="middle" x="235" y="-626.3" font-family="Times,serif" font-size="14.00">处理长度2的交换</text>
</g>
<!-- len_less_4&#45;&gt;handle_len2 -->
<g id="edge6" class="edge">
<title>len_less_4&#45;&gt;handle_len2</title>
<path fill="none" stroke="black" d="M235,-698.8C235,-687.16 235,-671.55 235,-658.24"/>
<polygon fill="black" stroke="black" points="238.5,-658.18 235,-648.18 231.5,-658.18 238.5,-658.18"/>
<text text-anchor="middle" x="254" y="-669.8" font-family="Times,serif" font-size="14.00">长度2</text>
</g>
<!-- return_small -->
<g id="node6" class="node">
<title>return_small</title>
<path fill="none" stroke="black" d="M198,-575C198,-575 168,-575 168,-575 162,-575 156,-569 156,-563 156,-563 156,-551 156,-551 156,-545 162,-539 168,-539 168,-539 198,-539 198,-539 204,-539 210,-545 210,-551 210,-551 210,-563 210,-563 210,-569 204,-575 198,-575"/>
<text text-anchor="middle" x="183" y="-553.3" font-family="Times,serif" font-size="14.00">返回</text>
</g>
<!-- handle_len3&#45;&gt;return_small -->
<g id="edge5" class="edge">
<title>handle_len3&#45;&gt;return_small</title>
<path fill="none" stroke="black" d="M102.39,-611.99C116.32,-602.67 133.77,-590.97 148.87,-580.86"/>
<polygon fill="black" stroke="black" points="151.09,-583.59 157.45,-575.11 147.19,-577.77 151.09,-583.59"/>
</g>
<!-- handle_len2&#45;&gt;return_small -->
<g id="edge7" class="edge">
<title>handle_len2&#45;&gt;return_small</title>
<path fill="none" stroke="black" d="M222.41,-611.81C216.15,-603.27 208.46,-592.77 201.55,-583.32"/>
<polygon fill="black" stroke="black" points="204.2,-581.03 195.47,-575.03 198.56,-585.16 204.2,-581.03"/>
</g>
<!-- end -->
<g id="node17" class="node">
<title>end</title>
<path fill="none" stroke="black" d="M214,-36C214,-36 184,-36 184,-36 178,-36 172,-30 172,-24 172,-24 172,-12 172,-12 172,-6 178,0 184,0 184,0 214,0 214,0 220,0 226,-6 226,-12 226,-12 226,-24 226,-24 226,-30 220,-36 214,-36"/>
<text text-anchor="middle" x="199" y="-14.3" font-family="Times,serif" font-size="14.00">结束</text>
</g>
<!-- return_small&#45;&gt;end -->
<g id="edge8" class="edge">
<title>return_small&#45;&gt;end</title>
<path fill="none" stroke="black" d="M183,-538.78C183,-524.41 183,-503.37 183,-485 183,-485 183,-485 183,-104 183,-84.41 187.15,-62.72 191.23,-46.15"/>
<polygon fill="black" stroke="black" points="194.72,-46.64 193.85,-36.08 187.94,-44.88 194.72,-46.64"/>
</g>
<!-- init_iterator -->
<g id="node8" class="node">
<title>init_iterator</title>
<path fill="none" stroke="black" d="M464.5,-648C464.5,-648 327.5,-648 327.5,-648 321.5,-648 315.5,-642 315.5,-636 315.5,-636 315.5,-624 315.5,-624 315.5,-618 321.5,-612 327.5,-612 327.5,-612 464.5,-612 464.5,-612 470.5,-612 476.5,-618 476.5,-624 476.5,-624 476.5,-636 476.5,-636 476.5,-642 470.5,-648 464.5,-648"/>
<text text-anchor="middle" x="396" y="-626.3" font-family="Times,serif" font-size="14.00">初始化迭代器 Iterator</text>
</g>
<!-- len_ge8&#45;&gt;init_iterator -->
<g id="edge9" class="edge">
<title>len_ge8&#45;&gt;init_iterator</title>
<path fill="none" stroke="black" d="M388.82,-698.8C390.05,-687.16 391.71,-671.55 393.12,-658.24"/>
<polygon fill="black" stroke="black" points="396.61,-658.49 394.18,-648.18 389.65,-657.75 396.61,-658.49"/>
</g>
<!-- sort_network -->
<g id="node9" class="node">
<title>sort_network</title>
<path fill="none" stroke="black" d="M489,-575C489,-575 303,-575 303,-575 297,-575 291,-569 291,-563 291,-563 291,-551 291,-551 291,-545 297,-539 303,-539 303,-539 489,-539 489,-539 495,-539 501,-545 501,-551 501,-551 501,-563 501,-563 501,-569 495,-575 489,-575"/>
<text text-anchor="middle" x="396" y="-553.3" font-family="Times,serif" font-size="14.00">使用排序网络处理4&#45;8长度的块</text>
</g>
<!-- init_iterator&#45;&gt;sort_network -->
<g id="edge10" class="edge">
<title>init_iterator&#45;&gt;sort_network</title>
<path fill="none" stroke="black" d="M396,-611.81C396,-603.79 396,-594.05 396,-585.07"/>
<polygon fill="black" stroke="black" points="399.5,-585.03 396,-575.03 392.5,-585.03 399.5,-585.03"/>
</g>
<!-- merge_phase -->
<g id="node10" class="node">
<title>merge_phase</title>
<path fill="none" stroke="black" d="M449.5,-502C449.5,-502 342.5,-502 342.5,-502 336.5,-502 330.5,-496 330.5,-490 330.5,-490 330.5,-478 330.5,-478 330.5,-472 336.5,-466 342.5,-466 342.5,-466 449.5,-466 449.5,-466 455.5,-466 461.5,-472 461.5,-478 461.5,-478 461.5,-490 461.5,-490 461.5,-496 455.5,-502 449.5,-502"/>
<text text-anchor="middle" x="396" y="-480.3" font-family="Times,serif" font-size="14.00">进入归并排序阶段</text>
</g>
<!-- sort_network&#45;&gt;merge_phase -->
<g id="edge11" class="edge">
<title>sort_network&#45;&gt;merge_phase</title>
<path fill="none" stroke="black" d="M396,-538.81C396,-530.79 396,-521.05 396,-512.07"/>
<polygon fill="black" stroke="black" points="399.5,-512.03 396,-502.03 392.5,-512.03 399.5,-512.03"/>
</g>
<!-- check_cache -->
<g id="node11" class="node">
<title>check_cache</title>
<path fill="none" stroke="black" d="M470.5,-429C470.5,-429 321.5,-429 321.5,-429 315.5,-429 309.5,-423 309.5,-417 309.5,-417 309.5,-405 309.5,-405 309.5,-399 315.5,-393 321.5,-393 321.5,-393 470.5,-393 470.5,-393 476.5,-393 482.5,-399 482.5,-405 482.5,-405 482.5,-417 482.5,-417 482.5,-423 476.5,-429 470.5,-429"/>
<text text-anchor="middle" x="396" y="-407.3" font-family="Times,serif" font-size="14.00">检查块大小是否适合缓存</text>
</g>
<!-- merge_phase&#45;&gt;check_cache -->
<g id="edge12" class="edge">
<title>merge_phase&#45;&gt;check_cache</title>
<path fill="none" stroke="black" d="M396,-465.81C396,-457.79 396,-448.05 396,-439.07"/>
<polygon fill="black" stroke="black" points="399.5,-439.03 396,-429.03 392.5,-439.03 399.5,-439.03"/>
</g>
<!-- merge_with_cache -->
<g id="node12" class="node">
<title>merge_with_cache</title>
<path fill="none" stroke="black" d="M315,-342C315,-342 223,-342 223,-342 217,-342 211,-336 211,-330 211,-330 211,-318 211,-318 211,-312 217,-306 223,-306 223,-306 315,-306 315,-306 321,-306 327,-312 327,-318 327,-318 327,-330 327,-330 327,-336 321,-342 315,-342"/>
<text text-anchor="middle" x="269" y="-320.3" font-family="Times,serif" font-size="14.00">使用缓存合并块</text>
</g>
<!-- check_cache&#45;&gt;merge_with_cache -->
<g id="edge13" class="edge">
<title>check_cache&#45;&gt;merge_with_cache</title>
<path fill="none" stroke="black" d="M313.92,-392.94C304.03,-388.32 294.72,-382.46 287,-375 280.68,-368.89 276.57,-360.41 273.9,-352.16"/>
<polygon fill="black" stroke="black" points="277.26,-351.16 271.31,-342.39 270.49,-352.96 277.26,-351.16"/>
<text text-anchor="middle" x="339.5" y="-363.8" font-family="Times,serif" font-size="14.00">块大小 &lt;= 缓存</text>
</g>
<!-- merge_in_place -->
<g id="node13" class="node">
<title>merge_in_place</title>
<path fill="none" stroke="black" d="M435,-342C435,-342 357,-342 357,-342 351,-342 345,-336 345,-330 345,-330 345,-318 345,-318 345,-312 351,-306 357,-306 357,-306 435,-306 435,-306 441,-306 447,-312 447,-318 447,-318 447,-330 447,-330 447,-336 441,-342 435,-342"/>
<text text-anchor="middle" x="396" y="-320.3" font-family="Times,serif" font-size="14.00">原地合并逻辑</text>
</g>
<!-- check_cache&#45;&gt;merge_in_place -->
<g id="edge14" class="edge">
<title>check_cache&#45;&gt;merge_in_place</title>
<path fill="none" stroke="black" d="M396,-392.8C396,-381.16 396,-365.55 396,-352.24"/>
<polygon fill="black" stroke="black" points="399.5,-352.18 396,-342.18 392.5,-352.18 399.5,-352.18"/>
<text text-anchor="middle" x="442.5" y="-363.8" font-family="Times,serif" font-size="14.00">块大小 &gt; 缓存</text>
</g>
<!-- handle_buffers -->
<g id="node14" class="node">
<title>handle_buffers</title>
<path fill="none" stroke="black" d="M375,-269C375,-269 283,-269 283,-269 277,-269 271,-263 271,-257 271,-257 271,-245 271,-245 271,-239 277,-233 283,-233 283,-233 375,-233 375,-233 381,-233 387,-239 387,-245 387,-245 387,-257 387,-257 387,-263 381,-269 375,-269"/>
<text text-anchor="middle" x="329" y="-247.3" font-family="Times,serif" font-size="14.00">处理内部缓冲区</text>
</g>
<!-- merge_with_cache&#45;&gt;handle_buffers -->
<g id="edge15" class="edge">
<title>merge_with_cache&#45;&gt;handle_buffers</title>
<path fill="none" stroke="black" d="M283.52,-305.81C290.89,-297.09 299.98,-286.34 308.09,-276.75"/>
<polygon fill="black" stroke="black" points="310.83,-278.93 314.61,-269.03 305.48,-274.41 310.83,-278.93"/>
</g>
<!-- merge_in_place&#45;&gt;handle_buffers -->
<g id="edge16" class="edge">
<title>merge_in_place&#45;&gt;handle_buffers</title>
<path fill="none" stroke="black" d="M379.78,-305.81C371.47,-297 361.2,-286.13 352.08,-276.46"/>
<polygon fill="black" stroke="black" points="354.48,-273.9 345.07,-269.03 349.39,-278.7 354.48,-273.9"/>
</g>
<!-- redistribute_buffers -->
<g id="node15" class="node">
<title>redistribute_buffers</title>
<path fill="none" stroke="black" d="M382.5,-196C382.5,-196 275.5,-196 275.5,-196 269.5,-196 263.5,-190 263.5,-184 263.5,-184 263.5,-172 263.5,-172 263.5,-166 269.5,-160 275.5,-160 275.5,-160 382.5,-160 382.5,-160 388.5,-160 394.5,-166 394.5,-172 394.5,-172 394.5,-184 394.5,-184 394.5,-190 388.5,-196 382.5,-196"/>
<text text-anchor="middle" x="329" y="-174.3" font-family="Times,serif" font-size="14.00">重分布缓冲区数据</text>
</g>
<!-- handle_buffers&#45;&gt;redistribute_buffers -->
<g id="edge17" class="edge">
<title>handle_buffers&#45;&gt;redistribute_buffers</title>
<path fill="none" stroke="black" d="M329,-232.81C329,-224.79 329,-215.05 329,-206.07"/>
<polygon fill="black" stroke="black" points="332.5,-206.03 329,-196.03 325.5,-206.03 332.5,-206.03"/>
</g>
<!-- next_level -->
<g id="node16" class="node">
<title>next_level</title>
<path fill="none" stroke="black" d="M382.5,-123C382.5,-123 275.5,-123 275.5,-123 269.5,-123 263.5,-117 263.5,-111 263.5,-111 263.5,-99 263.5,-99 263.5,-93 269.5,-87 275.5,-87 275.5,-87 382.5,-87 382.5,-87 388.5,-87 394.5,-93 394.5,-99 394.5,-99 394.5,-111 394.5,-111 394.5,-117 388.5,-123 382.5,-123"/>
<text text-anchor="middle" x="329" y="-101.3" font-family="Times,serif" font-size="14.00">进入下一归并层级</text>
</g>
<!-- redistribute_buffers&#45;&gt;next_level -->
<g id="edge18" class="edge">
<title>redistribute_buffers&#45;&gt;next_level</title>
<path fill="none" stroke="black" d="M329,-159.81C329,-151.79 329,-142.05 329,-133.07"/>
<polygon fill="black" stroke="black" points="332.5,-133.03 329,-123.03 325.5,-133.03 332.5,-133.03"/>
</g>
<!-- next_level&#45;&gt;check_cache -->
<g id="edge19" class="edge">
<title>next_level&#45;&gt;check_cache</title>
<path fill="none" stroke="black" d="M394.66,-107.19C444.32,-112 504,-127.98 504,-177 504,-325 504,-325 504,-325 504,-348.08 505.62,-358.02 490,-375 485.41,-379.99 480.03,-384.28 474.22,-387.95"/>
<polygon fill="black" stroke="black" points="472.43,-384.95 465.44,-392.92 475.87,-391.05 472.43,-384.95"/>
<text text-anchor="middle" x="533" y="-247.3" font-family="Times,serif" font-size="14.00">继续合并</text>
</g>
<!-- next_level&#45;&gt;end -->
<g id="edge20" class="edge">
<title>next_level&#45;&gt;end</title>
<path fill="none" stroke="black" d="M302.69,-86.8C282.87,-73.84 255.5,-55.94 233.85,-41.79"/>
<polygon fill="black" stroke="black" points="235.55,-38.72 225.27,-36.18 231.72,-44.58 235.55,-38.72"/>
<text text-anchor="middle" x="314" y="-57.8" font-family="Times,serif" font-size="14.00">完成所有层级</text>
</g>
</g>
</svg>
