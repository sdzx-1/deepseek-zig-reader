<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: flowchart Pages: 1 -->
<svg width="2167pt" height="1230pt"
 viewBox="0.00 0.00 2166.92 1230.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1226)">
<title>flowchart</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-1226 2162.92,-1226 2162.92,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<ellipse fill="none" stroke="black" cx="1879.98" cy="-1204" rx="34.39" ry="18"/>
<text text-anchor="middle" x="1879.98" y="-1200.3" font-family="Times,serif" font-size="14.00">Start</text>
</g>
<!-- init_vars -->
<g id="node5" class="node">
<title>init_vars</title>
<polygon fill="none" stroke="black" points="1879.98,-1135 1611.98,-1067 1879.98,-999 2147.98,-1067 1879.98,-1135"/>
<text text-anchor="middle" x="1879.98" y="-1085.8" font-family="Times,serif" font-size="14.00">Initialize variables:</text>
<text text-anchor="middle" x="1879.98" y="-1070.8" font-family="Times,serif" font-size="14.00">result, valid_varname_chars,</text>
<text text-anchor="middle" x="1879.98" y="-1055.8" font-family="Times,serif" font-size="14.00">open_var, curr=0, source_offset=0,</text>
<text text-anchor="middle" x="1879.98" y="-1040.8" font-family="Times,serif" font-size="14.00">var_stack</text>
</g>
<!-- start&#45;&gt;init_vars -->
<g id="edge1" class="edge">
<title>start&#45;&gt;init_vars</title>
<path fill="none" stroke="black" d="M1879.98,-1185.9C1879.98,-1175.19 1879.98,-1160.55 1879.98,-1145.23"/>
<polygon fill="black" stroke="black" points="1883.48,-1145.09 1879.98,-1135.09 1876.48,-1145.09 1883.48,-1145.09"/>
<text text-anchor="middle" x="1898.48" y="-1156.8" font-family="Times,serif" font-size="14.00">Start</text>
</g>
<!-- end -->
<g id="node2" class="node">
<title>end</title>
<ellipse fill="none" stroke="black" cx="1879.98" cy="-697" rx="29.5" ry="18"/>
<text text-anchor="middle" x="1879.98" y="-693.3" font-family="Times,serif" font-size="14.00">End</text>
</g>
<!-- process -->
<g id="node3" class="node">
<title>process</title>
<polygon fill="none" stroke="black" points="2003.48,-1222 1932.48,-1222 1932.48,-1186 2003.48,-1186 2003.48,-1222"/>
<text text-anchor="middle" x="1967.98" y="-1200.3" font-family="Times,serif" font-size="14.00">process</text>
</g>
<!-- decision -->
<g id="node4" class="node">
<title>decision</title>
<polygon fill="none" stroke="black" points="2089.98,-1222 2021.11,-1204 2089.98,-1186 2158.86,-1204 2089.98,-1222"/>
<text text-anchor="middle" x="2089.98" y="-1200.3" font-family="Times,serif" font-size="14.00">decision</text>
</g>
<!-- loop_cond -->
<g id="node6" class="node">
<title>loop_cond</title>
<polygon fill="none" stroke="black" points="1879.98,-962 1730.34,-944 1879.98,-926 2029.63,-944 1879.98,-962"/>
<text text-anchor="middle" x="1879.98" y="-940.3" font-family="Times,serif" font-size="14.00">curr &lt; contents.len?</text>
</g>
<!-- init_vars&#45;&gt;loop_cond -->
<g id="edge2" class="edge">
<title>init_vars&#45;&gt;loop_cond</title>
<path fill="none" stroke="black" d="M1879.98,-998.78C1879.98,-989.5 1879.98,-980.44 1879.98,-972.48"/>
<polygon fill="black" stroke="black" points="1883.48,-972.39 1879.98,-962.39 1876.48,-972.39 1883.48,-972.39"/>
</g>
<!-- process_char -->
<g id="node7" class="node">
<title>process_char</title>
<polygon fill="none" stroke="black" points="1494.98,-875 1393.77,-857 1494.98,-839 1596.2,-857 1494.98,-875"/>
<text text-anchor="middle" x="1494.98" y="-853.3" font-family="Times,serif" font-size="14.00">process_char</text>
</g>
<!-- loop_cond&#45;&gt;process_char -->
<g id="edge3" class="edge">
<title>loop_cond&#45;&gt;process_char</title>
<path fill="none" stroke="black" d="M1830.05,-931.97C1757.18,-915.89 1622.3,-886.11 1547.82,-869.67"/>
<polygon fill="black" stroke="black" points="1548.25,-866.18 1537.73,-867.44 1546.74,-873.01 1548.25,-866.18"/>
<text text-anchor="middle" x="1723.48" y="-896.8" font-family="Times,serif" font-size="14.00">Yes</text>
</g>
<!-- post_loop -->
<g id="node8" class="node">
<title>post_loop</title>
<polygon fill="none" stroke="black" points="1879.98,-875 1690.79,-857 1879.98,-839 2069.18,-857 1879.98,-875"/>
<text text-anchor="middle" x="1879.98" y="-853.3" font-family="Times,serif" font-size="14.00">Append remaining content</text>
</g>
<!-- loop_cond&#45;&gt;post_loop -->
<g id="edge4" class="edge">
<title>loop_cond&#45;&gt;post_loop</title>
<path fill="none" stroke="black" d="M1879.98,-925.8C1879.98,-914.16 1879.98,-898.55 1879.98,-885.24"/>
<polygon fill="black" stroke="black" points="1883.48,-885.18 1879.98,-875.18 1876.48,-885.18 1883.48,-885.18"/>
<text text-anchor="middle" x="1890.48" y="-896.8" font-family="Times,serif" font-size="14.00">No</text>
</g>
<!-- check_char_type -->
<g id="node9" class="node">
<title>check_char_type</title>
<polygon fill="none" stroke="black" points="1329.98,-802 1176.49,-784 1329.98,-766 1483.48,-784 1329.98,-802"/>
<text text-anchor="middle" x="1329.98" y="-780.3" font-family="Times,serif" font-size="14.00">Check contents[curr]</text>
</g>
<!-- process_char&#45;&gt;check_char_type -->
<g id="edge5" class="edge">
<title>process_char&#45;&gt;check_char_type</title>
<path fill="none" stroke="black" d="M1466.99,-843.96C1440.53,-832.57 1400.52,-815.35 1370.55,-802.46"/>
<polygon fill="black" stroke="black" points="1371.78,-799.17 1361.21,-798.44 1369.01,-805.6 1371.78,-799.17"/>
</g>
<!-- return_result -->
<g id="node37" class="node">
<title>return_result</title>
<polygon fill="none" stroke="black" points="1879.98,-802 1672.02,-784 1879.98,-766 2087.94,-784 1879.98,-802"/>
<text text-anchor="middle" x="1879.98" y="-780.3" font-family="Times,serif" font-size="14.00">Return result.toOwnedSlice()</text>
</g>
<!-- post_loop&#45;&gt;return_result -->
<g id="edge41" class="edge">
<title>post_loop&#45;&gt;return_result</title>
<path fill="none" stroke="black" d="M1879.98,-838.81C1879.98,-830.79 1879.98,-821.05 1879.98,-812.07"/>
<polygon fill="black" stroke="black" points="1883.48,-812.03 1879.98,-802.03 1876.48,-812.03 1883.48,-812.03"/>
</g>
<!-- case_at -->
<g id="node10" class="node">
<title>case_at</title>
<polygon fill="none" stroke="black" points="1329.98,-661 1157.38,-643 1329.98,-625 1502.59,-643 1329.98,-661"/>
<text text-anchor="middle" x="1329.98" y="-639.3" font-family="Times,serif" font-size="14.00">Handle @VAR@ pattern</text>
</g>
<!-- check_char_type&#45;&gt;case_at -->
<g id="edge6" class="edge">
<title>check_char_type&#45;&gt;case_at</title>
<path fill="none" stroke="black" d="M1329.98,-765.96C1329.98,-742.4 1329.98,-699.64 1329.98,-671.53"/>
<polygon fill="black" stroke="black" points="1333.48,-671.18 1329.98,-661.18 1326.48,-671.18 1333.48,-671.18"/>
<text text-anchor="middle" x="1337.48" y="-736.8" font-family="Times,serif" font-size="14.00">@</text>
</g>
<!-- case_dollar -->
<g id="node11" class="node">
<title>case_dollar</title>
<polygon fill="none" stroke="black" points="1709.98,-553 1539.06,-535 1709.98,-517 1880.91,-535 1709.98,-553"/>
<text text-anchor="middle" x="1709.98" y="-531.3" font-family="Times,serif" font-size="14.00">Handle ${VAR} pattern</text>
</g>
<!-- check_char_type&#45;&gt;case_dollar -->
<g id="edge7" class="edge">
<title>check_char_type&#45;&gt;case_dollar</title>
<path fill="none" stroke="black" d="M1352.34,-768.47C1417,-726.44 1604.41,-604.62 1678.91,-556.2"/>
<polygon fill="black" stroke="black" points="1680.94,-559.05 1687.42,-550.67 1677.13,-553.18 1680.94,-559.05"/>
<text text-anchor="middle" x="1494.98" y="-693.3" font-family="Times,serif" font-size="14.00">$</text>
</g>
<!-- case_brace -->
<g id="node12" class="node">
<title>case_brace</title>
<polygon fill="none" stroke="black" points="742.98,-715 617.14,-697 742.98,-679 868.83,-697 742.98,-715"/>
<text text-anchor="middle" x="742.98" y="-693.3" font-family="Times,serif" font-size="14.00">Handle } closure</text>
</g>
<!-- check_char_type&#45;&gt;case_brace -->
<g id="edge8" class="edge">
<title>check_char_type&#45;&gt;case_brace</title>
<path fill="none" stroke="black" d="M1264.92,-773.58C1153.37,-757.42 926.58,-724.59 812.22,-708.03"/>
<polygon fill="black" stroke="black" points="812.58,-704.54 802.18,-706.57 811.58,-711.47 812.58,-704.54"/>
<text text-anchor="middle" x="1076.98" y="-736.8" font-family="Times,serif" font-size="14.00">}</text>
</g>
<!-- default_case -->
<g id="node13" class="node">
<title>default_case</title>
<polygon fill="none" stroke="black" points="1055.98,-715 896.96,-697 1055.98,-679 1215.01,-697 1055.98,-715"/>
<text text-anchor="middle" x="1055.98" y="-693.3" font-family="Times,serif" font-size="14.00">Check var_stack state</text>
</g>
<!-- check_char_type&#45;&gt;default_case -->
<g id="edge9" class="edge">
<title>check_char_type&#45;&gt;default_case</title>
<path fill="none" stroke="black" d="M1290.14,-770.64C1241.48,-755.54 1159.12,-729.99 1106.17,-713.57"/>
<polygon fill="black" stroke="black" points="1106.91,-710.13 1096.32,-710.51 1104.83,-716.82 1106.91,-710.13"/>
<text text-anchor="middle" x="1230.98" y="-736.8" font-family="Times,serif" font-size="14.00">Other</text>
</g>
<!-- find_close_at -->
<g id="node14" class="node">
<title>find_close_at</title>
<polygon fill="none" stroke="black" points="1329.98,-499 1217.71,-481 1329.98,-463 1442.26,-481 1329.98,-499"/>
<text text-anchor="middle" x="1329.98" y="-477.3" font-family="Times,serif" font-size="14.00">Find closing @</text>
</g>
<!-- case_at&#45;&gt;find_close_at -->
<g id="edge10" class="edge">
<title>case_at&#45;&gt;find_close_at</title>
<path fill="none" stroke="black" d="M1329.98,-624.88C1329.98,-597.35 1329.98,-543.01 1329.98,-509.85"/>
<polygon fill="black" stroke="black" points="1333.48,-509.48 1329.98,-499.48 1326.48,-509.48 1333.48,-509.48"/>
<text text-anchor="middle" x="1406.48" y="-585.3" font-family="Times,serif" font-size="14.00">Check next character</text>
</g>
<!-- check_open_brace -->
<g id="node22" class="node">
<title>check_open_brace</title>
<polygon fill="none" stroke="black" points="1943.98,-304 1810.93,-286 1943.98,-268 2077.04,-286 1943.98,-304"/>
<text text-anchor="middle" x="1943.98" y="-282.3" font-family="Times,serif" font-size="14.00">check_open_brace</text>
</g>
<!-- case_dollar&#45;&gt;check_open_brace -->
<g id="edge19" class="edge">
<title>case_dollar&#45;&gt;check_open_brace</title>
<path fill="none" stroke="black" d="M1724.98,-518.17C1765.19,-475.72 1875.57,-359.22 1922.46,-309.72"/>
<polygon fill="black" stroke="black" points="1925.08,-312.04 1929.42,-302.38 1920,-307.23 1925.08,-312.04"/>
<text text-anchor="middle" x="1881.98" y="-423.3" font-family="Times,serif" font-size="14.00">Check next is {</text>
</g>
<!-- check_stack -->
<g id="node26" class="node">
<title>check_stack</title>
<polygon fill="none" stroke="black" points="349.98,-607 257.31,-589 349.98,-571 442.65,-589 349.98,-607"/>
<text text-anchor="middle" x="349.98" y="-585.3" font-family="Times,serif" font-size="14.00">check_stack</text>
</g>
<!-- case_brace&#45;&gt;check_stack -->
<g id="edge25" class="edge">
<title>case_brace&#45;&gt;check_stack</title>
<path fill="none" stroke="black" d="M701.67,-684.86C627.92,-664.97 474.12,-623.48 396.67,-602.59"/>
<polygon fill="black" stroke="black" points="397.28,-599.13 386.72,-599.91 395.46,-605.89 397.28,-599.13"/>
<text text-anchor="middle" x="701.48" y="-639.3" font-family="Times,serif" font-size="14.00">Check var_stack not empty</text>
</g>
<!-- check_valid_char -->
<g id="node35" class="node">
<title>check_valid_char</title>
<polygon fill="none" stroke="black" points="987.98,-607 742.65,-589 987.98,-571 1233.31,-589 987.98,-607"/>
<text text-anchor="middle" x="987.98" y="-585.3" font-family="Times,serif" font-size="14.00">Character in valid_varname_chars?</text>
</g>
<!-- default_case&#45;&gt;check_valid_char -->
<g id="edge35" class="edge">
<title>default_case&#45;&gt;check_valid_char</title>
<path fill="none" stroke="black" d="M1033.27,-681.28C1025.99,-675.65 1018.41,-668.72 1012.98,-661 1003.76,-647.88 997.63,-631.03 993.75,-617.03"/>
<polygon fill="black" stroke="black" points="997.06,-615.83 991.21,-606.99 990.27,-617.55 997.06,-615.83"/>
<text text-anchor="middle" x="1080.48" y="-639.3" font-family="Times,serif" font-size="14.00">In variable context</text>
</g>
<!-- valid_varname -->
<g id="node15" class="node">
<title>valid_varname</title>
<polygon fill="none" stroke="black" points="1415.98,-391 1273.55,-373 1415.98,-355 1558.42,-373 1415.98,-391"/>
<text text-anchor="middle" x="1415.98" y="-369.3" font-family="Times,serif" font-size="14.00">Validate characters</text>
</g>
<!-- find_close_at&#45;&gt;valid_varname -->
<g id="edge11" class="edge">
<title>find_close_at&#45;&gt;valid_varname</title>
<path fill="none" stroke="black" d="M1342.31,-464.81C1356.59,-447.2 1380.31,-417.97 1396.97,-397.44"/>
<polygon fill="black" stroke="black" points="1399.82,-399.47 1403.41,-389.5 1394.39,-395.06 1399.82,-399.47"/>
<text text-anchor="middle" x="1408.48" y="-423.3" font-family="Times,serif" font-size="14.00">Found</text>
</g>
<!-- preserve_literal -->
<g id="node16" class="node">
<title>preserve_literal</title>
<polygon fill="none" stroke="black" points="1183.98,-304 1030.49,-286 1183.98,-268 1337.48,-286 1183.98,-304"/>
<text text-anchor="middle" x="1183.98" y="-282.3" font-family="Times,serif" font-size="14.00">Preserve @ as literal</text>
</g>
<!-- find_close_at&#45;&gt;preserve_literal -->
<g id="edge12" class="edge">
<title>find_close_at&#45;&gt;preserve_literal</title>
<path fill="none" stroke="black" d="M1296.49,-468.26C1264.01,-454.95 1216.34,-429.91 1192.98,-391 1179.04,-367.76 1178.31,-336.19 1180.12,-313.95"/>
<polygon fill="black" stroke="black" points="1183.62,-314.16 1181.17,-303.85 1176.66,-313.44 1183.62,-314.16"/>
<text text-anchor="middle" x="1228.98" y="-369.3" font-family="Times,serif" font-size="14.00">Not found</text>
</g>
<!-- valid_varname&#45;&gt;preserve_literal -->
<g id="edge14" class="edge">
<title>valid_varname&#45;&gt;preserve_literal</title>
<path fill="none" stroke="black" d="M1381.25,-359.27C1340.62,-344.39 1273.26,-319.71 1228.75,-303.4"/>
<polygon fill="black" stroke="black" points="1229.93,-300.11 1219.34,-299.95 1227.52,-306.68 1229.93,-300.11"/>
<text text-anchor="middle" x="1338.48" y="-325.8" font-family="Times,serif" font-size="14.00">Invalid</text>
</g>
<!-- get_value -->
<g id="node17" class="node">
<title>get_value</title>
<polygon fill="none" stroke="black" points="1507.98,-304 1355.32,-286 1507.98,-268 1660.64,-286 1507.98,-304"/>
<text text-anchor="middle" x="1507.98" y="-282.3" font-family="Times,serif" font-size="14.00">Lookup key in values</text>
</g>
<!-- valid_varname&#45;&gt;get_value -->
<g id="edge13" class="edge">
<title>valid_varname&#45;&gt;get_value</title>
<path fill="none" stroke="black" d="M1432.43,-356.8C1446.73,-343.59 1467.65,-324.27 1483.84,-309.3"/>
<polygon fill="black" stroke="black" points="1486.4,-311.71 1491.37,-302.35 1481.65,-306.57 1486.4,-311.71"/>
<text text-anchor="middle" x="1485.98" y="-325.8" font-family="Times,serif" font-size="14.00">Valid</text>
</g>
<!-- continue_loop -->
<g id="node21" class="node">
<title>continue_loop</title>
<polygon fill="none" stroke="black" points="1146.98,-36 1065.37,-18 1146.98,0 1228.59,-18 1146.98,-36"/>
<text text-anchor="middle" x="1146.98" y="-14.3" font-family="Times,serif" font-size="14.00">curr += 1</text>
</g>
<!-- preserve_literal&#45;&gt;continue_loop -->
<g id="edge18" class="edge">
<title>preserve_literal&#45;&gt;continue_loop</title>
<path fill="none" stroke="black" d="M1132,-274.09C1100.96,-264.61 1063.97,-247.43 1044.98,-217 1011.1,-162.7 1011.97,-127.83 1044.98,-73 1057.22,-52.68 1079.95,-39.61 1100.85,-31.42"/>
<polygon fill="black" stroke="black" points="1102.07,-34.7 1110.28,-28 1099.68,-28.12 1102.07,-34.7"/>
</g>
<!-- append_value -->
<g id="node18" class="node">
<title>append_value</title>
<polygon fill="none" stroke="black" points="1218.98,-217 1054.43,-199 1218.98,-181 1383.54,-199 1218.98,-217"/>
<text text-anchor="middle" x="1218.98" y="-195.3" font-family="Times,serif" font-size="14.00">Append value to result</text>
</g>
<!-- get_value&#45;&gt;append_value -->
<g id="edge15" class="edge">
<title>get_value&#45;&gt;append_value</title>
<path fill="none" stroke="black" d="M1466.58,-272.82C1415.05,-257.66 1327.01,-231.77 1270.98,-215.29"/>
<polygon fill="black" stroke="black" points="1271.84,-211.9 1261.25,-212.43 1269.86,-218.61 1271.84,-211.9"/>
<text text-anchor="middle" x="1403.48" y="-238.8" font-family="Times,serif" font-size="14.00">Exists</text>
</g>
<!-- error_missing -->
<g id="node19" class="node">
<title>error_missing</title>
<polygon fill="none" stroke="black" points="1590.98,-217 1401.79,-199 1590.98,-181 1780.18,-199 1590.98,-217"/>
<text text-anchor="middle" x="1590.98" y="-195.3" font-family="Times,serif" font-size="14.00">Return error.MissingValue</text>
</g>
<!-- get_value&#45;&gt;error_missing -->
<g id="edge16" class="edge">
<title>get_value&#45;&gt;error_missing</title>
<path fill="none" stroke="black" d="M1523.21,-269.41C1535.88,-256.43 1554.11,-237.76 1568.47,-223.06"/>
<polygon fill="black" stroke="black" points="1571.09,-225.38 1575.58,-215.78 1566.09,-220.49 1571.09,-225.38"/>
<text text-anchor="middle" x="1583.48" y="-238.8" font-family="Times,serif" font-size="14.00">Missing</text>
</g>
<!-- update_offsets -->
<g id="node20" class="node">
<title>update_offsets</title>
<polygon fill="none" stroke="black" points="1267.98,-109 1053.66,-91 1267.98,-73 1482.31,-91 1267.98,-109"/>
<text text-anchor="middle" x="1267.98" y="-87.3" font-family="Times,serif" font-size="14.00">Update curr and source_offset</text>
</g>
<!-- append_value&#45;&gt;update_offsets -->
<g id="edge17" class="edge">
<title>append_value&#45;&gt;update_offsets</title>
<path fill="none" stroke="black" d="M1226.64,-181.44C1234.55,-164.32 1247,-137.39 1256.18,-117.54"/>
<polygon fill="black" stroke="black" points="1259.36,-118.99 1260.38,-108.45 1253.01,-116.05 1259.36,-118.99"/>
</g>
<!-- update_offsets&#45;&gt;continue_loop -->
<g id="edge38" class="edge">
<title>update_offsets&#45;&gt;continue_loop</title>
<path fill="none" stroke="black" d="M1242.62,-75.12C1223.51,-63.9 1197.24,-48.49 1177.07,-36.65"/>
<polygon fill="black" stroke="black" points="1178.67,-33.54 1168.28,-31.49 1175.13,-39.57 1178.67,-33.54"/>
</g>
<!-- continue_loop&#45;&gt;loop_cond -->
<g id="edge40" class="edge">
<title>continue_loop&#45;&gt;loop_cond</title>
<path fill="none" stroke="black" d="M1218.27,-20.29C1448.13,-24.92 2154.98,-42.99 2154.98,-90 2154.98,-858 2154.98,-858 2154.98,-858 2154.98,-898.49 2044.77,-921.78 1963.89,-933.42"/>
<polygon fill="black" stroke="black" points="1963.1,-930 1953.68,-934.85 1964.07,-936.93 1963.1,-930"/>
</g>
<!-- append_open_var -->
<g id="node23" class="node">
<title>append_open_var</title>
<polygon fill="none" stroke="black" points="1943.98,-217 1798.53,-199 1943.98,-181 2089.44,-199 1943.98,-217"/>
<text text-anchor="middle" x="1943.98" y="-195.3" font-family="Times,serif" font-size="14.00">Append ${ to result</text>
</g>
<!-- check_open_brace&#45;&gt;append_open_var -->
<g id="edge20" class="edge">
<title>check_open_brace&#45;&gt;append_open_var</title>
<path fill="none" stroke="black" d="M1943.98,-267.8C1943.98,-256.16 1943.98,-240.55 1943.98,-227.24"/>
<polygon fill="black" stroke="black" points="1947.48,-227.18 1943.98,-217.18 1940.48,-227.18 1947.48,-227.18"/>
<text text-anchor="middle" x="1956.48" y="-238.8" font-family="Times,serif" font-size="14.00">Yes</text>
</g>
<!-- preserve_literal_dollar -->
<g id="node24" class="node">
<title>preserve_literal_dollar</title>
<polygon fill="none" stroke="black" points="1947.98,-163 1800.02,-145 1947.98,-127 2095.95,-145 1947.98,-163"/>
<text text-anchor="middle" x="1947.98" y="-141.3" font-family="Times,serif" font-size="14.00">Preserve $ as literal</text>
</g>
<!-- check_open_brace&#45;&gt;preserve_literal_dollar -->
<g id="edge21" class="edge">
<title>check_open_brace&#45;&gt;preserve_literal_dollar</title>
<path fill="none" stroke="black" d="M1989.56,-274.05C2046.76,-258.14 2133.38,-225.6 2097.98,-181 2088.91,-169.57 2060.3,-161.52 2030.47,-156.05"/>
<polygon fill="black" stroke="black" points="2030.78,-152.55 2020.33,-154.29 2029.59,-159.45 2030.78,-152.55"/>
<text text-anchor="middle" x="2091.48" y="-238.8" font-family="Times,serif" font-size="14.00">No</text>
</g>
<!-- push_stack -->
<g id="node25" class="node">
<title>push_stack</title>
<polygon fill="none" stroke="black" points="1709.98,-109 1522.47,-91 1709.98,-73 1897.5,-91 1709.98,-109"/>
<text text-anchor="middle" x="1709.98" y="-87.3" font-family="Times,serif" font-size="14.00">Push position to var_stack</text>
</g>
<!-- append_open_var&#45;&gt;push_stack -->
<g id="edge22" class="edge">
<title>append_open_var&#45;&gt;push_stack</title>
<path fill="none" stroke="black" d="M1874.45,-189.57C1847.36,-184.4 1816.71,-176.14 1790.98,-163 1767.66,-151.08 1745.61,-130.95 1730.42,-115.16"/>
<polygon fill="black" stroke="black" points="1732.93,-112.72 1723.54,-107.81 1727.82,-117.5 1732.93,-112.72"/>
</g>
<!-- preserve_literal_dollar&#45;&gt;continue_loop -->
<g id="edge24" class="edge">
<title>preserve_literal_dollar&#45;&gt;continue_loop</title>
<path fill="none" stroke="black" d="M1943.37,-127.26C1937.76,-110.41 1926.53,-85.23 1906.98,-73 1850.54,-37.69 1412.87,-24.52 1228.47,-20.51"/>
<polygon fill="black" stroke="black" points="1228.36,-17 1218.29,-20.29 1228.21,-24 1228.36,-17"/>
</g>
<!-- push_stack&#45;&gt;continue_loop -->
<g id="edge23" class="edge">
<title>push_stack&#45;&gt;continue_loop</title>
<path fill="none" stroke="black" d="M1633.18,-80.31C1519.57,-65.99 1309.16,-39.45 1206.47,-26.5"/>
<polygon fill="black" stroke="black" points="1206.64,-22.99 1196.28,-25.22 1205.76,-29.94 1206.64,-22.99"/>
</g>
<!-- pop_stack -->
<g id="node27" class="node">
<title>pop_stack</title>
<polygon fill="none" stroke="black" points="349.98,-499 179.9,-481 349.98,-463 520.07,-481 349.98,-499"/>
<text text-anchor="middle" x="349.98" y="-477.3" font-family="Times,serif" font-size="14.00">Pop position from stack</text>
</g>
<!-- check_stack&#45;&gt;pop_stack -->
<g id="edge26" class="edge">
<title>check_stack&#45;&gt;pop_stack</title>
<path fill="none" stroke="black" d="M349.98,-570.97C349.98,-554.38 349.98,-528.88 349.98,-509.43"/>
<polygon fill="black" stroke="black" points="353.48,-509.34 349.98,-499.34 346.48,-509.34 353.48,-509.34"/>
<text text-anchor="middle" x="387.98" y="-531.3" font-family="Times,serif" font-size="14.00">Not empty</text>
</g>
<!-- preserve_brace -->
<g id="node28" class="node">
<title>preserve_brace</title>
<polygon fill="none" stroke="black" points="147.98,-445 0.02,-427 147.98,-409 295.95,-427 147.98,-445"/>
<text text-anchor="middle" x="147.98" y="-423.3" font-family="Times,serif" font-size="14.00">Preserve } as literal</text>
</g>
<!-- check_stack&#45;&gt;preserve_brace -->
<g id="edge27" class="edge">
<title>check_stack&#45;&gt;preserve_brace</title>
<path fill="none" stroke="black" d="M311.27,-578.37C270.77,-566.37 208.03,-541.98 170.98,-499 160.37,-486.68 154.63,-469.37 151.54,-454.93"/>
<polygon fill="black" stroke="black" points="154.97,-454.23 149.73,-445.03 148.09,-455.5 154.97,-454.23"/>
<text text-anchor="middle" x="266.98" y="-531.3" font-family="Times,serif" font-size="14.00">Empty</text>
</g>
<!-- validate_key -->
<g id="node29" class="node">
<title>validate_key</title>
<polygon fill="none" stroke="black" points="350.98,-391 254.46,-373 350.98,-355 447.51,-373 350.98,-391"/>
<text text-anchor="middle" x="350.98" y="-369.3" font-family="Times,serif" font-size="14.00">validate_key</text>
</g>
<!-- pop_stack&#45;&gt;validate_key -->
<g id="edge28" class="edge">
<title>pop_stack&#45;&gt;validate_key</title>
<path fill="none" stroke="black" d="M350.14,-462.97C350.3,-446.28 350.54,-420.58 350.73,-401.08"/>
<polygon fill="black" stroke="black" points="354.23,-401.02 350.82,-390.99 347.23,-400.95 354.23,-401.02"/>
<text text-anchor="middle" x="420.98" y="-423.3" font-family="Times,serif" font-size="14.00">Get key from result</text>
</g>
<!-- preserve_brace&#45;&gt;continue_loop -->
<g id="edge34" class="edge">
<title>preserve_brace&#45;&gt;continue_loop</title>
<path fill="none" stroke="black" d="M147.41,-408.75C146.82,-389.63 145.98,-357.86 145.98,-330.5 145.98,-330.5 145.98,-330.5 145.98,-90 145.98,-44.02 826.72,-25.59 1065.45,-20.54"/>
<polygon fill="black" stroke="black" points="1065.87,-24.03 1075.8,-20.33 1065.73,-17.04 1065.87,-24.03"/>
</g>
<!-- lookup_value -->
<g id="node30" class="node">
<title>lookup_value</title>
<polygon fill="none" stroke="black" points="710.98,-304 546.43,-286 710.98,-268 875.54,-286 710.98,-304"/>
<text text-anchor="middle" x="710.98" y="-282.3" font-family="Times,serif" font-size="14.00">Lookup value in values</text>
</g>
<!-- validate_key&#45;&gt;lookup_value -->
<g id="edge29" class="edge">
<title>validate_key&#45;&gt;lookup_value</title>
<path fill="none" stroke="black" d="M391.23,-362.5C454.58,-347.54 577.89,-318.42 651.49,-301.05"/>
<polygon fill="black" stroke="black" points="652.61,-304.38 661.54,-298.68 651,-297.57 652.61,-304.38"/>
<text text-anchor="middle" x="589.48" y="-325.8" font-family="Times,serif" font-size="14.00">Key exists</text>
</g>
<!-- error_missing_key -->
<g id="node31" class="node">
<title>error_missing_key</title>
<polygon fill="none" stroke="black" points="350.98,-304 173.69,-286 350.98,-268 528.28,-286 350.98,-304"/>
<text text-anchor="middle" x="350.98" y="-282.3" font-family="Times,serif" font-size="14.00">Return error.MissingKey</text>
</g>
<!-- validate_key&#45;&gt;error_missing_key -->
<g id="edge30" class="edge">
<title>validate_key&#45;&gt;error_missing_key</title>
<path fill="none" stroke="black" d="M350.98,-354.8C350.98,-343.16 350.98,-327.55 350.98,-314.24"/>
<polygon fill="black" stroke="black" points="354.48,-314.18 350.98,-304.18 347.48,-314.18 354.48,-314.18"/>
<text text-anchor="middle" x="389.48" y="-325.8" font-family="Times,serif" font-size="14.00">Empty key</text>
</g>
<!-- replace_value -->
<g id="node32" class="node">
<title>replace_value</title>
<polygon fill="none" stroke="black" points="764.98,-217 570.26,-199 764.98,-181 959.71,-199 764.98,-217"/>
<text text-anchor="middle" x="764.98" y="-195.3" font-family="Times,serif" font-size="14.00">Replace ${VAR} with value</text>
</g>
<!-- lookup_value&#45;&gt;replace_value -->
<g id="edge31" class="edge">
<title>lookup_value&#45;&gt;replace_value</title>
<path fill="none" stroke="black" d="M721.14,-269.01C729.01,-256.63 740.06,-239.23 749.1,-225.01"/>
<polygon fill="black" stroke="black" points="752.28,-226.52 754.69,-216.21 746.37,-222.77 752.28,-226.52"/>
<text text-anchor="middle" x="764.48" y="-238.8" font-family="Times,serif" font-size="14.00">Found</text>
</g>
<!-- error_missing_value -->
<g id="node33" class="node">
<title>error_missing_value</title>
<polygon fill="none" stroke="black" points="362.98,-217 173.79,-199 362.98,-181 552.18,-199 362.98,-217"/>
<text text-anchor="middle" x="362.98" y="-195.3" font-family="Times,serif" font-size="14.00">Return error.MissingValue</text>
</g>
<!-- lookup_value&#45;&gt;error_missing_value -->
<g id="edge32" class="edge">
<title>lookup_value&#45;&gt;error_missing_value</title>
<path fill="none" stroke="black" d="M662.6,-273.18C600.07,-257.91 491.2,-231.32 423.33,-214.74"/>
<polygon fill="black" stroke="black" points="423.76,-211.24 413.21,-212.27 422.1,-218.04 423.76,-211.24"/>
<text text-anchor="middle" x="586.48" y="-238.8" font-family="Times,serif" font-size="14.00">Missing</text>
</g>
<!-- update_source_offset -->
<g id="node34" class="node">
<title>update_source_offset</title>
<polygon fill="none" stroke="black" points="785.98,-109 632.49,-91 785.98,-73 939.48,-91 785.98,-109"/>
<text text-anchor="middle" x="785.98" y="-87.3" font-family="Times,serif" font-size="14.00">Update source_offset</text>
</g>
<!-- replace_value&#45;&gt;update_source_offset -->
<g id="edge33" class="edge">
<title>replace_value&#45;&gt;update_source_offset</title>
<path fill="none" stroke="black" d="M768.36,-180.97C771.7,-164.1 776.86,-138.03 780.74,-118.47"/>
<polygon fill="black" stroke="black" points="784.18,-119.13 782.69,-108.64 777.31,-117.77 784.18,-119.13"/>
</g>
<!-- update_source_offset&#45;&gt;continue_loop -->
<g id="edge39" class="edge">
<title>update_source_offset&#45;&gt;continue_loop</title>
<path fill="none" stroke="black" d="M840.42,-79.29C909.74,-65.66 1028.61,-42.28 1096.16,-29"/>
<polygon fill="black" stroke="black" points="1097,-32.4 1106.14,-27.03 1095.65,-25.53 1097,-32.4"/>
</g>
<!-- check_valid_char&#45;&gt;continue_loop -->
<g id="edge37" class="edge">
<title>check_valid_char&#45;&gt;continue_loop</title>
<path fill="none" stroke="black" d="M987.98,-570.74C987.98,-549.76 987.98,-513.28 987.98,-482 987.98,-482 987.98,-482 987.98,-90 987.98,-48.86 1032.92,-31.39 1075.01,-24.06"/>
<polygon fill="black" stroke="black" points="1075.72,-27.49 1085.06,-22.48 1074.63,-20.58 1075.72,-27.49"/>
<text text-anchor="middle" x="1000.48" y="-282.3" font-family="Times,serif" font-size="14.00">Yes</text>
</g>
<!-- error_invalid_char -->
<g id="node36" class="node">
<title>error_invalid_char</title>
<polygon fill="none" stroke="black" points="748.98,-499 537.67,-481 748.98,-463 960.3,-481 748.98,-499"/>
<text text-anchor="middle" x="748.98" y="-477.3" font-family="Times,serif" font-size="14.00">Return error.InvalidCharacter</text>
</g>
<!-- check_valid_char&#45;&gt;error_invalid_char -->
<g id="edge36" class="edge">
<title>check_valid_char&#45;&gt;error_invalid_char</title>
<path fill="none" stroke="black" d="M954.75,-573.26C911.79,-554.21 836.99,-521.03 790.38,-500.36"/>
<polygon fill="black" stroke="black" points="791.73,-497.13 781.17,-496.27 788.89,-503.53 791.73,-497.13"/>
<text text-anchor="middle" x="914.48" y="-531.3" font-family="Times,serif" font-size="14.00">No</text>
</g>
<!-- return_result&#45;&gt;end -->
<g id="edge42" class="edge">
<title>return_result&#45;&gt;end</title>
<path fill="none" stroke="black" d="M1879.98,-765.8C1879.98,-754.16 1879.98,-738.55 1879.98,-725.24"/>
<polygon fill="black" stroke="black" points="1883.48,-725.18 1879.98,-715.18 1876.48,-725.18 1883.48,-725.18"/>
</g>
</g>
</svg>
