graph TD
    A[开始: zirShl] --> B[初始化和准备]
    B --> C[解析lhs和rhs及其类型]
    C --> D[检查操作数是否可向量化]
    D --> E{rhs是编译时常量?}
    E --> |是| F[处理rhs为常量的情况]
    E --> |否| G[处理rhs为运行时值]
    F --> F1{rhs是undef?}
    F1 --> |是| F2[返回undef引用]
    F1 --> |否| F3{rhs等于0?}
    F3 --> |是| F4[直接返回lhs]
    F3 --> |否| F5[检查位移量是否超过位数]
    F5 --> F6{是否超过?}
    F6 --> |是| F7[报错: 位移量过大]
    F6 --> |否| F8[检查位移量是否为负]
    F8 --> F9{是否为负?}
    F9 --> |是| F10[报错: 负位移量]
    F9 --> |否| G
    G --> H{lhs是编译时常量?}
    H --> |是| I[处理lhs为常量的情况]
    H --> |否| J[处理lhs为运行时值]
    I --> I1{lhs是undef?}
    I1 --> |是| I2[返回undef引用]
    I1 --> |否| I3[计算位移结果]
    I3 --> I4{是否溢出?}
    I4 --> |是| I5[报错: 溢出]
    I4 --> |否| J
    J --> K{是shl_sat类型?}
    K --> |是| L[限制rhs类型并转换]
    K --> |否| M[继续处理]
    L --> M
    M --> N[添加运行时安全检查]
    N --> O{需要安全校验?}
    O --> |是| P[添加位移量校验和溢出校验]
    O --> |否| Q[生成位移指令]
    P --> Q
    Q --> R[返回结果]
    F2 --> R
    F4 --> R
    F7 --> R
    F10 --> R
    I2 --> R
    I5 --> R
