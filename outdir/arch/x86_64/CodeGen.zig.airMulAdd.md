flowchart TD
    A[开始] --> B[解析指令参数，获取类型ty]
    B --> C{是否需要调用fma?}
    C -->|是| D[生成fma函数调用]
    C -->|否| E[处理三个操作数]
    E --> F[分配寄存器并锁定]
    F --> G[确定操作数顺序order]
    G --> H{根据order选择FMA指令类型}
    H -->|132或312| I[选择fmadd132]
    H -->|213或123| J[选择fmadd213]
    H -->|231或321| K[选择fmadd231]
    I --> L[生成汇编指令]
    J --> L
    K --> L
    L --> M[返回结果]
    D --> M
    M --> N[结束]
