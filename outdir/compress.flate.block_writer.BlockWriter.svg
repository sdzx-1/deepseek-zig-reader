<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: BlockWriterFlow Pages: 1 -->
<svg width="581pt" height="905pt"
 viewBox="0.00 0.00 581.00 905.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 901)">
<title>BlockWriterFlow</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-901 577,-901 577,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_helpers</title>
<polygon fill="none" stroke="blue" points="383,-740 383,-889 565,-889 565,-740 383,-740"/>
<text text-anchor="middle" x="474" y="-873.8" font-family="Times,serif" font-size="14.00">辅助函数</text>
</g>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<path fill="none" stroke="black" d="M326,-858C326,-858 264,-858 264,-858 258,-858 252,-852 252,-846 252,-846 252,-834 252,-834 252,-828 258,-822 264,-822 264,-822 326,-822 326,-822 332,-822 338,-828 338,-834 338,-834 338,-846 338,-846 338,-852 332,-858 326,-858"/>
<text text-anchor="middle" x="295" y="-836.3" font-family="Arial" font-size="14.00">开始 write()</text>
</g>
<!-- index_tokens -->
<g id="node2" class="node">
<title>index_tokens</title>
<path fill="none" stroke="black" d="M363,-785C363,-785 227,-785 227,-785 221,-785 215,-779 215,-773 215,-773 215,-759 215,-759 215,-753 221,-747 227,-747 227,-747 363,-747 363,-747 369,-747 375,-753 375,-759 375,-759 375,-773 375,-773 375,-779 369,-785 363,-785"/>
<text text-anchor="middle" x="295" y="-769.8" font-family="Arial" font-size="14.00">indexTokens()</text>
<text text-anchor="middle" x="295" y="-754.8" font-family="Arial" font-size="14.00">统计literal/distance频率</text>
</g>
<!-- start&#45;&gt;index_tokens -->
<g id="edge1" class="edge">
<title>start&#45;&gt;index_tokens</title>
<path fill="none" stroke="black" d="M295,-821.94C295,-813.99 295,-804.31 295,-795.31"/>
<polygon fill="black" stroke="black" points="298.5,-795.2 295,-785.2 291.5,-795.2 298.5,-795.2"/>
</g>
<!-- check_storable -->
<g id="node3" class="node">
<title>check_storable</title>
<path fill="none" stroke="black" d="M348.5,-710C348.5,-710 241.5,-710 241.5,-710 235.5,-710 229.5,-704 229.5,-698 229.5,-698 229.5,-684 229.5,-684 229.5,-678 235.5,-672 241.5,-672 241.5,-672 348.5,-672 348.5,-672 354.5,-672 360.5,-678 360.5,-684 360.5,-684 360.5,-698 360.5,-698 360.5,-704 354.5,-710 348.5,-710"/>
<text text-anchor="middle" x="295" y="-694.8" font-family="Arial" font-size="14.00">计算stored_size</text>
<text text-anchor="middle" x="295" y="-679.8" font-family="Arial" font-size="14.00">判断是否适合存储</text>
</g>
<!-- index_tokens&#45;&gt;check_storable -->
<g id="edge2" class="edge">
<title>index_tokens&#45;&gt;check_storable</title>
<path fill="none" stroke="black" d="M295,-746.96C295,-738.88 295,-729.18 295,-720.18"/>
<polygon fill="black" stroke="black" points="298.5,-720.09 295,-710.09 291.5,-720.09 298.5,-720.09"/>
</g>
<!-- is_storable -->
<g id="node4" class="node">
<title>is_storable</title>
<path fill="none" stroke="black" d="M283.42,-631.86C283.42,-631.86 240.22,-620.14 240.22,-620.14 234.43,-618.57 234.43,-615.43 240.22,-613.86 240.22,-613.86 283.42,-602.14 283.42,-602.14 289.21,-600.57 300.79,-600.57 306.58,-602.14 306.58,-602.14 349.78,-613.86 349.78,-613.86 355.57,-615.43 355.57,-618.57 349.78,-620.14 349.78,-620.14 306.58,-631.86 306.58,-631.86 300.79,-633.43 289.21,-633.43 283.42,-631.86"/>
<text text-anchor="middle" x="295" y="-613.3" font-family="Arial" font-size="14.00">storable?</text>
</g>
<!-- check_storable&#45;&gt;is_storable -->
<g id="edge3" class="edge">
<title>check_storable&#45;&gt;is_storable</title>
<path fill="none" stroke="black" d="M295,-671.83C295,-663.89 295,-654.41 295,-645.63"/>
<polygon fill="black" stroke="black" points="298.5,-645.42 295,-635.42 291.5,-645.42 298.5,-645.42"/>
</g>
<!-- calc_fixed -->
<g id="node5" class="node">
<title>calc_fixed</title>
<path fill="none" stroke="black" d="M313.5,-548C313.5,-548 140.5,-548 140.5,-548 134.5,-548 128.5,-542 128.5,-536 128.5,-536 128.5,-524 128.5,-524 128.5,-518 134.5,-512 140.5,-512 140.5,-512 313.5,-512 313.5,-512 319.5,-512 325.5,-518 325.5,-524 325.5,-524 325.5,-536 325.5,-536 325.5,-542 319.5,-548 313.5,-548"/>
<text text-anchor="middle" x="227" y="-526.3" font-family="Arial" font-size="14.00">计算固定编码大小 fixedSize()</text>
</g>
<!-- is_storable&#45;&gt;calc_fixed -->
<g id="edge5" class="edge">
<title>is_storable&#45;&gt;calc_fixed</title>
<path fill="none" stroke="black" d="M283.77,-601.96C273.84,-589.55 259.11,-571.14 247.15,-556.19"/>
<polygon fill="black" stroke="black" points="249.81,-553.91 240.83,-548.29 244.35,-558.29 249.81,-553.91"/>
<text text-anchor="middle" x="273.5" y="-569.8" font-family="Arial" font-size="14.00">否</text>
</g>
<!-- write_stored -->
<g id="node9" class="node">
<title>write_stored</title>
<path fill="none" stroke="black" d="M381,-186C381,-186 309,-186 309,-186 303,-186 297,-180 297,-174 297,-174 297,-160 297,-160 297,-154 303,-148 309,-148 309,-148 381,-148 381,-148 387,-148 393,-154 393,-160 393,-160 393,-174 393,-174 393,-180 387,-186 381,-186"/>
<text text-anchor="middle" x="345" y="-170.8" font-family="Arial" font-size="14.00">storedBlock()</text>
<text text-anchor="middle" x="345" y="-155.8" font-family="Arial" font-size="14.00">写入存储块</text>
</g>
<!-- is_storable&#45;&gt;write_stored -->
<g id="edge4" class="edge">
<title>is_storable&#45;&gt;write_stored</title>
<path fill="none" stroke="black" d="M313.31,-603.96C333.15,-589.31 362,-562.57 362,-531 362,-531 362,-531 362,-274 362,-247.37 356.71,-217.45 352.03,-196.21"/>
<polygon fill="black" stroke="black" points="355.39,-195.2 349.74,-186.24 348.56,-196.77 355.39,-195.2"/>
<text text-anchor="middle" x="369.5" y="-407.8" font-family="Arial" font-size="14.00">是</text>
</g>
<!-- generate_codegen -->
<g id="node6" class="node">
<title>generate_codegen</title>
<path fill="none" stroke="black" d="M269,-475C269,-475 159,-475 159,-475 153,-475 147,-469 147,-463 147,-463 147,-449 147,-449 147,-443 153,-437 159,-437 159,-437 269,-437 269,-437 275,-437 281,-443 281,-449 281,-449 281,-463 281,-463 281,-469 275,-475 269,-475"/>
<text text-anchor="middle" x="214" y="-459.8" font-family="Arial" font-size="14.00">generateCodegen()</text>
<text text-anchor="middle" x="214" y="-444.8" font-family="Arial" font-size="14.00">生成动态编码</text>
</g>
<!-- calc_fixed&#45;&gt;generate_codegen -->
<g id="edge6" class="edge">
<title>calc_fixed&#45;&gt;generate_codegen</title>
<path fill="none" stroke="black" d="M223.92,-511.94C222.48,-503.99 220.74,-494.31 219.11,-485.31"/>
<polygon fill="black" stroke="black" points="222.51,-484.42 217.29,-475.2 215.62,-485.66 222.51,-484.42"/>
</g>
<!-- calc_dynamic -->
<g id="node7" class="node">
<title>calc_dynamic</title>
<path fill="none" stroke="black" d="M308,-386C308,-386 112,-386 112,-386 106,-386 100,-380 100,-374 100,-374 100,-362 100,-362 100,-356 106,-350 112,-350 112,-350 308,-350 308,-350 314,-350 320,-356 320,-362 320,-362 320,-374 320,-374 320,-380 314,-386 308,-386"/>
<text text-anchor="middle" x="210" y="-364.3" font-family="Arial" font-size="14.00">计算动态编码大小 dynamicSize()</text>
</g>
<!-- generate_codegen&#45;&gt;calc_dynamic -->
<g id="edge7" class="edge">
<title>generate_codegen&#45;&gt;calc_dynamic</title>
<path fill="none" stroke="black" d="M213.15,-436.76C212.6,-424.93 211.88,-409.32 211.26,-396.05"/>
<polygon fill="black" stroke="black" points="214.75,-395.87 210.79,-386.04 207.76,-396.19 214.75,-395.87"/>
</g>
<!-- compare_sizes -->
<g id="node8" class="node">
<title>compare_sizes</title>
<path fill="none" stroke="black" d="M155.3,-310.34C155.3,-310.34 11.7,-277.66 11.7,-277.66 5.85,-276.33 5.85,-273.67 11.7,-272.34 11.7,-272.34 155.3,-239.66 155.3,-239.66 161.15,-238.33 172.85,-238.33 178.7,-239.66 178.7,-239.66 322.3,-272.34 322.3,-272.34 328.15,-273.67 328.15,-276.33 322.3,-277.66 322.3,-277.66 178.7,-310.34 178.7,-310.34 172.85,-311.67 161.15,-311.67 155.3,-310.34"/>
<text text-anchor="middle" x="167" y="-278.8" font-family="Arial" font-size="14.00">比较存储/固定/动态大小</text>
<text text-anchor="middle" x="167" y="-263.8" font-family="Arial" font-size="14.00">选择最优方案</text>
</g>
<!-- calc_dynamic&#45;&gt;compare_sizes -->
<g id="edge8" class="edge">
<title>calc_dynamic&#45;&gt;compare_sizes</title>
<path fill="none" stroke="black" d="M201.91,-349.88C197.73,-341.03 192.42,-329.8 187.21,-318.78"/>
<polygon fill="black" stroke="black" points="190.33,-317.18 182.89,-309.63 184,-320.17 190.33,-317.18"/>
</g>
<!-- compare_sizes&#45;&gt;write_stored -->
<g id="edge9" class="edge">
<title>compare_sizes&#45;&gt;write_stored</title>
<path fill="none" stroke="black" d="M214.07,-247.48C229.71,-238.55 247.17,-228.45 263,-219 277.64,-210.26 293.59,-200.41 307.5,-191.72"/>
<polygon fill="black" stroke="black" points="309.7,-194.47 316.31,-186.19 305.98,-188.54 309.7,-194.47"/>
<text text-anchor="middle" x="315" y="-207.8" font-family="Arial" font-size="14.00">存储最优</text>
</g>
<!-- write_fixed -->
<g id="node10" class="node">
<title>write_fixed</title>
<path fill="none" stroke="black" d="M127,-186C127,-186 53,-186 53,-186 47,-186 41,-180 41,-174 41,-174 41,-160 41,-160 41,-154 47,-148 53,-148 53,-148 127,-148 127,-148 133,-148 139,-154 139,-160 139,-160 139,-174 139,-174 139,-180 133,-186 127,-186"/>
<text text-anchor="middle" x="90" y="-170.8" font-family="Arial" font-size="14.00">fixedHeader()</text>
<text text-anchor="middle" x="90" y="-155.8" font-family="Arial" font-size="14.00">写入固定头</text>
</g>
<!-- compare_sizes&#45;&gt;write_fixed -->
<g id="edge10" class="edge">
<title>compare_sizes&#45;&gt;write_fixed</title>
<path fill="none" stroke="black" d="M143.9,-242.2C132.89,-227.05 119.88,-209.13 109.39,-194.7"/>
<polygon fill="black" stroke="black" points="111.94,-192.25 103.23,-186.22 106.28,-196.37 111.94,-192.25"/>
<text text-anchor="middle" x="156" y="-207.8" font-family="Arial" font-size="14.00">固定最优</text>
</g>
<!-- write_dynamic -->
<g id="node11" class="node">
<title>write_dynamic</title>
<path fill="none" stroke="black" d="M266.5,-186C266.5,-186 169.5,-186 169.5,-186 163.5,-186 157.5,-180 157.5,-174 157.5,-174 157.5,-160 157.5,-160 157.5,-154 163.5,-148 169.5,-148 169.5,-148 266.5,-148 266.5,-148 272.5,-148 278.5,-154 278.5,-160 278.5,-160 278.5,-174 278.5,-174 278.5,-180 272.5,-186 266.5,-186"/>
<text text-anchor="middle" x="218" y="-170.8" font-family="Arial" font-size="14.00">dynamicHeader()</text>
<text text-anchor="middle" x="218" y="-155.8" font-family="Arial" font-size="14.00">写入动态头</text>
</g>
<!-- compare_sizes&#45;&gt;write_dynamic -->
<g id="edge11" class="edge">
<title>compare_sizes&#45;&gt;write_dynamic</title>
<path fill="none" stroke="black" d="M183.14,-240.46C190.09,-226.01 198.12,-209.33 204.72,-195.61"/>
<polygon fill="black" stroke="black" points="208.05,-196.75 209.23,-186.22 201.74,-193.72 208.05,-196.75"/>
<text text-anchor="middle" x="230" y="-207.8" font-family="Arial" font-size="14.00">动态最优</text>
</g>
<!-- end -->
<g id="node13" class="node">
<title>end</title>
<path fill="none" stroke="black" d="M296,-36C296,-36 266,-36 266,-36 260,-36 254,-30 254,-24 254,-24 254,-12 254,-12 254,-6 260,0 266,0 266,0 296,0 296,0 302,0 308,-6 308,-12 308,-12 308,-24 308,-24 308,-30 302,-36 296,-36"/>
<text text-anchor="middle" x="281" y="-14.3" font-family="Arial" font-size="14.00">结束</text>
</g>
<!-- write_stored&#45;&gt;end -->
<g id="edge12" class="edge">
<title>write_stored&#45;&gt;end</title>
<path fill="none" stroke="black" d="M337.15,-147.97C326,-122.35 305.48,-75.22 292.57,-45.58"/>
<polygon fill="black" stroke="black" points="295.71,-44.03 288.51,-36.26 289.3,-46.82 295.71,-44.03"/>
</g>
<!-- write_tokens -->
<g id="node12" class="node">
<title>write_tokens</title>
<path fill="none" stroke="black" d="M259.5,-111C259.5,-111 176.5,-111 176.5,-111 170.5,-111 164.5,-105 164.5,-99 164.5,-99 164.5,-85 164.5,-85 164.5,-79 170.5,-73 176.5,-73 176.5,-73 259.5,-73 259.5,-73 265.5,-73 271.5,-79 271.5,-85 271.5,-85 271.5,-99 271.5,-99 271.5,-105 265.5,-111 259.5,-111"/>
<text text-anchor="middle" x="218" y="-95.8" font-family="Arial" font-size="14.00">writeTokens()</text>
<text text-anchor="middle" x="218" y="-80.8" font-family="Arial" font-size="14.00">写入token数据</text>
</g>
<!-- write_fixed&#45;&gt;write_tokens -->
<g id="edge13" class="edge">
<title>write_fixed&#45;&gt;write_tokens</title>
<path fill="none" stroke="black" d="M121.64,-147.96C138.41,-138.39 159.2,-126.53 177.17,-116.28"/>
<polygon fill="black" stroke="black" points="179.33,-119.08 186.28,-111.09 175.86,-113 179.33,-119.08"/>
</g>
<!-- write_dynamic&#45;&gt;write_tokens -->
<g id="edge14" class="edge">
<title>write_dynamic&#45;&gt;write_tokens</title>
<path fill="none" stroke="black" d="M218,-147.96C218,-139.88 218,-130.18 218,-121.18"/>
<polygon fill="black" stroke="black" points="221.5,-121.09 218,-111.09 214.5,-121.09 221.5,-121.09"/>
</g>
<!-- write_tokens&#45;&gt;end -->
<g id="edge15" class="edge">
<title>write_tokens&#45;&gt;end</title>
<path fill="none" stroke="black" d="M233.9,-72.83C241.53,-64.11 250.8,-53.52 259.08,-44.05"/>
<polygon fill="black" stroke="black" points="261.81,-46.25 265.76,-36.42 256.54,-41.64 261.81,-46.25"/>
</g>
<!-- generate_codegen_sub -->
<g id="node14" class="node">
<title>generate_codegen_sub</title>
<path fill="none" stroke="black" d="M545,-858C545,-858 403,-858 403,-858 397,-858 391,-852 391,-846 391,-846 391,-834 391,-834 391,-828 397,-822 403,-822 403,-822 545,-822 545,-822 551,-822 557,-828 557,-834 557,-834 557,-846 557,-846 557,-852 551,-858 545,-858"/>
<text text-anchor="middle" x="474" y="-836.3" font-family="Arial" font-size="14.00">generateCodegen() 流程</text>
</g>
<!-- dynamic_header_sub -->
<g id="node15" class="node">
<title>dynamic_header_sub</title>
<path fill="none" stroke="black" d="M538.5,-784C538.5,-784 409.5,-784 409.5,-784 403.5,-784 397.5,-778 397.5,-772 397.5,-772 397.5,-760 397.5,-760 397.5,-754 403.5,-748 409.5,-748 409.5,-748 538.5,-748 538.5,-748 544.5,-748 550.5,-754 550.5,-760 550.5,-760 550.5,-772 550.5,-772 550.5,-778 544.5,-784 538.5,-784"/>
<text text-anchor="middle" x="474" y="-762.3" font-family="Arial" font-size="14.00">dynamicHeader() 流程</text>
</g>
<!-- generate_codegen_sub&#45;&gt;dynamic_header_sub -->
</g>
</svg>
