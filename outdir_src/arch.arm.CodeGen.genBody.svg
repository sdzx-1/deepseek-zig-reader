<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: flowchart Pages: 1 -->
<svg width="547pt" height="880pt"
 viewBox="0.00 0.00 546.50 880.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 876)">
<title>flowchart</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-876 542.5,-876 542.5,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<ellipse fill="lightblue" stroke="lightblue" cx="367.5" cy="-854" rx="66.09" ry="18"/>
<text text-anchor="middle" x="367.5" y="-850.3" font-family="Arial" font-size="14.00">Start genBody</text>
</g>
<!-- loop_start -->
<g id="node5" class="node">
<title>loop_start</title>
<polygon fill="black" stroke="black" points="438.5,-799 296.5,-799 296.5,-763 438.5,-763 438.5,-799"/>
<text text-anchor="middle" x="367.5" y="-777.3" font-family="Arial" font-size="14.00">For each inst in body</text>
</g>
<!-- start&#45;&gt;loop_start -->
<g id="edge1" class="edge">
<title>start&#45;&gt;loop_start</title>
<path fill="none" stroke="black" d="M367.5,-835.81C367.5,-827.79 367.5,-818.05 367.5,-809.07"/>
<polygon fill="black" stroke="black" points="371,-809.03 367.5,-799.03 364,-809.03 371,-809.03"/>
</g>
<!-- end -->
<g id="node2" class="node">
<title>end</title>
<ellipse fill="lightblue" stroke="lightblue" cx="309.5" cy="-18" rx="63.89" ry="18"/>
<text text-anchor="middle" x="309.5" y="-14.3" font-family="Arial" font-size="14.00">End genBody</text>
</g>
<!-- check_inst_unused -->
<g id="node3" class="node">
<title>check_inst_unused</title>
<polygon fill="orange" stroke="orange" points="221.5,-712 81.5,-674 221.5,-636 361.5,-674 221.5,-712"/>
<text text-anchor="middle" x="221.5" y="-677.8" font-family="Arial" font-size="14.00">Is inst unused</text>
<text text-anchor="middle" x="221.5" y="-662.8" font-family="Arial" font-size="14.00">and not mustLower?</text>
</g>
<!-- check_inst_unused&#45;&gt;loop_start -->
<g id="edge4" class="edge">
<title>check_inst_unused&#45;&gt;loop_start</title>
<path fill="none" stroke="black" d="M260.81,-701.5C273.85,-710.43 288.38,-720.53 301.5,-730 313.3,-738.52 326.08,-748.11 337.23,-756.6"/>
<polygon fill="black" stroke="black" points="335.32,-759.55 345.39,-762.85 339.57,-753.99 335.32,-759.55"/>
<text text-anchor="middle" x="335" y="-733.8" font-family="Times,serif" font-size="14.00">Yes</text>
<text text-anchor="middle" x="253.44" y="-735.21" font-family="Times,serif" font-size="14.00">Continue loop</text>
</g>
<!-- save_old_state -->
<g id="node6" class="node">
<title>save_old_state</title>
<polygon fill="black" stroke="black" points="255,-585 54,-585 54,-547 255,-547 255,-585"/>
<text text-anchor="middle" x="154.5" y="-569.8" font-family="Arial" font-size="14.00">Save old_air_bookkeeping</text>
<text text-anchor="middle" x="154.5" y="-554.8" font-family="Arial" font-size="14.00">Ensure process death capacity</text>
</g>
<!-- check_inst_unused&#45;&gt;save_old_state -->
<g id="edge3" class="edge">
<title>check_inst_unused&#45;&gt;save_old_state</title>
<path fill="none" stroke="black" d="M201.4,-641.2C191.82,-626.05 180.5,-608.13 171.37,-593.7"/>
<polygon fill="black" stroke="black" points="174.32,-591.8 166.02,-585.22 168.4,-595.54 174.32,-591.8"/>
<text text-anchor="middle" x="197" y="-606.8" font-family="Times,serif" font-size="14.00">No</text>
</g>
<!-- check_air_bookkeeping -->
<g id="node4" class="node">
<title>check_air_bookkeeping</title>
<polygon fill="orange" stroke="orange" points="309.5,-238 193.5,-200 309.5,-162 425.5,-200 309.5,-238"/>
<text text-anchor="middle" x="309.5" y="-203.8" font-family="Arial" font-size="14.00">air_bookkeeping</text>
<text text-anchor="middle" x="309.5" y="-188.8" font-family="Arial" font-size="14.00">correct?</text>
</g>
<!-- check_air_bookkeeping&#45;&gt;loop_start -->
<g id="edge12" class="edge">
<title>check_air_bookkeeping&#45;&gt;loop_start</title>
<path fill="none" stroke="black" d="M339.29,-228.44C362.03,-252.5 389.5,-289.69 389.5,-329 389.5,-675 389.5,-675 389.5,-675 389.5,-701.93 382.48,-731.93 376.38,-752.94"/>
<polygon fill="black" stroke="black" points="372.95,-752.18 373.4,-762.77 379.65,-754.21 372.95,-752.18"/>
<text text-anchor="middle" x="417" y="-488.3" font-family="Times,serif" font-size="14.00">Correct</text>
</g>
<!-- panic_check -->
<g id="node12" class="node">
<title>panic_check</title>
<polygon fill="black" stroke="black" points="414,-111 205,-111 205,-73 414,-73 414,-111"/>
<text text-anchor="middle" x="309.5" y="-95.8" font-family="Arial" font-size="14.00">Runtime safety:</text>
<text text-anchor="middle" x="309.5" y="-80.8" font-family="Arial" font-size="14.00">Check bookkeeping consistency</text>
</g>
<!-- check_air_bookkeeping&#45;&gt;panic_check -->
<g id="edge11" class="edge">
<title>check_air_bookkeeping&#45;&gt;panic_check</title>
<path fill="none" stroke="red" d="M309.5,-161.93C309.5,-148.63 309.5,-133.85 309.5,-121.41"/>
<polygon fill="red" stroke="red" points="313,-121.16 309.5,-111.16 306,-121.16 313,-121.16"/>
<text text-anchor="middle" x="342.5" y="-132.8" font-family="Times,serif" font-size="14.00">Incorrect</text>
</g>
<!-- loop_start&#45;&gt;end -->
<g id="edge14" class="edge">
<title>loop_start&#45;&gt;end</title>
<path fill="none" stroke="black" d="M403.05,-762.86C433.51,-745.41 472.5,-715.22 472.5,-675 472.5,-675 472.5,-675 472.5,-91 472.5,-48.38 425.29,-30.78 381.69,-23.61"/>
<polygon fill="black" stroke="black" points="381.99,-20.12 371.59,-22.12 380.97,-27.05 381.99,-20.12"/>
<text text-anchor="middle" x="505.5" y="-414.3" font-family="Times,serif" font-size="14.00">Loop end</text>
</g>
<!-- loop_start&#45;&gt;check_inst_unused -->
<g id="edge2" class="edge">
<title>loop_start&#45;&gt;check_inst_unused</title>
<path fill="none" stroke="black" d="M331.68,-762.93C321.64,-757.63 310.9,-751.47 301.5,-745 286.9,-734.94 271.99,-722.58 259.06,-711.05"/>
<polygon fill="black" stroke="black" points="261.05,-708.13 251.29,-704.01 256.35,-713.32 261.05,-708.13"/>
</g>
<!-- reset_reused_operands -->
<g id="node7" class="node">
<title>reset_reused_operands</title>
<polygon fill="black" stroke="black" points="188,-510 27,-510 27,-474 188,-474 188,-510"/>
<text text-anchor="middle" x="107.5" y="-488.3" font-family="Arial" font-size="14.00">Reset reused_operands</text>
</g>
<!-- save_old_state&#45;&gt;reset_reused_operands -->
<g id="edge5" class="edge">
<title>save_old_state&#45;&gt;reset_reused_operands</title>
<path fill="none" stroke="black" d="M142.64,-546.83C137.12,-538.37 130.45,-528.15 124.41,-518.9"/>
<polygon fill="black" stroke="black" points="127.27,-516.88 118.87,-510.42 121.41,-520.7 127.27,-516.88"/>
</g>
<!-- process_instruction -->
<g id="node8" class="node">
<title>process_instruction</title>
<polygon fill="black" stroke="black" points="191,-437 0,-437 0,-399 191,-399 191,-437"/>
<text text-anchor="middle" x="95.5" y="-421.8" font-family="Arial" font-size="14.00">Switch on air_tags</text>
<text text-anchor="middle" x="95.5" y="-406.8" font-family="Arial" font-size="14.00">Dispatch to handler functions</text>
</g>
<!-- reset_reused_operands&#45;&gt;process_instruction -->
<g id="edge6" class="edge">
<title>reset_reused_operands&#45;&gt;process_instruction</title>
<path fill="none" stroke="black" d="M104.66,-473.94C103.33,-465.99 101.72,-456.31 100.22,-447.31"/>
<polygon fill="black" stroke="black" points="103.63,-446.49 98.53,-437.2 96.72,-447.64 103.63,-446.49"/>
</g>
<!-- handle_fail -->
<g id="node9" class="node">
<title>handle_fail</title>
<polygon fill="black" stroke="black" points="102,-294 7,-294 7,-256 102,-256 102,-294"/>
<text text-anchor="middle" x="54.5" y="-278.8" font-family="Arial" font-size="14.00">Call self.fail()</text>
<text text-anchor="middle" x="54.5" y="-263.8" font-family="Arial" font-size="14.00">Return error</text>
</g>
<!-- process_instruction&#45;&gt;handle_fail -->
<g id="edge7" class="edge">
<title>process_instruction&#45;&gt;handle_fail</title>
<path fill="none" stroke="black" d="M49.8,-398.83C42.88,-394.07 36.67,-388.19 32.5,-381 18.66,-357.14 28.19,-325.75 38.69,-303.53"/>
<polygon fill="black" stroke="black" points="41.96,-304.82 43.34,-294.32 35.71,-301.66 41.96,-304.82"/>
<text text-anchor="middle" x="108" y="-369.8" font-family="Times,serif" font-size="14.00">Unimplemented case</text>
</g>
<!-- assert_locked_regs -->
<g id="node11" class="node">
<title>assert_locked_regs</title>
<polygon fill="black" stroke="black" points="361,-348 158,-348 158,-312 361,-312 361,-348"/>
<text text-anchor="middle" x="259.5" y="-326.3" font-family="Arial" font-size="14.00">Assert no locked registers exist</text>
</g>
<!-- process_instruction&#45;&gt;assert_locked_regs -->
<g id="edge8" class="edge">
<title>process_instruction&#45;&gt;assert_locked_regs</title>
<path fill="none" stroke="black" d="M149.77,-398.84C162.48,-393.75 175.75,-387.74 187.5,-381 196.83,-375.65 197.78,-372.3 206.5,-366 212.14,-361.92 218.23,-357.72 224.19,-353.71"/>
<polygon fill="black" stroke="black" points="226.39,-356.46 232.78,-348.01 222.51,-350.63 226.39,-356.46"/>
<text text-anchor="middle" x="237" y="-369.8" font-family="Times,serif" font-size="14.00">Handled</text>
</g>
<!-- handle_fail&#45;&gt;end -->
<g id="edge9" class="edge">
<title>handle_fail&#45;&gt;end</title>
<path fill="none" stroke="red" stroke-dasharray="5,2" d="M63.14,-255.81C82.17,-217.44 131.15,-127.28 195.5,-73 214.3,-57.14 238.54,-44.81 259.84,-35.95"/>
<polygon fill="red" stroke="red" points="261.4,-39.1 269.38,-32.13 258.8,-32.6 261.4,-39.1"/>
</g>
<!-- finish_air_bookkeeping -->
<g id="node10" class="node">
<title>finish_air_bookkeeping</title>
<polygon fill="black" stroke="black" points="361.5,-436 209.5,-436 209.5,-400 361.5,-400 361.5,-436"/>
<text text-anchor="middle" x="285.5" y="-414.3" font-family="Arial" font-size="14.00">Finish air bookkeeping</text>
</g>
<!-- finish_air_bookkeeping&#45;&gt;assert_locked_regs -->
<!-- assert_locked_regs&#45;&gt;check_air_bookkeeping -->
<g id="edge10" class="edge">
<title>assert_locked_regs&#45;&gt;check_air_bookkeeping</title>
<path fill="none" stroke="black" d="M266.24,-311.74C273.06,-294.28 283.86,-266.64 292.96,-243.33"/>
<polygon fill="black" stroke="black" points="296.24,-244.57 296.62,-233.99 289.72,-242.03 296.24,-244.57"/>
</g>
<!-- panic_check&#45;&gt;end -->
<g id="edge13" class="edge">
<title>panic_check&#45;&gt;end</title>
<path fill="none" stroke="red" stroke-dasharray="5,2" d="M309.5,-72.83C309.5,-64.89 309.5,-55.41 309.5,-46.63"/>
<polygon fill="red" stroke="red" points="313,-46.42 309.5,-36.42 306,-46.42 313,-46.42"/>
</g>
</g>
</svg>
